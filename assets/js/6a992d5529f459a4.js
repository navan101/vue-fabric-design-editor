(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=e(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.6
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function yf(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const ye={},bo=[],Nn=()=>{},$O=()=>!1,sh=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),_f=n=>n.startsWith("onUpdate:"),ai=Object.assign,wf=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},KO=Object.prototype.hasOwnProperty,ce=(n,t)=>KO.call(n,t),Rt=Array.isArray,xo=n=>ll(n)==="[object Map]",a1=n=>ll(n)==="[object Set]",qO=n=>ll(n)==="[object RegExp]",Lt=n=>typeof n=="function",je=n=>typeof n=="string",ir=n=>typeof n=="symbol",Te=n=>n!==null&&typeof n=="object",l1=n=>(Te(n)||Lt(n))&&Lt(n.then)&&Lt(n.catch),c1=Object.prototype.toString,ll=n=>c1.call(n),ZO=n=>ll(n).slice(8,-1),h1=n=>ll(n)==="[object Object]",bf=n=>je(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,Aa=yf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),rh=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},JO=/-(\w)/g,Pn=rh(n=>n.replace(JO,(t,e)=>e?e.toUpperCase():"")),QO=/\B([A-Z])/g,Rr=rh(n=>n.replace(QO,"-$1").toLowerCase()),oh=rh(n=>n.charAt(0).toUpperCase()+n.slice(1)),Ku=rh(n=>n?`on${oh(n)}`:""),qs=(n,t)=>!Object.is(n,t),Co=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},u1=(n,t,e,i=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:i,value:e})},Ed=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let nm;const d1=()=>nm||(nm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function qi(n){if(Rt(n)){const t={};for(let e=0;e<n.length;e++){const i=n[e],s=je(i)?nP(i):qi(i);if(s)for(const r in s)t[r]=s[r]}return t}else if(je(n)||Te(n))return n}const tP=/;(?![^(]*\))/g,eP=/:([^]+)/,iP=/\/\*[^]*?\*\//g;function nP(n){const t={};return n.replace(iP,"").split(tP).forEach(e=>{if(e){const i=e.split(eP);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function li(n){let t="";if(je(n))t=n;else if(Rt(n))for(let e=0;e<n.length;e++){const i=li(n[e]);i&&(t+=i+" ")}else if(Te(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}function f1(n){if(!n)return null;let{class:t,style:e}=n;return t&&!je(t)&&(n.class=li(t)),e&&(n.style=qi(e)),n}const sP="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",rP=yf(sP);function g1(n){return!!n||n===""}const p1=n=>!!(n&&n.__v_isRef===!0),ms=n=>je(n)?n:n==null?"":Rt(n)||Te(n)&&(n.toString===c1||!Lt(n.toString))?p1(n)?ms(n.value):JSON.stringify(n,m1,2):String(n),m1=(n,t)=>p1(t)?m1(n,t.value):xo(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[i,s],r)=>(e[qu(i,r)+" =>"]=s,e),{})}:a1(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>qu(e))}:ir(t)?qu(t):Te(t)&&!Rt(t)&&!h1(t)?String(t):t,qu=(n,t="")=>{var e;return ir(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.5.6
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Si;class v1{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Si,!t&&Si&&(this.index=(Si.scopes||(Si.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=Si;try{return Si=this,t()}finally{Si=e}}}on(){Si=this}off(){Si=this.parent}stop(t){if(this._active){let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0,this._active=!1}}}function y1(n){return new v1(n)}function xf(){return Si}function _1(n,t=!1){Si&&Si.cleanups.push(n)}let ve;const Zu=new WeakSet;class w1{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Si&&Si.active&&Si.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Zu.has(this)&&(Zu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||x1(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,sm(this),C1(this);const t=ve,e=Sn;ve=this,Sn=!0;try{return this.fn()}finally{S1(this),ve=t,Sn=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Tf(t);this.deps=this.depsTail=void 0,sm(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Zu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){kd(this)&&this.run()}get dirty(){return kd(this)}}let b1=0,Da;function x1(n){n.flags|=8,n.next=Da,Da=n}function Cf(){b1++}function Sf(){if(--b1>0)return;let n;for(;Da;){let t=Da;for(Da=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){n||(n=i)}t=e}}if(n)throw n}function C1(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function S1(n){let t,e=n.depsTail,i=e;for(;i;){const s=i.prevDep;i.version===-1?(i===e&&(e=s),Tf(i),oP(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}n.deps=t,n.depsTail=e}function kd(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(T1(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function T1(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===Na))return;n.globalVersion=Na;const t=n.dep;if(n.flags|=2,t.version>0&&!n.isSSR&&n.deps&&!kd(n)){n.flags&=-3;return}const e=ve,i=Sn;ve=n,Sn=!0;try{C1(n);const s=n.fn(n._value);(t.version===0||qs(s,n._value))&&(n._value=s,t.version++)}catch(s){throw t.version++,s}finally{ve=e,Sn=i,S1(n),n.flags&=-3}}function Tf(n){const{dep:t,prevSub:e,nextSub:i}=n;if(e&&(e.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=e,n.nextSub=void 0),t.subs===n&&(t.subs=e),!t.subs&&t.computed){t.computed.flags&=-5;for(let s=t.computed.deps;s;s=s.nextDep)Tf(s)}}function oP(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}let Sn=!0;const O1=[];function nr(){O1.push(Sn),Sn=!1}function sr(){const n=O1.pop();Sn=n===void 0?!0:n}function sm(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=ve;ve=void 0;try{t()}finally{ve=e}}}let Na=0;class aP{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class ah{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0}track(t){if(!ve||!Sn||ve===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==ve)e=this.activeLink=new aP(ve,this),ve.deps?(e.prevDep=ve.depsTail,ve.depsTail.nextDep=e,ve.depsTail=e):ve.deps=ve.depsTail=e,ve.flags&4&&P1(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const i=e.nextDep;i.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=i),e.prevDep=ve.depsTail,e.nextDep=void 0,ve.depsTail.nextDep=e,ve.depsTail=e,ve.deps===e&&(ve.deps=i)}return e}trigger(t){this.version++,Na++,this.notify(t)}notify(t){Cf();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Sf()}}}function P1(n){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)P1(i)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}const Rc=new WeakMap,Pr=Symbol(""),Ad=Symbol(""),Ua=Symbol("");function yi(n,t,e){if(Sn&&ve){let i=Rc.get(n);i||Rc.set(n,i=new Map);let s=i.get(e);s||i.set(e,s=new ah),s.track()}}function vs(n,t,e,i,s,r){const o=Rc.get(n);if(!o){Na++;return}const l=h=>{h&&h.trigger()};if(Cf(),t==="clear")o.forEach(l);else{const h=Rt(n),u=h&&bf(e);if(h&&e==="length"){const d=Number(i);o.forEach((g,p)=>{(p==="length"||p===Ua||!ir(p)&&p>=d)&&l(g)})}else switch(e!==void 0&&l(o.get(e)),u&&l(o.get(Ua)),t){case"add":h?u&&l(o.get("length")):(l(o.get(Pr)),xo(n)&&l(o.get(Ad)));break;case"delete":h||(l(o.get(Pr)),xo(n)&&l(o.get(Ad)));break;case"set":xo(n)&&l(o.get(Pr));break}}Sf()}function lP(n,t){var e;return(e=Rc.get(n))==null?void 0:e.get(t)}function ao(n){const t=re(n);return t===n?t:(yi(t,"iterate",Ua),dn(n)?t:t.map(gi))}function lh(n){return yi(n=re(n),"iterate",Ua),n}const cP={__proto__:null,[Symbol.iterator](){return Ju(this,Symbol.iterator,gi)},concat(...n){return ao(this).concat(...n.map(t=>Rt(t)?ao(t):t))},entries(){return Ju(this,"entries",n=>(n[1]=gi(n[1]),n))},every(n,t){return cs(this,"every",n,t,void 0,arguments)},filter(n,t){return cs(this,"filter",n,t,e=>e.map(gi),arguments)},find(n,t){return cs(this,"find",n,t,gi,arguments)},findIndex(n,t){return cs(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return cs(this,"findLast",n,t,gi,arguments)},findLastIndex(n,t){return cs(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return cs(this,"forEach",n,t,void 0,arguments)},includes(...n){return Qu(this,"includes",n)},indexOf(...n){return Qu(this,"indexOf",n)},join(n){return ao(this).join(n)},lastIndexOf(...n){return Qu(this,"lastIndexOf",n)},map(n,t){return cs(this,"map",n,t,void 0,arguments)},pop(){return ra(this,"pop")},push(...n){return ra(this,"push",n)},reduce(n,...t){return rm(this,"reduce",n,t)},reduceRight(n,...t){return rm(this,"reduceRight",n,t)},shift(){return ra(this,"shift")},some(n,t){return cs(this,"some",n,t,void 0,arguments)},splice(...n){return ra(this,"splice",n)},toReversed(){return ao(this).toReversed()},toSorted(n){return ao(this).toSorted(n)},toSpliced(...n){return ao(this).toSpliced(...n)},unshift(...n){return ra(this,"unshift",n)},values(){return Ju(this,"values",gi)}};function Ju(n,t,e){const i=lh(n),s=i[t]();return i!==n&&!dn(n)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.value&&(r.value=e(r.value)),r}),s}const hP=Array.prototype;function cs(n,t,e,i,s,r){const o=lh(n),l=o!==n&&!dn(n),h=o[t];if(h!==hP[t]){const g=h.apply(n,r);return l?gi(g):g}let u=e;o!==n&&(l?u=function(g,p){return e.call(this,gi(g),p,n)}:e.length>2&&(u=function(g,p){return e.call(this,g,p,n)}));const d=h.call(o,u,i);return l&&s?s(d):d}function rm(n,t,e,i){const s=lh(n);let r=e;return s!==n&&(dn(n)?e.length>3&&(r=function(o,l,h){return e.call(this,o,l,h,n)}):r=function(o,l,h){return e.call(this,o,gi(l),h,n)}),s[t](r,...i)}function Qu(n,t,e){const i=re(n);yi(i,"iterate",Ua);const s=i[t](...e);return(s===-1||s===!1)&&Ef(e[0])?(e[0]=re(e[0]),i[t](...e)):s}function ra(n,t,e=[]){nr(),Cf();const i=re(n)[t].apply(n,e);return Sf(),sr(),i}const uP=yf("__proto__,__v_isRef,__isVue"),M1=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(ir));function dP(n){ir(n)||(n=String(n));const t=re(this);return yi(t,"has",n),t.hasOwnProperty(n)}class E1{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,i){const s=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!s;if(e==="__v_isReadonly")return s;if(e==="__v_isShallow")return r;if(e==="__v_raw")return i===(s?r?TP:j1:r?D1:A1).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=Rt(t);if(!s){let h;if(o&&(h=cP[e]))return h;if(e==="hasOwnProperty")return dP}const l=Reflect.get(t,e,Se(t)?t:i);return(ir(e)?M1.has(e):uP(e))||(s||yi(t,"get",e),r)?l:Se(l)?o&&bf(e)?l:l.value:Te(l)?s?Mo(l):Kn(l):l}}class k1 extends E1{constructor(t=!1){super(!1,t)}set(t,e,i,s){let r=t[e];if(!this._isShallow){const h=Ar(r);if(!dn(i)&&!Ar(i)&&(r=re(r),i=re(i)),!Rt(t)&&Se(r)&&!Se(i))return h?!1:(r.value=i,!0)}const o=Rt(t)&&bf(e)?Number(e)<t.length:ce(t,e),l=Reflect.set(t,e,i,Se(t)?t:s);return t===re(s)&&(o?qs(i,r)&&vs(t,"set",e,i):vs(t,"add",e,i)),l}deleteProperty(t,e){const i=ce(t,e);t[e];const s=Reflect.deleteProperty(t,e);return s&&i&&vs(t,"delete",e,void 0),s}has(t,e){const i=Reflect.has(t,e);return(!ir(e)||!M1.has(e))&&yi(t,"has",e),i}ownKeys(t){return yi(t,"iterate",Rt(t)?"length":Pr),Reflect.ownKeys(t)}}class fP extends E1{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const gP=new k1,pP=new fP,mP=new k1(!0);const Of=n=>n,ch=n=>Reflect.getPrototypeOf(n);function cc(n,t,e=!1,i=!1){n=n.__v_raw;const s=re(n),r=re(t);e||(qs(t,r)&&yi(s,"get",t),yi(s,"get",r));const{has:o}=ch(s),l=i?Of:e?kf:gi;if(o.call(s,t))return l(n.get(t));if(o.call(s,r))return l(n.get(r));n!==s&&n.get(t)}function hc(n,t=!1){const e=this.__v_raw,i=re(e),s=re(n);return t||(qs(n,s)&&yi(i,"has",n),yi(i,"has",s)),n===s?e.has(n):e.has(n)||e.has(s)}function uc(n,t=!1){return n=n.__v_raw,!t&&yi(re(n),"iterate",Pr),Reflect.get(n,"size",n)}function om(n,t=!1){!t&&!dn(n)&&!Ar(n)&&(n=re(n));const e=re(this);return ch(e).has.call(e,n)||(e.add(n),vs(e,"add",n,n)),this}function am(n,t,e=!1){!e&&!dn(t)&&!Ar(t)&&(t=re(t));const i=re(this),{has:s,get:r}=ch(i);let o=s.call(i,n);o||(n=re(n),o=s.call(i,n));const l=r.call(i,n);return i.set(n,t),o?qs(t,l)&&vs(i,"set",n,t):vs(i,"add",n,t),this}function lm(n){const t=re(this),{has:e,get:i}=ch(t);let s=e.call(t,n);s||(n=re(n),s=e.call(t,n)),i&&i.call(t,n);const r=t.delete(n);return s&&vs(t,"delete",n,void 0),r}function cm(){const n=re(this),t=n.size!==0,e=n.clear();return t&&vs(n,"clear",void 0,void 0),e}function dc(n,t){return function(i,s){const r=this,o=r.__v_raw,l=re(o),h=t?Of:n?kf:gi;return!n&&yi(l,"iterate",Pr),o.forEach((u,d)=>i.call(s,h(u),h(d),r))}}function fc(n,t,e){return function(...i){const s=this.__v_raw,r=re(s),o=xo(r),l=n==="entries"||n===Symbol.iterator&&o,h=n==="keys"&&o,u=s[n](...i),d=e?Of:t?kf:gi;return!t&&yi(r,"iterate",h?Ad:Pr),{next(){const{value:g,done:p}=u.next();return p?{value:g,done:p}:{value:l?[d(g[0]),d(g[1])]:d(g),done:p}},[Symbol.iterator](){return this}}}}function Ls(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function vP(){const n={get(r){return cc(this,r)},get size(){return uc(this)},has:hc,add:om,set:am,delete:lm,clear:cm,forEach:dc(!1,!1)},t={get(r){return cc(this,r,!1,!0)},get size(){return uc(this)},has:hc,add(r){return om.call(this,r,!0)},set(r,o){return am.call(this,r,o,!0)},delete:lm,clear:cm,forEach:dc(!1,!0)},e={get(r){return cc(this,r,!0)},get size(){return uc(this,!0)},has(r){return hc.call(this,r,!0)},add:Ls("add"),set:Ls("set"),delete:Ls("delete"),clear:Ls("clear"),forEach:dc(!0,!1)},i={get(r){return cc(this,r,!0,!0)},get size(){return uc(this,!0)},has(r){return hc.call(this,r,!0)},add:Ls("add"),set:Ls("set"),delete:Ls("delete"),clear:Ls("clear"),forEach:dc(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(r=>{n[r]=fc(r,!1,!1),e[r]=fc(r,!0,!1),t[r]=fc(r,!1,!0),i[r]=fc(r,!0,!0)}),[n,e,t,i]}const[yP,_P,wP,bP]=vP();function Pf(n,t){const e=t?n?bP:wP:n?_P:yP;return(i,s,r)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(ce(e,s)&&s in i?e:i,s,r)}const xP={get:Pf(!1,!1)},CP={get:Pf(!1,!0)},SP={get:Pf(!0,!1)};const A1=new WeakMap,D1=new WeakMap,j1=new WeakMap,TP=new WeakMap;function OP(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function PP(n){return n.__v_skip||!Object.isExtensible(n)?0:OP(ZO(n))}function Kn(n){return Ar(n)?n:Mf(n,!1,gP,xP,A1)}function I1(n){return Mf(n,!1,mP,CP,D1)}function Mo(n){return Mf(n,!0,pP,SP,j1)}function Mf(n,t,e,i,s){if(!Te(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const r=s.get(n);if(r)return r;const o=PP(n);if(o===0)return n;const l=new Proxy(n,o===2?i:e);return s.set(n,l),l}function Gs(n){return Ar(n)?Gs(n.__v_raw):!!(n&&n.__v_isReactive)}function Ar(n){return!!(n&&n.__v_isReadonly)}function dn(n){return!!(n&&n.__v_isShallow)}function Ef(n){return n?!!n.__v_raw:!1}function re(n){const t=n&&n.__v_raw;return t?re(t):n}function hh(n){return!ce(n,"__v_skip")&&Object.isExtensible(n)&&u1(n,"__v_skip",!0),n}const gi=n=>Te(n)?Kn(n):n,kf=n=>Te(n)?Mo(n):n;function Se(n){return n?n.__v_isRef===!0:!1}function St(n){return R1(n,!1)}function ja(n){return R1(n,!0)}function R1(n,t){return Se(n)?n:new MP(n,t)}class MP{constructor(t,e){this.dep=new ah,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:re(t),this._value=e?t:gi(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,i=this.__v_isShallow||dn(t)||Ar(t);t=i?t:re(t),qs(t,e)&&(this._rawValue=t,this._value=i?t:gi(t),this.dep.trigger())}}function $s(n){return Se(n)?n.value:n}function uh(n){return Lt(n)?n():$s(n)}const EP={get:(n,t,e)=>t==="__v_raw"?n:$s(Reflect.get(n,t,e)),set:(n,t,e,i)=>{const s=n[t];return Se(s)&&!Se(e)?(s.value=e,!0):Reflect.set(n,t,e,i)}};function L1(n){return Gs(n)?n:new Proxy(n,EP)}class kP{constructor(t){this.__v_isRef=!0,this._value=void 0;const e=this.dep=new ah,{get:i,set:s}=t(e.track.bind(e),e.trigger.bind(e));this._get=i,this._set=s}get value(){return this._value=this._get()}set value(t){this._set(t)}}function AP(n){return new kP(n)}function DP(n){const t=Rt(n)?new Array(n.length):{};for(const e in n)t[e]=F1(n,e);return t}class jP{constructor(t,e,i){this._object=t,this._key=e,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return lP(re(this._object),this._key)}}class IP{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function RP(n,t,e){return Se(n)?n:Lt(n)?new IP(n):Te(n)&&arguments.length>1?F1(n,t,e):St(n)}function F1(n,t,e){const i=n[t];return Se(i)?i:new jP(n,t,e)}class LP{constructor(t,e,i){this.fn=t,this.setter=e,this._value=void 0,this.dep=new ah(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Na-1,this.effect=this,this.__v_isReadonly=!e,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&ve!==this)return x1(this),!0}get value(){const t=this.dep.track();return T1(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function FP(n,t,e=!1){let i,s;return Lt(n)?i=n:(i=n.get,s=n.set),new LP(i,s,e)}const gc={},Lc=new WeakMap;let br;function BP(n,t=!1,e=br){if(e){let i=Lc.get(e);i||Lc.set(e,i=[]),i.push(n)}}function zP(n,t,e=ye){const{immediate:i,deep:s,once:r,scheduler:o,augmentJob:l,call:h}=e,u=P=>s?P:dn(P)||s===!1||s===0?ds(P,1):ds(P);let d,g,p,m,y=!1,_=!1;if(Se(n)?(g=()=>n.value,y=dn(n)):Gs(n)?(g=()=>u(n),y=!0):Rt(n)?(_=!0,y=n.some(P=>Gs(P)||dn(P)),g=()=>n.map(P=>{if(Se(P))return P.value;if(Gs(P))return u(P);if(Lt(P))return h?h(P,2):P()})):Lt(n)?t?g=h?()=>h(n,2):n:g=()=>{if(p){nr();try{p()}finally{sr()}}const P=br;br=d;try{return h?h(n,3,[m]):n(m)}finally{br=P}}:g=Nn,t&&s){const P=g,F=s===!0?1/0:s;g=()=>ds(P(),F)}const b=xf(),x=()=>{d.stop(),b&&wf(b.effects,d)};if(r&&t){const P=t;t=(...F)=>{P(...F),x()}}let T=_?new Array(n.length).fill(gc):gc;const O=P=>{if(!(!(d.flags&1)||!d.dirty&&!P))if(t){const F=d.run();if(s||y||(_?F.some((X,R)=>qs(X,T[R])):qs(F,T))){p&&p();const X=br;br=d;try{const R=[F,T===gc?void 0:_&&T[0]===gc?[]:T,m];h?h(t,3,R):t(...R),T=F}finally{br=X}}}else d.run()};return l&&l(O),d=new w1(g),d.scheduler=o?()=>o(O,!1):O,m=P=>BP(P,!1,d),p=d.onStop=()=>{const P=Lc.get(d);if(P){if(h)h(P,4);else for(const F of P)F();Lc.delete(d)}},t?i?O(!0):T=d.run():o?o(O.bind(null,!0),!0):d.run(),x.pause=d.pause.bind(d),x.resume=d.resume.bind(d),x.stop=x,x}function ds(n,t=1/0,e){if(t<=0||!Te(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),t--,Se(n))ds(n.value,t,e);else if(Rt(n))for(let i=0;i<n.length;i++)ds(n[i],t,e);else if(a1(n)||xo(n))n.forEach(i=>{ds(i,t,e)});else if(h1(n)){for(const i in n)ds(n[i],t,e);for(const i of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,i)&&ds(n[i],t,e)}return n}/**
* @vue/runtime-core v3.5.6
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function cl(n,t,e,i){try{return i?n(...i):n()}catch(s){dh(s,t,e)}}function qn(n,t,e,i){if(Lt(n)){const s=cl(n,t,e,i);return s&&l1(s)&&s.catch(r=>{dh(r,t,e)}),s}if(Rt(n)){const s=[];for(let r=0;r<n.length;r++)s.push(qn(n[r],t,e,i));return s}}function dh(n,t,e,i=!0){const s=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||ye;if(t){let l=t.parent;const h=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${e}`;for(;l;){const d=l.ec;if(d){for(let g=0;g<d.length;g++)if(d[g](n,h,u)===!1)return}l=l.parent}if(r){nr(),cl(r,null,10,[n,h,u]),sr();return}}VP(n,e,s,i,o)}function VP(n,t,e,i=!0,s=!1){if(s)throw n;console.error(n)}let Ga=!1,Dd=!1;const Oi=[];let Ln=0;const So=[];let Hs=null,fo=0;const B1=Promise.resolve();let Af=null;function _s(n){const t=Af||B1;return n?t.then(this?n.bind(this):n):t}function HP(n){let t=Ga?Ln+1:0,e=Oi.length;for(;t<e;){const i=t+e>>>1,s=Oi[i],r=$a(s);r<n||r===n&&s.flags&2?t=i+1:e=i}return t}function Df(n){if(!(n.flags&1)){const t=$a(n),e=Oi[Oi.length-1];!e||!(n.flags&2)&&t>=$a(e)?Oi.push(n):Oi.splice(HP(t),0,n),n.flags|=1,z1()}}function z1(){!Ga&&!Dd&&(Dd=!0,Af=B1.then(H1))}function YP(n){Rt(n)?So.push(...n):Hs&&n.id===-1?Hs.splice(fo+1,0,n):n.flags&1||(So.push(n),n.flags|=1),z1()}function hm(n,t,e=Ga?Ln+1:0){for(;e<Oi.length;e++){const i=Oi[e];if(i&&i.flags&2){if(n&&i.id!==n.uid)continue;Oi.splice(e,1),e--,i.flags&4&&(i.flags&=-2),i(),i.flags&=-2}}}function V1(n){if(So.length){const t=[...new Set(So)].sort((e,i)=>$a(e)-$a(i));if(So.length=0,Hs){Hs.push(...t);return}for(Hs=t,fo=0;fo<Hs.length;fo++){const e=Hs[fo];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Hs=null,fo=0}}const $a=n=>n.id==null?n.flags&2?-1:1/0:n.id;function H1(n){Dd=!1,Ga=!0;try{for(Ln=0;Ln<Oi.length;Ln++){const t=Oi[Ln];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),cl(t,t.i,t.i?15:14),t.flags&=-2)}}finally{for(;Ln<Oi.length;Ln++){const t=Oi[Ln];t&&(t.flags&=-2)}Ln=0,Oi.length=0,V1(),Ga=!1,Af=null,(Oi.length||So.length)&&H1()}}let Ze=null,Y1=null;function Fc(n){const t=Ze;return Ze=n,Y1=n&&n.type.__scopeId||null,t}function Mt(n,t=Ze,e){if(!t||n._n)return n;const i=(...s)=>{i._d&&ym(-1);const r=Fc(t);let o;try{o=n(...s)}finally{Fc(r),i._d&&ym(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function jf(n,t){if(Ze===null)return n;const e=yh(Ze),i=n.dirs||(n.dirs=[]);for(let s=0;s<t.length;s++){let[r,o,l,h=ye]=t[s];r&&(Lt(r)&&(r={mounted:r,updated:r}),r.deep&&ds(o),i.push({dir:r,instance:e,value:o,oldValue:void 0,arg:l,modifiers:h}))}return n}function yr(n,t,e,i){const s=n.dirs,r=t&&t.dirs;for(let o=0;o<s.length;o++){const l=s[o];r&&(l.oldValue=r[o].value);let h=l.dir[i];h&&(nr(),qn(h,e,8,[n.el,l,n,t]),sr())}}const XP=Symbol("_vte"),WP=n=>n.__isTeleport;function fh(n,t){n.shapeFlag&6&&n.component?(n.transition=t,fh(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Qt(n,t){return Lt(n)?ai({name:n.name},t,{setup:n}):n}function X1(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function jd(n,t,e,i,s=!1){if(Rt(n)){n.forEach((y,_)=>jd(y,t&&(Rt(t)?t[_]:t),e,i,s));return}if(Mr(i)&&!s)return;const r=i.shapeFlag&4?yh(i.component):i.el,o=s?null:r,{i:l,r:h}=n,u=t&&t.r,d=l.refs===ye?l.refs={}:l.refs,g=l.setupState,p=re(g),m=g===ye?()=>!1:y=>ce(p,y);if(u!=null&&u!==h&&(je(u)?(d[u]=null,m(u)&&(g[u]=null)):Se(u)&&(u.value=null)),Lt(h))cl(h,l,12,[o,d]);else{const y=je(h),_=Se(h);if(y||_){const b=()=>{if(n.f){const x=y?m(h)?g[h]:d[h]:h.value;s?Rt(x)&&wf(x,r):Rt(x)?x.includes(r)||x.push(r):y?(d[h]=[r],m(h)&&(g[h]=d[h])):(h.value=[r],n.k&&(d[n.k]=h.value))}else y?(d[h]=o,m(h)&&(g[h]=o)):_&&(h.value=o,n.k&&(d[n.k]=o))};o?(b.id=-1,oi(b,e)):b()}}}const Mr=n=>!!n.type.__asyncLoader,W1=n=>n.type.__isKeepAlive,NP={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:t}){const e=Fo(),i=e.ctx;if(!i.renderer)return()=>{const T=t.default&&t.default();return T&&T.length===1?T[0]:T};const s=new Map,r=new Set;let o=null;const l=e.suspense,{renderer:{p:h,m:u,um:d,o:{createElement:g}}}=i,p=g("div");i.activate=(T,O,P,F,X)=>{const R=T.component;u(T,O,P,0,l),h(R.vnode,T,O,P,R,l,F,T.slotScopeIds,X),oi(()=>{R.isDeactivated=!1,R.a&&Co(R.a);const V=T.props&&T.props.onVnodeMounted;V&&cn(V,R.parent,T)},l)},i.deactivate=T=>{const O=T.component;zc(O.m),zc(O.a),u(T,p,null,1,l),oi(()=>{O.da&&Co(O.da);const P=T.props&&T.props.onVnodeUnmounted;P&&cn(P,O.parent,T),O.isDeactivated=!0},l)};function m(T){td(T),d(T,e,l,!0)}function y(T){s.forEach((O,P)=>{const F=zd(O.type);F&&!T(F)&&_(P)})}function _(T){const O=s.get(T);O&&(!o||!go(O,o))?m(O):o&&td(o),s.delete(T),r.delete(T)}We(()=>[n.include,n.exclude],([T,O])=>{T&&y(P=>ha(T,P)),O&&y(P=>!ha(O,P))},{flush:"post",deep:!0});let b=null;const x=()=>{b!=null&&(Vc(e.subTree.type)?oi(()=>{s.set(b,pc(e.subTree))},e.subTree.suspense):s.set(b,pc(e.subTree)))};return Di(x),K1(x),q1(()=>{s.forEach(T=>{const{subTree:O,suspense:P}=e,F=pc(O);if(T.type===F.type&&T.key===F.key){td(F);const X=F.component.da;X&&oi(X,P);return}m(T)})}),()=>{if(b=null,!t.default)return o=null;const T=t.default(),O=T[0];if(T.length>1)return o=null,T;if(!Za(O)||!(O.shapeFlag&4)&&!(O.shapeFlag&128))return o=null,O;let P=pc(O);if(P.type===ws)return o=null,P;const F=P.type,X=zd(Mr(P)?P.type.__asyncResolved||{}:F),{include:R,exclude:V,max:$}=n;if(R&&(!X||!ha(R,X))||V&&X&&ha(V,X))return P.shapeFlag&=-257,o=P,O;const st=P.key==null?F:P.key,ht=s.get(st);return P.el&&(P=Dr(P),O.shapeFlag&128&&(O.ssContent=P)),b=st,ht?(P.el=ht.el,P.component=ht.component,P.transition&&fh(P,P.transition),P.shapeFlag|=512,r.delete(st),r.add(st)):(r.add(st),$&&r.size>parseInt($,10)&&_(r.values().next().value)),P.shapeFlag|=256,o=P,Vc(O.type)?O:P}}},UP=NP;function ha(n,t){return Rt(n)?n.some(e=>ha(e,t)):je(n)?n.split(",").includes(t):qO(n)?(n.lastIndex=0,n.test(t)):!1}function N1(n,t){G1(n,"a",t)}function U1(n,t){G1(n,"da",t)}function G1(n,t,e=ti){const i=n.__wdc||(n.__wdc=()=>{let s=e;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(gh(t,i,e),e){let s=e.parent;for(;s&&s.parent;)W1(s.parent.vnode)&&GP(i,t,e,s),s=s.parent}}function GP(n,t,e,i){const s=gh(t,n,i,!0);Lr(()=>{wf(i[t],s)},e)}function td(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function pc(n){return n.shapeFlag&128?n.ssContent:n}function gh(n,t,e=ti,i=!1){if(e){const s=e[n]||(e[n]=[]),r=t.__weh||(t.__weh=(...o)=>{nr();const l=ul(e),h=qn(t,e,n,o);return l(),sr(),h});return i?s.unshift(r):s.push(r),r}}const Ts=n=>(t,e=ti)=>{(!vh||n==="sp")&&gh(n,(...i)=>t(...i),e)},$1=Ts("bm"),Di=Ts("m"),$P=Ts("bu"),K1=Ts("u"),q1=Ts("bum"),Lr=Ts("um"),KP=Ts("sp"),qP=Ts("rtg"),ZP=Ts("rtc");function JP(n,t=ti){gh("ec",n,t)}const Z1="components";function ft(n,t){return Q1(Z1,n,!0,t)||n}const J1=Symbol.for("v-ndc");function Ka(n){return je(n)?Q1(Z1,n,!1)||n:n||J1}function Q1(n,t,e=!0,i=!1){const s=Ze||ti;if(s){const r=s.type;{const l=zd(r,!1);if(l&&(l===t||l===Pn(t)||l===oh(Pn(t))))return r}const o=um(s[n]||r[n],t)||um(s.appContext[n],t);return!o&&i?r:o}}function um(n,t){return n&&(n[t]||n[Pn(t)]||n[oh(Pn(t))])}function Zs(n,t,e,i){let s;const r=e,o=Rt(n);if(o||je(n)){const l=o&&Gs(n);let h=!1;l&&(h=!dn(n),n=lh(n)),s=new Array(n.length);for(let u=0,d=n.length;u<d;u++)s[u]=t(h?gi(n[u]):n[u],u,void 0,r)}else if(typeof n=="number"){s=new Array(n);for(let l=0;l<n;l++)s[l]=t(l+1,l,void 0,r)}else if(Te(n))if(n[Symbol.iterator])s=Array.from(n,(l,h)=>t(l,h,void 0,r));else{const l=Object.keys(n);s=new Array(l.length);for(let h=0,u=l.length;h<u;h++){const d=l[h];s[h]=t(n[d],d,h,r)}}else s=[];return s}function Un(n,t,e={},i,s){if(Ze.ce||Ze.parent&&Mr(Ze.parent)&&Ze.parent.ce)return t!=="default"&&(e.name=t),U(),vi(Ce,null,[nt("slot",e,i)],64);let r=n[t];r&&r._c&&(r._d=!1),U();const o=r&&ty(r(e)),l=vi(Ce,{key:(e.key||o&&o.key||`_${t}`)+(!o&&i?"_fb":"")},o||[],o&&n._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),r&&r._c&&(r._d=!0),l}function ty(n){return n.some(t=>Za(t)?!(t.type===ws||t.type===Ce&&!ty(t.children)):!0)?n:null}const Id=n=>n?_y(n)?yh(n):Id(n.parent):null,Ia=ai(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Id(n.parent),$root:n=>Id(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>If(n),$forceUpdate:n=>n.f||(n.f=()=>{Df(n.update)}),$nextTick:n=>n.n||(n.n=_s.bind(n.proxy)),$watch:n=>b3.bind(n)}),ed=(n,t)=>n!==ye&&!n.__isScriptSetup&&ce(n,t),QP={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:i,data:s,props:r,accessCache:o,type:l,appContext:h}=n;let u;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return i[t];case 2:return s[t];case 4:return e[t];case 3:return r[t]}else{if(ed(i,t))return o[t]=1,i[t];if(s!==ye&&ce(s,t))return o[t]=2,s[t];if((u=n.propsOptions[0])&&ce(u,t))return o[t]=3,r[t];if(e!==ye&&ce(e,t))return o[t]=4,e[t];Rd&&(o[t]=0)}}const d=Ia[t];let g,p;if(d)return t==="$attrs"&&yi(n.attrs,"get",""),d(n);if((g=l.__cssModules)&&(g=g[t]))return g;if(e!==ye&&ce(e,t))return o[t]=4,e[t];if(p=h.config.globalProperties,ce(p,t))return p[t]},set({_:n},t,e){const{data:i,setupState:s,ctx:r}=n;return ed(s,t)?(s[t]=e,!0):i!==ye&&ce(i,t)?(i[t]=e,!0):ce(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(r[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:i,appContext:s,propsOptions:r}},o){let l;return!!e[o]||n!==ye&&ce(n,o)||ed(t,o)||(l=r[0])&&ce(l,o)||ce(i,o)||ce(Ia,o)||ce(s.config.globalProperties,o)},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:ce(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function dm(n){return Rt(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let Rd=!0;function t3(n){const t=If(n),e=n.proxy,i=n.ctx;Rd=!1,t.beforeCreate&&fm(t.beforeCreate,n,"bc");const{data:s,computed:r,methods:o,watch:l,provide:h,inject:u,created:d,beforeMount:g,mounted:p,beforeUpdate:m,updated:y,activated:_,deactivated:b,beforeDestroy:x,beforeUnmount:T,destroyed:O,unmounted:P,render:F,renderTracked:X,renderTriggered:R,errorCaptured:V,serverPrefetch:$,expose:st,inheritAttrs:ht,components:ut,directives:ct,filters:bt}=t;if(u&&e3(u,i,null),o)for(const _t in o){const gt=o[_t];Lt(gt)&&(i[_t]=gt.bind(e))}if(s){const _t=s.call(e,e);Te(_t)&&(n.data=Kn(_t))}if(Rd=!0,r)for(const _t in r){const gt=r[_t],Kt=Lt(gt)?gt.bind(e,e):Lt(gt.get)?gt.get.bind(e,e):Nn,zt=!Lt(gt)&&Lt(gt.set)?gt.set.bind(e):Nn,Ut=yt({get:Kt,set:zt});Object.defineProperty(i,_t,{enumerable:!0,configurable:!0,get:()=>Ut.value,set:ne=>Ut.value=ne})}if(l)for(const _t in l)ey(l[_t],i,e,_t);if(h){const _t=Lt(h)?h.call(e):h;Reflect.ownKeys(_t).forEach(gt=>{Tc(gt,_t[gt])})}d&&fm(d,n,"c");function dt(_t,gt){Rt(gt)?gt.forEach(Kt=>_t(Kt.bind(e))):gt&&_t(gt.bind(e))}if(dt($1,g),dt(Di,p),dt($P,m),dt(K1,y),dt(N1,_),dt(U1,b),dt(JP,V),dt(ZP,X),dt(qP,R),dt(q1,T),dt(Lr,P),dt(KP,$),Rt(st))if(st.length){const _t=n.exposed||(n.exposed={});st.forEach(gt=>{Object.defineProperty(_t,gt,{get:()=>e[gt],set:Kt=>e[gt]=Kt})})}else n.exposed||(n.exposed={});F&&n.render===Nn&&(n.render=F),ht!=null&&(n.inheritAttrs=ht),ut&&(n.components=ut),ct&&(n.directives=ct),$&&X1(n)}function e3(n,t,e=Nn){Rt(n)&&(n=Ld(n));for(const i in n){const s=n[i];let r;Te(s)?"default"in s?r=Gn(s.from||i,s.default,!0):r=Gn(s.from||i):r=Gn(s),Se(r)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[i]=r}}function fm(n,t,e){qn(Rt(n)?n.map(i=>i.bind(t.proxy)):n.bind(t.proxy),t,e)}function ey(n,t,e,i){let s=i.includes(".")?gy(e,i):()=>e[i];if(je(n)){const r=t[n];Lt(r)&&We(s,r)}else if(Lt(n))We(s,n.bind(e));else if(Te(n))if(Rt(n))n.forEach(r=>ey(r,t,e,i));else{const r=Lt(n.handler)?n.handler.bind(e):t[n.handler];Lt(r)&&We(s,r,n)}}function If(n){const t=n.type,{mixins:e,extends:i}=t,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,l=r.get(t);let h;return l?h=l:!s.length&&!e&&!i?h=t:(h={},s.length&&s.forEach(u=>Bc(h,u,o,!0)),Bc(h,t,o)),Te(t)&&r.set(t,h),h}function Bc(n,t,e,i=!1){const{mixins:s,extends:r}=t;r&&Bc(n,r,e,!0),s&&s.forEach(o=>Bc(n,o,e,!0));for(const o in t)if(!(i&&o==="expose")){const l=i3[o]||e&&e[o];n[o]=l?l(n[o],t[o]):t[o]}return n}const i3={data:gm,props:pm,emits:pm,methods:ua,computed:ua,beforeCreate:Ci,created:Ci,beforeMount:Ci,mounted:Ci,beforeUpdate:Ci,updated:Ci,beforeDestroy:Ci,beforeUnmount:Ci,destroyed:Ci,unmounted:Ci,activated:Ci,deactivated:Ci,errorCaptured:Ci,serverPrefetch:Ci,components:ua,directives:ua,watch:s3,provide:gm,inject:n3};function gm(n,t){return t?n?function(){return ai(Lt(n)?n.call(this,this):n,Lt(t)?t.call(this,this):t)}:t:n}function n3(n,t){return ua(Ld(n),Ld(t))}function Ld(n){if(Rt(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function Ci(n,t){return n?[...new Set([].concat(n,t))]:t}function ua(n,t){return n?ai(Object.create(null),n,t):t}function pm(n,t){return n?Rt(n)&&Rt(t)?[...new Set([...n,...t])]:ai(Object.create(null),dm(n),dm(t??{})):t}function s3(n,t){if(!n)return t;if(!t)return n;const e=ai(Object.create(null),n);for(const i in t)e[i]=Ci(n[i],t[i]);return e}function iy(){return{app:null,config:{isNativeTag:$O,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let r3=0;function o3(n,t){return function(i,s=null){Lt(i)||(i=ai({},i)),s!=null&&!Te(s)&&(s=null);const r=iy(),o=new WeakSet,l=[];let h=!1;const u=r.app={_uid:r3++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:z3,get config(){return r.config},set config(d){},use(d,...g){return o.has(d)||(d&&Lt(d.install)?(o.add(d),d.install(u,...g)):Lt(d)&&(o.add(d),d(u,...g))),u},mixin(d){return r.mixins.includes(d)||r.mixins.push(d),u},component(d,g){return g?(r.components[d]=g,u):r.components[d]},directive(d,g){return g?(r.directives[d]=g,u):r.directives[d]},mount(d,g,p){if(!h){const m=u._ceVNode||nt(i,s);return m.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),g&&t?t(m,d):n(m,d,p),h=!0,u._container=d,d.__vue_app__=u,yh(m.component)}},onUnmount(d){l.push(d)},unmount(){h&&(qn(l,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(d,g){return r.provides[d]=g,u},runWithContext(d){const g=Er;Er=u;try{return d()}finally{Er=g}}};return u}}let Er=null;function Tc(n,t){if(ti){let e=ti.provides;const i=ti.parent&&ti.parent.provides;i===e&&(e=ti.provides=Object.create(i)),e[n]=t}}function Gn(n,t,e=!1){const i=ti||Ze;if(i||Er){const s=Er?Er._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return e&&Lt(t)?t.call(i&&i.proxy):t}}function a3(){return!!(ti||Ze||Er)}const ny={},sy=()=>Object.create(ny),ry=n=>Object.getPrototypeOf(n)===ny;function l3(n,t,e,i=!1){const s={},r=sy();n.propsDefaults=Object.create(null),oy(n,t,s,r);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);e?n.props=i?s:I1(s):n.type.props?n.props=s:n.props=r,n.attrs=r}function c3(n,t,e,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=n,l=re(s),[h]=n.propsOptions;let u=!1;if((i||o>0)&&!(o&16)){if(o&8){const d=n.vnode.dynamicProps;for(let g=0;g<d.length;g++){let p=d[g];if(ph(n.emitsOptions,p))continue;const m=t[p];if(h)if(ce(r,p))m!==r[p]&&(r[p]=m,u=!0);else{const y=Pn(p);s[y]=Fd(h,l,y,m,n,!1)}else m!==r[p]&&(r[p]=m,u=!0)}}}else{oy(n,t,s,r)&&(u=!0);let d;for(const g in l)(!t||!ce(t,g)&&((d=Rr(g))===g||!ce(t,d)))&&(h?e&&(e[g]!==void 0||e[d]!==void 0)&&(s[g]=Fd(h,l,g,void 0,n,!0)):delete s[g]);if(r!==l)for(const g in r)(!t||!ce(t,g))&&(delete r[g],u=!0)}u&&vs(n.attrs,"set","")}function oy(n,t,e,i){const[s,r]=n.propsOptions;let o=!1,l;if(t)for(let h in t){if(Aa(h))continue;const u=t[h];let d;s&&ce(s,d=Pn(h))?!r||!r.includes(d)?e[d]=u:(l||(l={}))[d]=u:ph(n.emitsOptions,h)||(!(h in i)||u!==i[h])&&(i[h]=u,o=!0)}if(r){const h=re(e),u=l||ye;for(let d=0;d<r.length;d++){const g=r[d];e[g]=Fd(s,h,g,u[g],n,!ce(u,g))}}return o}function Fd(n,t,e,i,s,r){const o=n[e];if(o!=null){const l=ce(o,"default");if(l&&i===void 0){const h=o.default;if(o.type!==Function&&!o.skipFactory&&Lt(h)){const{propsDefaults:u}=s;if(e in u)i=u[e];else{const d=ul(s);i=u[e]=h.call(null,t),d()}}else i=h;s.ce&&s.ce._setProp(e,i)}o[0]&&(r&&!l?i=!1:o[1]&&(i===""||i===Rr(e))&&(i=!0))}return i}const h3=new WeakMap;function ay(n,t,e=!1){const i=e?h3:t.propsCache,s=i.get(n);if(s)return s;const r=n.props,o={},l=[];let h=!1;if(!Lt(n)){const d=g=>{h=!0;const[p,m]=ay(g,t,!0);ai(o,p),m&&l.push(...m)};!e&&t.mixins.length&&t.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!r&&!h)return Te(n)&&i.set(n,bo),bo;if(Rt(r))for(let d=0;d<r.length;d++){const g=Pn(r[d]);mm(g)&&(o[g]=ye)}else if(r)for(const d in r){const g=Pn(d);if(mm(g)){const p=r[d],m=o[g]=Rt(p)||Lt(p)?{type:p}:ai({},p),y=m.type;let _=!1,b=!0;if(Rt(y))for(let x=0;x<y.length;++x){const T=y[x],O=Lt(T)&&T.name;if(O==="Boolean"){_=!0;break}else O==="String"&&(b=!1)}else _=Lt(y)&&y.name==="Boolean";m[0]=_,m[1]=b,(_||ce(m,"default"))&&l.push(g)}}const u=[o,l];return Te(n)&&i.set(n,u),u}function mm(n){return n[0]!=="$"&&!Aa(n)}const ly=n=>n[0]==="_"||n==="$stable",Rf=n=>Rt(n)?n.map(Bn):[Bn(n)],u3=(n,t,e)=>{if(t._n)return t;const i=Mt((...s)=>Rf(t(...s)),e);return i._c=!1,i},cy=(n,t,e)=>{const i=n._ctx;for(const s in n){if(ly(s))continue;const r=n[s];if(Lt(r))t[s]=u3(s,r,i);else if(r!=null){const o=Rf(r);t[s]=()=>o}}},hy=(n,t)=>{const e=Rf(t);n.slots.default=()=>e},uy=(n,t,e)=>{for(const i in t)(e||i!=="_")&&(n[i]=t[i])},d3=(n,t,e)=>{const i=n.slots=sy();if(n.vnode.shapeFlag&32){const s=t._;s?(uy(i,t,e),e&&u1(i,"_",s,!0)):cy(t,i)}else t&&hy(n,t)},f3=(n,t,e)=>{const{vnode:i,slots:s}=n;let r=!0,o=ye;if(i.shapeFlag&32){const l=t._;l?e&&l===1?r=!1:uy(s,t,e):(r=!t.$stable,cy(t,s)),o=t}else t&&(hy(n,t),o={default:1});if(r)for(const l in s)!ly(l)&&o[l]==null&&delete s[l]},oi=M3;function g3(n){return p3(n)}function p3(n,t){const e=d1();e.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:l,createComment:h,setText:u,setElementText:d,parentNode:g,nextSibling:p,setScopeId:m=Nn,insertStaticContent:y}=n,_=(M,k,H,tt=null,W=null,it=null,mt=void 0,at=null,rt=!!k.dynamicChildren)=>{if(M===k)return;M&&!go(M,k)&&(tt=G(M),ne(M,W,it,!0),M=null),k.patchFlag===-2&&(rt=!1,k.dynamicChildren=null);const{type:et,ref:Pt,shapeFlag:wt}=k;switch(et){case mh:b(M,k,H,tt);break;case ws:x(M,k,H,tt);break;case Ra:M==null&&T(k,H,tt,mt);break;case Ce:ut(M,k,H,tt,W,it,mt,at,rt);break;default:wt&1?F(M,k,H,tt,W,it,mt,at,rt):wt&6?ct(M,k,H,tt,W,it,mt,at,rt):(wt&64||wt&128)&&et.process(M,k,H,tt,W,it,mt,at,rt,xt)}Pt!=null&&W&&jd(Pt,M&&M.ref,it,k||M,!k)},b=(M,k,H,tt)=>{if(M==null)i(k.el=l(k.children),H,tt);else{const W=k.el=M.el;k.children!==M.children&&u(W,k.children)}},x=(M,k,H,tt)=>{M==null?i(k.el=h(k.children||""),H,tt):k.el=M.el},T=(M,k,H,tt)=>{[M.el,M.anchor]=y(M.children,k,H,tt,M.el,M.anchor)},O=({el:M,anchor:k},H,tt)=>{let W;for(;M&&M!==k;)W=p(M),i(M,H,tt),M=W;i(k,H,tt)},P=({el:M,anchor:k})=>{let H;for(;M&&M!==k;)H=p(M),s(M),M=H;s(k)},F=(M,k,H,tt,W,it,mt,at,rt)=>{k.type==="svg"?mt="svg":k.type==="math"&&(mt="mathml"),M==null?X(k,H,tt,W,it,mt,at,rt):$(M,k,W,it,mt,at,rt)},X=(M,k,H,tt,W,it,mt,at)=>{let rt,et;const{props:Pt,shapeFlag:wt,transition:Tt,dirs:jt}=M;if(rt=M.el=o(M.type,it,Pt&&Pt.is,Pt),wt&8?d(rt,M.children):wt&16&&V(M.children,rt,null,tt,W,id(M,it),mt,at),jt&&yr(M,null,tt,"created"),R(rt,M,M.scopeId,mt,tt),Pt){for(const ee in Pt)ee!=="value"&&!Aa(ee)&&r(rt,ee,null,Pt[ee],it,tt);"value"in Pt&&r(rt,"value",null,Pt.value,it),(et=Pt.onVnodeBeforeMount)&&cn(et,tt,M)}jt&&yr(M,null,tt,"beforeMount");const Yt=m3(W,Tt);Yt&&Tt.beforeEnter(rt),i(rt,k,H),((et=Pt&&Pt.onVnodeMounted)||Yt||jt)&&oi(()=>{et&&cn(et,tt,M),Yt&&Tt.enter(rt),jt&&yr(M,null,tt,"mounted")},W)},R=(M,k,H,tt,W)=>{if(H&&m(M,H),tt)for(let it=0;it<tt.length;it++)m(M,tt[it]);if(W){let it=W.subTree;if(k===it||Vc(it.type)&&(it.ssContent===k||it.ssFallback===k)){const mt=W.vnode;R(M,mt,mt.scopeId,mt.slotScopeIds,W.parent)}}},V=(M,k,H,tt,W,it,mt,at,rt=0)=>{for(let et=rt;et<M.length;et++){const Pt=M[et]=at?Ys(M[et]):Bn(M[et]);_(null,Pt,k,H,tt,W,it,mt,at)}},$=(M,k,H,tt,W,it,mt)=>{const at=k.el=M.el;let{patchFlag:rt,dynamicChildren:et,dirs:Pt}=k;rt|=M.patchFlag&16;const wt=M.props||ye,Tt=k.props||ye;let jt;if(H&&_r(H,!1),(jt=Tt.onVnodeBeforeUpdate)&&cn(jt,H,k,M),Pt&&yr(k,M,H,"beforeUpdate"),H&&_r(H,!0),(wt.innerHTML&&Tt.innerHTML==null||wt.textContent&&Tt.textContent==null)&&d(at,""),et?st(M.dynamicChildren,et,at,H,tt,id(k,W),it):mt||gt(M,k,at,null,H,tt,id(k,W),it,!1),rt>0){if(rt&16)ht(at,wt,Tt,H,W);else if(rt&2&&wt.class!==Tt.class&&r(at,"class",null,Tt.class,W),rt&4&&r(at,"style",wt.style,Tt.style,W),rt&8){const Yt=k.dynamicProps;for(let ee=0;ee<Yt.length;ee++){const ie=Yt[ee],ei=wt[ie],Ye=Tt[ie];(Ye!==ei||ie==="value")&&r(at,ie,ei,Ye,W,H)}}rt&1&&M.children!==k.children&&d(at,k.children)}else!mt&&et==null&&ht(at,wt,Tt,H,W);((jt=Tt.onVnodeUpdated)||Pt)&&oi(()=>{jt&&cn(jt,H,k,M),Pt&&yr(k,M,H,"updated")},tt)},st=(M,k,H,tt,W,it,mt)=>{for(let at=0;at<k.length;at++){const rt=M[at],et=k[at],Pt=rt.el&&(rt.type===Ce||!go(rt,et)||rt.shapeFlag&70)?g(rt.el):H;_(rt,et,Pt,null,tt,W,it,mt,!0)}},ht=(M,k,H,tt,W)=>{if(k!==H){if(k!==ye)for(const it in k)!Aa(it)&&!(it in H)&&r(M,it,k[it],null,W,tt);for(const it in H){if(Aa(it))continue;const mt=H[it],at=k[it];mt!==at&&it!=="value"&&r(M,it,at,mt,W,tt)}"value"in H&&r(M,"value",k.value,H.value,W)}},ut=(M,k,H,tt,W,it,mt,at,rt)=>{const et=k.el=M?M.el:l(""),Pt=k.anchor=M?M.anchor:l("");let{patchFlag:wt,dynamicChildren:Tt,slotScopeIds:jt}=k;jt&&(at=at?at.concat(jt):jt),M==null?(i(et,H,tt),i(Pt,H,tt),V(k.children||[],H,Pt,W,it,mt,at,rt)):wt>0&&wt&64&&Tt&&M.dynamicChildren?(st(M.dynamicChildren,Tt,H,W,it,mt,at),(k.key!=null||W&&k===W.subTree)&&dy(M,k,!0)):gt(M,k,H,Pt,W,it,mt,at,rt)},ct=(M,k,H,tt,W,it,mt,at,rt)=>{k.slotScopeIds=at,M==null?k.shapeFlag&512?W.ctx.activate(k,H,tt,mt,rt):bt(k,H,tt,W,it,mt,rt):Et(M,k,rt)},bt=(M,k,H,tt,W,it,mt)=>{const at=M.component=j3(M,tt,W);if(W1(M)&&(at.ctx.renderer=xt),I3(at,!1,mt),at.asyncDep){if(W&&W.registerDep(at,dt,mt),!M.el){const rt=at.subTree=nt(ws);x(null,rt,k,H)}}else dt(at,M,k,H,W,it,mt)},Et=(M,k,H)=>{const tt=k.component=M.component;if(O3(M,k,H))if(tt.asyncDep&&!tt.asyncResolved){_t(tt,k,H);return}else tt.next=k,tt.update();else k.el=M.el,tt.vnode=k},dt=(M,k,H,tt,W,it,mt)=>{const at=()=>{if(M.isMounted){let{next:wt,bu:Tt,u:jt,parent:Yt,vnode:ee}=M;{const ii=fy(M);if(ii){wt&&(wt.el=ee.el,_t(M,wt,mt)),ii.asyncDep.then(()=>{M.isUnmounted||at()});return}}let ie=wt,ei;_r(M,!1),wt?(wt.el=ee.el,_t(M,wt,mt)):wt=ee,Tt&&Co(Tt),(ei=wt.props&&wt.props.onVnodeBeforeUpdate)&&cn(ei,Yt,wt,ee),_r(M,!0);const Ye=nd(M),_i=M.subTree;M.subTree=Ye,_(_i,Ye,g(_i.el),G(_i),M,W,it),wt.el=Ye.el,ie===null&&P3(M,Ye.el),jt&&oi(jt,W),(ei=wt.props&&wt.props.onVnodeUpdated)&&oi(()=>cn(ei,Yt,wt,ee),W)}else{let wt;const{el:Tt,props:jt}=k,{bm:Yt,m:ee,parent:ie,root:ei,type:Ye}=M,_i=Mr(k);if(_r(M,!1),Yt&&Co(Yt),!_i&&(wt=jt&&jt.onVnodeBeforeMount)&&cn(wt,ie,k),_r(M,!0),Tt&&fe){const ii=()=>{M.subTree=nd(M),fe(Tt,M.subTree,M,W,null)};_i&&Ye.__asyncHydrate?Ye.__asyncHydrate(Tt,M,ii):ii()}else{ei.ce&&ei.ce._injectChildStyle(Ye);const ii=M.subTree=nd(M);_(null,ii,H,tt,M,W,it),k.el=ii.el}if(ee&&oi(ee,W),!_i&&(wt=jt&&jt.onVnodeMounted)){const ii=k;oi(()=>cn(wt,ie,ii),W)}(k.shapeFlag&256||ie&&Mr(ie.vnode)&&ie.vnode.shapeFlag&256)&&M.a&&oi(M.a,W),M.isMounted=!0,k=H=tt=null}};M.scope.on();const rt=M.effect=new w1(at);M.scope.off();const et=M.update=rt.run.bind(rt),Pt=M.job=rt.runIfDirty.bind(rt);Pt.i=M,Pt.id=M.uid,rt.scheduler=()=>Df(Pt),_r(M,!0),et()},_t=(M,k,H)=>{k.component=M;const tt=M.vnode.props;M.vnode=k,M.next=null,c3(M,k.props,tt,H),f3(M,k.children,H),nr(),hm(M),sr()},gt=(M,k,H,tt,W,it,mt,at,rt=!1)=>{const et=M&&M.children,Pt=M?M.shapeFlag:0,wt=k.children,{patchFlag:Tt,shapeFlag:jt}=k;if(Tt>0){if(Tt&128){zt(et,wt,H,tt,W,it,mt,at,rt);return}else if(Tt&256){Kt(et,wt,H,tt,W,it,mt,at,rt);return}}jt&8?(Pt&16&&we(et,W,it),wt!==et&&d(H,wt)):Pt&16?jt&16?zt(et,wt,H,tt,W,it,mt,at,rt):we(et,W,it,!0):(Pt&8&&d(H,""),jt&16&&V(wt,H,tt,W,it,mt,at,rt))},Kt=(M,k,H,tt,W,it,mt,at,rt)=>{M=M||bo,k=k||bo;const et=M.length,Pt=k.length,wt=Math.min(et,Pt);let Tt;for(Tt=0;Tt<wt;Tt++){const jt=k[Tt]=rt?Ys(k[Tt]):Bn(k[Tt]);_(M[Tt],jt,H,null,W,it,mt,at,rt)}et>Pt?we(M,W,it,!0,!1,wt):V(k,H,tt,W,it,mt,at,rt,wt)},zt=(M,k,H,tt,W,it,mt,at,rt)=>{let et=0;const Pt=k.length;let wt=M.length-1,Tt=Pt-1;for(;et<=wt&&et<=Tt;){const jt=M[et],Yt=k[et]=rt?Ys(k[et]):Bn(k[et]);if(go(jt,Yt))_(jt,Yt,H,null,W,it,mt,at,rt);else break;et++}for(;et<=wt&&et<=Tt;){const jt=M[wt],Yt=k[Tt]=rt?Ys(k[Tt]):Bn(k[Tt]);if(go(jt,Yt))_(jt,Yt,H,null,W,it,mt,at,rt);else break;wt--,Tt--}if(et>wt){if(et<=Tt){const jt=Tt+1,Yt=jt<Pt?k[jt].el:tt;for(;et<=Tt;)_(null,k[et]=rt?Ys(k[et]):Bn(k[et]),H,Yt,W,it,mt,at,rt),et++}}else if(et>Tt)for(;et<=wt;)ne(M[et],W,it,!0),et++;else{const jt=et,Yt=et,ee=new Map;for(et=Yt;et<=Tt;et++){const ni=k[et]=rt?Ys(k[et]):Bn(k[et]);ni.key!=null&&ee.set(ni.key,et)}let ie,ei=0;const Ye=Tt-Yt+1;let _i=!1,ii=0;const Qn=new Array(Ye);for(et=0;et<Ye;et++)Qn[et]=0;for(et=jt;et<=wt;et++){const ni=M[et];if(ei>=Ye){ne(ni,W,it,!0);continue}let ji;if(ni.key!=null)ji=ee.get(ni.key);else for(ie=Yt;ie<=Tt;ie++)if(Qn[ie-Yt]===0&&go(ni,k[ie])){ji=ie;break}ji===void 0?ne(ni,W,it,!0):(Qn[ji-Yt]=et+1,ji>=ii?ii=ji:_i=!0,_(ni,k[ji],H,null,W,it,mt,at,rt),ei++)}const Ur=_i?v3(Qn):bo;for(ie=Ur.length-1,et=Ye-1;et>=0;et--){const ni=Yt+et,ji=k[ni],wl=ni+1<Pt?k[ni+1].el:tt;Qn[et]===0?_(null,ji,H,wl,W,it,mt,at,rt):_i&&(ie<0||et!==Ur[ie]?Ut(ji,H,wl,2):ie--)}}},Ut=(M,k,H,tt,W=null)=>{const{el:it,type:mt,transition:at,children:rt,shapeFlag:et}=M;if(et&6){Ut(M.component.subTree,k,H,tt);return}if(et&128){M.suspense.move(k,H,tt);return}if(et&64){mt.move(M,k,H,xt);return}if(mt===Ce){i(it,k,H);for(let wt=0;wt<rt.length;wt++)Ut(rt[wt],k,H,tt);i(M.anchor,k,H);return}if(mt===Ra){O(M,k,H);return}if(tt!==2&&et&1&&at)if(tt===0)at.beforeEnter(it),i(it,k,H),oi(()=>at.enter(it),W);else{const{leave:wt,delayLeave:Tt,afterLeave:jt}=at,Yt=()=>i(it,k,H),ee=()=>{wt(it,()=>{Yt(),jt&&jt()})};Tt?Tt(it,Yt,ee):ee()}else i(it,k,H)},ne=(M,k,H,tt=!1,W=!1)=>{const{type:it,props:mt,ref:at,children:rt,dynamicChildren:et,shapeFlag:Pt,patchFlag:wt,dirs:Tt,cacheIndex:jt}=M;if(wt===-2&&(W=!1),at!=null&&jd(at,null,H,M,!0),jt!=null&&(k.renderCache[jt]=void 0),Pt&256){k.ctx.deactivate(M);return}const Yt=Pt&1&&Tt,ee=!Mr(M);let ie;if(ee&&(ie=mt&&mt.onVnodeBeforeUnmount)&&cn(ie,k,M),Pt&6)oe(M.component,H,tt);else{if(Pt&128){M.suspense.unmount(H,tt);return}Yt&&yr(M,null,k,"beforeUnmount"),Pt&64?M.type.remove(M,k,H,xt,tt):et&&!et.hasOnce&&(it!==Ce||wt>0&&wt&64)?we(et,k,H,!1,!0):(it===Ce&&wt&384||!W&&Pt&16)&&we(rt,k,H),tt&&pe(M)}(ee&&(ie=mt&&mt.onVnodeUnmounted)||Yt)&&oi(()=>{ie&&cn(ie,k,M),Yt&&yr(M,null,k,"unmounted")},H)},pe=M=>{const{type:k,el:H,anchor:tt,transition:W}=M;if(k===Ce){qt(H,tt);return}if(k===Ra){P(M);return}const it=()=>{s(H),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(M.shapeFlag&1&&W&&!W.persisted){const{leave:mt,delayLeave:at}=W,rt=()=>mt(H,it);at?at(M.el,it,rt):rt()}else it()},qt=(M,k)=>{let H;for(;M!==k;)H=p(M),s(M),M=H;s(k)},oe=(M,k,H)=>{const{bum:tt,scope:W,job:it,subTree:mt,um:at,m:rt,a:et}=M;zc(rt),zc(et),tt&&Co(tt),W.stop(),it&&(it.flags|=8,ne(mt,M,k,H)),at&&oi(at,k),oi(()=>{M.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&M.asyncDep&&!M.asyncResolved&&M.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},we=(M,k,H,tt=!1,W=!1,it=0)=>{for(let mt=it;mt<M.length;mt++)ne(M[mt],k,H,tt,W)},G=M=>{if(M.shapeFlag&6)return G(M.component.subTree);if(M.shapeFlag&128)return M.suspense.next();const k=p(M.anchor||M.el),H=k&&k[XP];return H?p(H):k};let pt=!1;const ot=(M,k,H)=>{M==null?k._vnode&&ne(k._vnode,null,null,!0):_(k._vnode||null,M,k,null,null,null,H),k._vnode=M,pt||(pt=!0,hm(),V1(),pt=!1)},xt={p:_,um:ne,m:Ut,r:pe,mt:bt,mc:V,pc:gt,pbc:st,n:G,o:n};let te,fe;return{render:ot,hydrate:te,createApp:o3(ot,te)}}function id({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function _r({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function m3(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function dy(n,t,e=!1){const i=n.children,s=t.children;if(Rt(i)&&Rt(s))for(let r=0;r<i.length;r++){const o=i[r];let l=s[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[r]=Ys(s[r]),l.el=o.el),!e&&l.patchFlag!==-2&&dy(o,l)),l.type===mh&&(l.el=o.el)}}function v3(n){const t=n.slice(),e=[0];let i,s,r,o,l;const h=n.length;for(i=0;i<h;i++){const u=n[i];if(u!==0){if(s=e[e.length-1],n[s]<u){t[i]=s,e.push(i);continue}for(r=0,o=e.length-1;r<o;)l=r+o>>1,n[e[l]]<u?r=l+1:o=l;u<n[e[r]]&&(r>0&&(t[i]=e[r-1]),e[r]=i)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function fy(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:fy(t)}function zc(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}const y3=Symbol.for("v-scx"),_3=()=>Gn(y3);function w3(n,t){return Lf(n,null,{flush:"post"})}function We(n,t,e){return Lf(n,t,e)}function Lf(n,t,e=ye){const{immediate:i,deep:s,flush:r,once:o}=e,l=ai({},e);let h;if(vh)if(r==="sync"){const p=_3();h=p.__watcherHandles||(p.__watcherHandles=[])}else if(!t||i)l.once=!0;else{const p=()=>{};return p.stop=Nn,p.resume=Nn,p.pause=Nn,p}const u=ti;l.call=(p,m,y)=>qn(p,u,m,y);let d=!1;r==="post"?l.scheduler=p=>{oi(p,u&&u.suspense)}:r!=="sync"&&(d=!0,l.scheduler=(p,m)=>{m?p():Df(p)}),l.augmentJob=p=>{t&&(p.flags|=4),d&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const g=zP(n,t,l);return h&&h.push(g),g}function b3(n,t,e){const i=this.proxy,s=je(n)?n.includes(".")?gy(i,n):()=>i[n]:n.bind(i,i);let r;Lt(t)?r=t:(r=t.handler,e=t);const o=ul(this),l=Lf(s,r.bind(i),e);return o(),l}function gy(n,t){const e=t.split(".");return()=>{let i=n;for(let s=0;s<e.length&&i;s++)i=i[e[s]];return i}}const x3=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${Pn(t)}Modifiers`]||n[`${Rr(t)}Modifiers`];function C3(n,t,...e){if(n.isUnmounted)return;const i=n.vnode.props||ye;let s=e;const r=t.startsWith("update:"),o=r&&x3(i,t.slice(7));o&&(o.trim&&(s=e.map(d=>je(d)?d.trim():d)),o.number&&(s=e.map(Ed)));let l,h=i[l=Ku(t)]||i[l=Ku(Pn(t))];!h&&r&&(h=i[l=Ku(Rr(t))]),h&&qn(h,n,6,s);const u=i[l+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[l])return;n.emitted[l]=!0,qn(u,n,6,s)}}function py(n,t,e=!1){const i=t.emitsCache,s=i.get(n);if(s!==void 0)return s;const r=n.emits;let o={},l=!1;if(!Lt(n)){const h=u=>{const d=py(u,t,!0);d&&(l=!0,ai(o,d))};!e&&t.mixins.length&&t.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}return!r&&!l?(Te(n)&&i.set(n,null),null):(Rt(r)?r.forEach(h=>o[h]=null):ai(o,r),Te(n)&&i.set(n,o),o)}function ph(n,t){return!n||!sh(t)?!1:(t=t.slice(2).replace(/Once$/,""),ce(n,t[0].toLowerCase()+t.slice(1))||ce(n,Rr(t))||ce(n,t))}function nd(n){const{type:t,vnode:e,proxy:i,withProxy:s,propsOptions:[r],slots:o,attrs:l,emit:h,render:u,renderCache:d,props:g,data:p,setupState:m,ctx:y,inheritAttrs:_}=n,b=Fc(n);let x,T;try{if(e.shapeFlag&4){const P=s||i,F=P;x=Bn(u.call(F,P,d,g,m,p,y)),T=l}else{const P=t;x=Bn(P.length>1?P(g,{attrs:l,slots:o,emit:h}):P(g,null)),T=t.props?l:S3(l)}}catch(P){La.length=0,dh(P,n,1),x=nt(ws)}let O=x;if(T&&_!==!1){const P=Object.keys(T),{shapeFlag:F}=O;P.length&&F&7&&(r&&P.some(_f)&&(T=T3(T,r)),O=Dr(O,T,!1,!0))}return e.dirs&&(O=Dr(O,null,!1,!0),O.dirs=O.dirs?O.dirs.concat(e.dirs):e.dirs),e.transition&&fh(O,e.transition),x=O,Fc(b),x}const S3=n=>{let t;for(const e in n)(e==="class"||e==="style"||sh(e))&&((t||(t={}))[e]=n[e]);return t},T3=(n,t)=>{const e={};for(const i in n)(!_f(i)||!(i.slice(9)in t))&&(e[i]=n[i]);return e};function O3(n,t,e){const{props:i,children:s,component:r}=n,{props:o,children:l,patchFlag:h}=t,u=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&h>=0){if(h&1024)return!0;if(h&16)return i?vm(i,o,u):!!o;if(h&8){const d=t.dynamicProps;for(let g=0;g<d.length;g++){const p=d[g];if(o[p]!==i[p]&&!ph(u,p))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:i===o?!1:i?o?vm(i,o,u):!0:!!o;return!1}function vm(n,t,e){const i=Object.keys(t);if(i.length!==Object.keys(n).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(t[r]!==n[r]&&!ph(e,r))return!0}return!1}function P3({vnode:n,parent:t},e){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=t.vnode).el=e,t=t.parent;else break}}const Vc=n=>n.__isSuspense;function M3(n,t){t&&t.pendingBranch?Rt(n)?t.effects.push(...n):t.effects.push(n):YP(n)}const Ce=Symbol.for("v-fgt"),mh=Symbol.for("v-txt"),ws=Symbol.for("v-cmt"),Ra=Symbol.for("v-stc"),La=[];let Ki=null;function U(n=!1){La.push(Ki=n?null:[])}function E3(){La.pop(),Ki=La[La.length-1]||null}let qa=1;function ym(n){qa+=n,n<0&&Ki&&(Ki.hasOnce=!0)}function my(n){return n.dynamicChildren=qa>0?Ki||bo:null,E3(),qa>0&&Ki&&Ki.push(n),n}function Z(n,t,e,i,s,r){return my(z(n,t,e,i,s,r,!0))}function vi(n,t,e,i,s){return my(nt(n,t,e,i,s,!0))}function Za(n){return n?n.__v_isVNode===!0:!1}function go(n,t){return n.type===t.type&&n.key===t.key}const vy=({key:n})=>n??null,Oc=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?je(n)||Se(n)||Lt(n)?{i:Ze,r:n,k:t,f:!!e}:n:null);function z(n,t=null,e=null,i=0,s=null,r=n===Ce?0:1,o=!1,l=!1){const h={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&vy(t),ref:t&&Oc(t),scopeId:Y1,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:Ze};return l?(Bf(h,e),r&128&&n.normalize(h)):e&&(h.shapeFlag|=je(e)?8:16),qa>0&&!o&&Ki&&(h.patchFlag>0||r&6)&&h.patchFlag!==32&&Ki.push(h),h}const nt=k3;function k3(n,t=null,e=null,i=0,s=null,r=!1){if((!n||n===J1)&&(n=ws),Za(n)){const l=Dr(n,t,!0);return e&&Bf(l,e),qa>0&&!r&&Ki&&(l.shapeFlag&6?Ki[Ki.indexOf(n)]=l:Ki.push(l)),l.patchFlag=-2,l}if(B3(n)&&(n=n.__vccOpts),t){t=Ff(t);let{class:l,style:h}=t;l&&!je(l)&&(t.class=li(l)),Te(h)&&(Ef(h)&&!Rt(h)&&(h=ai({},h)),t.style=qi(h))}const o=je(n)?1:Vc(n)?128:WP(n)?64:Te(n)?4:Lt(n)?2:0;return z(n,t,e,i,s,o,r,!0)}function Ff(n){return n?Ef(n)||ry(n)?ai({},n):n:null}function Dr(n,t,e=!1,i=!1){const{props:s,ref:r,patchFlag:o,children:l,transition:h}=n,u=t?hl(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&vy(u),ref:t&&t.ref?e&&r?Rt(r)?r.concat(Oc(t)):[r,Oc(t)]:Oc(t):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==Ce?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:h,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Dr(n.ssContent),ssFallback:n.ssFallback&&Dr(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return h&&i&&fh(d,h.clone(d)),d}function yy(n=" ",t=0){return nt(mh,null,n,t)}function Eo(n,t){const e=nt(Ra,null,n);return e.staticCount=t,e}function Js(n="",t=!1){return t?(U(),vi(ws,null,n)):nt(ws,null,n)}function Bn(n){return n==null||typeof n=="boolean"?nt(ws):Rt(n)?nt(Ce,null,n.slice()):typeof n=="object"?Ys(n):nt(mh,null,String(n))}function Ys(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Dr(n)}function Bf(n,t){let e=0;const{shapeFlag:i}=n;if(t==null)t=null;else if(Rt(t))e=16;else if(typeof t=="object")if(i&65){const s=t.default;s&&(s._c&&(s._d=!1),Bf(n,s()),s._c&&(s._d=!0));return}else{e=32;const s=t._;!s&&!ry(t)?t._ctx=Ze:s===3&&Ze&&(Ze.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else Lt(t)?(t={default:t,_ctx:Ze},e=32):(t=String(t),i&64?(e=16,t=[yy(t)]):e=8);n.children=t,n.shapeFlag|=e}function hl(...n){const t={};for(let e=0;e<n.length;e++){const i=n[e];for(const s in i)if(s==="class")t.class!==i.class&&(t.class=li([t.class,i.class]));else if(s==="style")t.style=qi([t.style,i.style]);else if(sh(s)){const r=t[s],o=i[s];o&&r!==o&&!(Rt(r)&&r.includes(o))&&(t[s]=r?[].concat(r,o):o)}else s!==""&&(t[s]=i[s])}return t}function cn(n,t,e,i=null){qn(n,t,7,[e,i])}const A3=iy();let D3=0;function j3(n,t,e){const i=n.type,s=(t?t.appContext:n.appContext)||A3,r={uid:D3++,vnode:n,type:i,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new v1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:ay(i,s),emitsOptions:py(i,s),emit:null,emitted:null,propsDefaults:ye,inheritAttrs:i.inheritAttrs,ctx:ye,data:ye,props:ye,attrs:ye,slots:ye,refs:ye,setupState:ye,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=C3.bind(null,r),n.ce&&n.ce(r),r}let ti=null;const Fo=()=>ti||Ze;let Hc,Bd;{const n=d1(),t=(e,i)=>{let s;return(s=n[e])||(s=n[e]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};Hc=t("__VUE_INSTANCE_SETTERS__",e=>ti=e),Bd=t("__VUE_SSR_SETTERS__",e=>vh=e)}const ul=n=>{const t=ti;return Hc(n),n.scope.on(),()=>{n.scope.off(),Hc(t)}},_m=()=>{ti&&ti.scope.off(),Hc(null)};function _y(n){return n.vnode.shapeFlag&4}let vh=!1;function I3(n,t=!1,e=!1){t&&Bd(t);const{props:i,children:s}=n.vnode,r=_y(n);l3(n,i,r,t),d3(n,s,e);const o=r?R3(n,t):void 0;return t&&Bd(!1),o}function R3(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,QP);const{setup:i}=e;if(i){const s=n.setupContext=i.length>1?F3(n):null,r=ul(n);nr();const o=cl(i,n,0,[n.props,s]);if(sr(),r(),l1(o)){if(Mr(n)||X1(n),o.then(_m,_m),t)return o.then(l=>{wm(n,l,t)}).catch(l=>{dh(l,n,0)});n.asyncDep=o}else wm(n,o,t)}else wy(n,t)}function wm(n,t,e){Lt(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:Te(t)&&(n.setupState=L1(t)),wy(n,e)}let bm;function wy(n,t,e){const i=n.type;if(!n.render){if(!t&&bm&&!i.render){const s=i.template||If(n).template;if(s){const{isCustomElement:r,compilerOptions:o}=n.appContext.config,{delimiters:l,compilerOptions:h}=i,u=ai(ai({isCustomElement:r,delimiters:l},o),h);i.render=bm(s,u)}}n.render=i.render||Nn}{const s=ul(n);nr();try{t3(n)}finally{sr(),s()}}}const L3={get(n,t){return yi(n,"get",""),n[t]}};function F3(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,L3),slots:n.slots,emit:n.emit,expose:t}}function yh(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(L1(hh(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in Ia)return Ia[e](n)},has(t,e){return e in t||e in Ia}})):n.proxy}function zd(n,t=!0){return Lt(n)?n.displayName||n.name:n.name||t&&n.__name}function B3(n){return Lt(n)&&"__vccOpts"in n}const yt=(n,t)=>FP(n,t,vh);function by(n,t,e){const i=arguments.length;return i===2?Te(t)&&!Rt(t)?Za(t)?nt(n,null,[t]):nt(n,t):nt(n,null,t):(i>3?e=Array.prototype.slice.call(arguments,2):i===3&&Za(e)&&(e=[e]),nt(n,t,e))}const z3="3.5.6";/**
* @vue/runtime-dom v3.5.6
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Vd;const xm=typeof window<"u"&&window.trustedTypes;if(xm)try{Vd=xm.createPolicy("vue",{createHTML:n=>n})}catch{}const xy=Vd?n=>Vd.createHTML(n):n=>n,V3="http://www.w3.org/2000/svg",H3="http://www.w3.org/1998/Math/MathML",us=typeof document<"u"?document:null,Cm=us&&us.createElement("template"),Y3={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,i)=>{const s=t==="svg"?us.createElementNS(V3,n):t==="mathml"?us.createElementNS(H3,n):e?us.createElement(n,{is:e}):us.createElement(n);return n==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:n=>us.createTextNode(n),createComment:n=>us.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>us.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,i,s,r){const o=e?e.previousSibling:t.lastChild;if(s&&(s===r||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),e),!(s===r||!(s=s.nextSibling)););else{Cm.innerHTML=xy(i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n);const l=Cm.content;if(i==="svg"||i==="mathml"){const h=l.firstChild;for(;h.firstChild;)l.appendChild(h.firstChild);l.removeChild(h)}t.insertBefore(l,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},X3=Symbol("_vtc");function W3(n,t,e){const i=n[X3];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const Sm=Symbol("_vod"),N3=Symbol("_vsh"),Cy=Symbol("");function zf(n){const t=Fo();if(!t)return;const e=t.ut=(s=n(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(r=>Yc(r,s))},i=()=>{const s=n(t.proxy);t.ce?Yc(t.ce,s):Hd(t.subTree,s),e(s)};$1(()=>{w3(i)}),Di(()=>{const s=new MutationObserver(i);s.observe(t.subTree.el.parentNode,{childList:!0}),Lr(()=>s.disconnect())})}function Hd(n,t){if(n.shapeFlag&128){const e=n.suspense;n=e.activeBranch,e.pendingBranch&&!e.isHydrating&&e.effects.push(()=>{Hd(e.activeBranch,t)})}for(;n.component;)n=n.component.subTree;if(n.shapeFlag&1&&n.el)Yc(n.el,t);else if(n.type===Ce)n.children.forEach(e=>Hd(e,t));else if(n.type===Ra){let{el:e,anchor:i}=n;for(;e&&(Yc(e,t),e!==i);)e=e.nextSibling}}function Yc(n,t){if(n.nodeType===1){const e=n.style;let i="";for(const s in t)e.setProperty(`--${s}`,t[s]),i+=`--${s}: ${t[s]};`;e[Cy]=i}}const U3=/(^|;)\s*display\s*:/;function G3(n,t,e){const i=n.style,s=je(e);let r=!1;if(e&&!s){if(t)if(je(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();e[l]==null&&Pc(i,l,"")}else for(const o in t)e[o]==null&&Pc(i,o,"");for(const o in e)o==="display"&&(r=!0),Pc(i,o,e[o])}else if(s){if(t!==e){const o=i[Cy];o&&(e+=";"+o),i.cssText=e,r=U3.test(e)}}else t&&n.removeAttribute("style");Sm in n&&(n[Sm]=r?i.display:"",n[N3]&&(i.display="none"))}const Tm=/\s*!important$/;function Pc(n,t,e){if(Rt(e))e.forEach(i=>Pc(n,t,i));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const i=$3(n,t);Tm.test(e)?n.setProperty(Rr(i),e.replace(Tm,""),"important"):n[i]=e}}const Om=["Webkit","Moz","ms"],sd={};function $3(n,t){const e=sd[t];if(e)return e;let i=Pn(t);if(i!=="filter"&&i in n)return sd[t]=i;i=oh(i);for(let s=0;s<Om.length;s++){const r=Om[s]+i;if(r in n)return sd[t]=r}return t}const Pm="http://www.w3.org/1999/xlink";function Mm(n,t,e,i,s,r=rP(t)){i&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(Pm,t.slice(6,t.length)):n.setAttributeNS(Pm,t,e):e==null||r&&!g1(e)?n.removeAttribute(t):n.setAttribute(t,r?"":ir(e)?String(e):e)}function K3(n,t,e,i){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?xy(e):e);return}const s=n.tagName;if(t==="value"&&s!=="PROGRESS"&&!s.includes("-")){const o=s==="OPTION"?n.getAttribute("value")||"":n.value,l=e==null?n.type==="checkbox"?"on":"":String(e);(o!==l||!("_value"in n))&&(n.value=l),e==null&&n.removeAttribute(t),n._value=e;return}let r=!1;if(e===""||e==null){const o=typeof n[t];o==="boolean"?e=g1(e):e==null&&o==="string"?(e="",r=!0):o==="number"&&(e=0,r=!0)}try{n[t]=e}catch{}r&&n.removeAttribute(t)}function po(n,t,e,i){n.addEventListener(t,e,i)}function q3(n,t,e,i){n.removeEventListener(t,e,i)}const Em=Symbol("_vei");function Z3(n,t,e,i,s=null){const r=n[Em]||(n[Em]={}),o=r[t];if(i&&o)o.value=i;else{const[l,h]=J3(t);if(i){const u=r[t]=eM(i,s);po(n,l,u,h)}else o&&(q3(n,l,o,h),r[t]=void 0)}}const km=/(?:Once|Passive|Capture)$/;function J3(n){let t;if(km.test(n)){t={};let i;for(;i=n.match(km);)n=n.slice(0,n.length-i[0].length),t[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Rr(n.slice(2)),t]}let rd=0;const Q3=Promise.resolve(),tM=()=>rd||(Q3.then(()=>rd=0),rd=Date.now());function eM(n,t){const e=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=e.attached)return;qn(iM(i,e.value),t,5,[i])};return e.value=n,e.attached=tM(),e}function iM(n,t){if(Rt(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(i=>s=>!s._stopped&&i&&i(s))}else return t}const Am=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,nM=(n,t,e,i,s,r)=>{const o=s==="svg";t==="class"?W3(n,i,o):t==="style"?G3(n,e,i):sh(t)?_f(t)||Z3(n,t,e,i,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):sM(n,t,i,o))?(K3(n,t,i),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Mm(n,t,i,o,r,t!=="value")):(t==="true-value"?n._trueValue=i:t==="false-value"&&(n._falseValue=i),Mm(n,t,i,o))};function sM(n,t,e,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in n&&Am(t)&&Lt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Am(t)&&je(e)?!1:!!(t in n||n._isVueCE&&(/[A-Z]/.test(t)||!je(e)))}const Dm=n=>{const t=n.props["onUpdate:modelValue"]||!1;return Rt(t)?e=>Co(t,e):t};function rM(n){n.target.composing=!0}function jm(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const od=Symbol("_assign"),Vf={created(n,{modifiers:{lazy:t,trim:e,number:i}},s){n[od]=Dm(s);const r=i||s.props&&s.props.type==="number";po(n,t?"change":"input",o=>{if(o.target.composing)return;let l=n.value;e&&(l=l.trim()),r&&(l=Ed(l)),n[od](l)}),e&&po(n,"change",()=>{n.value=n.value.trim()}),t||(po(n,"compositionstart",rM),po(n,"compositionend",jm),po(n,"change",jm))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,oldValue:e,modifiers:{lazy:i,trim:s,number:r}},o){if(n[od]=Dm(o),n.composing)return;const l=(r||n.type==="number")&&!/^0\d/.test(n.value)?Ed(n.value):n.value,h=t??"";l!==h&&(document.activeElement===n&&n.type!=="range"&&(i&&t===e||s&&n.value.trim()===h)||(n.value=h))}},oM=["ctrl","shift","alt","meta"],aM={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>oM.some(e=>n[`${e}Key`]&&!t.includes(e))},Hf=(n,t)=>{const e=n._withMods||(n._withMods={}),i=t.join(".");return e[i]||(e[i]=(s,...r)=>{for(let o=0;o<t.length;o++){const l=aM[t[o]];if(l&&l(s,t))return}return n(s,...r)})},lM=ai({patchProp:nM},Y3);let Im;function cM(){return Im||(Im=g3(lM))}const hM=(...n)=>{const t=cM().createApp(...n),{mount:e}=t;return t.mount=i=>{const s=dM(i);if(!s)return;const r=t._component;!Lt(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=e(s,!1,uM(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},t};function uM(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function dM(n){return je(n)?document.querySelector(n):n}var fM=Object.defineProperty,gM=(n,t,e)=>t in n?fM(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,Nt=(n,t,e)=>gM(n,typeof t!="symbol"?t+"":t,e),pM=!1;/*!
 * pinia v2.2.2
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let Sy;const _h=n=>Sy=n,Ty=Symbol();function Yd(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Fa;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Fa||(Fa={}));const ad=typeof navigator=="object"?navigator:{userAgent:""};/Macintosh/.test(ad.userAgent)&&/AppleWebKit/.test(ad.userAgent)&&/Safari/.test(ad.userAgent);function mM(){const n=y1(!0),t=n.run(()=>St({}));let e=[],i=[];const s=hh({install(r){_h(s),s._a=r,r.provide(Ty,s),r.config.globalProperties.$pinia=s,i.forEach(o=>e.push(o)),i=[]},use(r){return!this._a&&!pM?i.push(r):e.push(r),this},_p:e,_a:null,_e:n,_s:new Map,state:t});return s}const Oy=()=>{};function Rm(n,t,e,i=Oy){n.push(t);const s=()=>{const r=n.indexOf(t);r>-1&&(n.splice(r,1),i())};return!e&&xf()&&_1(s),s}function lo(n,...t){n.slice().forEach(e=>{e(...t)})}const vM=n=>n(),Lm=Symbol(),ld=Symbol();function Xd(n,t){n instanceof Map&&t instanceof Map?t.forEach((e,i)=>n.set(i,e)):n instanceof Set&&t instanceof Set&&t.forEach(n.add,n);for(const e in t){if(!t.hasOwnProperty(e))continue;const i=t[e],s=n[e];Yd(s)&&Yd(i)&&n.hasOwnProperty(e)&&!Se(i)&&!Gs(i)?n[e]=Xd(s,i):n[e]=i}return n}const yM=Symbol();function _M(n){return!Yd(n)||!n.hasOwnProperty(yM)}const{assign:Vs}=Object;function wM(n){return!!(Se(n)&&n.effect)}function bM(n,t,e,i){const{state:s,actions:r,getters:o}=t,l=e.state.value[n];let h;function u(){!l&&(e.state.value[n]=s?s():{});const d=DP(e.state.value[n]);return Vs(d,r,Object.keys(o||{}).reduce((g,p)=>(g[p]=hh(yt(()=>{_h(e);const m=e._s.get(n);return o[p].call(m,m)})),g),{}))}return h=Py(n,u,t,e,i,!0),h}function Py(n,t,e={},i,s,r){let o;const l=Vs({actions:{}},e),h={deep:!0};let u,d,g=[],p=[],m;const y=i.state.value[n];!r&&!y&&(i.state.value[n]={}),St({});let _;function b(R){let V;u=d=!1,typeof R=="function"?(R(i.state.value[n]),V={type:Fa.patchFunction,storeId:n,events:m}):(Xd(i.state.value[n],R),V={type:Fa.patchObject,payload:R,storeId:n,events:m});const $=_=Symbol();_s().then(()=>{_===$&&(u=!0)}),d=!0,lo(g,V,i.state.value[n])}const x=r?function(){const{state:R}=e,V=R?R():{};this.$patch($=>{Vs($,V)})}:Oy;function T(){o.stop(),g=[],p=[],i._s.delete(n)}const O=(R,V="")=>{if(Lm in R)return R[ld]=V,R;const $=function(){_h(i);const st=Array.from(arguments),ht=[],ut=[];function ct(dt){ht.push(dt)}function bt(dt){ut.push(dt)}lo(p,{args:st,name:$[ld],store:F,after:ct,onError:bt});let Et;try{Et=R.apply(this&&this.$id===n?this:F,st)}catch(dt){throw lo(ut,dt),dt}return Et instanceof Promise?Et.then(dt=>(lo(ht,dt),dt)).catch(dt=>(lo(ut,dt),Promise.reject(dt))):(lo(ht,Et),Et)};return $[Lm]=!0,$[ld]=V,$},P={_p:i,$id:n,$onAction:Rm.bind(null,p),$patch:b,$reset:x,$subscribe(R,V={}){const $=Rm(g,R,V.detached,()=>st()),st=o.run(()=>We(()=>i.state.value[n],ht=>{(V.flush==="sync"?d:u)&&R({storeId:n,type:Fa.direct,events:m},ht)},Vs({},h,V)));return $},$dispose:T},F=Kn(P);i._s.set(n,F);const X=(i._a&&i._a.runWithContext||vM)(()=>i._e.run(()=>(o=y1()).run(()=>t({action:O}))));for(const R in X){const V=X[R];if(Se(V)&&!wM(V)||Gs(V))r||(y&&_M(V)&&(Se(V)?V.value=y[R]:Xd(V,y[R])),i.state.value[n][R]=V);else if(typeof V=="function"){const $=O(V,R);X[R]=$,l.actions[R]=V}}return Vs(F,X),Vs(re(F),X),Object.defineProperty(F,"$state",{get:()=>i.state.value[n],set:R=>{b(V=>{Vs(V,R)})}}),i._p.forEach(R=>{Vs(F,o.run(()=>R({store:F,app:i._a,pinia:i,options:l})))}),y&&r&&e.hydrate&&e.hydrate(F.$state,y),u=!0,d=!0,F}function xM(n,t,e){let i,s;const r=typeof t=="function";i=n,s=r?e:t;function o(l,h){const u=a3();return l=l||(u?Gn(Ty,null):null),l&&_h(l),l=Sy,l._s.has(i)||(r?Py(i,t,s,l):bM(i,s,l)),l._s.get(i)}return o.$id=i,o}const CM=mM();function A(n,t,e){return(t=function(i){var s=function(r,o){if(typeof r!="object"||!r)return r;var l=r[Symbol.toPrimitive];if(l!==void 0){var h=l.call(r,o||"default");if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(r)}(i,"string");return typeof s=="symbol"?s:s+""}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function Fm(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),e.push.apply(e,i)}return e}function I(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?Fm(Object(e),!0).forEach(function(i){A(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):Fm(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function ke(n,t){if(n==null)return{};var e,i,s=function(o,l){if(o==null)return{};var h={};for(var u in o)if({}.hasOwnProperty.call(o,u)){if(l.indexOf(u)>=0)continue;h[u]=o[u]}return h}(n,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);for(i=0;i<r.length;i++)e=r[i],t.indexOf(e)>=0||{}.propertyIsEnumerable.call(n,e)&&(s[e]=n[e])}return s}function rr(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}class Bm{constructor(){A(this,"browserShadowBlurConstant",1),A(this,"DPI",96),A(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),A(this,"perfLimitSizeTotal",2097152),A(this,"maxCacheSideLimit",4096),A(this,"minCacheSideLimit",256),A(this,"disableStyleCopyPaste",!1),A(this,"enableGLFiltering",!0),A(this,"textureSize",4096),A(this,"forceGLPutImageData",!1),A(this,"cachesBoundsOfCurve",!1),A(this,"fontPaths",{}),A(this,"NUM_FRACTION_DIGITS",4)}}const $t=new class extends Bm{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=I(I({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const t=new Bm,e=(n==null?void 0:n.reduce((i,s)=>(i[s]=t[s],i),{}))||t;this.configure(e)}},bs=function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return console[n]("fabric",...e)};class Hn extends Error{constructor(t,e){super("fabric: ".concat(t),e)}}class Yf extends Hn{constructor(t){super("".concat(t," 'options.signal' is in 'aborted' state"))}}class SM{}class TM extends SM{testPrecision(t,e){const i="precision ".concat(e,` float;
void main(){}`),s=t.createShader(t.FRAGMENT_SHADER);return!!s&&(t.shaderSource(s,i),t.compileShader(s),!!t.getShaderParameter(s,t.COMPILE_STATUS))}queryWebGL(t){const e=t.getContext("webgl");e&&(this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(i=>this.testPrecision(e,i)),e.getExtension("WEBGL_lose_context").loseContext(),bs("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(t){return!!this.maxTextureSize&&this.maxTextureSize>=t}}const OM={};let Wd;const PM=n=>{Wd=n},Mn=()=>Wd||(Wd={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new TM,dispose(){},copyPasteData:OM}),Fr=()=>Mn().document,Yn=()=>Mn().window,My=()=>{var n;return Math.max((n=$t.devicePixelRatio)!==null&&n!==void 0?n:Yn().devicePixelRatio,1)},To=new class{constructor(){A(this,"charWidthsCache",{}),A(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:t,fontStyle:e,fontWeight:i}=n;t=t.toLowerCase(),this.charWidthsCache[t]||(this.charWidthsCache[t]={});const s=this.charWidthsCache[t],r="".concat(e.toLowerCase(),"_").concat((i+"").toLowerCase());return s[r]||(s[r]={}),s[r]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:t}=$t,e=Math.sqrt(t*n);return[Math.floor(e),Math.floor(t/e)]}},Xc="6.4.2";function kr(){}const Qs=Math.PI/2,xs=2*Math.PI,Xf=Math.PI/180,ci=Object.freeze([1,0,0,1,0,0]),Wf=16,Fs=.4477152502,It="center",he="left",Vi="top",Nd="bottom",Ve="right",Mi="none",Nf=/\r?\n/,Ey="moving",wh="scaling",ky="rotating",Uf="rotate",Ay="skewing",Ja="resizing",Dy="modifyPoly",MM="modifyPath",Wc="changed",bh="scale",Ai="scaleX",Ji="scaleY",Bo="skewX",zo="skewY",He="fill",Ei="stroke",Nc="modified",co="json",cd="svg",lt=new class{constructor(){this[co]=new Map,this[cd]=new Map}has(n){return this[co].has(n)}getClass(n){const t=this[co].get(n);if(!t)throw new Hn("No class registered for ".concat(n));return t}setClass(n,t){t?this[co].set(t,n):(this[co].set(n.type,n),this[co].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[cd].get(n)}setSVGClass(n,t){this[cd].set(t??n.type.toLowerCase(),n)}},Qa=new class extends Array{remove(n){const t=this.indexOf(n);t>-1&&this.splice(t,1)}cancelAll(){const n=this.splice(0);return n.forEach(t=>t.abort()),n}cancelByCanvas(n){if(!n)return[];const t=this.filter(e=>{var i;return e.target===n||typeof e.target=="object"&&((i=e.target)===null||i===void 0?void 0:i.canvas)===n});return t.forEach(e=>e.abort()),t}cancelByTarget(n){if(!n)return[];const t=this.filter(e=>e.target===n);return t.forEach(e=>e.abort()),t}};class jy{constructor(){A(this,"__eventListeners",{})}on(t,e){if(this.__eventListeners||(this.__eventListeners={}),typeof t=="object")return Object.entries(t).forEach(i=>{let[s,r]=i;this.on(s,r)}),()=>this.off(t);if(e){const i=t;return this.__eventListeners[i]||(this.__eventListeners[i]=[]),this.__eventListeners[i].push(e),()=>this.off(i,e)}return()=>!1}once(t,e){if(typeof t=="object"){const i=[];return Object.entries(t).forEach(s=>{let[r,o]=s;i.push(this.once(r,o))}),()=>i.forEach(s=>s())}if(e){const i=this.on(t,function(){for(var s=arguments.length,r=new Array(s),o=0;o<s;o++)r[o]=arguments[o];e.call(this,...r),i()});return i}return()=>!1}_removeEventListener(t,e){if(this.__eventListeners[t])if(e){const i=this.__eventListeners[t],s=i.indexOf(e);s>-1&&i.splice(s,1)}else this.__eventListeners[t]=[]}off(t,e){if(this.__eventListeners)if(t===void 0)for(const i in this.__eventListeners)this._removeEventListener(i);else typeof t=="object"?Object.entries(t).forEach(i=>{let[s,r]=i;this._removeEventListener(s,r)}):this._removeEventListener(t,e)}fire(t,e){var i;if(!this.__eventListeners)return;const s=(i=this.__eventListeners[t])===null||i===void 0?void 0:i.concat();if(s)for(let r=0;r<s.length;r++)s[r].call(this,e||{})}}const xr=(n,t)=>{const e=n.indexOf(t);return e!==-1&&n.splice(e,1),n},En=n=>{if(n===0)return 1;switch(Math.abs(n)/Qs){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},kn=n=>{if(n===0)return 0;const t=n/Qs,e=Math.sign(n);switch(t){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(n)};class D{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof t=="object"?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}add(t){return new D(this.x+t.x,this.y+t.y)}addEquals(t){return this.x+=t.x,this.y+=t.y,this}scalarAdd(t){return new D(this.x+t,this.y+t)}scalarAddEquals(t){return this.x+=t,this.y+=t,this}subtract(t){return new D(this.x-t.x,this.y-t.y)}subtractEquals(t){return this.x-=t.x,this.y-=t.y,this}scalarSubtract(t){return new D(this.x-t,this.y-t)}scalarSubtractEquals(t){return this.x-=t,this.y-=t,this}multiply(t){return new D(this.x*t.x,this.y*t.y)}scalarMultiply(t){return new D(this.x*t,this.y*t)}scalarMultiplyEquals(t){return this.x*=t,this.y*=t,this}divide(t){return new D(this.x/t.x,this.y/t.y)}scalarDivide(t){return new D(this.x/t,this.y/t)}scalarDivideEquals(t){return this.x/=t,this.y/=t,this}eq(t){return this.x===t.x&&this.y===t.y}lt(t){return this.x<t.x&&this.y<t.y}lte(t){return this.x<=t.x&&this.y<=t.y}gt(t){return this.x>t.x&&this.y>t.y}gte(t){return this.x>=t.x&&this.y>=t.y}lerp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return e=Math.max(Math.min(1,e),0),new D(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)}distanceFrom(t){const e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)}midPointFrom(t){return this.lerp(t)}min(t){return new D(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new D(Math.max(this.x,t.x),Math.max(this.y,t.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPoint(t){return this.x=t.x,this.y=t.y,this}swap(t){const e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i}clone(){return new D(this.x,this.y)}rotate(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Gf;const i=kn(t),s=En(t),r=this.subtract(e);return new D(r.x*s-r.y*i,r.x*i+r.y*s).add(e)}transform(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new D(t[0]*this.x+t[2]*this.y+(e?0:t[4]),t[1]*this.x+t[3]*this.y+(e?0:t[5]))}}const Gf=new D(0,0),Mc=n=>!!n&&Array.isArray(n._objects);function or(n){class t extends n{constructor(){super(...arguments),A(this,"_objects",[])}_onObjectAdded(i){}_onObjectRemoved(i){}_onStackOrderChanged(i){}add(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];const o=this._objects.push(...s);return s.forEach(l=>this._onObjectAdded(l)),o}insertAt(i){for(var s=arguments.length,r=new Array(s>1?s-1:0),o=1;o<s;o++)r[o-1]=arguments[o];return this._objects.splice(i,0,...r),r.forEach(l=>this._onObjectAdded(l)),this._objects.length}remove(){const i=this._objects,s=[];for(var r=arguments.length,o=new Array(r),l=0;l<r;l++)o[l]=arguments[l];return o.forEach(h=>{const u=i.indexOf(h);u!==-1&&(i.splice(u,1),s.push(h),this._onObjectRemoved(h))}),s}forEachObject(i){this.getObjects().forEach((s,r,o)=>i(s,r,o))}getObjects(){for(var i=arguments.length,s=new Array(i),r=0;r<i;r++)s[r]=arguments[r];return s.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...s))}item(i){return this._objects[i]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(i,s){return!!this._objects.includes(i)||!!s&&this._objects.some(r=>r instanceof t&&r.contains(i,!0))}complexity(){return this._objects.reduce((i,s)=>i+=s.complexity?s.complexity():0,0)}sendObjectToBack(i){return!(!i||i===this._objects[0])&&(xr(this._objects,i),this._objects.unshift(i),this._onStackOrderChanged(i),!0)}bringObjectToFront(i){return!(!i||i===this._objects[this._objects.length-1])&&(xr(this._objects,i),this._objects.push(i),this._onStackOrderChanged(i),!0)}sendObjectBackwards(i,s){if(!i)return!1;const r=this._objects.indexOf(i);if(r!==0){const o=this.findNewLowerIndex(i,r,s);return xr(this._objects,i),this._objects.splice(o,0,i),this._onStackOrderChanged(i),!0}return!1}bringObjectForward(i,s){if(!i)return!1;const r=this._objects.indexOf(i);if(r!==this._objects.length-1){const o=this.findNewUpperIndex(i,r,s);return xr(this._objects,i),this._objects.splice(o,0,i),this._onStackOrderChanged(i),!0}return!1}moveObjectTo(i,s){return i!==this._objects[s]&&(xr(this._objects,i),this._objects.splice(s,0,i),this._onStackOrderChanged(i),!0)}findNewLowerIndex(i,s,r){let o;if(r){o=s;for(let l=s-1;l>=0;--l)if(i.isOverlapping(this._objects[l])){o=l;break}}else o=s-1;return o}findNewUpperIndex(i,s,r){let o;if(r){o=s;for(let l=s+1;l<this._objects.length;++l)if(i.isOverlapping(this._objects[l])){o=l;break}}else o=s+1;return o}collectObjects(i){let{left:s,top:r,width:o,height:l}=i,{includeIntersecting:h=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=[],d=new D(s,r),g=d.add(new D(o,l));for(let p=this._objects.length-1;p>=0;p--){const m=this._objects[p];m.selectable&&m.visible&&(h&&m.intersectsWithRect(d,g)||m.isContainedWithinRect(d,g)||h&&m.containsPoint(d)||h&&m.containsPoint(g))&&u.push(m)}return u}}return t}class Iy extends jy{_setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const e in t)this.set(e,t[e])}_setObject(t){for(const e in t)this._set(e,t[e])}set(t,e){return typeof t=="object"?this._setObject(t):this._set(t,e),this}_set(t,e){this[t]=e}toggle(t){const e=this.get(t);return typeof e=="boolean"&&this.set(t,!e),this}get(t){return this[t]}}function Ba(n){return Yn().requestAnimationFrame(n)}function Ry(n){return Yn().cancelAnimationFrame(n)}let EM=0;const tr=()=>EM++,Ee=()=>{const n=Fr().createElement("canvas");if(!n||n.getContext===void 0)throw new Hn("Failed to create `canvas` element");return n},Ly=()=>Fr().createElement("img"),$f=(n,t,e)=>n.toDataURL("image/".concat(t),e),Le=n=>n*Xf,er=n=>n/Xf,Fy=n=>n.every((t,e)=>t===ci[e]),fi=(n,t,e)=>new D(n).transform(t,e),zi=n=>{const t=1/(n[0]*n[3]-n[1]*n[2]),e=[t*n[3],-t*n[1],-t*n[2],t*n[0],0,0],{x:i,y:s}=new D(n[4],n[5]).transform(e,!0);return e[4]=-i,e[5]=-s,e},De=(n,t,e)=>[n[0]*t[0]+n[2]*t[1],n[1]*t[0]+n[3]*t[1],n[0]*t[2]+n[2]*t[3],n[1]*t[2]+n[3]*t[3],e?0:n[0]*t[4]+n[2]*t[5]+n[4],e?0:n[1]*t[4]+n[3]*t[5]+n[5]],xh=(n,t)=>n.reduceRight((e,i)=>i&&e?De(i,e,t):i||e,void 0)||ci.concat(),By=n=>{let[t,e]=n;return Math.atan2(e,t)},jr=n=>{const t=By(n),e=Math.pow(n[0],2)+Math.pow(n[1],2),i=Math.sqrt(e),s=(n[0]*n[3]-n[2]*n[1])/i,r=Math.atan2(n[0]*n[2]+n[1]*n[3],e);return{angle:er(t),scaleX:i,scaleY:s,skewX:er(r),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},Vo=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function Ho(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:t=0,y:e=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=Le(n),s=En(i),r=kn(i);return[s,r,-r,s,t?t-(s*t-r*e):0,e?e-(r*t+s*e):0]}const Ch=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},zy=n=>Math.tan(Le(n)),Kf=n=>[1,0,zy(n),1,0,0],qf=n=>[1,zy(n),0,1,0,0],dl=n=>{let{scaleX:t=1,scaleY:e=1,flipX:i=!1,flipY:s=!1,skewX:r=0,skewY:o=0}=n,l=Ch(i?-t:t,s?-e:e);return r&&(l=De(l,Kf(r),!0)),o&&(l=De(l,qf(o),!0)),l},Vy=n=>{const{translateX:t=0,translateY:e=0,angle:i=0}=n;let s=Vo(t,e);i&&(s=De(s,Ho({angle:i})));const r=dl(n);return Fy(r)||(s=De(s,r)),s},za=function(n){let{signal:t,crossOrigin:e=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(i,s){if(t&&t.aborted)return s(new Yf("loadImage"));const r=Ly();let o;t&&(o=function(h){r.src="",s(h)},t.addEventListener("abort",o,{once:!0}));const l=function(){r.onload=r.onerror=null,o&&(t==null||t.removeEventListener("abort",o)),i(r)};n?(r.onload=l,r.onerror=function(){o&&(t==null||t.removeEventListener("abort",o)),s(new Hn("Error loading ".concat(r.src)))},e&&(r.crossOrigin=e),r.src=n):l()})},ko=function(n){let{signal:t,reviver:e=kr}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((i,s)=>{const r=[];t&&t.addEventListener("abort",s,{once:!0}),Promise.all(n.map(o=>lt.getClass(o.type).fromObject(o,{signal:t}).then(l=>(e(o,l),r.push(l),l)))).then(i).catch(o=>{r.forEach(l=>{l.dispose&&l.dispose()}),s(o)}).finally(()=>{t&&t.removeEventListener("abort",s)})})},fl=function(n){let{signal:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((e,i)=>{const s=[];t&&t.addEventListener("abort",i,{once:!0});const r=Object.values(n).map(l=>l&&l.type&&lt.has(l.type)?ko([l],{signal:t}).then(h=>{let[u]=h;return s.push(u),u}):l),o=Object.keys(n);Promise.all(r).then(l=>l.reduce((h,u,d)=>(h[o[d]]=u,h),{})).then(e).catch(l=>{s.forEach(h=>{h.dispose&&h.dispose()}),i(l)}).finally(()=>{t&&t.removeEventListener("abort",i)})})},Br=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((t,e)=>(e in n&&(t[e]=n[e]),t),{})},Zf=(n,t)=>Object.keys(n).reduce((e,i)=>(t(n[i],i,n)&&(e[i]=n[i]),e),{}),zm={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},hd=(n,t,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+6*(t-n)*e:e<.5?t:e<2/3?n+(t-n)*(2/3-e)*6:n),Vm=(n,t,e,i)=>{n/=255,t/=255,e/=255;const s=Math.max(n,t,e),r=Math.min(n,t,e);let o,l;const h=(s+r)/2;if(s===r)o=l=0;else{const u=s-r;switch(l=h>.5?u/(2-s-r):u/(s+r),s){case n:o=(t-e)/u+(t<e?6:0);break;case t:o=(e-n)/u+2;break;case e:o=(n-t)/u+4}o/=6}return[Math.round(360*o),Math.round(100*l),Math.round(100*h),i]},Hm=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},mc=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),Ym=n=>{let[t,e,i,s=1]=n;const r=Math.round(.3*t+.59*e+.11*i);return[r,r,r,s]};class se{constructor(t){if(A(this,"isUnrecognised",!1),t)if(t instanceof se)this.setSource([...t._source]);else if(Array.isArray(t)){const[e,i,s,r=1]=t;this.setSource([e,i,s,r])}else this.setSource(this._tryParsingColor(t));else this.setSource([0,0,0,1])}_tryParsingColor(t){return t in zm&&(t=zm[t]),t==="transparent"?[255,255,255,0]:se.sourceFromHex(t)||se.sourceFromRgb(t)||se.sourceFromHsl(t)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(t){this._source=t}toRgb(){const[t,e,i]=this.getSource();return"rgb(".concat(t,",").concat(e,",").concat(i,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[t,e,i]=Vm(...this.getSource());return"hsl(".concat(t,",").concat(e,"%,").concat(i,"%)")}toHsla(){const[t,e,i,s]=Vm(...this.getSource());return"hsla(".concat(t,",").concat(e,"%,").concat(i,"%,").concat(s,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[t,e,i,s]=this.getSource();return"".concat(mc(t)).concat(mc(e)).concat(mc(i)).concat(mc(Math.round(255*s)))}getAlpha(){return this.getSource()[3]}setAlpha(t){return this._source[3]=t,this}toGrayscale(){return this.setSource(Ym(this.getSource())),this}toBlackWhite(t){const[e,,,i]=Ym(this.getSource()),s=e<(t||127)?0:255;return this.setSource([s,s,s,i]),this}overlayWith(t){t instanceof se||(t=new se(t));const e=this.getSource(),i=t.getSource(),[s,r,o]=e.map((l,h)=>Math.round(.5*l+.5*i[h]));return this.setSource([s,r,o,e[3]]),this}static fromRgb(t){return se.fromRgba(t)}static fromRgba(t){return new se(se.sourceFromRgb(t))}static sourceFromRgb(t){const e=t.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(e){const[i,s,r]=e.slice(1,4).map(o=>{const l=parseFloat(o);return o.endsWith("%")?Math.round(2.55*l):l});return[i,s,r,Hm(e[4])]}}static fromHsl(t){return se.fromHsla(t)}static fromHsla(t){return new se(se.sourceFromHsl(t))}static sourceFromHsl(t){const e=t.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!e)return;const i=(se.parseAngletoDegrees(e[1])%360+360)%360/360,s=parseFloat(e[2])/100,r=parseFloat(e[3])/100;let o,l,h;if(s===0)o=l=h=r;else{const u=r<=.5?r*(s+1):r+s-r*s,d=2*r-u;o=hd(d,u,i+1/3),l=hd(d,u,i),h=hd(d,u,i-1/3)}return[Math.round(255*o),Math.round(255*l),Math.round(255*h),Hm(e[4])]}static fromHex(t){return new se(se.sourceFromHex(t))}static sourceFromHex(t){if(t.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const e=t.slice(t.indexOf("#")+1);let i;i=e.length<=4?e.split("").map(h=>h+h):e.match(/.{2}/g);const[s,r,o,l=255]=i.map(h=>parseInt(h,16));return[s,r,o,l/255]}}static parseAngletoDegrees(t){const e=t.toLowerCase(),i=parseFloat(e);return e.includes("rad")?er(i):e.includes("turn")?360*i:i}}const Me=(n,t)=>parseFloat(Number(n).toFixed(t)),Ti=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wf;const e=/\D{0,2}$/.exec(n),i=parseFloat(n),s=$t.DPI;switch(e==null?void 0:e[0]){case"mm":return i*s/25.4;case"cm":return i*s/2.54;case"in":return i*s;case"pt":return i*s/72;case"pc":return i*s/72*12;case"em":return i*t;default:return i}},Jf=n=>{const[t,e]=n.trim().split(" "),[i,s]=(r=t)&&r!==Mi?[r.slice(1,4),r.slice(5,8)]:r===Mi?[r,r]:["Mid","Mid"];var r;return{meetOrSlice:e||"meet",alignX:i,alignY:s}},tl=n=>"matrix("+n.map(t=>Me(t,$t.NUM_FRACTION_DIGITS)).join(" ")+")",el=function(n,t){let e,i,s=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(t)if(t.toLive)e="url(#SVGID_".concat(t.id,")");else{const r=new se(t),o=r.getAlpha();e=r.toRgb(),o!==1&&(i=o.toString())}else e="none";return s?"".concat(n,": ").concat(e,"; ").concat(i?"".concat(n,"-opacity: ").concat(i,"; "):""):"".concat(n,'="').concat(e,'" ').concat(i?"".concat(n,'-opacity="').concat(i,'" '):"")},un=n=>!!n&&n.toLive!==void 0,Xm=n=>!!n&&typeof n.toObject=="function",Wm=n=>!!n&&n.offsetX!==void 0&&"source"in n,Hy=n=>!!n&&typeof n._renderText=="function",Cr=n=>!!n&&"multiSelectionStacking"in n;function Yy(n){const t=n&&bn(n);let e=0,i=0;if(!n||!t)return{left:e,top:i};let s=n;const r=t.documentElement,o=t.body||{scrollLeft:0,scrollTop:0};for(;s&&(s.parentNode||s.host)&&(s=s.parentNode||s.host,s===t?(e=o.scrollLeft||r.scrollLeft||0,i=o.scrollTop||r.scrollTop||0):(e+=s.scrollLeft||0,i+=s.scrollTop||0),s.nodeType!==1||s.style.position!=="fixed"););return{left:e,top:i}}const bn=n=>n.ownerDocument||null,Xy=n=>{var t;return((t=n.ownerDocument)===null||t===void 0?void 0:t.defaultView)||null},Wy=function(n,t,e){let{width:i,height:s}=e,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=i,n.height=s,r>1&&(n.setAttribute("width",(i*r).toString()),n.setAttribute("height",(s*r).toString()),t.scale(r,r))},Ud=(n,t)=>{let{width:e,height:i}=t;e&&(n.style.width=typeof e=="number"?"".concat(e,"px"):e),i&&(n.style.height=typeof i=="number"?"".concat(i,"px"):i)};function Nm(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=Mi,n}class Qf{constructor(t){A(this,"_originalCanvasStyle",void 0),A(this,"lower",void 0);const e=this.createLowerCanvas(t);this.lower={el:e,ctx:e.getContext("2d")}}createLowerCanvas(t){const e=(i=t)&&i.getContext!==void 0?t:t&&Fr().getElementById(t)||Ee();var i;if(e.hasAttribute("data-fabric"))throw new Hn("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=e.style.cssText,e.setAttribute("data-fabric","main"),e.classList.add("lower-canvas"),e}cleanupDOM(t){let{width:e,height:i}=t;const{el:s}=this.lower;s.classList.remove("lower-canvas"),s.removeAttribute("data-fabric"),s.setAttribute("width","".concat(e)),s.setAttribute("height","".concat(i)),s.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(t,e){const{el:i,ctx:s}=this.lower;Wy(i,s,t,e)}setCSSDimensions(t){Ud(this.lower.el,t)}calcOffset(){return function(t){var e;const i=t&&bn(t),s={left:0,top:0};if(!i)return s;const r=((e=Xy(t))===null||e===void 0?void 0:e.getComputedStyle(t,null))||{};s.left+=parseInt(r.borderLeftWidth,10)||0,s.top+=parseInt(r.borderTopWidth,10)||0,s.left+=parseInt(r.paddingLeft,10)||0,s.top+=parseInt(r.paddingTop,10)||0;let o={left:0,top:0};const l=i.documentElement;t.getBoundingClientRect!==void 0&&(o=t.getBoundingClientRect());const h=Yy(t);return{left:o.left+h.left-(l.clientLeft||0)+s.left,top:o.top+h.top-(l.clientTop||0)+s.top}}(this.lower.el)}dispose(){Mn().dispose(this.lower.el),delete this.lower}}const kM={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...ci]};class fn extends or(Iy){get lowerCanvasEl(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.el}get contextContainer(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.ctx}static getDefaults(){return fn.ownDefaults}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(e),this.initElements(t),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(t){this.elements=new Qf(t)}add(){const t=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}insertAt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];const r=super.insertAt(t,...i);return i.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),r}remove(){const t=super.remove(...arguments);return t.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}_onObjectAdded(t){t.canvas&&t.canvas!==this&&(bs("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t){t._set("canvas",void 0),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?My():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(t,e){return this.setDimensions({width:t},e)}setHeight(t,e){return this.setDimensions({height:t},e)}_setDimensionsImpl(t){let{cssOnly:e=!1,backstoreOnly:i=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e){const s=I({width:this.width,height:this.height},t);this.elements.setDimensions(s,this.getRetinaScaling()),this.hasLostContext=!0,this.width=s.width,this.height=s.height}i||this.elements.setCSSDimensions(t),this.calcOffset()}setDimensions(t,e){this._setDimensionsImpl(t,e),e&&e.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(t){this.viewportTransform=t,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(t,e){const i=t,s=[...this.viewportTransform],r=fi(t,zi(s));s[0]=e,s[3]=e;const o=fi(r,s);s[4]+=i.x-o.x,s[5]+=i.y-o.y,this.setViewportTransform(s)}setZoom(t){this.zoomToPoint(new D(0,0),t)}absolutePan(t){const e=[...this.viewportTransform];return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)}relativePan(t){return this.absolutePan(new D(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(t){t.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Ba(()=>this.renderAndReset()))}calcViewportBoundaries(){const t=this.width,e=this.height,i=zi(this.viewportTransform),s=fi({x:0,y:0},i),r=fi({x:t,y:e},i),o=s.min(r),l=s.max(r);return this.vptCoords={tl:o,tr:new D(l.x,o.y),bl:new D(o.x,l.y),br:l}}cancelRequestedRender(){this.nextRenderHandle&&(Ry(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(t){}renderCanvas(t,e){if(this.destroyed)return;const i=this.viewportTransform,s=this.clipPath;this.calcViewportBoundaries(),this.clearContext(t),t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.patternQuality="best",this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(t,e),t.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(t),s&&(s._set("canvas",this),s.shouldCache(),s._transformDone=!0,s.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t,s)),this._renderOverlay(t),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(t),this.fire("after:render",{ctx:t}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(t,e){const i=this.viewportTransform;t.save(),t.transform(...i),t.globalCompositeOperation="destination-in",e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}_renderObjects(t,e){for(let i=0,s=e.length;i<s;++i)e[i]&&e[i].render(t)}_renderBackgroundOrOverlay(t,e){const i=this["".concat(e,"Color")],s=this["".concat(e,"Image")],r=this.viewportTransform,o=this["".concat(e,"Vpt")];if(!i&&!s)return;const l=un(i);if(i){if(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=l?i.toLive(t):i,o&&t.transform(...r),l){t.transform(1,0,0,1,i.offsetX||0,i.offsetY||0);const h=i.gradientTransform||i.patternTransform;h&&t.transform(...h)}t.fill(),t.restore()}if(s){t.save();const{skipOffscreen:h}=this;this.skipOffscreen=o,o&&t.transform(...r),s.render(t),this.skipOffscreen=h,t.restore()}}_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")}_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new D(this.width/2,this.height/2)}centerObjectH(t){return this._centerObject(t,new D(this.getCenterPoint().x,t.getCenterPoint().y))}centerObjectV(t){return this._centerObject(t,new D(t.getCenterPoint().x,this.getCenterPoint().y))}centerObject(t){return this._centerObject(t,this.getCenterPoint())}viewportCenterObject(t){return this._centerObject(t,this.getVpCenter())}viewportCenterObjectH(t){return this._centerObject(t,new D(this.getVpCenter().x,t.getCenterPoint().y))}viewportCenterObjectV(t){return this._centerObject(t,new D(t.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return fi(this.getCenterPoint(),zi(this.viewportTransform))}_centerObject(t,e){t.setXY(e,It,It),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(t){return this.toDatalessObject(t)}toObject(t){return this._toObjectMethod("toObject",t)}toJSON(){return this.toObject()}toDatalessObject(t){return this._toObjectMethod("toDatalessObject",t)}_toObjectMethod(t,e){const i=this.clipPath,s=i&&!i.excludeFromExport?this._toObject(i,t,e):null;return I(I(I({version:Xc},Br(this,e)),{},{objects:this._objects.filter(r=>!r.excludeFromExport).map(r=>this._toObject(r,t,e))},this.__serializeBgOverlay(t,e)),s?{clipPath:s}:null)}_toObject(t,e,i){let s;this.includeDefaultValues||(s=t.includeDefaultValues,t.includeDefaultValues=!1);const r=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=!!s),r}__serializeBgOverlay(t,e){const i={},s=this.backgroundImage,r=this.overlayImage,o=this.backgroundColor,l=this.overlayColor;return un(o)?o.excludeFromExport||(i.background=o.toObject(e)):o&&(i.background=o),un(l)?l.excludeFromExport||(i.overlay=l.toObject(e)):l&&(i.overlay=l),s&&!s.excludeFromExport&&(i.backgroundImage=this._toObject(s,t,e)),r&&!r.excludeFromExport&&(i.overlayImage=this._toObject(r,t,e)),i}toSVG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;t.reviver=e;const i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this.clipPath&&i.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(i,"background"),this._setSVGBgOverlayImage(i,"backgroundImage",e),this._setSVGObjects(i,e),this.clipPath&&i.push(`</g>
`),this._setSVGBgOverlayColor(i,"overlay"),this._setSVGBgOverlayImage(i,"overlayImage",e),i.push("</svg>"),i.join("")}_setSVGPreamble(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(t,e){const i=e.width||"".concat(this.width),s=e.height||"".concat(this.height),r=$t.NUM_FRACTION_DIGITS,o=e.viewBox;let l;if(o)l='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const h=this.viewportTransform;l='viewBox="'.concat(Me(-h[4]/h[0],r)," ").concat(Me(-h[5]/h[3],r)," ").concat(Me(this.width/h[0],r)," ").concat(Me(this.height/h[3],r),'" ')}else l='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',i,'" ','height="',s,'" ',l,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Xc,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),`</defs>
`)}createSVGClipPathMarkup(t){const e=this.clipPath;return e?(e.clipPathId="CLIPPATH_".concat(tr()),'<clipPath id="'.concat(e.clipPathId,`" >
`).concat(e.toClipPathSVG(t.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(t=>{const e=this["".concat(t,"Color")];if(un(e)){const i=this["".concat(t,"Vpt")],s=this.viewportTransform,r={isType:()=>!1,width:this.width/(i?s[0]:1),height:this.height/(i?s[3]:1)};return e.toSVG(r,{additionalTransform:i?tl(s):""})}}).join("")}createSVGFontFacesMarkup(){const t=[],e={},i=$t.fontPaths;this._objects.forEach(function r(o){t.push(o),Mc(o)&&o._objects.forEach(r)}),t.forEach(r=>{if(!Hy(r))return;const{styles:o,fontFamily:l}=r;!e[l]&&i[l]&&(e[l]=!0,o&&Object.values(o).forEach(h=>{Object.values(h).forEach(u=>{let{fontFamily:d=""}=u;!e[d]&&i[d]&&(e[d]=!0)})}))});const s=Object.keys(e).map(r=>`		@font-face {
			font-family: '`.concat(r,`';
			src: url('`).concat(i[r],`');
		}
`)).join("");return s?`	<style type="text/css"><![CDATA[
`.concat(s,`]]></style>
`):""}_setSVGObjects(t,e){this.forEachObject(i=>{i.excludeFromExport||this._setSVGObject(t,i,e)})}_setSVGObject(t,e,i){t.push(e.toSVG(i))}_setSVGBgOverlayImage(t,e,i){const s=this[e];s&&!s.excludeFromExport&&s.toSVG&&t.push(s.toSVG(i))}_setSVGBgOverlayColor(t,e){const i=this["".concat(e,"Color")];if(i)if(un(i)){const s=i.repeat||"",r=this.width,o=this.height,l=this["".concat(e,"Vpt")]?tl(zi(this.viewportTransform)):"";t.push('<rect transform="'.concat(l," translate(").concat(r/2,",").concat(o/2,')" x="').concat(i.offsetX-r/2,'" y="').concat(i.offsetY-o/2,'" width="').concat(s!=="repeat-y"&&s!=="no-repeat"||!Wm(i)?r:i.source.width,'" height="').concat(s!=="repeat-x"&&s!=="no-repeat"||!Wm(i)?o:i.source.height,'" fill="url(#SVGID_').concat(i.id,`)"></rect>
`))}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',i,'"',`></rect>
`)}loadFromJSON(t,e){let{signal:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return Promise.reject(new Hn("`json` is undefined"));const s=typeof t=="string"?JSON.parse(t):t,{objects:r=[],backgroundImage:o,background:l,overlayImage:h,overlay:u,clipPath:d}=s,g=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([ko(r,{reviver:e,signal:i}),fl({backgroundImage:o,backgroundColor:l,overlayImage:h,overlayColor:u,clipPath:d},{signal:i})]).then(p=>{let[m,y]=p;return this.clear(),this.add(...m),this.set(s),this.set(y),this.renderOnAddRemove=g,this})}clone(t){const e=this.toObject(t);return this.cloneWithoutData().loadFromJSON(e)}cloneWithoutData(){const t=Ee();return t.width=this.width,t.height=this.height,new this.constructor(t)}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:i=1,multiplier:s=1,enableRetinaScaling:r=!1}=t,o=s*(r?this.getRetinaScaling():1);return $f(this.toCanvasElement(o,t),e,i)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:e,height:i,left:s,top:r,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=(e||this.width)*t,h=(i||this.height)*t,u=this.getZoom(),d=this.width,g=this.height,p=this.skipControlsDrawing,m=u*t,y=this.viewportTransform,_=[m,0,0,m,(y[4]-(s||0))*t,(y[5]-(r||0))*t],b=this.enableRetinaScaling,x=Ee(),T=o?this._objects.filter(O=>o(O)):this._objects;return x.width=l,x.height=h,this.enableRetinaScaling=!1,this.viewportTransform=_,this.width=l,this.height=h,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(x.getContext("2d"),T),this.viewportTransform=y,this.width=d,this.height=g,this.calcViewportBoundaries(),this.enableRetinaScaling=b,this.skipControlsDrawing=p,x}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),Qa.cancelByCanvas(this),this.disposed=!0,new Promise((t,e)=>{const i=()=>{this.destroy(),t(!0)};i.kill=e,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?t(!1):this.nextRenderHandle?this.__cleanupTask=i:i()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(t=>t.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}A(fn,"ownDefaults",kM);const AM=["touchstart","touchmove","touchend"],Ny=n=>{const t=Yy(n.target),e=function(i){const s=i.changedTouches;return s&&s[0]?s[0]:i}(n);return new D(e.clientX+t.left,e.clientY+t.top)},Uc=n=>AM.includes(n.type)||n.pointerType==="touch",Gd=n=>{n.preventDefault(),n.stopPropagation()},$n=n=>{let t=0,e=0,i=0,s=0;for(let r=0,o=n.length;r<o;r++){const{x:l,y:h}=n[r];(l>i||!r)&&(i=l),(l<t||!r)&&(t=l),(h>s||!r)&&(s=h),(h<e||!r)&&(e=h)}return{left:t,top:e,width:i-t,height:s-e}},DM=["translateX","translateY","scaleX","scaleY"],Uy=(n,t)=>Ao(n,De(t,n.calcOwnMatrix())),Ao=(n,t)=>{const e=jr(t),{translateX:i,translateY:s,scaleX:r,scaleY:o}=e,l=ke(e,DM),h=new D(i,s);n.flipX=!1,n.flipY=!1,Object.assign(n,l),n.set({scaleX:r,scaleY:o}),n.setPositionByOrigin(h,It,It)},Gy=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},tg=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),Sh=(n,t,e)=>{const i=n/2,s=t/2,r=[new D(-i,-s),new D(i,-s),new D(-i,s),new D(i,s)].map(l=>l.transform(e)),o=$n(r);return new D(o.width,o.height)},gl=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ci;return De(zi(arguments.length>1&&arguments[1]!==void 0?arguments[1]:ci),n)},ys=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ci,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ci;return n.transform(gl(t,e))},$y=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ci,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ci;return n.transform(gl(t,e),!0)},$d=(n,t,e)=>{const i=gl(t,e);return Ao(n,De(i,n.calcOwnMatrix())),i},eg=(n,t)=>{var e;const{transform:{target:i}}=t;(e=i.canvas)===null||e===void 0||e.fire("object:".concat(n),I(I({},t),{},{target:i})),i.fire(n,t)},jM={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Xe=n=>typeof n=="string"?jM[n]:n-.5,ig="not-allowed";function Ky(n){return Xe(n.originX)===Xe(It)&&Xe(n.originY)===Xe(It)}function Um(n){return .5-Xe(n)}const Tn=(n,t)=>n[t],ng=(n,t,e,i)=>({e:n,transform:t,pointer:new D(e,i)});function qy(n,t){const e=n.getTotalAngle()+er(Math.atan2(t.y,t.x))+360;return Math.round(e%360/45)}function Th(n,t,e,i,s){var r;let{target:o,corner:l}=n;const h=o.controls[l],u=((r=o.canvas)===null||r===void 0?void 0:r.getZoom())||1,d=o.padding/u,g=function(p,m,y,_){const b=p.getRelativeCenterPoint(),x=y!==void 0&&_!==void 0?p.translateToGivenOrigin(b,It,It,y,_):new D(p.left,p.top);return(p.angle?m.rotate(-Le(p.angle),b):m).subtract(x)}(o,new D(i,s),t,e);return g.x>=d&&(g.x-=d),g.x<=-d&&(g.x+=d),g.y>=d&&(g.y-=d),g.y<=d&&(g.y+=d),g.x-=h.offsetX,g.y-=h.offsetY,g}const Zy=(n,t,e,i)=>{const{target:s,offsetX:r,offsetY:o}=t,l=e-r,h=i-o,u=!Tn(s,"lockMovementX")&&s.left!==l,d=!Tn(s,"lockMovementY")&&s.top!==h;return u&&s.set(he,l),d&&s.set(Vi,h),(u||d)&&eg(Ey,ng(n,t,e,i)),u||d};class Jy{getSvgStyles(t){const e=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",s=this.strokeDashArray?this.strokeDashArray.join(" "):Mi,r=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",l=this.strokeLineJoin?this.strokeLineJoin:"miter",h=this.strokeMiterLimit?this.strokeMiterLimit:"4",u=this.opacity!==void 0?this.opacity:"1",d=this.visible?"":" visibility: hidden;",g=t?"":this.getSvgFilter(),p=el(He,this.fill);return[el(Ei,this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",s,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",r,"; ","stroke-linejoin: ",l,"; ","stroke-miterlimit: ",h,"; ",p,"fill-rule: ",e,"; ","opacity: ",u,";",g,d].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=t?this.calcTransformMatrix():this.calcOwnMatrix(),s='transform="'.concat(tl(i));return"".concat(s).concat(e,'" ')}_toSVG(t){return[""]}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:e,additionalTransform:i=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const s=[this.getSvgTransform(!0,i),this.getSvgCommons()].join(""),r=t.indexOf("COMMON_PARTS");return t[r]=s,e?e(t.join("")):t.join("")}_createBaseSVGMarkup(t){let{noStyle:e,reviver:i,withShadow:s,additionalTransform:r}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=e?"":'style="'.concat(this.getSvgStyles(),'" '),l=s?'style="'.concat(this.getSvgFilter(),'" '):"",h=this.clipPath,u=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",d=h&&h.absolutePositioned,g=this.stroke,p=this.fill,m=this.shadow,y=[],_=t.indexOf("COMMON_PARTS");let b;h&&(h.clipPathId="CLIPPATH_".concat(tr()),b='<clipPath id="'.concat(h.clipPathId,`" >
`).concat(h.toClipPathSVG(i),`</clipPath>
`)),d&&y.push("<g ",l,this.getSvgCommons(),` >
`),y.push("<g ",this.getSvgTransform(!1),d?"":l+this.getSvgCommons(),` >
`);const x=[o,u,e?"":this.addPaintOrder()," ",r?'transform="'.concat(r,'" '):""].join("");return t[_]=x,un(p)&&y.push(p.toSVG(this)),un(g)&&y.push(g.toSVG(this)),m&&y.push(m.toSVG(this)),h&&y.push(b),y.push(t.join("")),y.push(`</g>
`),d&&y.push(`</g>
`),i?i(y.join("")):y.join("")}addPaintOrder(){return this.paintFirst!==He?' paint-order="'.concat(this.paintFirst,'" '):""}}function Oh(n){return new RegExp("^("+n.join("|")+")\\b","i")}var Gm;const xn=String.raw(Gm||(Gm=rr(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),Kd="http://www.w3.org/2000/svg",IM=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+xn+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+xn+"))?\\s+(.*)"),RM={cx:he,x:he,r:"radius",cy:Vi,y:Vi,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},ud="font-size",dd="clip-path",LM=Oh(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),FM=Oh(["symbol","image","marker","pattern","view","svg"]),$m=Oh(["symbol","g","a","svg","clipPath","defs"]),Km=new RegExp("^\\s*("+xn+"+)\\s*,?\\s*("+xn+"+)\\s*,?\\s*("+xn+"+)\\s*,?\\s*("+xn+"+)\\s*$"),BM=new D(1,0),Qy=new D,sg=(n,t)=>n.rotate(t),Gc=(n,t)=>new D(t).subtract(n),$c=n=>n.distanceFrom(Qy),Kc=(n,t)=>Math.atan2(Oo(n,t),e_(n,t)),t_=n=>Kc(BM,n),Ph=n=>n.eq(Qy)?n:n.scalarDivide($c(n)),rg=function(n){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Ph(new D(-n.y,n.x).scalarMultiply(t?1:-1))},Oo=(n,t)=>n.x*t.y-n.y*t.x,e_=(n,t)=>n.x*t.x+n.y*t.y,qd=(n,t,e)=>{if(n.eq(t)||n.eq(e))return!0;const i=Oo(t,e),s=Oo(t,n),r=Oo(e,n);return i>=0?s>=0&&r<=0:!(s<=0&&r>=0)},qm="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",Zm=new RegExp("(?:\\s|^)"+qm+qm+"("+xn+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Zi{constructor(t){const e=typeof t=="string"?Zi.parseShadow(t):t;Object.assign(this,Zi.ownDefaults,e),this.id=tr()}static parseShadow(t){const e=t.trim(),[,i=0,s=0,r=0]=(Zm.exec(e)||[]).map(o=>parseFloat(o)||0);return{color:(e.replace(Zm,"")||"rgb(0,0,0)").trim(),offsetX:i,offsetY:s,blur:r}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(t){const e=sg(new D(this.offsetX,this.offsetY),Le(-t.angle)),i=new se(this.color);let s=40,r=40;return t.width&&t.height&&(s=100*Me((Math.abs(e.x)+this.blur)/t.width,$t.NUM_FRACTION_DIGITS)+20,r=100*Me((Math.abs(e.y)+this.blur)/t.height,$t.NUM_FRACTION_DIGITS)+20),t.flipX&&(e.x*=-1),t.flipY&&(e.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(r,'%" height="').concat(100+2*r,'%" x="-').concat(s,'%" width="').concat(100+2*s,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Me(this.blur?this.blur/2:0,$t.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Me(e.x,$t.NUM_FRACTION_DIGITS),'" dy="').concat(Me(e.y,$t.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(i.toRgb(),'" flood-opacity="').concat(i.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const t={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},e=Zi.ownDefaults;return this.includeDefaultValues?t:Zf(t,(i,s)=>i!==e[s])}static async fromObject(t){return new this(t)}}A(Zi,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),A(Zi,"type","shadow"),lt.setClass(Zi,"shadow");const Ir=(n,t,e)=>Math.max(n,Math.min(t,e)),zM=[Vi,he,Ai,Ji,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Bo,zo],Os=[He,Ei,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],VM={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:he,originY:Vi,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:He,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},fd=(n,t,e,i)=>(n<Math.abs(t)?(n=t,i=e/4):i=t===0&&n===0?e/xs*Math.asin(1):e/xs*Math.asin(t/n),{a:n,c:t,p:e,s:i}),Jm=(n,t,e,i,s)=>n*Math.pow(2,10*(i-=1))*Math.sin((i*s-t)*xs/e),i_=(n,t,e,i)=>-e*Math.cos(n/i*Qs)+e+t,Zd=(n,t,e,i)=>(n/=i)<1/2.75?e*(7.5625*n*n)+t:n<2/2.75?e*(7.5625*(n-=1.5/2.75)*n+.75)+t:n<2.5/2.75?e*(7.5625*(n-=2.25/2.75)*n+.9375)+t:e*(7.5625*(n-=2.625/2.75)*n+.984375)+t,Qm=(n,t,e,i)=>e-Zd(i-n,0,e,i)+t;var HM=Object.freeze({__proto__:null,defaultEasing:i_,easeInBack:function(n,t,e,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return e*(n/=i)*n*((s+1)*n-s)+t},easeInBounce:Qm,easeInCirc:(n,t,e,i)=>-e*(Math.sqrt(1-(n/=i)*n)-1)+t,easeInCubic:(n,t,e,i)=>e*(n/i)**3+t,easeInElastic:(n,t,e,i)=>{const s=e;let r=0;if(n===0)return t;if((n/=i)===1)return t+e;r||(r=.3*i);const{a:o,s:l,p:h}=fd(s,e,r,1.70158);return-Jm(o,l,h,n,i)+t},easeInExpo:(n,t,e,i)=>n===0?t:e*2**(10*(n/i-1))+t,easeInOutBack:function(n,t,e,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return(n/=i/2)<1?e/2*(n*n*((1+(s*=1.525))*n-s))+t:e/2*((n-=2)*n*((1+(s*=1.525))*n+s)+2)+t},easeInOutBounce:(n,t,e,i)=>n<i/2?.5*Qm(2*n,0,e,i)+t:.5*Zd(2*n-i,0,e,i)+.5*e+t,easeInOutCirc:(n,t,e,i)=>(n/=i/2)<1?-e/2*(Math.sqrt(1-n**2)-1)+t:e/2*(Math.sqrt(1-(n-=2)*n)+1)+t,easeInOutCubic:(n,t,e,i)=>(n/=i/2)<1?e/2*n**3+t:e/2*((n-2)**3+2)+t,easeInOutElastic:(n,t,e,i)=>{const s=e;let r=0;if(n===0)return t;if((n/=i/2)===2)return t+e;r||(r=i*(.3*1.5));const{a:o,s:l,p:h,c:u}=fd(s,e,r,1.70158);return n<1?-.5*Jm(o,l,h,n,i)+t:o*Math.pow(2,-10*(n-=1))*Math.sin((n*i-l)*xs/h)*.5+u+t},easeInOutExpo:(n,t,e,i)=>n===0?t:n===i?t+e:(n/=i/2)<1?e/2*2**(10*(n-1))+t:e/2*-(2**(-10*--n)+2)+t,easeInOutQuad:(n,t,e,i)=>(n/=i/2)<1?e/2*n**2+t:-e/2*(--n*(n-2)-1)+t,easeInOutQuart:(n,t,e,i)=>(n/=i/2)<1?e/2*n**4+t:-e/2*((n-=2)*n**3-2)+t,easeInOutQuint:(n,t,e,i)=>(n/=i/2)<1?e/2*n**5+t:e/2*((n-2)**5+2)+t,easeInOutSine:(n,t,e,i)=>-e/2*(Math.cos(Math.PI*n/i)-1)+t,easeInQuad:(n,t,e,i)=>e*(n/=i)*n+t,easeInQuart:(n,t,e,i)=>e*(n/=i)*n**3+t,easeInQuint:(n,t,e,i)=>e*(n/i)**5+t,easeInSine:(n,t,e,i)=>-e*Math.cos(n/i*Qs)+e+t,easeOutBack:function(n,t,e,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return e*((n=n/i-1)*n*((s+1)*n+s)+1)+t},easeOutBounce:Zd,easeOutCirc:(n,t,e,i)=>e*Math.sqrt(1-(n=n/i-1)*n)+t,easeOutCubic:(n,t,e,i)=>e*((n/i-1)**3+1)+t,easeOutElastic:(n,t,e,i)=>{const s=e;let r=0;if(n===0)return t;if((n/=i)===1)return t+e;r||(r=.3*i);const{a:o,s:l,p:h,c:u}=fd(s,e,r,1.70158);return o*2**(-10*n)*Math.sin((n*i-l)*xs/h)+u+t},easeOutExpo:(n,t,e,i)=>n===i?t+e:e*-(2**(-10*n/i)+1)+t,easeOutQuad:(n,t,e,i)=>-e*(n/=i)*(n-2)+t,easeOutQuart:(n,t,e,i)=>-e*((n=n/i-1)*n**3-1)+t,easeOutQuint:(n,t,e,i)=>e*((n/i-1)**5+1)+t,easeOutSine:(n,t,e,i)=>e*Math.sin(n/i*Qs)+t});const YM=()=>!1;class og{constructor(t){let{startValue:e,byValue:i,duration:s=500,delay:r=0,easing:o=i_,onStart:l=kr,onChange:h=kr,onComplete:u=kr,abort:d=YM,target:g}=t;A(this,"_state","pending"),A(this,"durationProgress",0),A(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=s,this.delay=r,this.easing=o,this._onStart=l,this._onChange=h,this._onComplete=u,this._abort=d,this.target=g,this.startValue=e,this.byValue=i,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const t=e=>{this._state==="pending"&&(this.startTime=e||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Ba(t),this.delay):Ba(t)}tick(t){const e=(t||+new Date)-this.startTime,i=Math.min(e,this.duration);this.durationProgress=i/this.duration;const{value:s,valueProgress:r}=this.calculate(i);this.value=Object.freeze(s),this.valueProgress=r,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):e>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Ba(this.tick)))}register(){Qa.push(this)}unregister(){Qa.remove(this)}abort(){this._state="aborted",this.unregister()}}const XM=["startValue","endValue"];class WM extends og{constructor(t){let{startValue:e=0,endValue:i=100}=t;super(I(I({},ke(t,XM)),{},{startValue:e,byValue:i-e}))}calculate(t){const e=this.easing(t,this.startValue,this.byValue,this.duration);return{value:e,valueProgress:Math.abs((e-this.startValue)/this.byValue)}}}const NM=["startValue","endValue"];class UM extends og{constructor(t){let{startValue:e=[0],endValue:i=[100]}=t;super(I(I({},ke(t,NM)),{},{startValue:e,byValue:i.map((s,r)=>s-e[r])}))}calculate(t){const e=this.startValue.map((i,s)=>this.easing(t,i,this.byValue[s],this.duration,s));return{value:e,valueProgress:Math.abs((e[0]-this.startValue[0])/this.byValue[0])}}}const GM=["startValue","endValue","easing","onChange","onComplete","abort"],$M=(n,t,e,i)=>t+e*(1-Math.cos(n/i*Qs)),gd=n=>n&&((t,e,i)=>n(new se(t).toRgba(),e,i));class KM extends og{constructor(t){let{startValue:e,endValue:i,easing:s=$M,onChange:r,onComplete:o,abort:l}=t,h=ke(t,GM);const u=new se(e).getSource(),d=new se(i).getSource();super(I(I({},h),{},{startValue:u,byValue:d.map((g,p)=>g-u[p]),easing:s,onChange:gd(r),onComplete:gd(o),abort:gd(l)}))}calculate(t){const[e,i,s,r]=this.startValue.map((l,h)=>this.easing(t,l,this.byValue[h],this.duration,h)),o=[...[e,i,s].map(Math.round),Ir(0,r,1)];return{value:o,valueProgress:o.map((l,h)=>this.byValue[h]!==0?Math.abs((l-this.startValue[h])/this.byValue[h]):0).find(l=>l!==0)||0}}}function ag(n){const t=(e=>Array.isArray(e.startValue)||Array.isArray(e.endValue))(n)?new UM(n):new WM(n);return t.start(),t}function n_(n){const t=new KM(n);return t.start(),t}class xe{constructor(t){this.status=t,this.points=[]}includes(t){return this.points.some(e=>e.eq(t))}append(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.points=this.points.concat(e.filter(s=>!this.includes(s))),this}static isPointContained(t,e,i){let s=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(e.eq(i))return t.eq(e);if(e.x===i.x)return t.x===e.x&&(s||t.y>=Math.min(e.y,i.y)&&t.y<=Math.max(e.y,i.y));if(e.y===i.y)return t.y===e.y&&(s||t.x>=Math.min(e.x,i.x)&&t.x<=Math.max(e.x,i.x));{const r=Gc(e,i),o=Gc(e,t).divide(r);return s?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(t,e){const i=new D(t).setX(Math.min(t.x-1,...e.map(r=>r.x)));let s=0;for(let r=0;r<e.length;r++){const o=this.intersectSegmentSegment(e[r],e[(r+1)%e.length],t,i);if(o.includes(t))return!0;s+=+(o.status==="Intersection")}return s%2==1}static intersectLineLine(t,e,i,s){let r=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const l=e.x-t.x,h=e.y-t.y,u=s.x-i.x,d=s.y-i.y,g=t.x-i.x,p=t.y-i.y,m=u*p-d*g,y=l*p-h*g,_=d*l-u*h;if(_!==0){const b=m/_,x=y/_;return(r||0<=b&&b<=1)&&(o||0<=x&&x<=1)?new xe("Intersection").append(new D(t.x+b*l,t.y+b*h)):new xe}if(m===0||y===0){const b=r||o||xe.isPointContained(t,i,s)||xe.isPointContained(e,i,s)||xe.isPointContained(i,t,e)||xe.isPointContained(s,t,e);return new xe(b?"Coincident":void 0)}return new xe("Parallel")}static intersectSegmentLine(t,e,i,s){return xe.intersectLineLine(t,e,i,s,!1,!0)}static intersectSegmentSegment(t,e,i,s){return xe.intersectLineLine(t,e,i,s,!1,!1)}static intersectLinePolygon(t,e,i){let s=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const r=new xe,o=i.length;for(let l,h,u,d=0;d<o;d++){if(l=i[d],h=i[(d+1)%o],u=xe.intersectLineLine(t,e,l,h,s,!1),u.status==="Coincident")return u;r.append(...u.points)}return r.points.length>0&&(r.status="Intersection"),r}static intersectSegmentPolygon(t,e,i){return xe.intersectLinePolygon(t,e,i,!1)}static intersectPolygonPolygon(t,e){const i=new xe,s=t.length,r=[];for(let o=0;o<s;o++){const l=t[o],h=t[(o+1)%s],u=xe.intersectSegmentPolygon(l,h,e);u.status==="Coincident"?(r.push(u),i.append(l,h)):i.append(...u.points)}return r.length>0&&r.length===t.length?new xe("Coincident"):(i.points.length>0&&(i.status="Intersection"),i)}static intersectPolygonRectangle(t,e,i){const s=e.min(i),r=e.max(i),o=new D(r.x,s.y),l=new D(s.x,r.y);return xe.intersectPolygonPolygon(t,[s,o,r,l])}}class qM extends Iy{getX(){return this.getXY().x}setX(t){this.setXY(this.getXY().setX(t))}getY(){return this.getXY().y}setY(t){this.setXY(this.getXY().setY(t))}getRelativeX(){return this.left}setRelativeX(t){this.left=t}getRelativeY(){return this.top}setRelativeY(t){this.top=t}getXY(){const t=this.getRelativeXY();return this.group?fi(t,this.group.calcTransformMatrix()):t}setXY(t,e,i){this.group&&(t=fi(t,zi(this.group.calcTransformMatrix()))),this.setRelativeXY(t,e,i)}getRelativeXY(){return new D(this.left,this.top)}setRelativeXY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(t,e,i)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:t,tr:e,br:i,bl:s}=this.aCoords||(this.aCoords=this.calcACoords()),r=[t,e,i,s];if(this.group){const o=this.group.calcTransformMatrix();return r.map(l=>fi(l,o))}return r}intersectsWithRect(t,e){return xe.intersectPolygonRectangle(this.getCoords(),t,e).status==="Intersection"}intersectsWithObject(t){const e=xe.intersectPolygonPolygon(this.getCoords(),t.getCoords());return e.status==="Intersection"||e.status==="Coincident"||t.isContainedWithinObject(this)||this.isContainedWithinObject(t)}isContainedWithinObject(t){return this.getCoords().every(e=>t.containsPoint(e))}isContainedWithinRect(t,e){const{left:i,top:s,width:r,height:o}=this.getBoundingRect();return i>=t.x&&i+r<=e.x&&s>=t.y&&s+o<=e.y}isOverlapping(t){return this.intersectsWithObject(t)||this.isContainedWithinObject(t)||t.isContainedWithinObject(this)}containsPoint(t){return xe.isPointInPolygon(t,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return!!this.getCoords().some(i=>i.x<=e.x&&i.x>=t.x&&i.y<=e.y&&i.y>=t.y)||!!this.intersectsWithRect(t,e)||this.containsPoint(t.midPointFrom(e))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return this.intersectsWithRect(t,e)?!0:this.getCoords().every(i=>(i.x>=e.x||i.x<=t.x)&&(i.y>=e.y||i.y<=t.y))&&this.containsPoint(t.midPointFrom(e))}getBoundingRect(){return $n(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(t){this._set(Ai,t),this._set(Ji,t),this.setCoords()}scaleToWidth(t){const e=this.getBoundingRect().width/this.getScaledWidth();return this.scale(t/this.width/e)}scaleToHeight(t){const e=this.getBoundingRect().height/this.getScaledHeight();return this.scale(t/this.height/e)}getCanvasRetinaScaling(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.getRetinaScaling())||1}getTotalAngle(){return this.group?er(By(this.calcTransformMatrix())):this.angle}getViewportTransform(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.viewportTransform)||ci.concat()}calcACoords(){const t=Ho({angle:this.angle}),{x:e,y:i}=this.getRelativeCenterPoint(),s=Vo(e,i),r=De(s,t),o=this._getTransformedDimensions(),l=o.x/2,h=o.y/2;return{tl:fi({x:-l,y:-h},r),tr:fi({x:l,y:-h},r),bl:fi({x:-l,y:h},r),br:fi({x:l,y:h},r)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=[];return!t&&this.group&&(e=this.group.transformMatrixKey(t)),e.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Xe(this.originX),Xe(this.originY)),e}calcTransformMatrix(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.calcOwnMatrix();if(t||!this.group)return e;const i=this.transformMatrixKey(t),s=this.matrixCache;return s&&s.key.every((r,o)=>r===i[o])?s.value:(this.group&&(e=De(this.group.calcTransformMatrix(!1),e)),this.matrixCache={key:i,value:e},e)}calcOwnMatrix(){const t=this.transformMatrixKey(!0),e=this.ownMatrixCache;if(e&&e.key===t)return e.value;const i=this.getRelativeCenterPoint(),s={angle:this.angle,translateX:i.x,translateY:i.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},r=Vy(s);return this.ownMatrixCache={key:t,value:r},r}_getNonTransformedDimensions(){return new D(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(t){return this._getTransformedDimensions(t).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=I({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},t),i=e.strokeWidth;let s=i,r=0;this.strokeUniform&&(s=0,r=i);const o=e.width+s,l=e.height+s;let h;return h=e.skewX===0&&e.skewY===0?new D(o*e.scaleX,l*e.scaleY):Sh(o,l,dl(e)),h.scalarAdd(r)}translateToGivenOrigin(t,e,i,s,r){let o=t.x,l=t.y;const h=Xe(s)-Xe(e),u=Xe(r)-Xe(i);if(h||u){const d=this._getTransformedDimensions();o+=h*d.x,l+=u*d.y}return new D(o,l)}translateToCenterPoint(t,e,i){if(e===It&&i===It)return t;const s=this.translateToGivenOrigin(t,e,i,It,It);return this.angle?s.rotate(Le(this.angle),t):s}translateToOriginPoint(t,e,i){const s=this.translateToGivenOrigin(t,It,It,e,i);return this.angle?s.rotate(Le(this.angle),t):s}getCenterPoint(){const t=this.getRelativeCenterPoint();return this.group?fi(t,this.group.calcTransformMatrix()):t}getRelativeCenterPoint(){return this.translateToCenterPoint(new D(this.left,this.top),this.originX,this.originY)}getPointByOrigin(t,e){return this.translateToOriginPoint(this.getRelativeCenterPoint(),t,e)}setPositionByOrigin(t,e,i){const s=this.translateToCenterPoint(t,e,i),r=this.translateToOriginPoint(s,this.originX,this.originY);this.set({left:r.x,top:r.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),he,Vi)}}const ZM=["type"],JM=["extraParam"];let Fn=class Ec extends qM{static getDefaults(){return Ec.ownDefaults}get type(){const t=this.constructor.type;return t==="FabricObject"?"object":t.toLowerCase()}set type(t){bs("warn","Setting type has no effect",t)}constructor(t){super(),A(this,"_cacheContext",null),Object.assign(this,Ec.ownDefaults),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=Ee(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(t){const e=t.width,i=t.height,s=$t.maxCacheSideLimit,r=$t.minCacheSideLimit;if(e<=s&&i<=s&&e*i<=$t.perfLimitSizeTotal)return e<r&&(t.width=r),i<r&&(t.height=r),t;const o=e/i,[l,h]=To.limitDimsByArea(o),u=Ir(r,l,s),d=Ir(r,h,s);return e>u&&(t.zoomX/=e/u,t.width=u,t.capped=!0),i>d&&(t.zoomY/=i/d,t.height=d,t.capped=!0),t}_getCacheCanvasDimensions(){const t=this.getTotalObjectScaling(),e=this._getTransformedDimensions({skewX:0,skewY:0}),i=e.x*t.x/this.scaleX,s=e.y*t.y/this.scaleY;return{width:i+2,height:s+2,zoomX:t.x,zoomY:t.y,x:i,y:s}}_updateCacheCanvas(){const t=this._cacheCanvas,e=this._cacheContext,i=this._limitCacheSize(this._getCacheCanvasDimensions()),s=$t.minCacheSideLimit,r=i.width,o=i.height,l=i.zoomX,h=i.zoomY,u=r!==t.width||o!==t.height,d=this.zoomX!==l||this.zoomY!==h;if(!t||!e)return!1;let g,p,m=u||d,y=0,_=0,b=!1;if(u){const x=this._cacheCanvas.width,T=this._cacheCanvas.height,O=r>x||o>T;b=O||(r<.9*x||o<.9*T)&&x>s&&T>s,O&&!i.capped&&(r>s||o>s)&&(y=.1*r,_=.1*o)}return Hy(this)&&this.path&&(m=!0,b=!0,y+=this.getHeightOfLine(0)*this.zoomX,_+=this.getHeightOfLine(0)*this.zoomY),!!m&&(b?(t.width=Math.ceil(r+y),t.height=Math.ceil(o+_)):(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height)),g=i.x/2,p=i.y/2,this.cacheTranslationX=Math.round(t.width/2-g)+g,this.cacheTranslationY=Math.round(t.height/2-p)+p,e.translate(this.cacheTranslationX,this.cacheTranslationY),e.scale(l,h),this.zoomX=l,this.zoomY=h,!0)}setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(t)}transform(t){const e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,i=this.calcTransformMatrix(!e);t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}getObjectScaling(){if(!this.group)return new D(Math.abs(this.scaleX),Math.abs(this.scaleY));const t=jr(this.calcTransformMatrix());return new D(Math.abs(t.scaleX),Math.abs(t.scaleY))}getTotalObjectScaling(){const t=this.getObjectScaling();if(this.canvas){const e=this.canvas.getZoom(),i=this.getCanvasRetinaScaling();return t.scalarMultiply(e*i)}return t}getObjectOpacity(){let t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t}_constrainScale(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t===0?1e-4:t}_set(t,e){t!==Ai&&t!==Ji||(e=this._constrainScale(e)),t===Ai&&e<0?(this.flipX=!this.flipX,e*=-1):t==="scaleY"&&e<0?(this.flipY=!this.flipY,e*=-1):t!=="shadow"||!e||e instanceof Zi||(e=new Zi(e));const i=this[t]!==e;return this[t]=e,i&&this.constructor.cacheProperties.includes(t)&&(this.dirty=!0),this.parent&&(this.dirty||i&&this.constructor.stateProperties.includes(t))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.drawObject(t),this.dirty=!1),t.restore())}drawSelectionBackground(t){}renderCache(t){t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext&&(this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===Ei&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.parent||!this.parent.isOnACache()),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(t,e){if(t.save(),e.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",e.absolutePositioned){const i=zi(this.calcTransformMatrix());t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}drawObject(t,e){const i=this.fill,s=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath),this.fill=i,this.stroke=s}_drawClipPath(t,e){e&&(e._set("canvas",this.canvas),e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t,e))}drawCacheOnCanvas(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const e=this._cacheCanvas,i=this._cacheContext;return!(!e||!i||t||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(e&&i&&!t&&(i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,e.width,e.height),i.restore()),!0)}_renderBackground(t){if(!this.backgroundColor)return;const e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity}_setStrokeStyles(t,e){const i=e.stroke;i&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,un(i)?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?this._applyPatternForTransformedGradient(t,i):(t.strokeStyle=i.toLive(t),this._applyPatternGradientTransform(t,i)):t.strokeStyle=e.stroke)}_setFillStyles(t,e){let{fill:i}=e;i&&(un(i)?(t.fillStyle=i.toLive(t),this._applyPatternGradientTransform(t,i)):t.fillStyle=i)}_setClippingProperties(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"}_setLineDash(t,e){e&&e.length!==0&&(1&e.length&&e.push(...e),t.setLineDash(e))}_setShadow(t){if(!this.shadow)return;const e=this.shadow,i=this.canvas,s=this.getCanvasRetinaScaling(),[r,,,o]=(i==null?void 0:i.viewportTransform)||ci,l=r*s,h=o*s,u=e.nonScaling?new D(1,1):this.getObjectScaling();t.shadowColor=e.color,t.shadowBlur=e.blur*$t.browserShadowBlurConstant*(l+h)*(u.x+u.y)/4,t.shadowOffsetX=e.offsetX*l*u.x,t.shadowOffsetY=e.offsetY*h*u.y}_removeShadow(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)}_applyPatternGradientTransform(t,e){if(!un(e))return{offsetX:0,offsetY:0};const i=e.gradientTransform||e.patternTransform,s=-this.width/2+e.offsetX||0,r=-this.height/2+e.offsetY||0;return e.gradientUnits==="percentage"?t.transform(this.width,0,0,this.height,s,r):t.transform(1,0,0,1,s,r),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:s,offsetY:r}}_renderPaintInOrder(t){this.paintFirst===Ei?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))}_render(t){}_renderFill(t){this.fill&&(t.save(),this._setFillStyles(t,this),this.fillRule==="evenodd"?t.fill("evenodd"):t.fill(),t.restore())}_renderStroke(t){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform){const e=this.getObjectScaling();t.scale(1/e.x,1/e.y)}this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}}_applyPatternForTransformedGradient(t,e){var i;const s=this._limitCacheSize(this._getCacheCanvasDimensions()),r=Ee(),o=this.getCanvasRetinaScaling(),l=s.x/this.scaleX/o,h=s.y/this.scaleY/o;r.width=Math.ceil(l),r.height=Math.ceil(h);const u=r.getContext("2d");u&&(u.beginPath(),u.moveTo(0,0),u.lineTo(l,0),u.lineTo(l,h),u.lineTo(0,h),u.closePath(),u.translate(l/2,h/2),u.scale(s.zoomX/this.scaleX/o,s.zoomY/this.scaleY/o),this._applyPatternGradientTransform(u,e),u.fillStyle=e.toLive(t),u.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(o*this.scaleX/s.zoomX,o*this.scaleY/s.zoomY),t.strokeStyle=(i=u.createPattern(r,"no-repeat"))!==null&&i!==void 0?i:"")}_findCenterFromElement(){return new D(this.left+this.width/2,this.top+this.height/2)}clone(t){const e=this.toObject(t);return this.constructor.fromObject(e)}cloneAsImage(t){const e=this.toCanvasElement(t);return new(lt.getClass("image"))(e)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=tg(this),i=this.group,s=this.shadow,r=Math.abs,o=t.enableRetinaScaling?My():1,l=(t.multiplier||1)*o,h=t.canvasProvider||(T=>new fn(T,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,t.withoutTransform&&Gy(this),t.withoutShadow&&(this.shadow=null),t.viewportTransform&&$d(this,this.getViewportTransform()),this.setCoords();const u=Ee(),d=this.getBoundingRect(),g=this.shadow,p=new D;if(g){const T=g.blur,O=g.nonScaling?new D(1,1):this.getObjectScaling();p.x=2*Math.round(r(g.offsetX)+T)*r(O.x),p.y=2*Math.round(r(g.offsetY)+T)*r(O.y)}const m=d.width+p.x,y=d.height+p.y;u.width=Math.ceil(m),u.height=Math.ceil(y);const _=h(u);t.format==="jpeg"&&(_.backgroundColor="#fff"),this.setPositionByOrigin(new D(_.width/2,_.height/2),It,It);const b=this.canvas;_._objects=[this],this.set("canvas",_),this.setCoords();const x=_.toCanvasElement(l||1,t);return this.set("canvas",b),this.shadow=s,i&&(this.group=i),this.set(e),this.setCoords(),_._objects=[],_.destroy(),x}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return $f(this.toCanvasElement(t),t.format||"png",t.quality||1)}isType(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.includes(this.constructor.type)||e.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(t){const{centeredRotation:e,originX:i,originY:s}=this;if(e){const{x:r,y:o}=this.getRelativeCenterPoint();this.originX=It,this.originY=It,this.left=r,this.top=o}if(this.set("angle",t),e){const{x:r,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),i,s);this.left=r,this.top=o,this.originX=i,this.originY=s}}setOnGroup(){}_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}dispose(){Qa.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Mn().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(t,e){return Object.entries(t).reduce((i,s)=>{let[r,o]=s;return i[r]=this._animate(r,o,e),i},{})}_animate(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=t.split("."),r=this.constructor.colorProperties.includes(s[s.length-1]),{abort:o,startValue:l,onChange:h,onComplete:u}=i,d=I(I({},i),{},{target:this,startValue:l??s.reduce((g,p)=>g[p],this),endValue:e,abort:o==null?void 0:o.bind(this),onChange:(g,p,m)=>{s.reduce((y,_,b)=>(b===s.length-1&&(y[_]=g),y[_]),this),h&&h(g,p,m)},onComplete:(g,p,m)=>{this.setCoords(),u&&u(g,p,m)}});return r?n_(d):ag(d)}isDescendantOf(t){const{parent:e,group:i}=this;return e===t||i===t||!!e&&e.isDescendantOf(t)||!!i&&i!==e&&i.isDescendantOf(t)}getAncestors(){const t=[];let e=this;do e=e.parent,e&&t.push(e);while(e);return t}findCommonAncestors(t){if(this===t)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const e=this.getAncestors(),i=t.getAncestors();if(e.length===0&&i.length>0&&this===i[i.length-1])return{fork:[],otherFork:[t,...i.slice(0,i.length-1)],common:[this]};for(let s,r=0;r<e.length;r++){if(s=e[r],s===t)return{fork:[this,...e.slice(0,r)],otherFork:[],common:e.slice(r)};for(let o=0;o<i.length;o++){if(this===i[o])return{fork:[],otherFork:[t,...i.slice(0,o)],common:[this,...e]};if(s===i[o])return{fork:[this,...e.slice(0,r)],otherFork:[t,...i.slice(0,o)],common:e.slice(r)}}}return{fork:[this,...e],otherFork:[t,...i],common:[]}}hasCommonAncestors(t){const e=this.findCommonAncestors(t);return e&&!!e.common.length}isInFrontOf(t){if(this===t)return;const e=this.findCommonAncestors(t);if(e.fork.includes(t))return!0;if(e.otherFork.includes(this))return!1;const i=e.common[0]||this.canvas;if(!i)return;const s=e.fork.pop(),r=e.otherFork.pop(),o=i._objects.indexOf(s),l=i._objects.indexOf(r);return o>-1&&o>l}toObject(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Ec.customProperties,this.constructor.customProperties||[]);let e;const i=$t.NUM_FRACTION_DIGITS,{clipPath:s,fill:r,stroke:o,shadow:l,strokeDashArray:h,left:u,top:d,originX:g,originY:p,width:m,height:y,strokeWidth:_,strokeLineCap:b,strokeDashOffset:x,strokeLineJoin:T,strokeUniform:O,strokeMiterLimit:P,scaleX:F,scaleY:X,angle:R,flipX:V,flipY:$,opacity:st,visible:ht,backgroundColor:ut,fillRule:ct,paintFirst:bt,globalCompositeOperation:Et,skewX:dt,skewY:_t}=this;s&&!s.excludeFromExport&&(e=s.toObject(t.concat("inverted","absolutePositioned")));const gt=zt=>Me(zt,i),Kt=I(I({},Br(this,t)),{},{type:this.constructor.type,version:Xc,originX:g,originY:p,left:gt(u),top:gt(d),width:gt(m),height:gt(y),fill:Xm(r)?r.toObject():r,stroke:Xm(o)?o.toObject():o,strokeWidth:gt(_),strokeDashArray:h&&h.concat(),strokeLineCap:b,strokeDashOffset:x,strokeLineJoin:T,strokeUniform:O,strokeMiterLimit:gt(P),scaleX:gt(F),scaleY:gt(X),angle:gt(R),flipX:V,flipY:$,opacity:gt(st),shadow:l&&l.toObject(),visible:ht,backgroundColor:ut,fillRule:ct,paintFirst:bt,globalCompositeOperation:Et,skewX:gt(dt),skewY:gt(_t)},e?{clipPath:e}:null);return this.includeDefaultValues?Kt:this._removeDefaultValues(Kt)}toDatalessObject(t){return this.toObject(t)}_removeDefaultValues(t){const e=this.constructor.getDefaults(),i=Object.keys(e).length>0?e:Object.getPrototypeOf(this);return Zf(t,(s,r)=>{if(r===he||r===Vi||r==="type")return!0;const o=i[r];return s!==o&&!(Array.isArray(s)&&Array.isArray(o)&&s.length===0&&o.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(t){let e=ke(t,ZM),i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:s}=i,r=ke(i,JM);return fl(e,r).then(o=>s?(delete o[s],new this(e[s],o)):new this(o))}static fromObject(t,e){return this._fromObject(t,e)}};A(Fn,"stateProperties",zM),A(Fn,"cacheProperties",Os),A(Fn,"ownDefaults",VM),A(Fn,"type","FabricObject"),A(Fn,"colorProperties",[He,Ei,"backgroundColor"]),A(Fn,"customProperties",[]),lt.setClass(Fn),lt.setClass(Fn,"object");const ar=(n,t,e)=>(i,s,r,o)=>{const l=t(i,s,r,o);return l&&eg(n,I(I({},ng(i,s,r,o)),e)),l};function zr(n){return(t,e,i,s)=>{const{target:r,originX:o,originY:l}=e,h=r.getRelativeCenterPoint(),u=r.translateToOriginPoint(h,o,l),d=n(t,e,i,s);return r.setPositionByOrigin(u,e.originX,e.originY),d}}const Jd=ar(Ja,zr((n,t,e,i)=>{const s=Th(t,t.originX,t.originY,e,i);if(Xe(t.originX)===Xe(It)||Xe(t.originX)===Xe(Ve)&&s.x<0||Xe(t.originX)===Xe(he)&&s.x>0){const{target:r}=t,o=r.strokeWidth/(r.strokeUniform?r.scaleX:1),l=Ky(t)?2:1,h=r.width,u=Math.ceil(Math.abs(s.x*l/r.scaleX)-o);return r.set("width",Math.max(u,0)),h!==r.width}return!1}));function s_(n,t,e,i,s){i=i||{};const r=this.sizeX||i.cornerSize||s.cornerSize,o=this.sizeY||i.cornerSize||s.cornerSize,l=i.transparentCorners!==void 0?i.transparentCorners:s.transparentCorners,h=l?Ei:He,u=!l&&(i.cornerStrokeColor||s.cornerStrokeColor);let d,g=t,p=e;n.save(),n.fillStyle=i.cornerColor||s.cornerColor||"",n.strokeStyle=i.cornerStrokeColor||s.cornerStrokeColor||"",r>o?(d=r,n.scale(1,o/r),p=e*r/o):o>r?(d=o,n.scale(r/o,1),g=t*o/r):d=r,n.lineWidth=1,n.beginPath(),n.arc(g,p,d/2,0,xs,!1),n[h](),u&&n.stroke(),n.restore()}function r_(n,t,e,i,s){i=i||{};const r=this.sizeX||i.cornerSize||s.cornerSize,o=this.sizeY||i.cornerSize||s.cornerSize,l=i.transparentCorners!==void 0?i.transparentCorners:s.transparentCorners,h=l?Ei:He,u=!l&&(i.cornerStrokeColor||s.cornerStrokeColor),d=r/2,g=o/2;n.save(),n.fillStyle=i.cornerColor||s.cornerColor||"",n.strokeStyle=i.cornerStrokeColor||s.cornerStrokeColor||"",n.lineWidth=1,n.translate(t,e);const p=s.getTotalAngle();n.rotate(Le(p)),n["".concat(h,"Rect")](-d,-g,r,o),u&&n.strokeRect(-d,-g,r,o),n.restore()}class di{constructor(t){A(this,"visible",!0),A(this,"actionName",bh),A(this,"angle",0),A(this,"x",0),A(this,"y",0),A(this,"offsetX",0),A(this,"offsetY",0),A(this,"sizeX",0),A(this,"sizeY",0),A(this,"touchSizeX",0),A(this,"touchSizeY",0),A(this,"cursorStyle","crosshair"),A(this,"withConnection",!1),Object.assign(this,t)}shouldActivate(t,e,i,s){var r;let{tl:o,tr:l,br:h,bl:u}=s;return((r=e.canvas)===null||r===void 0?void 0:r.getActiveObject())===e&&e.isControlVisible(t)&&xe.isPointInPolygon(i,[o,l,h,u])}getActionHandler(t,e,i){return this.actionHandler}getMouseDownHandler(t,e,i){return this.mouseDownHandler}getMouseUpHandler(t,e,i){return this.mouseUpHandler}cursorStyleHandler(t,e,i){return e.cursorStyle}getActionName(t,e,i){return e.actionName}getVisibility(t,e){var i,s;return(i=(s=t._controlsVisibility)===null||s===void 0?void 0:s[e])!==null&&i!==void 0?i:this.visible}setVisibility(t,e,i){this.visible=t}positionHandler(t,e,i,s){return new D(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(e)}calcCornerCoords(t,e,i,s,r,o){const l=xh([Vo(i,s),Ho({angle:t}),Ch((r?this.touchSizeX:this.sizeX)||e,(r?this.touchSizeY:this.sizeY)||e)]);return{tl:new D(-.5,-.5).transform(l),tr:new D(.5,-.5).transform(l),br:new D(.5,.5).transform(l),bl:new D(-.5,.5).transform(l)}}render(t,e,i,s,r){((s=s||{}).cornerStyle||r.cornerStyle)==="circle"?s_.call(this,t,e,i,s,r):r_.call(this,t,e,i,s,r)}}const o_=(n,t,e)=>e.lockRotation?ig:t.cursorStyle,a_=ar(ky,zr((n,t,e,i)=>{let{target:s,ex:r,ey:o,theta:l,originX:h,originY:u}=t;const d=s.translateToOriginPoint(s.getRelativeCenterPoint(),h,u);if(Tn(s,"lockRotation"))return!1;const g=Math.atan2(o-d.y,r-d.x),p=Math.atan2(i-d.y,e-d.x);let m=er(p-g+l);if(s.snapAngle&&s.snapAngle>0){const _=s.snapAngle,b=s.snapThreshold||_,x=Math.ceil(m/_)*_,T=Math.floor(m/_)*_;Math.abs(m-T)<b?m=T:Math.abs(m-x)<b&&(m=x)}m<0&&(m=360+m),m%=360;const y=s.angle!==m;return s.angle=m,y}));function l_(n,t){const e=t.canvas,i=n[e.uniScaleKey];return e.uniformScaling&&!i||!e.uniformScaling&&i}function c_(n,t,e){const i=Tn(n,"lockScalingX"),s=Tn(n,"lockScalingY");if(i&&s||!t&&(i||s)&&e||i&&t==="x"||s&&t==="y")return!0;const{width:r,height:o,strokeWidth:l}=n;return r===0&&l===0&&t!=="y"||o===0&&l===0&&t!=="x"}const QM=["e","se","s","sw","w","nw","n","ne","e"],vo=(n,t,e)=>{const i=l_(n,e);if(c_(e,t.x!==0&&t.y===0?"x":t.x===0&&t.y!==0?"y":"",i))return ig;const s=qy(e,t);return"".concat(QM[s],"-resize")};function lg(n,t,e,i){let s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const r=t.target,o=s.by,l=l_(n,r);let h,u,d,g,p,m;if(c_(r,o,l))return!1;if(t.gestureScale)u=t.scaleX*t.gestureScale,d=t.scaleY*t.gestureScale;else{if(h=Th(t,t.originX,t.originY,e,i),p=o!=="y"?Math.sign(h.x||t.signX||1):1,m=o!=="x"?Math.sign(h.y||t.signY||1):1,t.signX||(t.signX=p),t.signY||(t.signY=m),Tn(r,"lockScalingFlip")&&(t.signX!==p||t.signY!==m))return!1;if(g=r._getTransformedDimensions(),l&&!o){const b=Math.abs(h.x)+Math.abs(h.y),{original:x}=t,T=b/(Math.abs(g.x*x.scaleX/r.scaleX)+Math.abs(g.y*x.scaleY/r.scaleY));u=x.scaleX*T,d=x.scaleY*T}else u=Math.abs(h.x*r.scaleX/g.x),d=Math.abs(h.y*r.scaleY/g.y);Ky(t)&&(u*=2,d*=2),t.signX!==p&&o!=="y"&&(t.originX=Um(t.originX),u*=-1,t.signX=p),t.signY!==m&&o!=="x"&&(t.originY=Um(t.originY),d*=-1,t.signY=m)}const y=r.scaleX,_=r.scaleY;return o?(o==="x"&&r.set(Ai,u),o==="y"&&r.set(Ji,d)):(!Tn(r,"lockScalingX")&&r.set(Ai,u),!Tn(r,"lockScalingY")&&r.set(Ji,d)),y!==r.scaleX||_!==r.scaleY}const da=ar(wh,zr((n,t,e,i)=>lg(n,t,e,i))),h_=ar(wh,zr((n,t,e,i)=>lg(n,t,e,i,{by:"x"}))),u_=ar(wh,zr((n,t,e,i)=>lg(n,t,e,i,{by:"y"}))),t4=["target","ex","ey","skewingSide"],pd={x:{counterAxis:"y",scale:Ai,skew:Bo,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:Ji,skew:zo,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},e4=["ns","nesw","ew","nwse"],d_=(n,t,e)=>{if(t.x!==0&&Tn(e,"lockSkewingY")||t.y!==0&&Tn(e,"lockSkewingX"))return ig;const i=qy(e,t)%4;return"".concat(e4[i],"-resize")};function f_(n,t,e,i,s){const{target:r}=e,{counterAxis:o,origin:l,lockSkewing:h,skew:u,flip:d}=pd[n];if(Tn(r,h))return!1;const{origin:g,flip:p}=pd[o],m=Xe(e[g])*(r[p]?-1:1),y=-Math.sign(m)*(r[d]?-1:1),_=.5*-((r[u]===0&&Th(e,It,It,i,s)[n]>0||r[u]>0?1:-1)*y)+.5;return ar(Ay,zr((b,x,T,O)=>function(P,F,X){let{target:R,ex:V,ey:$,skewingSide:st}=F,ht=ke(F,t4);const{skew:ut}=pd[P],ct=X.subtract(new D(V,$)).divide(new D(R.scaleX,R.scaleY))[P],bt=R[ut],Et=ht[ut],dt=Math.tan(Le(Et)),_t=P==="y"?R._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:R._getTransformedDimensions({scaleX:1,scaleY:1}).y,gt=2*ct*st/Math.max(_t,1)+dt,Kt=er(Math.atan(gt));R.set(ut,Kt);const zt=bt!==R[ut];if(zt&&P==="y"){const{skewX:Ut,scaleX:ne}=R,pe=R._getTransformedDimensions({skewY:bt}),qt=R._getTransformedDimensions(),oe=Ut!==0?pe.x/qt.x:1;oe!==1&&R.set(Ai,oe*ne)}return zt}(n,x,new D(T,O))))(t,I(I({},e),{},{[l]:_,skewingSide:y}),i,s)}const g_=(n,t,e,i)=>f_("x",n,t,e,i),p_=(n,t,e,i)=>f_("y",n,t,e,i);function Mh(n,t){return n[t.canvas.altActionKey]}const fa=(n,t,e)=>{const i=Mh(n,e);return t.x===0?i?Bo:Ji:t.y===0?i?zo:Ai:""},Sr=(n,t,e)=>Mh(n,e)?d_(0,t,e):vo(n,t,e),Qd=(n,t,e,i)=>Mh(n,t.target)?p_(n,t,e,i):h_(n,t,e,i),tf=(n,t,e,i)=>Mh(n,t.target)?g_(n,t,e,i):u_(n,t,e,i),cg=()=>({ml:new di({x:-.5,y:0,cursorStyleHandler:Sr,actionHandler:Qd,getActionName:fa}),mr:new di({x:.5,y:0,cursorStyleHandler:Sr,actionHandler:Qd,getActionName:fa}),mb:new di({x:0,y:.5,cursorStyleHandler:Sr,actionHandler:tf,getActionName:fa}),mt:new di({x:0,y:-.5,cursorStyleHandler:Sr,actionHandler:tf,getActionName:fa}),tl:new di({x:-.5,y:-.5,cursorStyleHandler:vo,actionHandler:da}),tr:new di({x:.5,y:-.5,cursorStyleHandler:vo,actionHandler:da}),bl:new di({x:-.5,y:.5,cursorStyleHandler:vo,actionHandler:da}),br:new di({x:.5,y:.5,cursorStyleHandler:vo,actionHandler:da}),mtr:new di({x:0,y:-.5,actionHandler:a_,cursorStyleHandler:o_,offsetY:-40,withConnection:!0,actionName:Uf})}),m_=()=>({mr:new di({x:.5,y:0,actionHandler:Jd,cursorStyleHandler:Sr,actionName:Ja}),ml:new di({x:-.5,y:0,actionHandler:Jd,cursorStyleHandler:Sr,actionName:Ja})}),v_=()=>I(I({},cg()),m_());class Do extends Fn{static getDefaults(){return I(I({},super.getDefaults()),Do.ownDefaults)}constructor(t){super(),Object.assign(this,this.constructor.createControls(),Do.ownDefaults),this.setOptions(t)}static createControls(){return{controls:cg()}}_updateCacheCanvas(){const t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){const e=t._currentTransform,i=e.target,s=e.action;if(this===i&&s&&s.startsWith(bh))return!1}return super._updateCacheCanvas()}getActiveControl(){const t=this.__corner;return t?{key:t,control:this.controls[t],coord:this.oCoords[t]}:void 0}findControl(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const i=Object.entries(this.oCoords);for(let s=i.length-1;s>=0;s--){const[r,o]=i[s],l=this.controls[r];if(l.shouldActivate(r,this,t,e?o.touchCorner:o.corner))return this.__corner=r,{key:r,control:l,coord:this.oCoords[r]}}}calcOCoords(){const t=this.getViewportTransform(),e=this.getCenterPoint(),i=Vo(e.x,e.y),s=Ho({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),r=De(i,s),o=De(t,r),l=De(o,[1/t[0],0,0,1/t[3],0,0]),h=this.group?jr(this.calcTransformMatrix()):void 0;h&&(h.scaleX=Math.abs(h.scaleX),h.scaleY=Math.abs(h.scaleY));const u=this._calculateCurrentDimensions(h),d={};return this.forEachControl((g,p)=>{const m=g.positionHandler(u,l,this,g);d[p]=Object.assign(m,this._calcCornerCoords(g,m))}),d}_calcCornerCoords(t,e){const i=this.getTotalAngle();return{corner:t.calcCornerCoords(i,this.cornerSize,e.x,e.y,!1,this),touchCorner:t.calcCornerCoords(i,this.touchCornerSize,e.x,e.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(t){for(const e in this.controls)t(this.controls[e],e,this)}drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;t.save();const e=this.getRelativeCenterPoint(),i=this._calculateCurrentDimensions(),s=this.getViewportTransform();t.translate(e.x,e.y),t.scale(1/s[0],1/s[3]),t.rotate(Le(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-i.x/2,-i.y/2,i.x,i.y),t.restore()}strokeBorders(t,e){t.strokeRect(-e.x/2,-e.y/2,e.x,e.y)}_drawBorders(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=I({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},i);t.save(),t.strokeStyle=s.borderColor,this._setLineDash(t,s.borderDashArray),this.strokeBorders(t,e),s.hasControls&&this.drawControlsConnectingLines(t,e),t.restore()}_renderControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:i,hasControls:s}=this,r=I({hasBorders:i,hasControls:s},e),o=this.getViewportTransform(),l=r.hasBorders,h=r.hasControls,u=De(o,this.calcTransformMatrix()),d=jr(u);t.save(),t.translate(d.translateX,d.translateY),t.lineWidth=1*this.borderScaleFactor,this.group===this.parent&&(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(d.angle-=180),t.rotate(Le(this.group?d.angle:this.angle)),l&&this.drawBorders(t,d,e),h&&this.drawControls(t,e),t.restore()}drawBorders(t,e,i){let s;if(i&&i.forActiveSelection||this.group){const r=Sh(this.width,this.height,dl(e)),o=this.isStrokeAccountedForInDimensions()?Gf:(this.strokeUniform?new D().scalarAdd(this.canvas?this.canvas.getZoom():1):new D(e.scaleX,e.scaleY)).scalarMultiply(this.strokeWidth);s=r.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else s=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(t,s,i)}drawControlsConnectingLines(t,e){let i=!1;t.beginPath(),this.forEachControl((s,r)=>{s.withConnection&&s.getVisibility(this,r)&&(i=!0,t.moveTo(s.x*e.x,s.y*e.y),t.lineTo(s.x*e.x+s.offsetX,s.y*e.y+s.offsetY))}),i&&t.stroke()}drawControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.save();const i=this.getCanvasRetinaScaling(),{cornerStrokeColor:s,cornerDashArray:r,cornerColor:o}=this,l=I({cornerStrokeColor:s,cornerDashArray:r,cornerColor:o},e);t.setTransform(i,0,0,i,0,0),t.strokeStyle=t.fillStyle=l.cornerColor,this.transparentCorners||(t.strokeStyle=l.cornerStrokeColor),this._setLineDash(t,l.cornerDashArray),this.forEachControl((h,u)=>{if(h.getVisibility(this,u)){const d=this.oCoords[u];h.render(t,d.x,d.y,l,this)}}),t.restore()}isControlVisible(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)}setControlVisible(t,e){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e}setControlsVisibility(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(t).forEach(e=>{let[i,s]=e;return this.setControlVisible(i,s)})}clearContextTop(t){if(!this.canvas)return;const e=this.canvas.contextTop;if(!e)return;const i=this.canvas.viewportTransform;e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(e);const s=this.width+4,r=this.height+4;return e.clearRect(-s/2,-r/2,s,r),t||e.restore(),e}onDeselect(t){return!1}onSelect(t){return!1}shouldStartDragging(t){return!1}onDragStart(t){return!1}canDrop(t){return!1}renderDragSourceEffect(t){}renderDropTargetEffect(t){}}function y_(n,t){return t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(i=>{i!=="constructor"&&Object.defineProperty(n.prototype,i,Object.getOwnPropertyDescriptor(e.prototype,i)||Object.create(null))})}),n}A(Do,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class ge extends Do{}y_(ge,[Jy]),lt.setClass(ge),lt.setClass(ge,"object");const __=(n,t,e,i)=>{const s=2*(i=Math.round(i))+1,{data:r}=n.getImageData(t-i,e-i,s,s);for(let o=3;o<r.length;o+=4)if(r[o]>0)return!1;return!0};class w_{constructor(t){this.options=t,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new D(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new D(1/this.options.scaleX,1/this.options.scaleY):new D(1,1)}createSideVector(t,e){const i=Gc(t,e);return this.options.strokeUniform?i.multiply(this.scale):i}projectOrthogonally(t,e,i){return this.applySkew(t.add(this.calcOrthogonalProjection(t,e,i)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(t){const e=new D(t);return e.y+=e.x*Math.tan(Le(this.options.skewY)),e.x+=e.y*Math.tan(Le(this.options.skewX)),e}scaleUnitVector(t,e){return t.multiply(this.strokeUniformScalar).scalarMultiply(e)}}const i4=new D;class Po extends w_{static getOrthogonalRotationFactor(t,e){const i=e?Kc(t,e):t_(t);return Math.abs(i)<Qs?-1:1}constructor(t,e,i,s){super(s),A(this,"AB",void 0),A(this,"AC",void 0),A(this,"alpha",void 0),A(this,"bisector",void 0),this.A=new D(t),this.B=new D(e),this.C=new D(i),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=Kc(this.AB,this.AC),this.bisector=Ph(sg(this.AB.eq(i4)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(t,e),r=rg(s),o=Po.getOrthogonalRotationFactor(r,this.bisector);return this.scaleUnitVector(r,i*o)}projectBevel(){const t=[];return(this.alpha%xs==0?[this.B]:[this.B,this.C]).forEach(e=>{t.push(this.projectOrthogonally(this.A,e)),t.push(this.projectOrthogonally(this.A,e,-this.strokeProjectionMagnitude))}),t}projectMiter(){const t=[],e=Math.abs(this.alpha),i=1/Math.sin(e/2),s=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*i),r=this.options.strokeUniform?$c(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return $c(s)/this.strokeProjectionMagnitude<=r&&t.push(this.applySkew(this.A.add(s))),t.push(...this.projectBevel()),t}projectRoundNoSkew(t,e){const i=[],s=new D(Po.getOrthogonalRotationFactor(this.bisector),Po.getOrthogonalRotationFactor(new D(this.bisector.y,this.bisector.x)));return[new D(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s),new D(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(s)].forEach(r=>{qd(r,t,e)&&i.push(this.A.add(r))}),i}projectRoundWithSkew(t,e){const i=[],{skewX:s,skewY:r,scaleX:o,scaleY:l,strokeUniform:h}=this.options,u=new D(Math.tan(Le(s)),Math.tan(Le(r))),d=this.strokeProjectionMagnitude,g=h?d/l/Math.sqrt(1/l**2+1/o**2*u.y**2):d/Math.sqrt(1+u.y**2),p=new D(Math.sqrt(Math.max(d**2-g**2,0)),g),m=h?d/Math.sqrt(1+u.x**2*(1/l)**2/(1/o+1/o*u.x*u.y)**2):d/Math.sqrt(1+u.x**2/(1+u.x*u.y)**2),y=new D(m,Math.sqrt(Math.max(d**2-m**2,0)));return[y,y.scalarMultiply(-1),p,p.scalarMultiply(-1)].map(_=>this.applySkew(h?_.multiply(this.strokeUniformScalar):_)).forEach(_=>{qd(_,t,e)&&i.push(this.applySkew(this.A).add(_))}),i}projectRound(){const t=[];t.push(...this.projectBevel());const e=this.alpha%xs==0,i=this.applySkew(this.A),s=t[e?0:2].subtract(i),r=t[e?1:0].subtract(i),o=e?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),l=Oo(s,o)>0,h=l?s:r,u=l?r:s;return this.isSkewed()?t.push(...this.projectRoundWithSkew(h,u)):t.push(...this.projectRoundNoSkew(h,u)),t}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t,angle:this.alpha,bisector:this.bisector}))}}class tv extends w_{constructor(t,e,i){super(i),this.A=new D(t),this.T=new D(e)}calcOrthogonalProjection(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const s=this.createSideVector(t,e);return this.scaleUnitVector(rg(s),i)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const t=[];if(!this.isSkewed()&&this.A.eq(this.T)){const e=new D(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.applySkew(this.A.add(e)),this.applySkew(this.A.subtract(e)))}else t.push(...new Po(this.A,this.T,this.T,this.options).projectRound());return t}projectSquare(){const t=[];if(this.A.eq(this.T)){const e=new D(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.A.add(e),this.A.subtract(e))}else{const e=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),i=this.scaleUnitVector(Ph(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),s=this.A.add(i);t.push(s.add(e),s.subtract(e))}return t.map(e=>this.applySkew(e))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t}))}}const b_=function(n,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const i=[];if(n.length===0)return i;const s=n.reduce((r,o)=>(r[r.length-1].eq(o)||r.push(new D(o)),r),[new D(n[0])]);if(s.length===1)e=!0;else if(!e){const r=s[0],o=((l,h)=>{for(let u=l.length-1;u>=0;u--)if(h(l[u],u,l))return u;return-1})(s,l=>!l.eq(r));s.splice(o+1)}return s.forEach((r,o,l)=>{let h,u;o===0?(u=l[1],h=e?r:l[l.length-1]):o===l.length-1?(h=l[o-1],u=e?r:l[0]):(h=l[o-1],u=l[o+1]),e&&l.length===1?i.push(...new tv(r,r,t).project()):!e||o!==0&&o!==l.length-1?i.push(...new Po(r,h,u,t).project()):i.push(...new tv(r,o===0?u:h,t).project())}),i},hg=n=>{const t={};return Object.keys(n).forEach(e=>{t[e]={},Object.keys(n[e]).forEach(i=>{t[e][i]=I({},n[e][i])})}),t},x_=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Eh=n=>{const t=[];for(let e,i=0;i<n.length;i++)(e=n4(n,i))!==!1&&t.push(e);return t},n4=(n,t)=>{const e=n.charCodeAt(t);if(isNaN(e))return"";if(e<55296||e>57343)return n.charAt(t);if(55296<=e&&e<=56319){if(n.length<=t+1)throw"High surrogate without following low surrogate";const s=n.charCodeAt(t+1);if(56320>s||s>57343)throw"High surrogate without following low surrogate";return n.charAt(t)+n.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";const i=n.charCodeAt(t-1);if(55296>i||i>56319)throw"Low surrogate without preceding high surrogate";return!1};var s4=Object.freeze({__proto__:null,capitalize:function(n){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return"".concat(n.charAt(0).toUpperCase()).concat(t?n.slice(1):n.slice(1).toLowerCase())},escapeXml:x_,graphemeSplit:Eh});const kh=function(n,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==t.fill||n.stroke!==t.stroke||n.strokeWidth!==t.strokeWidth||n.fontSize!==t.fontSize||n.fontFamily!==t.fontFamily||n.fontWeight!==t.fontWeight||n.fontStyle!==t.fontStyle||n.textBackgroundColor!==t.textBackgroundColor||n.deltaY!==t.deltaY||e&&(n.overline!==t.overline||n.underline!==t.underline||n.linethrough!==t.linethrough)},C_=(n,t)=>{const e=t.split(`
`),i=[];let s=-1,r={};n=hg(n);for(let o=0;o<e.length;o++){const l=Eh(e[o]);if(n[o])for(let h=0;h<l.length;h++){s++;const u=n[o][h];u&&Object.keys(u).length>0&&(kh(r,u,!0)?i.push({start:s,end:s+1,style:u}):i[i.length-1].end++),r=u||{}}else s+=l.length,r={}}return i},S_=(n,t)=>{if(!Array.isArray(n))return hg(n);const e=t.split(Nf),i={};let s=-1,r=0;for(let o=0;o<e.length;o++){const l=Eh(e[o]);for(let h=0;h<l.length;h++)s++,n[r]&&n[r].start<=s&&s<n[r].end&&(i[o]=i[o]||{},i[o][h]=I({},n[r].style),s===n[r].end-1&&r++)}return i},lr=["display","transform",He,"fill-opacity","fill-rule","opacity",Ei,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function ev(n,t){const e=n.nodeName,i=n.getAttribute("class"),s=n.getAttribute("id"),r="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+e,"i"),t=t.replace(o,""),s&&t.length&&(o=new RegExp("#"+s+r,"i"),t=t.replace(o,"")),i&&t.length){const l=i.split(" ");for(let h=l.length;h--;)o=new RegExp("\\."+l[h]+r,"i"),t=t.replace(o,"")}return t.length===0}function r4(n,t){let e=!0;const i=ev(n,t.pop());return i&&t.length&&(e=function(s,r){let o,l=!0;for(;s.parentElement&&s.parentElement.nodeType===1&&r.length;)l&&(o=r.pop()),l=ev(s=s.parentElement,o);return r.length===0}(n,t)),i&&e&&t.length===0}const o4=n=>{var t;return(t=RM[n])!==null&&t!==void 0?t:n},a4=new RegExp("(".concat(xn,")"),"gi"),l4=n=>n.replace(a4," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var iv,nv,sv,rv,ov,av,lv;const Pi="(".concat(xn,")"),c4=String.raw(iv||(iv=rr(["(skewX)(",")"],["(skewX)\\(","\\)"])),Pi),h4=String.raw(nv||(nv=rr(["(skewY)(",")"],["(skewY)\\(","\\)"])),Pi),u4=String.raw(sv||(sv=rr(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Pi,Pi,Pi),d4=String.raw(rv||(rv=rr(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Pi,Pi),f4=String.raw(ov||(ov=rr(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Pi,Pi),g4=String.raw(av||(av=rr(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Pi,Pi,Pi,Pi,Pi,Pi),ug="(?:".concat(g4,"|").concat(f4,"|").concat(u4,"|").concat(d4,"|").concat(c4,"|").concat(h4,")"),p4="(?:".concat(ug,"*)"),m4=String.raw(lv||(lv=rr(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),p4),v4=new RegExp(m4),y4=new RegExp(ug),_4=new RegExp(ug,"g");function il(n){const t=[];if(!(n=l4(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!v4.test(n))return[...ci];for(const e of n.matchAll(_4)){const i=y4.exec(e[0]);if(!i)continue;let s=ci;const r=i.filter(y=>!!y),[,o,...l]=r,[h,u,d,g,p,m]=l.map(y=>parseFloat(y));switch(o){case"translate":s=Vo(h,u);break;case Uf:s=Ho({angle:h},{x:u,y:d});break;case bh:s=Ch(h,u);break;case Bo:s=Kf(h);break;case zo:s=qf(h);break;case"matrix":s=[h,u,d,g,p,m]}t.push(s)}return xh(t)}function w4(n,t,e,i){const s=Array.isArray(t);let r,o=t;if(n!==He&&n!==Ei||t!==Mi){if(n==="strokeUniform")return t==="non-scaling-stroke";if(n==="strokeDashArray")o=t===Mi?null:t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")o=e&&e.transformMatrix?De(e.transformMatrix,il(t)):il(t);else if(n==="visible")o=t!==Mi&&t!=="hidden",e&&e.visible===!1&&(o=!1);else if(n==="opacity")o=parseFloat(t),e&&e.opacity!==void 0&&(o*=e.opacity);else if(n==="textAnchor")o=t==="start"?he:t==="end"?Ve:It;else if(n==="charSpacing")r=Ti(t,i)/i*1e3;else if(n==="paintFirst"){const l=t.indexOf(He),h=t.indexOf(Ei);o=He,(l>-1&&h>-1&&h<l||l===-1&&h>-1)&&(o=Ei)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return t;if(n==="imageSmoothing")return t==="optimizeQuality";r=s?t.map(Ti):Ti(t,i)}}else o="";return!s&&isNaN(r)?o:r}function T_(n,t){const e=n.match(IM);if(!e)return;const i=e[1],s=e[3],r=e[4],o=e[5],l=e[6];i&&(t.fontStyle=i),s&&(t.fontWeight=isNaN(parseFloat(s))?s:parseFloat(s)),r&&(t.fontSize=Ti(r)),l&&(t.fontFamily=l),o&&(t.lineHeight=o==="normal"?1:o)}function ef(n,t){n.replace(/;\s*$/,"").split(";").forEach(e=>{if(!e)return;const[i,s]=e.split(":");t[i.trim().toLowerCase()]=s.trim()})}function O_(n){const t={},e=n.getAttribute("style");return e&&(typeof e=="string"?ef(e,t):function(i,s){Object.entries(i).forEach(r=>{let[o,l]=r;l!==void 0&&(s[o.toLowerCase()]=l)})}(e,t)),t}const b4={stroke:"strokeOpacity",fill:"fillOpacity"};function Zn(n,t,e){if(!n)return{};let i,s={},r=Wf;n.parentNode&&$m.test(n.parentNode.nodeName)&&(s=Zn(n.parentElement,t,e),s.fontSize&&(i=r=Ti(s.fontSize)));const o=I(I(I({},t.reduce((u,d)=>{const g=n.getAttribute(d);return g&&(u[d]=g),u},{})),function(u){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g={};for(const p in d)r4(u,p.split(" "))&&(g=I(I({},g),d[p]));return g}(n,e)),O_(n));o[dd]&&n.setAttribute(dd,o[dd]),o[ud]&&(i=Ti(o[ud],r),o[ud]="".concat(i));const l={};for(const u in o){const d=o4(u),g=w4(d,o[u],s,i);l[d]=g}l&&l.font&&T_(l.font,l);const h=I(I({},s),l);return $m.test(n.nodeName)?h:function(u){const d=ge.getDefaults();return Object.entries(b4).forEach(g=>{let[p,m]=g;if(u[m]===void 0||u[p]==="")return;if(u[p]===void 0){if(!d[p])return;u[p]=d[p]}if(u[p].indexOf("url(")===0)return;const y=new se(u[p]);u[p]=y.setAlpha(Me(y.getAlpha()*u[m],2)).toRgba()}),u}(h)}const x4=["left","top","width","height","visible"],P_=["rx","ry"];class pi extends ge{static getDefaults(){return I(I({},super.getDefaults()),pi.ownDefaults)}constructor(t){super(),Object.assign(this,pi.ownDefaults),this.setOptions(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:e}=this;t&&!e?this.ry=t:e&&!t&&(this.rx=e)}_render(t){const{width:e,height:i}=this,s=-e/2,r=-i/2,o=this.rx?Math.min(this.rx,e/2):0,l=this.ry?Math.min(this.ry,i/2):0,h=o!==0||l!==0;t.beginPath(),t.moveTo(s+o,r),t.lineTo(s+e-o,r),h&&t.bezierCurveTo(s+e-Fs*o,r,s+e,r+Fs*l,s+e,r+l),t.lineTo(s+e,r+i-l),h&&t.bezierCurveTo(s+e,r+i-Fs*l,s+e-Fs*o,r+i,s+e-o,r+i),t.lineTo(s+o,r+i),h&&t.bezierCurveTo(s+Fs*o,r+i,s,r+i-Fs*l,s,r+i-l),t.lineTo(s,r+l),h&&t.bezierCurveTo(s,r+Fs*l,s+Fs*o,r,s+o,r),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...P_,...t])}_toSVG(){const{width:t,height:e,rx:i,ry:s}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-t/2,'" y="').concat(-e/2,'" rx="').concat(i,'" ry="').concat(s,'" width="').concat(t,'" height="').concat(e,`" />
`)]}static async fromElement(t,e,i){const s=Zn(t,this.ATTRIBUTE_NAMES,i),{left:r=0,top:o=0,width:l=0,height:h=0,visible:u=!0}=s,d=ke(s,x4);return new this(I(I(I({},e),d),{},{left:r,top:o,width:l,height:h,visible:!!(u&&l&&h)}))}}A(pi,"type","Rect"),A(pi,"cacheProperties",[...Os,...P_]),A(pi,"ownDefaults",{rx:0,ry:0}),A(pi,"ATTRIBUTE_NAMES",[...lr,"x","y","rx","ry","width","height"]),lt.setClass(pi),lt.setSVGClass(pi);const ps="initialization",qc="added",dg="removed",Zc="imperative",M_=(n,t)=>{const{strokeUniform:e,strokeWidth:i,width:s,height:r,group:o}=t,l=o&&o!==n?gl(o.calcTransformMatrix(),n.calcTransformMatrix()):null,h=l?t.getRelativeCenterPoint().transform(l):t.getRelativeCenterPoint(),u=!t.isStrokeAccountedForInDimensions(),d=e&&u?$y(new D(i,i),void 0,n.calcTransformMatrix()):Gf,g=!e&&u?i:0,p=Sh(s+g,r+g,xh([l,t.calcOwnMatrix()],!0)).add(d).scalarDivide(2);return[h.subtract(p),h.add(p)]};class pl{calcLayoutResult(t,e){if(this.shouldPerformLayout(t))return this.calcBoundingBox(e,t)}shouldPerformLayout(t){let{type:e,prevStrategy:i,strategy:s}=t;return e===ps||e===Zc||!!i&&s!==i}shouldLayoutClipPath(t){let{type:e,target:{clipPath:i}}=t;return e!==ps&&i&&!i.absolutePositioned}getInitialSize(t,e){return e.size}calcBoundingBox(t,e){const{type:i,target:s}=e;if(i===Zc&&e.overrides)return e.overrides;if(t.length===0)return;const{left:r,top:o,width:l,height:h}=$n(t.map(g=>M_(s,g)).reduce((g,p)=>g.concat(p),[])),u=new D(l,h),d=new D(r,o).add(u.scalarDivide(2));if(i===ps){const g=this.getInitialSize(e,{size:u,center:d});return{center:d,relativeCorrection:new D(0,0),size:g}}return{center:d.transform(s.calcOwnMatrix()),size:u}}}A(pl,"type","strategy");class Jc extends pl{shouldPerformLayout(t){return!0}}A(Jc,"type","fit-content"),lt.setClass(Jc);const C4=["strategy"],S4=["target","strategy","bubbles","prevStrategy"],E_="layoutManager";class jo{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Jc;A(this,"strategy",void 0),this.strategy=t,this._subscriptions=new Map}performLayout(t){const e=I(I({bubbles:!0,strategy:this.strategy},t),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(e);const i=this.getLayoutResult(e);i&&this.commitLayout(e,i),this.onAfterLayout(e,i),this._prevLayoutStrategy=e.strategy}attachHandlers(t,e){const{target:i}=e;return[Nc,Ey,Ja,ky,wh,Ay,Wc,Dy,MM].map(s=>t.on(s,r=>this.performLayout(s===Nc?{type:"object_modified",trigger:s,e:r,target:i}:{type:"object_modifying",trigger:s,e:r,target:i})))}subscribe(t,e){this.unsubscribe(t,e);const i=this.attachHandlers(t,e);this._subscriptions.set(t,i)}unsubscribe(t,e){(this._subscriptions.get(t)||[]).forEach(i=>i()),this._subscriptions.delete(t)}unsubscribeTargets(t){t.targets.forEach(e=>this.unsubscribe(e,t))}subscribeTargets(t){t.targets.forEach(e=>this.subscribe(e,t))}onBeforeLayout(t){const{target:e,type:i}=t,{canvas:s}=e;if(i===ps||i===qc?this.subscribeTargets(t):i===dg&&this.unsubscribeTargets(t),e.fire("layout:before",{context:t}),s&&s.fire("object:layout:before",{target:e,context:t}),i===Zc&&t.deep){const r=ke(t,C4);e.forEachObject(o=>o.layoutManager&&o.layoutManager.performLayout(I(I({},r),{},{bubbles:!1,target:o})))}}getLayoutResult(t){const{target:e,strategy:i,type:s}=t,r=i.calcLayoutResult(t,e.getObjects());if(!r)return;const o=s===ps?new D:e.getRelativeCenterPoint(),{center:l,correction:h=new D,relativeCorrection:u=new D}=r,d=o.subtract(l).add(h).transform(s===ps?ci:zi(e.calcOwnMatrix()),!0).add(u);return{result:r,prevCenter:o,nextCenter:l,offset:d}}commitLayout(t,e){const{target:i}=t,{result:{size:s},nextCenter:r}=e;var o,l;i.set({width:s.x,height:s.y}),this.layoutObjects(t,e),t.type===ps?i.set({left:(o=t.x)!==null&&o!==void 0?o:r.x+s.x*Xe(i.originX),top:(l=t.y)!==null&&l!==void 0?l:r.y+s.y*Xe(i.originY)}):(i.setPositionByOrigin(r,It,It),i.setCoords(),i.set("dirty",!0))}layoutObjects(t,e){const{target:i}=t;i.forEachObject(s=>{s.group===i&&this.layoutObject(t,e,s)}),t.strategy.shouldLayoutClipPath(t)&&this.layoutObject(t,e,i.clipPath)}layoutObject(t,e,i){let{offset:s}=e;i.set({left:i.left+s.x,top:i.top+s.y})}onAfterLayout(t,e){const{target:i,strategy:s,bubbles:r,prevStrategy:o}=t,l=ke(t,S4),{canvas:h}=i;i.fire("layout:after",{context:t,result:e}),h&&h.fire("object:layout:after",{context:t,result:e,target:i});const u=i.parent;r&&u!=null&&u.layoutManager&&((l.path||(l.path=[])).push(i),u.layoutManager.performLayout(I(I({},l),{},{target:u}))),i.set("dirty",!0)}dispose(){const{_subscriptions:t}=this;t.forEach(e=>e.forEach(i=>i())),t.clear()}toObject(){return{type:E_,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}lt.setClass(jo,E_);const T4=["type","objects","layoutManager"];class O4 extends jo{performLayout(){}}class ki extends or(ge){static getDefaults(){return I(I({},super.getDefaults()),ki.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),A(this,"_activeObjects",[]),A(this,"__objectSelectionTracker",void 0),A(this,"__objectSelectionDisposer",void 0),Object.assign(this,ki.ownDefaults),this.setOptions(e),this.groupInit(t,e)}groupInit(t,e){var i;this._objects=[...t],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(s=>{this.enterGroup(s,!1)}),this.layoutManager=(i=e.layoutManager)!==null&&i!==void 0?i:new jo,this.layoutManager.performLayout({type:ps,target:this,targets:[...t],x:e.left,y:e.top})}canEnterGroup(t){return t===this||this.isDescendantOf(t)?(bs("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(t)===-1||(bs("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(t){return t.filter((e,i,s)=>this.canEnterGroup(e)&&s.indexOf(e)===i)}add(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const s=this._filterObjectsBeforeEnteringGroup(e),r=super.add(...s);return this._onAfterObjectsChange(qc,s),r}insertAt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),s=1;s<e;s++)i[s-1]=arguments[s];const r=this._filterObjectsBeforeEnteringGroup(i),o=super.insertAt(t,...r);return this._onAfterObjectsChange(qc,r),o}remove(){const t=super.remove(...arguments);return this._onAfterObjectsChange(dg,t),t}_onObjectAdded(t){this.enterGroup(t,!0),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t,e){this.exitGroup(t,e),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onAfterObjectsChange(t,e){this.layoutManager.performLayout({type:t,targets:e,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(t,e){const i=this[t];return super._set(t,e),t==="canvas"&&i!==e&&(this._objects||[]).forEach(s=>{s._set(t,e)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(t,e){let{target:i}=e;const s=this._activeObjects;if(t)s.push(i),this._set("dirty",!0);else if(s.length>0){const r=s.indexOf(i);r>-1&&(s.splice(r,1),this._set("dirty",!0))}}_watchObject(t,e){t&&this._watchObject(!1,e),t?(e.on("selected",this.__objectSelectionTracker),e.on("deselected",this.__objectSelectionDisposer)):(e.off("selected",this.__objectSelectionTracker),e.off("deselected",this.__objectSelectionDisposer))}enterGroup(t,e){t.group&&t.group.remove(t),t._set("parent",this),this._enterGroup(t,e)}_enterGroup(t,e){e&&Ao(t,De(zi(this.calcTransformMatrix()),t.calcTransformMatrix())),this._shouldSetNestedCoords()&&t.setCoords(),t._set("group",this),t._set("canvas",this.canvas),this._watchObject(!0,t);const i=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();i&&(i===t||t.isDescendantOf(i))&&this._activeObjects.push(t)}exitGroup(t,e){this._exitGroup(t,e),t._set("parent",void 0),t._set("canvas",void 0)}_exitGroup(t,e){t._set("group",void 0),e||(Ao(t,De(this.calcTransformMatrix(),t.calcTransformMatrix())),t.setCoords()),this._watchObject(!1,t);const i=this._activeObjects.length>0?this._activeObjects.indexOf(t):-1;i>-1&&this._activeObjects.splice(i,1)}shouldCache(){const t=ge.prototype.shouldCache.call(this);if(t){for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1,!1}return t}willDrawShadow(){if(super.willDrawShadow())return!0;for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(t){this._renderBackground(t);for(let i=0;i<this._objects.length;i++){var e;(e=this.canvas)!==null&&e!==void 0&&e.preserveObjectStacking&&this._objects[i].group!==this?(t.save(),t.transform(...zi(this.calcTransformMatrix())),this._objects[i].render(t),t.restore()):this._objects[i].group===this&&this._objects[i].render(t)}this._drawClipPath(t,this.clipPath)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(t=>t.setCoords())}triggerLayout(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(I({target:this,type:Zc},t))}render(t){this._transformDone=!0,super.render(t),this._transformDone=!1}__serializeObjects(t,e){const i=this.includeDefaultValues;return this._objects.filter(function(s){return!s.excludeFromExport}).map(function(s){const r=s.includeDefaultValues;s.includeDefaultValues=i;const o=s[t||"toObject"](e);return s.includeDefaultValues=r,o})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.layoutManager.toObject();return I(I(I({},super.toObject(["subTargetCheck","interactive",...t])),e.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:e}:{}),{},{objects:this.__serializeObjects("toObject",t)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(t=>{this._watchObject(!1,t),t.dispose()}),super.dispose()}_createSVGBgRect(t){if(!this.backgroundColor)return"";const e=pi.prototype._toSVG.call(this),i=e.indexOf("COMMON_PARTS");e[i]='for="group" ';const s=e.join("");return t?t(s):s}_toSVG(t){const e=["<g ","COMMON_PARTS",` >
`],i=this._createSVGBgRect(t);i&&e.push("		",i);for(let s=0;s<this._objects.length;s++)e.push("		",this._objects[s].toSVG(t));return e.push(`</g>
`),e}getSvgStyles(){const t=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")}toClipPathSVG(t){const e=[],i=this._createSVGBgRect(t);i&&e.push("	",i);for(let s=0;s<this._objects.length;s++)e.push("	",this._objects[s].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}static fromObject(t,e){let{type:i,objects:s=[],layoutManager:r}=t,o=ke(t,T4);return Promise.all([ko(s,e),fl(o,e)]).then(l=>{let[h,u]=l;const d=new this(h,I(I(I({},o),u),{},{layoutManager:new O4}));if(r){const g=lt.getClass(r.type),p=lt.getClass(r.strategy);d.layoutManager=new g(new p)}else d.layoutManager=new jo;return d.layoutManager.subscribeTargets({type:ps,target:d,targets:d.getObjects()}),d.setCoords(),d})}}A(ki,"type","Group"),A(ki,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),lt.setClass(ki);const k_=(n,t)=>Math.min(t.width/n.width,t.height/n.height),A_=(n,t)=>Math.max(t.width/n.width,t.height/n.height),nf="\\s*,?\\s*",oa="".concat(nf,"(").concat(xn,")"),P4="".concat(oa).concat(oa).concat(oa).concat(nf,"([01])").concat(nf,"([01])").concat(oa).concat(oa),M4={m:"l",M:"L"},E4=(n,t,e,i,s,r,o,l,h,u,d)=>{const g=En(n),p=kn(n),m=En(t),y=kn(t),_=e*s*m-i*r*y+o,b=i*s*m+e*r*y+l;return["C",u+h*(-e*s*p-i*r*g),d+h*(-i*s*p+e*r*g),_+h*(e*s*y+i*r*m),b+h*(i*s*y-e*r*m),_,b]},cv=(n,t,e,i)=>{const s=Math.atan2(t,n),r=Math.atan2(i,e);return r>=s?r-s:2*Math.PI-(s-r)};function sf(n,t,e,i,s,r,o,l){let h;if($t.cachesBoundsOfCurve&&(h=[...arguments].join(),To.boundsOfCurveCache[h]))return To.boundsOfCurveCache[h];const u=Math.sqrt,d=Math.abs,g=[],p=[[0,0],[0,0]];let m=6*n-12*e+6*s,y=-3*n+9*e-9*s+3*o,_=3*e-3*n;for(let P=0;P<2;++P){if(P>0&&(m=6*t-12*i+6*r,y=-3*t+9*i-9*r+3*l,_=3*i-3*t),d(y)<1e-12){if(d(m)<1e-12)continue;const $=-_/m;0<$&&$<1&&g.push($);continue}const F=m*m-4*_*y;if(F<0)continue;const X=u(F),R=(-m+X)/(2*y);0<R&&R<1&&g.push(R);const V=(-m-X)/(2*y);0<V&&V<1&&g.push(V)}let b=g.length;const x=b,T=j_(n,t,e,i,s,r,o,l);for(;b--;){const{x:P,y:F}=T(g[b]);p[0][b]=P,p[1][b]=F}p[0][x]=n,p[1][x]=t,p[0][x+1]=o,p[1][x+1]=l;const O=[new D(Math.min(...p[0]),Math.min(...p[1])),new D(Math.max(...p[0]),Math.max(...p[1]))];return $t.cachesBoundsOfCurve&&(To.boundsOfCurveCache[h]=O),O}const k4=(n,t,e)=>{let[i,s,r,o,l,h,u,d]=e;const g=((p,m,y,_,b,x,T)=>{if(y===0||_===0)return[];let O=0,P=0,F=0;const X=Math.PI,R=T*Xf,V=kn(R),$=En(R),st=.5*(-$*p-V*m),ht=.5*(-$*m+V*p),ut=y**2,ct=_**2,bt=ht**2,Et=st**2,dt=ut*ct-ut*bt-ct*Et;let _t=Math.abs(y),gt=Math.abs(_);if(dt<0){const xt=Math.sqrt(1-dt/(ut*ct));_t*=xt,gt*=xt}else F=(b===x?-1:1)*Math.sqrt(dt/(ut*bt+ct*Et));const Kt=F*_t*ht/gt,zt=-F*gt*st/_t,Ut=$*Kt-V*zt+.5*p,ne=V*Kt+$*zt+.5*m;let pe=cv(1,0,(st-Kt)/_t,(ht-zt)/gt),qt=cv((st-Kt)/_t,(ht-zt)/gt,(-st-Kt)/_t,(-ht-zt)/gt);x===0&&qt>0?qt-=2*X:x===1&&qt<0&&(qt+=2*X);const oe=Math.ceil(Math.abs(qt/X*2)),we=[],G=qt/oe,pt=8/3*Math.sin(G/4)*Math.sin(G/4)/Math.sin(G/2);let ot=pe+G;for(let xt=0;xt<oe;xt++)we[xt]=E4(pe,ot,$,V,_t,gt,Ut,ne,pt,O,P),O=we[xt][5],P=we[xt][6],pe=ot,ot+=G;return we})(u-n,d-t,s,r,l,h,o);for(let p=0,m=g.length;p<m;p++)g[p][1]+=n,g[p][2]+=t,g[p][3]+=n,g[p][4]+=t,g[p][5]+=n,g[p][6]+=t;return g},D_=n=>{let t=0,e=0,i=0,s=0;const r=[];let o,l=0,h=0;for(const u of n){const d=[...u];let g;switch(d[0]){case"l":d[1]+=t,d[2]+=e;case"L":t=d[1],e=d[2],g=["L",t,e];break;case"h":d[1]+=t;case"H":t=d[1],g=["L",t,e];break;case"v":d[1]+=e;case"V":e=d[1],g=["L",t,e];break;case"m":d[1]+=t,d[2]+=e;case"M":t=d[1],e=d[2],i=d[1],s=d[2],g=["M",t,e];break;case"c":d[1]+=t,d[2]+=e,d[3]+=t,d[4]+=e,d[5]+=t,d[6]+=e;case"C":l=d[3],h=d[4],t=d[5],e=d[6],g=["C",d[1],d[2],l,h,t,e];break;case"s":d[1]+=t,d[2]+=e,d[3]+=t,d[4]+=e;case"S":o==="C"?(l=2*t-l,h=2*e-h):(l=t,h=e),t=d[3],e=d[4],g=["C",l,h,d[1],d[2],t,e],l=g[3],h=g[4];break;case"q":d[1]+=t,d[2]+=e,d[3]+=t,d[4]+=e;case"Q":l=d[1],h=d[2],t=d[3],e=d[4],g=["Q",l,h,t,e];break;case"t":d[1]+=t,d[2]+=e;case"T":o==="Q"?(l=2*t-l,h=2*e-h):(l=t,h=e),t=d[1],e=d[2],g=["Q",l,h,t,e];break;case"a":d[6]+=t,d[7]+=e;case"A":k4(t,e,d).forEach(p=>r.push(p)),t=d[6],e=d[7];break;case"z":case"Z":t=i,e=s,g=["Z"]}g?(r.push(g),o=g[0]):o=""}return r},Qc=(n,t,e,i)=>Math.sqrt((e-n)**2+(i-t)**2),j_=(n,t,e,i,s,r,o,l)=>h=>{const u=h**3,d=(m=>3*m**2*(1-m))(h),g=(m=>3*m*(1-m)**2)(h),p=(m=>(1-m)**3)(h);return new D(o*u+s*d+e*g+n*p,l*u+r*d+i*g+t*p)},I_=n=>n**2,R_=n=>2*n*(1-n),L_=n=>(1-n)**2,A4=(n,t,e,i,s,r,o,l)=>h=>{const u=I_(h),d=R_(h),g=L_(h),p=3*(g*(e-n)+d*(s-e)+u*(o-s)),m=3*(g*(i-t)+d*(r-i)+u*(l-r));return Math.atan2(m,p)},D4=(n,t,e,i,s,r)=>o=>{const l=I_(o),h=R_(o),u=L_(o);return new D(s*l+e*h+n*u,r*l+i*h+t*u)},j4=(n,t,e,i,s,r)=>o=>{const l=1-o,h=2*(l*(e-n)+o*(s-e)),u=2*(l*(i-t)+o*(r-i));return Math.atan2(u,h)},hv=(n,t,e)=>{let i=new D(t,e),s=0;for(let r=1;r<=100;r+=1){const o=n(r/100);s+=Qc(i.x,i.y,o.x,o.y),i=o}return s},I4=(n,t)=>{let e,i=0,s=0,r={x:n.x,y:n.y},o=I({},r),l=.01,h=0;const u=n.iterator,d=n.angleFinder;for(;s<t&&l>1e-4;)o=u(i),h=i,e=Qc(r.x,r.y,o.x,o.y),e+s>t?(i-=l,l/=2):(r=o,i+=l,s+=e);return I(I({},o),{},{angle:d(h)})},fg=n=>{let t,e,i=0,s=0,r=0,o=0,l=0;const h=[];for(const u of n){const d={x:s,y:r,command:u[0],length:0};switch(u[0]){case"M":e=d,e.x=o=s=u[1],e.y=l=r=u[2];break;case"L":e=d,e.length=Qc(s,r,u[1],u[2]),s=u[1],r=u[2];break;case"C":t=j_(s,r,u[1],u[2],u[3],u[4],u[5],u[6]),e=d,e.iterator=t,e.angleFinder=A4(s,r,u[1],u[2],u[3],u[4],u[5],u[6]),e.length=hv(t,s,r),s=u[5],r=u[6];break;case"Q":t=D4(s,r,u[1],u[2],u[3],u[4]),e=d,e.iterator=t,e.angleFinder=j4(s,r,u[1],u[2],u[3],u[4]),e.length=hv(t,s,r),s=u[3],r=u[4];break;case"Z":e=d,e.destX=o,e.destY=l,e.length=Qc(s,r,o,l),s=o,r=l}i+=e.length,h.push(e)}return h.push({length:i,x:s,y:r}),h},F_=function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fg(n),i=0;for(;t-e[i].length>0&&i<e.length-2;)t-=e[i].length,i++;const s=e[i],r=t/s.length,o=n[i];switch(s.command){case"M":return{x:s.x,y:s.y,angle:0};case"Z":return I(I({},new D(s.x,s.y).lerp(new D(s.destX,s.destY),r)),{},{angle:Math.atan2(s.destY-s.y,s.destX-s.x)});case"L":return I(I({},new D(s.x,s.y).lerp(new D(o[1],o[2]),r)),{},{angle:Math.atan2(o[2]-s.y,o[1]-s.x)});case"C":case"Q":return I4(s,t)}},R4=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),uv=new RegExp(P4,"g"),L4=new RegExp(xn,"gi"),F4={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},B_=n=>{var t;const e=[],i=(t=n.match(R4))!==null&&t!==void 0?t:[];for(const s of i){const r=s[0];if(r==="z"||r==="Z"){e.push([r]);continue}const o=F4[r.toLowerCase()];let l=[];if(r==="a"||r==="A"){uv.lastIndex=0;for(let h=null;h=uv.exec(s);)l.push(...h.slice(1))}else l=s.match(L4)||[];for(let h=0;h<l.length;h+=o){const u=new Array(o),d=M4[r];u[0]=h>0&&d?d:r;for(let g=0;g<o;g++)u[g+1]=parseFloat(l[h+g]);e.push(u)}}return e},z_=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=new D(n[0]),i=new D(n[1]),s=1,r=0;const o=[],l=n.length,h=l>2;let u;for(h&&(s=n[2].x<i.x?-1:n[2].x===i.x?0:1,r=n[2].y<i.y?-1:n[2].y===i.y?0:1),o.push(["M",e.x-s*t,e.y-r*t]),u=1;u<l;u++){if(!e.eq(i)){const d=e.midPointFrom(i);o.push(["Q",e.x,e.y,d.x,d.y])}e=n[u],u+1<n.length&&(i=n[u+1])}return h&&(s=e.x>n[u-2].x?1:e.x===n[u-2].x?0:-1,r=e.y>n[u-2].y?1:e.y===n[u-2].y?0:-1),o.push(["L",e.x+s*t,e.y+r*t]),o},gg=(n,t)=>n.map(e=>e.map((i,s)=>s===0||t===void 0?i:Me(i,t)).join(" ")).join(" ");function th(n,t){const e=n.style;e&&t&&(typeof t=="string"?e.cssText+=";"+t:Object.entries(t).forEach(i=>{let[s,r]=i;return e.setProperty(s,r)}))}const Tr=(n,t)=>Math.floor(Math.random()*(t-n+1))+n;function V_(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e=t.onComplete||kr,i=new(Yn()).XMLHttpRequest,s=t.signal,r=function(){i.abort()},o=function(){s&&s.removeEventListener("abort",r),i.onerror=i.ontimeout=kr};if(s&&s.aborted)throw new Yf("request");return s&&s.addEventListener("abort",r,{once:!0}),i.onreadystatechange=function(){i.readyState===4&&(o(),e(i),i.onreadystatechange=kr)},i.onerror=i.ontimeout=o,i.open("get",n,!0),i.send(),i}const kc=(n,t)=>{let e=n._findCenterFromElement();n.transformMatrix&&((i=>{if(i.transformMatrix){const{scaleX:s,scaleY:r,angle:o,skewX:l}=jr(i.transformMatrix);i.flipX=!1,i.flipY=!1,i.set(Ai,s),i.set(Ji,r),i.angle=o,i.skewX=l,i.skewY=0}})(n),e=e.transform(n.transformMatrix)),delete n.transformMatrix,t&&(n.scaleX*=t.scaleX,n.scaleY*=t.scaleY,n.cropX=t.cropX,n.cropY=t.cropY,e.x+=t.offsetLeft,e.y+=t.offsetTop,n.width=t.width,n.height=t.height),n.setPositionByOrigin(e,It,It)};var J=Object.freeze({__proto__:null,addTransformToObject:Uy,animate:ag,animateColor:n_,applyTransformToObject:Ao,calcAngleBetweenVectors:Kc,calcDimensionsMatrix:dl,calcPlaneChangeMatrix:gl,calcVectorRotation:t_,cancelAnimFrame:Ry,capValue:Ir,composeMatrix:Vy,copyCanvasElement:n=>{var t;const e=Ee();return e.width=n.width,e.height=n.height,(t=e.getContext("2d"))===null||t===void 0||t.drawImage(n,0,0),e},cos:En,createCanvasElement:Ee,createImage:Ly,createRotateMatrix:Ho,createScaleMatrix:Ch,createSkewXMatrix:Kf,createSkewYMatrix:qf,createTranslateMatrix:Vo,createVector:Gc,crossProduct:Oo,degreesToRadians:Le,dotProduct:e_,ease:HM,enlivenObjectEnlivables:fl,enlivenObjects:ko,findScaleToCover:A_,findScaleToFit:k_,getBoundsOfCurve:sf,getOrthonormalVector:rg,getPathSegmentsInfo:fg,getPointOnPath:F_,getPointer:Ny,getRandomInt:Tr,getRegularPolygonPath:(n,t)=>{const e=2*Math.PI/n;let i=-Qs;n%2==0&&(i+=e/2);const s=new Array(n+1);for(let r=0;r<n;r++){const o=r*e+i,{x:l,y:h}=new D(En(o),kn(o)).scalarMultiply(t);s[r]=[r===0?"M":"L",l,h]}return s[n]=["Z"],s},getSmoothPathFromPoints:z_,getSvgAttributes:n=>{const t=["instantiated_by_use","style","id","class"];switch(n){case"linearGradient":return t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return t.concat(["offset","stop-color","stop-opacity"])}return t},getUnitVector:Ph,groupSVGElements:(n,t)=>n&&n.length===1?n[0]:new ki(n,t),hasStyleChanged:kh,invertTransform:zi,isBetweenVectors:qd,isIdentityMatrix:Fy,isTouchEvent:Uc,isTransparent:__,joinPath:gg,loadImage:za,magnitude:$c,makeBoundingBoxFromPoints:$n,makePathSimpler:D_,matrixToSVG:tl,mergeClipPaths:(n,t)=>{var e;let i=n,s=t;i.inverted&&!s.inverted&&(i=t,s=n),$d(s,(e=s.group)===null||e===void 0?void 0:e.calcTransformMatrix(),i.calcTransformMatrix());const r=i.inverted&&s.inverted;return r&&(i.inverted=s.inverted=!1),new ki([i],{clipPath:s,inverted:r})},multiplyTransformMatrices:De,multiplyTransformMatrixArray:xh,parsePath:B_,parsePreserveAspectRatioAttribute:Jf,parseUnit:Ti,pick:Br,projectStrokeOnPoints:b_,qrDecompose:jr,radiansToDegrees:er,removeFromArray:xr,removeTransformFromObject:(n,t)=>{const e=zi(t),i=De(e,n.calcOwnMatrix());Ao(n,i)},removeTransformMatrixForSvgParsing:kc,request:V_,requestAnimFrame:Ba,resetObjectTransform:Gy,rotatePoint:(n,t,e)=>n.rotate(e,t),rotateVector:sg,saveObjectTransform:tg,sendObjectToPlane:$d,sendPointToPlane:ys,sendVectorToPlane:$y,setStyle:th,sin:kn,sizeAfterTransform:Sh,string:s4,stylesFromArray:S_,stylesToArray:C_,toDataURL:$f,toFixed:Me,transformPath:(n,t,e)=>(e&&(t=De(t,[1,0,0,1,-e.x,-e.y])),n.map(i=>{const s=[...i];for(let r=1;r<i.length-1;r+=2){const{x:o,y:l}=fi({x:i[r],y:i[r+1]},t);s[r]=o,s[r+1]=l}return s})),transformPoint:fi});class H_ extends Qf{constructor(t){let{allowTouchScrolling:e=!1,containerClass:i=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t),A(this,"upper",void 0),A(this,"container",void 0);const{el:s}=this.lower,r=this.createUpperCanvas();this.upper={el:r,ctx:r.getContext("2d")},this.applyCanvasStyle(s,{allowTouchScrolling:e}),this.applyCanvasStyle(r,{allowTouchScrolling:e,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(i),s.parentNode&&s.parentNode.replaceChild(o,s),o.append(s,r),this.container=o}createUpperCanvas(){const{el:t}=this.lower,e=Ee();return e.className=t.className,e.classList.remove("lower-canvas"),e.classList.add("upper-canvas"),e.setAttribute("data-fabric","top"),e.style.cssText=t.style.cssText,e.setAttribute("draggable","true"),e}createContainerElement(){const t=Fr().createElement("div");return t.setAttribute("data-fabric","wrapper"),th(t,{position:"relative"}),Nm(t),t}applyCanvasStyle(t,e){const{styles:i,allowTouchScrolling:s}=e;th(t,I(I({},i),{},{"touch-action":s?"manipulation":Mi})),Nm(t)}setDimensions(t,e){super.setDimensions(t,e);const{el:i,ctx:s}=this.upper;Wy(i,s,t,e)}setCSSDimensions(t){super.setCSSDimensions(t),Ud(this.upper.el,t),Ud(this.container,t)}cleanupDOM(t){const e=this.container,{el:i}=this.lower,{el:s}=this.upper;super.cleanupDOM(t),e.removeChild(s),e.removeChild(i),e.parentNode&&e.parentNode.replaceChild(i,e)}dispose(){super.dispose(),Mn().dispose(this.upper.el),delete this.upper,delete this.container}}class Ah extends fn{constructor(){super(...arguments),A(this,"targets",[]),A(this,"_hoveredTargets",[]),A(this,"_objectsToRender",void 0),A(this,"_currentTransform",null),A(this,"_groupSelector",null),A(this,"contextTopDirty",!1)}static getDefaults(){return I(I({},super.getDefaults()),Ah.ownDefaults)}get upperCanvasEl(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.el}get contextTop(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.ctx}get wrapperEl(){return this.elements.container}initElements(t){this.elements=new H_(t,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(t){this._objectsToRender=void 0,super._onObjectAdded(t)}_onObjectRemoved(t){this._objectsToRender=void 0,t===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[t]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[t]}),t.fire("deselected",{target:t})),t===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(t)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const t=this._activeObject;return!this.preserveObjectStacking&&t?this._objects.filter(e=>!e.group&&e!==t).concat(t):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()}renderTop(){const t=this.contextTop;this.clearContext(t),this.renderTopLayer(t),this.fire("after:render",{ctx:t})}setTargetFindTolerance(t){t=Math.round(t),this.targetFindTolerance=t;const e=this.getRetinaScaling(),i=Math.ceil((2*t+1)*e);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=i,this.pixelFindContext.scale(e,e)}isTargetTransparent(t,e,i){const s=this.targetFindTolerance,r=this.pixelFindContext;this.clearContext(r),r.save(),r.translate(-e+s,-i+s),r.transform(...this.viewportTransform);const o=t.selectionBackgroundColor;t.selectionBackgroundColor="",t.render(r),t.selectionBackgroundColor=o,r.restore();const l=Math.round(s*this.getRetinaScaling());return __(r,l,l,l)}_isSelectionKeyPressed(t){const e=this.selectionKey;return!!e&&(Array.isArray(e)?!!e.find(i=>!!i&&t[i]===!0):t[e])}_shouldClearSelection(t,e){const i=this.getActiveObjects(),s=this._activeObject;return!!(!e||e&&s&&i.length>1&&i.indexOf(e)===-1&&s!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&s&&s!==e)}_shouldCenterTransform(t,e,i){if(!t)return;let s;return e===bh||e===Ai||e===Ji||e===Ja?s=this.centeredScaling||t.centeredScaling:e===Uf&&(s=this.centeredRotation||t.centeredRotation),s?!i:i}_getOriginFromCorner(t,e){const i={x:t.originX,y:t.originY};return e&&(["ml","tl","bl"].includes(e)?i.x=Ve:["mr","tr","br"].includes(e)&&(i.x=he),["tl","mt","tr"].includes(e)?i.y=Nd:["bl","mb","br"].includes(e)&&(i.y=Vi)),i}_setupCurrentTransform(t,e,i){var s;const r=e.group?ys(this.getScenePoint(t),void 0,e.group.calcTransformMatrix()):this.getScenePoint(t),{key:o="",control:l}=e.getActiveControl()||{},h=i&&l?(s=l.getActionHandler(t,e,l))===null||s===void 0?void 0:s.bind(l):Zy,u=((m,y,_,b)=>{if(!y||!m)return"drag";const x=b.controls[y];return x.getActionName(_,x,b)})(i,o,t,e),d=t[this.centeredKey],g=this._shouldCenterTransform(e,u,d)?{x:It,y:It}:this._getOriginFromCorner(e,o),p={target:e,action:u,actionHandler:h,actionPerformed:!1,corner:o,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:r.x-e.left,offsetY:r.y-e.top,originX:g.x,originY:g.y,ex:r.x,ey:r.y,lastX:r.x,lastY:r.y,theta:Le(e.angle),width:e.width,height:e.height,shiftKey:t.shiftKey,altKey:d,original:I(I({},tg(e)),{},{originX:g.x,originY:g.y})};this._currentTransform=p,this.fire("before:transform",{e:t,transform:p})}setCursor(t){this.upperCanvasEl.style.cursor=t}_drawSelection(t){const{x:e,y:i,deltaX:s,deltaY:r}=this._groupSelector,o=new D(e,i).transform(this.viewportTransform),l=new D(e+s,i+r).transform(this.viewportTransform),h=this.selectionLineWidth/2;let u=Math.min(o.x,l.x),d=Math.min(o.y,l.y),g=Math.max(o.x,l.x),p=Math.max(o.y,l.y);this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(u,d,g-u,p-d)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,u+=h,d+=h,g-=h,p-=h,ge.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(u,d,g-u,p-d))}findTarget(t){if(this.skipTargetFind)return;const e=this.getViewportPoint(t),i=this._activeObject,s=this.getActiveObjects();if(this.targets=[],i&&s.length>=1){if(i.findControl(e,Uc(t))||s.length>1&&this.searchPossibleTargets([i],e))return i;if(i===this.searchPossibleTargets([i],e)){if(this.preserveObjectStacking){const r=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,e);return t[this.altSelectionKey]&&o&&o!==i?(this.targets=r,i):o}return i}}return this.searchPossibleTargets(this._objects,e)}_pointIsInObjectSelectionArea(t,e){let i=t.getCoords();const s=this.getZoom(),r=t.padding/s;if(r){const[o,l,h,u]=i,d=Math.atan2(l.y-o.y,l.x-o.x),g=En(d)*r,p=kn(d)*r,m=g+p,y=g-p;i=[new D(o.x-y,o.y-m),new D(l.x+m,l.y-y),new D(h.x+y,h.y+m),new D(u.x-m,u.y+y)]}return xe.isPointInPolygon(e,i)}_checkTarget(t,e){return!!(t&&t.visible&&t.evented&&this._pointIsInObjectSelectionArea(t,ys(e,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing||!this.isTargetTransparent(t,e.x,e.y)))}_searchPossibleTargets(t,e){let i=t.length;for(;i--;){const s=t[i];if(this._checkTarget(s,e)){if(Mc(s)&&s.subTargetCheck){const r=this._searchPossibleTargets(s._objects,e);r&&this.targets.push(r)}return s}}}searchPossibleTargets(t,e){const i=this._searchPossibleTargets(t,e);if(i&&Mc(i)&&i.interactive&&this.targets[0]){const s=this.targets;for(let r=s.length-1;r>0;r--){const o=s[r];if(!Mc(o)||!o.interactive)return o}return s[0]}return i}getViewportPoint(t){return this._pointer?this._pointer:this.getPointer(t,!0)}getScenePoint(t){return this._absolutePointer?this._absolutePointer:this.getPointer(t)}getPointer(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=this.upperCanvasEl,s=i.getBoundingClientRect();let r=Ny(t),o=s.width||0,l=s.height||0;o&&l||(Vi in s&&Nd in s&&(l=Math.abs(s.top-s.bottom)),Ve in s&&he in s&&(o=Math.abs(s.right-s.left))),this.calcOffset(),r.x=r.x-this._offset.left,r.y=r.y-this._offset.top,e||(r=ys(r,void 0,this.viewportTransform));const h=this.getRetinaScaling();h!==1&&(r.x/=h,r.y/=h);const u=o===0||l===0?new D(1,1):new D(i.width/o,i.height/l);return r.multiply(u)}_setDimensionsImpl(t,e){this._resetTransformEventData(),super._setDimensionsImpl(t,e),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Ee(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const t=this._activeObject;return Cr(t)?t.getObjects():t?[t]:[]}_fireSelectionEvents(t,e){let i=!1,s=!1;const r=this.getActiveObjects(),o=[],l=[];t.forEach(h=>{r.includes(h)||(i=!0,h.fire("deselected",{e,target:h}),l.push(h))}),r.forEach(h=>{t.includes(h)||(i=!0,h.fire("selected",{e,target:h}),o.push(h))}),t.length>0&&r.length>0?(s=!0,i&&this.fire("selection:updated",{e,selected:o,deselected:l})):r.length>0?(s=!0,this.fire("selection:created",{e,selected:o})):t.length>0&&(s=!0,this.fire("selection:cleared",{e,deselected:l})),s&&(this._objectsToRender=void 0)}setActiveObject(t,e){const i=this.getActiveObjects(),s=this._setActiveObject(t,e);return this._fireSelectionEvents(i,e),s}_setActiveObject(t,e){const i=this._activeObject;return i!==t&&!(!this._discardActiveObject(e,t)&&this._activeObject)&&!t.onSelect({e})&&(this._activeObject=t,Cr(t)&&i!==t&&t.set("canvas",this),t.setCoords(),!0)}_discardActiveObject(t,e){const i=this._activeObject;return!!i&&!i.onDeselect({e:t,object:e})&&(this._currentTransform&&this._currentTransform.target===i&&this.endCurrentTransform(t),Cr(i)&&i===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(t){const e=this.getActiveObjects(),i=this.getActiveObject();e.length&&this.fire("before:selection:cleared",{e:t,deselected:[i]});const s=this._discardActiveObject(t);return this._fireSelectionEvents(e,t),s}endCurrentTransform(t){const e=this._currentTransform;this._finalizeCurrentTransform(t),e&&e.target&&(e.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(t){const e=this._currentTransform,i=e.target,s={e:t,target:i,transform:e,action:e.action};i._scaling&&(i._scaling=!1),i.setCoords(),e.actionPerformed&&(this.fire("object:modified",s),i.fire(Nc,s))}setViewportTransform(t){super.setViewportTransform(t);const e=this._activeObject;e&&e.setCoords()}destroy(){const t=this._activeObject;Cr(t)&&(t.removeAll(),t.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(t){const e=this._activeObject;e&&e._renderControls(t)}_toObject(t,e,i){const s=this._realizeGroupTransformOnObject(t),r=super._toObject(t,e,i);return t.set(s),r}_realizeGroupTransformOnObject(t){const{group:e}=t;if(e&&Cr(e)&&this._activeObject===e){const i=Br(t,["angle","flipX","flipY",he,Ai,Ji,Bo,zo,Vi]);return Uy(t,e.calcOwnMatrix()),i}return{}}_setSVGObject(t,e,i){const s=this._realizeGroupTransformOnObject(e);super._setSVGObject(t,e,i),e.set(s)}}A(Ah,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class B4{constructor(t){A(this,"targets",[]),A(this,"__disposer",void 0);const e=()=>{const{hiddenTextarea:s}=t.getActiveObject()||{};s&&s.focus()},i=t.upperCanvasEl;i.addEventListener("click",e),this.__disposer=()=>i.removeEventListener("click",e)}exitTextEditing(){this.target=void 0,this.targets.forEach(t=>{t.isEditing&&t.exitEditing()})}add(t){this.targets.push(t)}remove(t){this.unregister(t),xr(this.targets,t)}register(t){this.target=t}unregister(t){t===this.target&&(this.target=void 0)}onMouseMove(t){var e;!((e=this.target)===null||e===void 0)&&e.isEditing&&this.target.updateSelectionOnMouseMove(t)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const z4=["target","oldTarget","fireCanvas","e"],$i={passive:!1},ho=(n,t)=>{const e=n.getViewportPoint(t),i=n.getScenePoint(t);return{viewportPoint:e,scenePoint:i,pointer:e,absolutePointer:i}},Bs=function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return n.addEventListener(...e)},ln=function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return n.removeEventListener(...e)},V4={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Io extends Ah{constructor(t){super(t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),A(this,"_isClick",void 0),A(this,"textEditingManager",new B4(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(e=>{this[e]=this[e].bind(this)}),this.addOrRemove(Bs,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(t,e){const i=this.upperCanvasEl,s=this._getEventPrefix();t(Xy(i),"resize",this._onResize),t(i,s+"down",this._onMouseDown),t(i,"".concat(s,"move"),this._onMouseMove,$i),t(i,"".concat(s,"out"),this._onMouseOut),t(i,"".concat(s,"enter"),this._onMouseEnter),t(i,"wheel",this._onMouseWheel),t(i,"contextmenu",this._onContextMenu),t(i,"dblclick",this._onDoubleClick),t(i,"dragstart",this._onDragStart),t(i,"dragend",this._onDragEnd),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,$i)}removeListeners(){this.addOrRemove(ln,"remove");const t=this._getEventPrefix(),e=bn(this.upperCanvasEl);ln(e,"".concat(t,"up"),this._onMouseUp),ln(e,"touchend",this._onTouchEnd,$i),ln(e,"".concat(t,"move"),this._onMouseMove,$i),ln(e,"touchmove",this._onMouseMove,$i)}_onMouseWheel(t){this.__onMouseWheel(t)}_onMouseOut(t){const e=this._hoveredTarget,i=I({e:t},ho(this,t));this.fire("mouse:out",I(I({},i),{},{target:e})),this._hoveredTarget=void 0,e&&e.fire("mouseout",I({},i)),this._hoveredTargets.forEach(s=>{this.fire("mouse:out",I(I({},i),{},{target:s})),s&&s.fire("mouseout",I({},i))}),this._hoveredTargets=[]}_onMouseEnter(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",I({e:t},ho(this,t))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(t){this._isClick=!1;const e=this.getActiveObject();if(e&&e.onDragStart(t)){this._dragSource=e;const i={e:t,target:e};return this.fire("dragstart",i),e.fire("dragstart",i),void Bs(this.upperCanvasEl,"drag",this._onDragProgress)}Gd(t)}_renderDragEffects(t,e,i){let s=!1;const r=this._dropTarget;r&&r!==e&&r!==i&&(r.clearContextTop(),s=!0),e==null||e.clearContextTop(),i!==e&&(i==null||i.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),e&&(o.save(),e.transform(o),e.renderDragSourceEffect(t),o.restore(),s=!0),i&&(o.save(),i.transform(o),i.renderDropTargetEffect(t),o.restore(),s=!0),o.restore(),s&&(this.contextTopDirty=!0)}_onDragEnd(t){const e=!!t.dataTransfer&&t.dataTransfer.dropEffect!==Mi,i=e?this._activeObject:void 0,s={e:t,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:e,dropTarget:i};ln(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",s),this._dragSource&&this._dragSource.fire("dragend",s),delete this._dragSource,this._onMouseUp(t)}_onDragProgress(t){const e={e:t,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",e),this._dragSource&&this._dragSource.fire("drag",e)}findDragTargets(t){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(t)),targets:[...this.targets]}}_onDragOver(t){const e="dragover",{target:i,targets:s}=this.findDragTargets(t),r=this._dragSource,o={e:t,target:i,subTargets:s,dragSource:r,canDrop:!1,dropTarget:void 0};let l;this.fire(e,o),this._fireEnterLeaveEvents(i,o),i&&(i.canDrop(t)&&(l=i),i.fire(e,o));for(let h=0;h<s.length;h++){const u=s[h];u.canDrop(t)&&(l=u),u.fire(e,o)}this._renderDragEffects(t,r,l),this._dropTarget=l}_onDragEnter(t){const{target:e,targets:i}=this.findDragTargets(t),s={e:t,target:e,subTargets:i,dragSource:this._dragSource};this.fire("dragenter",s),this._fireEnterLeaveEvents(e,s)}_onDragLeave(t){const e={e:t,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",e),this._fireEnterLeaveEvents(void 0,e),this._renderDragEffects(t,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(t){const{target:e,targets:i}=this.findDragTargets(t),s=this._basicEventHandler("drop:before",I({e:t,target:e,subTargets:i,dragSource:this._dragSource},ho(this,t)));s.didDrop=!1,s.dropTarget=void 0,this._basicEventHandler("drop",s),this.fire("drop:after",s)}_onContextMenu(t){const e=this.findTarget(t),i=this.targets||[],s=this._basicEventHandler("contextmenu:before",{e:t,target:e,subTargets:i});return this.stopContextMenu&&Gd(t),this._basicEventHandler("contextmenu",s),!1}_onDoubleClick(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData()}getPointerId(t){const e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1}_isMainEvent(t){return t.isPrimary===!0||t.isPrimary!==!1&&(t.type==="touchend"&&t.touches.length===0||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(t){t.preventDefault(),this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,i=this._getEventPrefix(),s=bn(e);Bs(s,"touchend",this._onTouchEnd,$i),Bs(s,"touchmove",this._onMouseMove,$i),ln(e,"".concat(i,"down"),this._onMouseDown)}_onMouseDown(t){this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,i=this._getEventPrefix();ln(e,"".concat(i,"move"),this._onMouseMove,$i);const s=bn(e);Bs(s,"".concat(i,"up"),this._onMouseUp),Bs(s,"".concat(i,"move"),this._onMouseMove,$i)}_onTouchEnd(t){if(t.touches.length>0)return;this.__onMouseUp(t),this._resetTransformEventData(),delete this.mainTouchId;const e=this._getEventPrefix(),i=bn(this.upperCanvasEl);ln(i,"touchend",this._onTouchEnd,$i),ln(i,"touchmove",this._onMouseMove,$i),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{Bs(this.upperCanvasEl,"".concat(e,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(t){this.__onMouseUp(t),this._resetTransformEventData();const e=this.upperCanvasEl,i=this._getEventPrefix();if(this._isMainEvent(t)){const s=bn(this.upperCanvasEl);ln(s,"".concat(i,"up"),this._onMouseUp),ln(s,"".concat(i,"move"),this._onMouseMove,$i),Bs(e,"".concat(i,"move"),this._onMouseMove,$i)}}_onMouseMove(t){const e=this.getActiveObject();!this.allowTouchScrolling&&(!e||!e.shouldStartDragging(t))&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(t){const e=this.getActiveObject();return!!e!=!!t||e&&t&&e!==t}__onMouseUp(t){var e;this._cacheTransformEventData(t),this._handleEvent(t,"up:before");const i=this._currentTransform,s=this._isClick,r=this._target,{button:o}=t;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(t,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);if(!this._isMainEvent(t))return;let l,h,u=!1;if(i&&(this._finalizeCurrentTransform(t),u=i.actionPerformed),!s){const d=r===this._activeObject;this.handleSelection(t),u||(u=this._shouldRender(r)||!d&&r===this._activeObject)}if(r){const d=r.findControl(this.getViewportPoint(t),Uc(t)),{key:g,control:p}=d||{};if(h=g,r.selectable&&r!==this._activeObject&&r.activeOn==="up")this.setActiveObject(r,t),u=!0;else if(p){const m=p.getMouseUpHandler(t,r,p);m&&(l=this.getScenePoint(t),m.call(p,t,i,l.x,l.y))}r.isMoving=!1}if(i&&(i.target!==r||i.corner!==h)){const d=i.target&&i.target.controls[i.corner],g=d&&d.getMouseUpHandler(t,i.target,d);l=l||this.getScenePoint(t),g&&g.call(d,t,i,l.x,l.y)}this._setCursorFromEvent(t,r),this._handleEvent(t,"up"),this._groupSelector=null,this._currentTransform=null,r&&(r.__corner=void 0),u?this.requestRenderAll():s||(e=this._activeObject)!==null&&e!==void 0&&e.isEditing||this.renderTop()}_basicEventHandler(t,e){const{target:i,subTargets:s=[]}=e;this.fire(t,e),i&&i.fire(t,e);for(let r=0;r<s.length;r++)s[r]!==i&&s[r].fire(t,e);return e}_handleEvent(t,e){const i=this._target,s=this.targets||[],r=I(I({e:t,target:i,subTargets:s},ho(this,t)),{},{transform:this._currentTransform},e==="up:before"||e==="up"?{isClick:this._isClick,currentTarget:this.findTarget(t),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(e),r),i&&i.fire("mouse".concat(e),r);for(let o=0;o<s.length;o++)s[o]!==i&&s[o].fire("mouse".concat(e),r)}_onMouseDownInDrawingMode(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(t),this.requestRenderAll());const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")}_onMouseMoveInDrawingMode(t){if(this._isCurrentlyDrawing){const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")}_onMouseUpInDrawingMode(t){const e=this.getScenePoint(t);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:t,pointer:e}):this._isCurrentlyDrawing=!1,this._handleEvent(t,"up")}__onMouseDown(t){this._isClick=!0,this._cacheTransformEventData(t),this._handleEvent(t,"down:before");let e=this._target;const{button:i}=t;if(i)return(this.fireMiddleClick&&i===1||this.fireRightClick&&i===2)&&this._handleEvent(t,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._isMainEvent(t)||this._currentTransform)return;let s=this._shouldRender(e),r=!1;if(this.handleMultiSelection(t,e)?(e=this._activeObject,r=!0,s=!0):this._shouldClearSelection(t,e)&&this.discardActiveObject(t),this.selection&&(!e||!e.selectable&&!e.isEditing&&e!==this._activeObject)){const o=this.getScenePoint(t);this._groupSelector={x:o.x,y:o.y,deltaY:0,deltaX:0}}if(e){const o=e===this._activeObject;e.selectable&&e.activeOn==="down"&&this.setActiveObject(e,t);const l=e.findControl(this.getViewportPoint(t),Uc(t));if(e===this._activeObject&&(l||!r)){this._setupCurrentTransform(t,e,o);const h=l?l.control:void 0,u=this.getScenePoint(t),d=h&&h.getMouseDownHandler(t,e,h);d&&d.call(h,t,this._currentTransform,u.x,u.y)}}s&&(this._objectsToRender=void 0),this._handleEvent(t,"down"),s&&this.requestRenderAll()}_resetTransformEventData(){this._target=void 0,this._pointer=void 0,this._absolutePointer=void 0}_cacheTransformEventData(t){this._resetTransformEventData(),this._pointer=this.getViewportPoint(t),this._absolutePointer=ys(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)}__onMouseMove(t){if(this._isClick=!1,this._cacheTransformEventData(t),this._handleEvent(t,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!this._isMainEvent(t))return;const e=this._groupSelector;if(e){const i=this.getScenePoint(t);e.deltaX=i.x-e.x,e.deltaY=i.y-e.y,this.renderTop()}else if(this._currentTransform)this._transformObject(t);else{const i=this.findTarget(t);this._setCursorFromEvent(t,i),this._fireOverOutEvents(t,i)}this.textEditingManager.onMouseMove(t),this._handleEvent(t,"move"),this._resetTransformEventData()}_fireOverOutEvents(t,e){const i=this._hoveredTarget,s=this._hoveredTargets,r=this.targets,o=Math.max(s.length,r.length);this.fireSyntheticInOutEvents("mouse",{e:t,target:e,oldTarget:i,fireCanvas:!0});for(let l=0;l<o;l++)this.fireSyntheticInOutEvents("mouse",{e:t,target:r[l],oldTarget:s[l]});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(t,e){const i=this._draggedoverTarget,s=this._hoveredTargets,r=this.targets,o=Math.max(s.length,r.length);this.fireSyntheticInOutEvents("drag",I(I({},e),{},{target:t,oldTarget:i,fireCanvas:!0}));for(let l=0;l<o;l++)this.fireSyntheticInOutEvents("drag",I(I({},e),{},{target:r[l],oldTarget:s[l]}));this._draggedoverTarget=t}fireSyntheticInOutEvents(t,e){let{target:i,oldTarget:s,fireCanvas:r,e:o}=e,l=ke(e,z4);const{targetIn:h,targetOut:u,canvasIn:d,canvasOut:g}=V4[t],p=s!==i;if(s&&p){const m=I(I({},l),{},{e:o,target:s,nextTarget:i},ho(this,o));r&&this.fire(g,m),s.fire(u,m)}if(i&&p){const m=I(I({},l),{},{e:o,target:i,previousTarget:s},ho(this,o));r&&this.fire(d,m),i.fire(h,m)}}__onMouseWheel(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()}_transformObject(t){const e=this.getScenePoint(t),i=this._currentTransform,s=i.target,r=s.group?ys(e,void 0,s.group.calcTransformMatrix()):e;i.shiftKey=t.shiftKey,i.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,i,r),i.actionPerformed&&this.requestRenderAll()}_performTransformAction(t,e,i){const{action:s,actionHandler:r,target:o}=e,l=!!r&&r(t,e,i.x,i.y);l&&o.setCoords(),s==="drag"&&l&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||l}_setCursorFromEvent(t,e){if(!e)return void this.setCursor(this.defaultCursor);let i=e.hoverCursor||this.hoverCursor;const s=Cr(this._activeObject)?this._activeObject:null,r=(!s||e.group!==s)&&e.findControl(this.getViewportPoint(t));if(r){const o=r.control;this.setCursor(o.cursorStyleHandler(t,o,e))}else e.subTargetCheck&&this.targets.concat().reverse().map(o=>{i=o.hoverCursor||i}),this.setCursor(i)}handleMultiSelection(t,e){const i=this._activeObject,s=Cr(i);if(i&&this._isSelectionKeyPressed(t)&&this.selection&&e&&e.selectable&&(i!==e||s)&&(s||!e.isDescendantOf(i)&&!i.isDescendantOf(e))&&!e.onSelect({e:t})&&!i.getActiveControl()){if(s){const r=i.getObjects();if(e===i){const o=this.getViewportPoint(t);if(!(e=this.searchPossibleTargets(r,o)||this.searchPossibleTargets(this._objects,o))||!e.selectable)return!1}e.group===i?(i.remove(e),this._hoveredTarget=e,this._hoveredTargets=[...this.targets],i.size()===1&&this._setActiveObject(i.item(0),t)):(i.multiSelectAdd(e),this._hoveredTarget=i,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(r,t)}else{i.exitEditing&&i.exitEditing();const r=new(lt.getClass("ActiveSelection"))([],{canvas:this});r.multiSelectAdd(i,e),this._hoveredTarget=r,this._setActiveObject(r,t),this._fireSelectionEvents([i],t)}return!0}return!1}handleSelection(t){if(!this.selection||!this._groupSelector)return!1;const{x:e,y:i,deltaX:s,deltaY:r}=this._groupSelector,o=new D(e,i),l=o.add(new D(s,r)),h=o.min(l),u=o.max(l).subtract(h),d=this.collectObjects({left:h.x,top:h.y,width:u.x,height:u.y},{includeIntersecting:!this.selectionFullyContained}),g=o.eq(l)?d[0]?[d[0]]:[]:d.length>1?d.filter(p=>!p.onSelect({e:t})).reverse():d;if(g.length===1)this.setActiveObject(g[0],t);else if(g.length>1){const p=lt.getClass("ActiveSelection");this.setActiveObject(new p(g,{canvas:this}),t)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const Y_={x1:0,y1:0,x2:0,y2:0},H4=I(I({},Y_),{},{r1:0,r2:0}),yo=(n,t)=>isNaN(n)&&typeof t=="number"?t:n,Y4=/^(\d+\.\d+)%|(\d+)%$/;function X_(n){return n&&Y4.test(n)}function W_(n,t){const e=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(X_(n)?100:1):NaN;return Ir(0,yo(e,t),1)}const X4=/\s*;\s*/,W4=/\s*:\s*/;function N4(n,t){let e,i;const s=n.getAttribute("style");if(s){const o=s.split(X4);o[o.length-1]===""&&o.pop();for(let l=o.length;l--;){const[h,u]=o[l].split(W4).map(d=>d.trim());h==="stop-color"?e=u:h==="stop-opacity"&&(i=u)}}const r=new se(e||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:W_(n.getAttribute("offset"),0),color:r.toRgb(),opacity:yo(parseFloat(i||n.getAttribute("stop-opacity")||""),1)*r.getAlpha()*t}}function U4(n,t){const e=[],i=n.getElementsByTagName("stop"),s=W_(t,1);for(let r=i.length;r--;)e.push(N4(i[r],s));return e}function N_(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function U_(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function yn(n,t){return n.getAttribute(t)}function G4(n,t){return function(e,i){let s,{width:r,height:o,gradientUnits:l}=i;return Object.keys(e).reduce((h,u)=>{const d=e[u];return d==="Infinity"?s=1:d==="-Infinity"?s=0:(s=typeof d=="string"?parseFloat(d):d,typeof d=="string"&&X_(d)&&(s*=.01,l==="pixels"&&(u!=="x1"&&u!=="x2"&&u!=="r2"||(s*=r),u!=="y1"&&u!=="y2"||(s*=o)))),h[u]=s,h},{})}(N_(n)==="linear"?function(e){return{x1:yn(e,"x1")||0,y1:yn(e,"y1")||0,x2:yn(e,"x2")||"100%",y2:yn(e,"y2")||0}}(n):function(e){return{x1:yn(e,"fx")||yn(e,"cx")||"50%",y1:yn(e,"fy")||yn(e,"cy")||"50%",r1:0,x2:yn(e,"cx")||"50%",y2:yn(e,"cy")||"50%",r2:yn(e,"r")||"50%"}}(n),I(I({},t),{},{gradientUnits:U_(n)}))}class _o{constructor(t){const{type:e="linear",gradientUnits:i="pixels",coords:s={},colorStops:r=[],offsetX:o=0,offsetY:l=0,gradientTransform:h,id:u}=t||{};Object.assign(this,{type:e,gradientUnits:i,coords:I(I({},e==="radial"?H4:Y_),s),colorStops:r,offsetX:o,offsetY:l,gradientTransform:h,id:u?"".concat(u,"_").concat(tr()):tr()})}addColorStop(t){for(const e in t){const i=new se(t[e]);this.colorStops.push({offset:parseFloat(e),color:i.toRgb(),opacity:i.getAlpha()})}return this}toObject(t){return I(I({},Br(this,t)),{},{type:this.type,coords:I({},this.coords),colorStops:this.colorStops.map(e=>I({},e)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(t){let{additionalTransform:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[],s=this.gradientTransform?this.gradientTransform.concat():ci.concat(),r=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(g=>I({},g)).sort((g,p)=>g.offset-p.offset);let l=-this.offsetX,h=-this.offsetY;var u;r==="objectBoundingBox"?(l/=t.width,h/=t.height):(l+=t.width/2,h+=t.height/2),(u=t)&&typeof u._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(l-=t.pathOffset.x,h-=t.pathOffset.y),s[4]-=l,s[5]-=h;const d=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(r,'"'),'gradientTransform="'.concat(e?e+" ":"").concat(tl(s),'"'),""].join(" ");if(this.type==="linear"){const{x1:g,y1:p,x2:m,y2:y}=this.coords;i.push("<linearGradient ",d,' x1="',g,'" y1="',p,'" x2="',m,'" y2="',y,`">
`)}else if(this.type==="radial"){const{x1:g,y1:p,x2:m,y2:y,r1:_,r2:b}=this.coords,x=_>b;i.push("<radialGradient ",d,' cx="',x?g:m,'" cy="',x?p:y,'" r="',x?_:b,'" fx="',x?m:g,'" fy="',x?y:p,`">
`),x&&(o.reverse(),o.forEach(O=>{O.offset=1-O.offset}));const T=Math.min(_,b);if(T>0){const O=T/Math.max(_,b);o.forEach(P=>{P.offset+=O*(1-P.offset)})}}return o.forEach(g=>{let{color:p,offset:m,opacity:y}=g;i.push("<stop ",'offset="',100*m+"%",'" style="stop-color:',p,y!==void 0?";stop-opacity: "+y:";",`"/>
`)}),i.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),i.join("")}toLive(t){const{x1:e,y1:i,x2:s,y2:r,r1:o,r2:l}=this.coords,h=this.type==="linear"?t.createLinearGradient(e,i,s,r):t.createRadialGradient(e,i,o,s,r,l);return this.colorStops.forEach(u=>{let{color:d,opacity:g,offset:p}=u;h.addColorStop(p,g!==void 0?new se(d).setAlpha(g).toRgba():d)}),h}static async fromObject(t){const{colorStops:e,gradientTransform:i}=t;return new this(I(I({},t),{},{colorStops:e?e.map(s=>I({},s)):void 0,gradientTransform:i?[...i]:void 0}))}static fromElement(t,e,i){const s=U_(t),r=e._findCenterFromElement();return new this(I({id:t.getAttribute("id")||void 0,type:N_(t),coords:G4(t,{width:i.viewBoxWidth||i.width,height:i.viewBoxHeight||i.height}),colorStops:U4(t,i.opacity),gradientUnits:s,gradientTransform:il(t.getAttribute("gradientTransform")||"")},s==="pixels"?{offsetX:e.width/2-r.x,offsetY:e.height/2-r.y}:{offsetX:0,offsetY:0}))}}A(_o,"type","Gradient"),lt.setClass(_o,"gradient"),lt.setClass(_o,"linear"),lt.setClass(_o,"radial");const $4=["type","source","patternTransform"];class Va{get type(){return"pattern"}set type(t){bs("warn","Setting type has no effect",t)}constructor(t){A(this,"repeat","repeat"),A(this,"offsetX",0),A(this,"offsetY",0),A(this,"crossOrigin",""),this.id=tr(),Object.assign(this,t)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(t){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?t.createPattern(this.source,this.repeat):null}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:e,crossOrigin:i}=this;return I(I({},Br(this,t)),{},{type:"pattern",source:this.sourceToString(),repeat:e,crossOrigin:i,offsetX:Me(this.offsetX,$t.NUM_FRACTION_DIGITS),offsetY:Me(this.offsetY,$t.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(t){let{width:e,height:i}=t;const{source:s,repeat:r,id:o}=this,l=yo(this.offsetX/e,0),h=yo(this.offsetY/i,0),u=r==="repeat-y"||r==="no-repeat"?1+Math.abs(l||0):yo(s.width/e,0),d=r==="repeat-x"||r==="no-repeat"?1+Math.abs(h||0):yo(s.height/i,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(l,'" y="').concat(h,'" width="').concat(u,'" height="').concat(d,'">'),'<image x="0" y="0" width="'.concat(s.width,'" height="').concat(s.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(t,e){let{type:i,source:s,patternTransform:r}=t,o=ke(t,$4);const l=await za(s,I(I({},e),{},{crossOrigin:o.crossOrigin}));return new this(I(I({},o),{},{patternTransform:r&&r.slice(0),source:l}))}}A(Va,"type","Pattern"),lt.setClass(Va),lt.setClass(Va,"pattern");class Dh{constructor(t){A(this,"color","rgb(0, 0, 0)"),A(this,"width",1),A(this,"shadow",null),A(this,"strokeLineCap","round"),A(this,"strokeLineJoin","round"),A(this,"strokeMiterLimit",10),A(this,"strokeDashArray",null),A(this,"limitedToCanvasSize",!1),this.canvas=t}_setBrushStyles(t){t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,t.setLineDash(this.strokeDashArray||[])}_saveAndTransform(t){const e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}needsFullRender(){return new se(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;const t=this.canvas,e=this.shadow,i=t.contextTop,s=t.getZoom()*t.getRetinaScaling();i.shadowColor=e.color,i.shadowBlur=e.blur*s,i.shadowOffsetX=e.offsetX*s,i.shadowOffsetY=e.offsetY*s}_resetShadow(){const t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}_isOutSideCanvas(t){return t.x<0||t.x>this.canvas.getWidth()||t.y<0||t.y>this.canvas.getHeight()}}const K4=["path","left","top"],q4=["d"];class fs extends ge{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:i,left:s,top:r}=e,o=ke(e,K4);super(),Object.assign(this,fs.ownDefaults),this.setOptions(o),this._setPath(t||[],!0),typeof s=="number"&&this.set(he,s),typeof r=="number"&&this.set(Vi,r)}_setPath(t,e){this.path=D_(Array.isArray(t)?t:B_(t)),this.setBoundingBox(e)}_findCenterFromElement(){const t=this._calcBoundsFromPath();return new D(t.left+t.width/2,t.top+t.height/2)}_renderPathCommands(t){const e=-this.pathOffset.x,i=-this.pathOffset.y;t.beginPath();for(const s of this.path)switch(s[0]){case"L":t.lineTo(s[1]+e,s[2]+i);break;case"M":t.moveTo(s[1]+e,s[2]+i);break;case"C":t.bezierCurveTo(s[1]+e,s[2]+i,s[3]+e,s[4]+i,s[5]+e,s[6]+i);break;case"Q":t.quadraticCurveTo(s[1]+e,s[2]+i,s[3]+e,s[4]+i);break;case"Z":t.closePath()}}_render(t){this._renderPathCommands(t),this._renderPaintInOrder(t)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I(I({},super.toObject(t)),{},{path:this.path.map(e=>e.slice())})}toDatalessObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.toObject(t);return this.sourcePath&&(delete e.path,e.sourcePath=this.sourcePath),e}_toSVG(){const t=gg(this.path,$t.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(t,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const t=$t.NUM_FRACTION_DIGITS;return" translate(".concat(Me(-this.pathOffset.x,t),", ").concat(Me(-this.pathOffset.y,t),")")}toClipPathSVG(t){const e=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}toSVG(t){const e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{width:e,height:i,pathOffset:s}=this._calcDimensions();this.set({width:e,height:i,pathOffset:s}),t&&this.setPositionByOrigin(s,It,It)}_calcBoundsFromPath(){const t=[];let e=0,i=0,s=0,r=0;for(const o of this.path)switch(o[0]){case"L":s=o[1],r=o[2],t.push({x:e,y:i},{x:s,y:r});break;case"M":s=o[1],r=o[2],e=s,i=r;break;case"C":t.push(...sf(s,r,o[1],o[2],o[3],o[4],o[5],o[6])),s=o[5],r=o[6];break;case"Q":t.push(...sf(s,r,o[1],o[2],o[1],o[2],o[3],o[4])),s=o[3],r=o[4];break;case"Z":s=e,r=i}return $n(t)}_calcDimensions(){const t=this._calcBoundsFromPath();return I(I({},t),{},{pathOffset:new D(t.left+t.width/2,t.top+t.height/2)})}static fromObject(t){return this._fromObject(t,{extraParam:"path"})}static async fromElement(t,e,i){const s=Zn(t,this.ATTRIBUTE_NAMES,i),{d:r}=s;return new this(r,I(I(I({},ke(s,q4)),e),{},{left:void 0,top:void 0}))}}A(fs,"type","Path"),A(fs,"cacheProperties",[...Os,"path","fillRule"]),A(fs,"ATTRIBUTE_NAMES",[...lr,"d"]),lt.setClass(fs),lt.setSVGClass(fs);class nl extends Dh{constructor(t){super(t),A(this,"decimate",.4),A(this,"drawStraightLine",!1),A(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(t,e,i){const s=e.midPointFrom(i);return t.quadraticCurveTo(e.x,e.y,s.x,s.y),s}onMouseDown(t,e){let{e:i}=e;this.canvas._isMainEvent(i)&&(this.drawStraightLine=!!this.straightLineKey&&i[this.straightLineKey],this._prepareForDrawing(t),this._addPoint(t),this._render())}onMouseMove(t,e){let{e:i}=e;if(this.canvas._isMainEvent(i)&&(this.drawStraightLine=!!this.straightLineKey&&i[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(t))&&this._addPoint(t)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{const s=this._points,r=s.length,o=this.canvas.contextTop;this._saveAndTransform(o),this.oldEnd&&(o.beginPath(),o.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=nl.drawSegment(o,s[r-2],s[r-1]),o.stroke(),o.restore()}}onMouseUp(t){let{e}=t;return!this.canvas._isMainEvent(e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(t){this._reset(),this._addPoint(t),this.canvas.contextTop.moveTo(t.x,t.y)}_addPoint(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(t),!0)}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop,e=this._points[0],i=this._points[1];if(this._saveAndTransform(t),t.beginPath(),this._points.length===2&&e.x===i.x&&e.y===i.y){const s=this.width/1e3;e.x-=s,i.x+=s}t.moveTo(e.x,e.y);for(let s=1;s<this._points.length;s++)nl.drawSegment(t,e,i),e=this._points[s],i=this._points[s+1];t.lineTo(e.x,e.y),t.stroke(),t.restore()}convertPointsToSVGPath(t){const e=this.width/1e3;return z_(t,e)}createPath(t){const e=new fs(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.shadow=new Zi(this.shadow)),e}decimatePoints(t,e){if(t.length<=2)return t;let i,s=t[0];const r=this.canvas.getZoom(),o=Math.pow(e/r,2),l=t.length-1,h=[s];for(let u=1;u<l-1;u++)i=Math.pow(s.x-t[u].x,2)+Math.pow(s.y-t[u].y,2),i>=o&&(s=t[u],h.push(s));return h.push(t[l]),h}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));const t=this.convertPointsToSVGPath(this._points);if(function(i){return gg(i)==="M 0 0 Q 0 0 0 0 L 0 0"}(t))return void this.canvas.requestRenderAll();const e=this.createPath(t);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:e}),this.canvas.add(e),this.canvas.requestRenderAll(),e.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:e})}}const Z4=["left","top","radius"],G_=["radius","startAngle","endAngle","counterClockwise"];class wn extends ge{static getDefaults(){return I(I({},super.getDefaults()),wn.ownDefaults)}constructor(t){super(),Object.assign(this,wn.ownDefaults),this.setOptions(t)}_set(t,e){return super._set(t,e),t==="radius"&&this.setRadius(e),this}_render(t){t.beginPath(),t.arc(0,0,this.radius,Le(this.startAngle),Le(this.endAngle),this.counterClockwise),this._renderPaintInOrder(t)}getRadiusX(){return this.get("radius")*this.get(Ai)}getRadiusY(){return this.get("radius")*this.get(Ji)}setRadius(t){this.radius=t,this.set({width:2*t,height:2*t})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...G_,...t])}_toSVG(){const t=(this.endAngle-this.startAngle)%360;if(t===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:e}=this,i=Le(this.startAngle),s=Le(this.endAngle),r=En(i)*e,o=kn(i)*e,l=En(s)*e,h=kn(s)*e,u=t>180?1:0,d=this.counterClockwise?0:1;return['<path d="M '.concat(r," ").concat(o," A ").concat(e," ").concat(e," 0 ").concat(u," ").concat(d," ").concat(l," ").concat(h,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(t,e,i){const s=Zn(t,this.ATTRIBUTE_NAMES,i),{left:r=0,top:o=0,radius:l=0}=s;return new this(I(I({},ke(s,Z4)),{},{radius:l,left:r-l,top:o-l}))}static fromObject(t){return super._fromObject(t)}}A(wn,"type","Circle"),A(wn,"cacheProperties",[...Os,...G_]),A(wn,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),A(wn,"ATTRIBUTE_NAMES",["cx","cy","r",...lr]),lt.setClass(wn),lt.setSVGClass(wn);class J4 extends Dh{constructor(t){super(t),A(this,"width",10),this.points=[]}drawDot(t){const e=this.addPoint(t),i=this.canvas.contextTop;this._saveAndTransform(i),this.dot(i,e),i.restore()}dot(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()}onMouseDown(t){this.points=[],this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)}_render(){const t=this.canvas.contextTop,e=this.points;this._saveAndTransform(t);for(let i=0;i<e.length;i++)this.dot(t,e[i]);t.restore()}onMouseMove(t){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(t)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t))}onMouseUp(){const t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;const e=[];for(let s=0;s<this.points.length;s++){const r=this.points[s],o=new wn({radius:r.radius,left:r.x,top:r.y,originX:It,originY:It,fill:r.fill});this.shadow&&(o.shadow=new Zi(this.shadow)),e.push(o)}const i=new ki(e,{canvas:this.canvas});this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.fire("path:created",{path:i}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()}addPoint(t){let{x:e,y:i}=t;const s={x:e,y:i,radius:Tr(Math.max(0,this.width-20),this.width+20)/2,fill:new se(this.color).setAlpha(Tr(0,100)/100).toRgba()};return this.points.push(s),s}}class Q4 extends Dh{constructor(t){super(t),A(this,"width",10),A(this,"density",20),A(this,"dotWidth",1),A(this,"dotWidthVariance",1),A(this,"randomOpacity",!1),A(this,"optimizeOverlapping",!0),this.sprayChunks=[],this.sprayChunk=[]}onMouseDown(t){this.sprayChunks=[],this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.renderChunck(this.sprayChunk)}onMouseMove(t){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(t)||(this.addSprayChunk(t),this.renderChunck(this.sprayChunk))}onMouseUp(){const t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;const e=[];for(let s=0;s<this.sprayChunks.length;s++){const r=this.sprayChunks[s];for(let o=0;o<r.length;o++){const l=r[o],h=new pi({width:l.width,height:l.width,left:l.x+1,top:l.y+1,originX:It,originY:It,fill:this.color});e.push(h)}}const i=new ki(this.optimizeOverlapping?function(s){const r={},o=[];for(let l,h=0;h<s.length;h++)l="".concat(s[h].left).concat(s[h].top),r[l]||(r[l]=!0,o.push(s[h]));return o}(e):e,{objectCaching:!0,subTargetCheck:!1,interactive:!1});this.shadow&&i.set("shadow",new Zi(this.shadow)),this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.fire("path:created",{path:i}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()}renderChunck(t){const e=this.canvas.contextTop;e.fillStyle=this.color,this._saveAndTransform(e);for(let i=0;i<t.length;i++){const s=t[i];e.globalAlpha=s.opacity,e.fillRect(s.x,s.y,s.width,s.width)}e.restore()}_render(){const t=this.canvas.contextTop;t.fillStyle=this.color,this._saveAndTransform(t);for(let e=0;e<this.sprayChunks.length;e++)this.renderChunck(this.sprayChunks[e]);t.restore()}addSprayChunk(t){this.sprayChunk=[];const e=this.width/2;for(let i=0;i<this.density;i++)this.sprayChunk.push({x:Tr(t.x-e,t.x+e),y:Tr(t.y-e,t.y+e),width:this.dotWidthVariance?Tr(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth,opacity:this.randomOpacity?Tr(0,100)/100:1});this.sprayChunks.push(this.sprayChunk)}}class tE extends nl{constructor(t){super(t)}getPatternSrc(){const t=Ee(),e=t.getContext("2d");return t.width=t.height=25,e&&(e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill()),t}getPattern(t){return t.createPattern(this.source||this.getPatternSrc(),"repeat")}_setBrushStyles(t){super._setBrushStyles(t);const e=this.getPattern(t);e&&(t.strokeStyle=e)}createPath(t){const e=super.createPath(t),i=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new Va({source:this.source||this.getPatternSrc(),offsetX:-i.x,offsetY:-i.y}),e}}const eE=["x1","y1","x2","y2"],iE=["x1","y1","x2","y2"],rf=["x1","x2","y1","y2"];class Ws extends ge{constructor(){let[t,e,i,s]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Ws.ownDefaults),this.setOptions(r),this.x1=t,this.x2=i,this.y1=e,this.y2=s,this._setWidthHeight();const{left:o,top:l}=r;typeof o=="number"&&this.set(he,o),typeof l=="number"&&this.set(Vi,l)}_setWidthHeight(){const{x1:t,y1:e,x2:i,y2:s}=this;this.width=Math.abs(i-t),this.height=Math.abs(s-e);const{left:r,top:o,width:l,height:h}=$n([{x:t,y:e},{x:i,y:s}]),u=new D(r+l/2,o+h/2);this.setPositionByOrigin(u,It,It)}_set(t,e){return super._set(t,e),rf.includes(t)&&this._setWidthHeight(),this}_render(t){t.beginPath();const e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;const i=t.strokeStyle;var s;un(this.stroke)?t.strokeStyle=this.stroke.toLive(t):t.strokeStyle=(s=this.stroke)!==null&&s!==void 0?s:t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=i}_findCenterFromElement(){return new D((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I(I({},super.toObject(t)),this.calcLinePoints())}_getNonTransformedDimensions(){const t=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t}calcLinePoints(){const{x1:t,x2:e,y1:i,y2:s,width:r,height:o}=this,l=t<=e?-1:1,h=i<=s?-1:1;return{x1:l*r/2,x2:l*-r/2,y1:h*o/2,y2:h*-o/2}}_toSVG(){const{x1:t,x2:e,y1:i,y2:s}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(t,'" y1="').concat(i,'" x2="').concat(e,'" y2="').concat(s,`" />
`)]}static async fromElement(t,e,i){const s=Zn(t,this.ATTRIBUTE_NAMES,i),{x1:r=0,y1:o=0,x2:l=0,y2:h=0}=s;return new this([r,o,l,h],ke(s,eE))}static fromObject(t){let{x1:e,y1:i,x2:s,y2:r}=t,o=ke(t,iE);return this._fromObject(I(I({},o),{},{points:[e,i,s,r]}),{extraParam:"points"})}}A(Ws,"type","Line"),A(Ws,"cacheProperties",[...Os,...rf]),A(Ws,"ATTRIBUTE_NAMES",lr.concat(rf)),lt.setClass(Ws),lt.setSVGClass(Ws);class Ns extends ge{static getDefaults(){return I(I({},super.getDefaults()),Ns.ownDefaults)}constructor(t){super(),Object.assign(this,Ns.ownDefaults),this.setOptions(t)}_render(t){const e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderPaintInOrder(t)}_toSVG(){const t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-t," ").concat(e,",0 ").concat(-e,",").concat(t," ").concat(e),'" />']}}A(Ns,"type","Triangle"),A(Ns,"ownDefaults",{width:100,height:100}),lt.setClass(Ns),lt.setSVGClass(Ns);const $_=["rx","ry"];class zn extends ge{static getDefaults(){return I(I({},super.getDefaults()),zn.ownDefaults)}constructor(t){super(),Object.assign(this,zn.ownDefaults),this.setOptions(t)}_set(t,e){switch(super._set(t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this}getRx(){return this.get("rx")*this.get(Ai)}getRy(){return this.get("ry")*this.get(Ji)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...$_,...t])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,xs,!1),t.restore(),this._renderPaintInOrder(t)}static async fromElement(t,e,i){const s=Zn(t,this.ATTRIBUTE_NAMES,i);return s.left=(s.left||0)-s.rx,s.top=(s.top||0)-s.ry,new this(s)}}function K_(n){if(!n)return[];const t=n.replace(/,/g," ").trim().split(/\s+/),e=[];for(let i=0;i<t.length;i+=2)e.push({x:parseFloat(t[i]),y:parseFloat(t[i+1])});return e}A(zn,"type","Ellipse"),A(zn,"cacheProperties",[...Os,...$_]),A(zn,"ownDefaults",{rx:0,ry:0}),A(zn,"ATTRIBUTE_NAMES",[...lr,"cx","cy","rx","ry"]),lt.setClass(zn),lt.setSVGClass(zn);const nE=["left","top"],q_={exactBoundingBox:!1};class hn extends ge{static getDefaults(){return I(I({},super.getDefaults()),hn.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),A(this,"strokeDiff",void 0),Object.assign(this,hn.ownDefaults),this.setOptions(e),this.points=t;const{left:i,top:s}=e;this.initialized=!0,this.setBoundingBox(!0),typeof i=="number"&&this.set(he,i),typeof s=="number"&&this.set(Vi,s)}isOpen(){return!0}_projectStrokeOnPoints(t){return b_(this.points,t,this.isOpen())}_calcDimensions(t){t=I({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},t||{});const e=this.exactBoundingBox?this._projectStrokeOnPoints(t).map(u=>u.projectedPoint):this.points;if(e.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new D,strokeOffset:new D,strokeDiff:new D};const i=$n(e),s=dl(I(I({},t),{},{scaleX:1,scaleY:1})),r=$n(this.points.map(u=>fi(u,s,!0))),o=new D(this.scaleX,this.scaleY);let l=i.left+i.width/2,h=i.top+i.height/2;return this.exactBoundingBox&&(l-=h*Math.tan(Le(this.skewX)),h-=l*Math.tan(Le(this.skewY))),I(I({},i),{},{pathOffset:new D(l,h),strokeOffset:new D(r.left,r.top).subtract(new D(i.left,i.top)).multiply(o),strokeDiff:new D(i.width,i.height).subtract(new D(r.width,r.height)).multiply(o)})}_findCenterFromElement(){const t=$n(this.points);return new D(t.left+t.width/2,t.top+t.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{left:e,top:i,width:s,height:r,pathOffset:o,strokeOffset:l,strokeDiff:h}=this._calcDimensions();this.set({width:s,height:r,pathOffset:o,strokeOffset:l,strokeDiff:h}),t&&this.setPositionByOrigin(new D(e+s/2,i+r/2),It,It)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new D(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(t).some(l=>this.strokeUniform||this.constructor.layoutProperties.includes(l))){var e,i;const{width:l,height:h}=this._calcDimensions(t);o=new D((e=t.width)!==null&&e!==void 0?e:l,(i=t.height)!==null&&i!==void 0?i:h)}else{var s,r;o=new D((s=t.width)!==null&&s!==void 0?s:this.width,(r=t.height)!==null&&r!==void 0?r:this.height)}return o.multiply(new D(t.scaleX||this.scaleX,t.scaleY||this.scaleY))}return super._getTransformedDimensions(t)}_set(t,e){const i=this.initialized&&this[t]!==e,s=super._set(t,e);return this.exactBoundingBox&&i&&((t===Ai||t===Ji)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(t))&&this.setDimensions(),s}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I(I({},super.toObject(t)),{},{points:this.points.map(e=>{let{x:i,y:s}=e;return{x:i,y:s}})})}_toSVG(){const t=[],e=this.pathOffset.x,i=this.pathOffset.y,s=$t.NUM_FRACTION_DIGITS;for(let r=0,o=this.points.length;r<o;r++)t.push(Me(this.points[r].x-e,s),",",Me(this.points[r].y-i,s)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(t.join(""),`" />
`)]}_render(t){const e=this.points.length,i=this.pathOffset.x,s=this.pathOffset.y;if(e&&!isNaN(this.points[e-1].y)){t.beginPath(),t.moveTo(this.points[0].x-i,this.points[0].y-s);for(let r=0;r<e;r++){const o=this.points[r];t.lineTo(o.x-i,o.y-s)}!this.isOpen()&&t.closePath(),this._renderPaintInOrder(t)}}complexity(){return this.points.length}static async fromElement(t,e,i){return new this(K_(t.getAttribute("points")),I(I({},ke(Zn(t,this.ATTRIBUTE_NAMES,i),nE)),e))}static fromObject(t){return this._fromObject(t,{extraParam:"points"})}}A(hn,"ownDefaults",q_),A(hn,"type","Polyline"),A(hn,"layoutProperties",[Bo,zo,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),A(hn,"cacheProperties",[...Os,"points"]),A(hn,"ATTRIBUTE_NAMES",[...lr]),lt.setClass(hn),lt.setSVGClass(hn);class ga extends hn{isOpen(){return!1}}A(ga,"ownDefaults",q_),A(ga,"type","Polygon"),lt.setClass(ga),lt.setSVGClass(ga);const Z_=["fontSize","fontWeight","fontFamily","fontStyle"],J_=["underline","overline","linethrough"],Q_=[...Z_,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],tw=[...Q_,...J_,"textBackgroundColor","direction"],sE=[...Z_,...J_,Ei,"strokeWidth",He,"deltaY","textBackgroundColor"],rE={_reNewline:Nf,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:he,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:he,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},Vn="justify",eh="justify-left",Ha="justify-right",Ya="justify-center";class ew extends ge{isEmptyStyles(t){if(!this.styles||t!==void 0&&!this.styles[t])return!0;const e=t===void 0?this.styles:{line:this.styles[t]};for(const i in e)for(const s in e[i])for(const r in e[i][s])return!1;return!0}styleHas(t,e){if(!this.styles||e!==void 0&&!this.styles[e])return!1;const i=e===void 0?this.styles:{0:this.styles[e]};for(const s in i)for(const r in i[s])if(i[s][r][t]!==void 0)return!0;return!1}cleanStyle(t){if(!this.styles)return!1;const e=this.styles;let i,s,r=0,o=!0,l=0;for(const h in e){i=0;for(const u in e[h]){const d=e[h][u]||{};r++,d[t]!==void 0?(s?d[t]!==s&&(o=!1):s=d[t],d[t]===this[t]&&delete d[t]):o=!1,Object.keys(d).length!==0?i++:delete e[h][u]}i===0&&delete e[h]}for(let h=0;h<this._textLines.length;h++)l+=this._textLines[h].length;o&&r===l&&(this[t]=s,this.removeStyle(t))}removeStyle(t){if(!this.styles)return;const e=this.styles;let i,s,r;for(s in e){for(r in i=e[s],i)delete i[r][t],Object.keys(i[r]).length===0&&delete i[r];Object.keys(i).length===0&&delete e[s]}}_extendStyles(t,e){const{lineIndex:i,charIndex:s}=this.get2DCursorLocation(t);this._getLineStyle(i)||this._setLineStyle(i);const r=Zf(I(I({},this._getStyleDeclaration(i,s)),e),o=>o!==void 0);this._setStyleDeclaration(i,s,r)}getSelectionStyles(t,e,i){const s=[];for(let r=t;r<(e||t);r++)s.push(this.getStyleAtPosition(r,i));return s}getStyleAtPosition(t,e){const{lineIndex:i,charIndex:s}=this.get2DCursorLocation(t);return e?this.getCompleteStyleDeclaration(i,s):this._getStyleDeclaration(i,s)}setSelectionStyles(t,e,i){for(let s=e;s<(i||e);s++)this._extendStyles(s,t);this._forceClearCache=!0}_getStyleDeclaration(t,e){var i;const s=this.styles&&this.styles[t];return s&&(i=s[e])!==null&&i!==void 0?i:{}}getCompleteStyleDeclaration(t,e){return I(I({},Br(this,this.constructor._styleProperties)),this._getStyleDeclaration(t,e))}_setStyleDeclaration(t,e,i){this.styles[t][e]=i}_deleteStyleDeclaration(t,e){delete this.styles[t][e]}_getLineStyle(t){return!!this.styles[t]}_setLineStyle(t){this.styles[t]={}}_deleteLineStyle(t){delete this.styles[t]}}A(ew,"_styleProperties",sE);const oE=/  +/g,aE=/"/g;function md(n,t,e,i,s){return"		".concat(function(r,o){let{left:l,top:h,width:u,height:d}=o,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:$t.NUM_FRACTION_DIGITS;const p=el(He,r,!1),[m,y,_,b]=[l,h,u,d].map(x=>Me(x,g));return"<rect ".concat(p,' x="').concat(m,'" y="').concat(y,'" width="').concat(_,'" height="').concat(b,'"></rect>')}(n,{left:t,top:e,width:i,height:s}),`
`)}const lE=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let vd;class qe extends ew{static getDefaults(){return I(I({},super.getDefaults()),qe.ownDefaults)}constructor(t,e){super(),A(this,"__charBounds",[]),Object.assign(this,qe.ownDefaults),this.setOptions(e),this.styles||(this.styles={}),this.text=t,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const t=this.path;t&&(t.segmentsInfo=fg(t.path))}_splitText(){const t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Vn)&&this.enlargeSpaces()}enlargeSpaces(){let t,e,i,s,r,o,l;for(let h=0,u=this._textLines.length;h<u;h++)if((this.textAlign===Vn||h!==u-1&&!this.isEndOfWrapping(h))&&(s=0,r=this._textLines[h],e=this.getLineWidth(h),e<this.width&&(l=this.textLines[h].match(this._reSpacesAndTabs)))){i=l.length,t=(this.width-e)/i;for(let d=0;d<=r.length;d++)o=this.__charBounds[h][d],this._reSpaceAndTab.test(r[d])?(o.width+=t,o.kernedWidth+=t,o.left+=s,s+=t):o.left+=s}}isEndOfWrapping(t){return t===this._textLines.length-1}missingNewlineOffset(t){return 1}get2DCursorLocation(t,e){const i=e?this._unwrappedTextLines:this._textLines;let s;for(s=0;s<i.length;s++){if(t<=i[s].length)return{lineIndex:s,charIndex:t};t-=i[s].length+this.missingNewlineOffset(s,e)}return{lineIndex:s-1,charIndex:i[s-1].length<t?i[s-1].length:t}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const t=super._getCacheCanvasDimensions(),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t}_render(t){const e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")}_renderText(t){this.paintFirst===Ei?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))}_setTextStyles(t,e,i){if(t.textBaseline="alphabetic",this.path)switch(this.pathAlign){case It:t.textBaseline="middle";break;case"ascender":t.textBaseline=Vi;break;case"descender":t.textBaseline=Nd}t.font=this._getFontDeclaration(e,i)}calcTextWidth(){let t=this.getLineWidth(0);for(let e=1,i=this._textLines.length;e<i;e++){const s=this.getLineWidth(e);s>t&&(t=s)}return t}_renderTextLine(t,e,i,s,r,o){this._renderChars(t,e,i,s,r,o)}_renderTextLinesBackground(t){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const e=t.fillStyle,i=this._getLeftOffset();let s=this._getTopOffset();for(let r=0,o=this._textLines.length;r<o;r++){const l=this.getHeightOfLine(r);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",r)){s+=l;continue}const h=this._textLines[r].length,u=this._getLineLeftOffset(r);let d,g,p=0,m=0,y=this.getValueOfPropertyAt(r,0,"textBackgroundColor");for(let _=0;_<h;_++){const b=this.__charBounds[r][_];g=this.getValueOfPropertyAt(r,_,"textBackgroundColor"),this.path?(t.save(),t.translate(b.renderLeft,b.renderTop),t.rotate(b.angle),t.fillStyle=g,g&&t.fillRect(-b.width/2,-l/this.lineHeight*(1-this._fontSizeFraction),b.width,l/this.lineHeight),t.restore()):g!==y?(d=i+u+m,this.direction==="rtl"&&(d=this.width-d-p),t.fillStyle=y,y&&t.fillRect(d,s,p,l/this.lineHeight),m=b.left,p=b.width,y=g):p+=b.kernedWidth}g&&!this.path&&(d=i+u+m,this.direction==="rtl"&&(d=this.width-d-p),t.fillStyle=g,t.fillRect(d,s,p,l/this.lineHeight)),s+=l}t.fillStyle=e,this._removeShadow(t)}_measureChar(t,e,i,s){const r=To.getFontCache(e),o=this._getFontDeclaration(e),l=i+t,h=i&&o===this._getFontDeclaration(s),u=e.fontSize/this.CACHE_FONT_SIZE;let d,g,p,m;if(i&&r[i]!==void 0&&(p=r[i]),r[t]!==void 0&&(m=d=r[t]),h&&r[l]!==void 0&&(g=r[l],m=g-p),d===void 0||p===void 0||g===void 0){const y=function(){if(!vd){const _=Ee();_.width=_.height=0,vd=_.getContext("2d")}return vd}();this._setTextStyles(y,e,!0),d===void 0&&(m=d=y.measureText(t).width,r[t]=d),p===void 0&&h&&i&&(p=y.measureText(i).width,r[i]=p),h&&g===void 0&&(g=y.measureText(l).width,r[l]=g,m=g-p)}return{width:d*u,kernedWidth:m*u}}getHeightOfChar(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")}measureLine(t){const e=this._measureLine(t);return this.charSpacing!==0&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e}_measureLine(t){let e,i,s=0;const r=this.pathSide===Ve,o=this.path,l=this._textLines[t],h=l.length,u=new Array(h);this.__charBounds[t]=u;for(let d=0;d<h;d++){const g=l[d];i=this._getGraphemeBox(g,t,d,e),u[d]=i,s+=i.kernedWidth,e=g}if(u[h]={left:i?i.left+i.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let d=0;const g=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case he:d=r?g-s:0;break;case It:d=(g-s)/2;break;case Ve:d=r?0:g-s}d+=this.pathStartOffset*(r?-1:1);for(let p=r?h-1:0;r?p>=0:p<h;r?p--:p++)i=u[p],d>g?d%=g:d<0&&(d+=g),this._setGraphemeOnPath(d,i),d+=i.kernedWidth}return{width:s,numOfSpaces:0}}_setGraphemeOnPath(t,e){const i=t+e.kernedWidth/2,s=this.path,r=F_(s.path,i,s.segmentsInfo);e.renderLeft=r.x-s.pathOffset.x,e.renderTop=r.y-s.pathOffset.y,e.angle=r.angle+(this.pathSide===Ve?Math.PI:0)}_getGraphemeBox(t,e,i,s,r){const o=this.getCompleteStyleDeclaration(e,i),l=s?this.getCompleteStyleDeclaration(e,i-1):{},h=this._measureChar(t,o,s,l);let u,d=h.kernedWidth,g=h.width;this.charSpacing!==0&&(u=this._getWidthOfCharSpacing(),g+=u,d+=u);const p={width:g,left:0,height:o.fontSize,kernedWidth:d,deltaY:o.deltaY};if(i>0&&!r){const m=this.__charBounds[e][i-1];p.left=m.left+m.width+h.kernedWidth-h.width}return p}getHeightOfLine(t){if(this.__lineHeights[t])return this.__lineHeights[t];let e=this.getHeightOfChar(t,0);for(let i=1,s=this._textLines[t].length;i<s;i++)e=Math.max(this.getHeightOfChar(t,i),e);return this.__lineHeights[t]=e*this.lineHeight*this._fontSizeMult}calcTextHeight(){let t,e=0;for(let i=0,s=this._textLines.length;i<s;i++)t=this.getHeightOfLine(i),e+=i===s-1?t/this.lineHeight:t;return e}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(t,e){t.save();let i=0;const s=this._getLeftOffset(),r=this._getTopOffset();for(let o=0,l=this._textLines.length;o<l;o++){const h=this.getHeightOfLine(o),u=h/this.lineHeight,d=this._getLineLeftOffset(o);this._renderTextLine(e,t,this._textLines[o],s+d,r+i+u,o),i+=h}t.restore()}_renderTextFill(t){(this.fill||this.styleHas(He))&&this._renderTextCommon(t,"fillText")}_renderTextStroke(t){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())}_renderChars(t,e,i,s,r,o){const l=this.getHeightOfLine(o),h=this.textAlign.includes(Vn),u=this.path,d=!h&&this.charSpacing===0&&this.isEmptyStyles(o)&&!u,g=this.direction==="ltr",p=this.direction==="ltr"?1:-1,m=e.direction;let y,_,b,x,T,O="",P=0;if(e.save(),m!==this.direction&&(e.canvas.setAttribute("dir",g?"ltr":"rtl"),e.direction=g?"ltr":"rtl",e.textAlign=g?he:Ve),r-=l*this._fontSizeFraction/this.lineHeight,d)return this._renderChar(t,e,o,0,i.join(""),s,r),void e.restore();for(let F=0,X=i.length-1;F<=X;F++)x=F===X||this.charSpacing||u,O+=i[F],b=this.__charBounds[o][F],P===0?(s+=p*(b.kernedWidth-b.width),P+=b.width):P+=b.kernedWidth,h&&!x&&this._reSpaceAndTab.test(i[F])&&(x=!0),x||(y=y||this.getCompleteStyleDeclaration(o,F),_=this.getCompleteStyleDeclaration(o,F+1),x=kh(y,_,!1)),x&&(u?(e.save(),e.translate(b.renderLeft,b.renderTop),e.rotate(b.angle),this._renderChar(t,e,o,F,O,-P/2,0),e.restore()):(T=s,this._renderChar(t,e,o,F,O,T,r)),O="",y=_,s+=p*P,P=0);e.restore()}_applyPatternGradientTransformText(t){const e=Ee(),i=this.width+this.strokeWidth,s=this.height+this.strokeWidth,r=e.getContext("2d");return e.width=i,e.height=s,r.beginPath(),r.moveTo(0,0),r.lineTo(i,0),r.lineTo(i,s),r.lineTo(0,s),r.closePath(),r.translate(i/2,s/2),r.fillStyle=t.toLive(r),this._applyPatternGradientTransform(r,t),r.fill(),r.createPattern(e,"no-repeat")}handleFiller(t,e,i){let s,r;return un(i)?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?(s=-this.width/2,r=-this.height/2,t.translate(s,r),t[e]=this._applyPatternGradientTransformText(i),{offsetX:s,offsetY:r}):(t[e]=i.toLive(t),this._applyPatternGradientTransform(t,i)):(t[e]=i,{offsetX:0,offsetY:0})}_setStrokeStyles(t,e){let{stroke:i,strokeWidth:s}=e;return t.lineWidth=s,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",i)}_setFillStyles(t,e){let{fill:i}=e;return this.handleFiller(t,"fillStyle",i)}_renderChar(t,e,i,s,r,o,l){const h=this._getStyleDeclaration(i,s),u=this.getCompleteStyleDeclaration(i,s),d=t==="fillText"&&u.fill,g=t==="strokeText"&&u.stroke&&u.strokeWidth;if(g||d){if(e.save(),e.font=this._getFontDeclaration(u),h.textBackgroundColor&&this._removeShadow(e),h.deltaY&&(l+=h.deltaY),d){const p=this._setFillStyles(e,u);e.fillText(r,o-p.offsetX,l-p.offsetY)}if(g){const p=this._setStrokeStyles(e,u);e.strokeText(r,o-p.offsetX,l-p.offsetY)}e.restore()}}setSuperscript(t,e){this._setScript(t,e,this.superscript)}setSubscript(t,e){this._setScript(t,e,this.subscript)}_setScript(t,e,i){const s=this.get2DCursorLocation(t,!0),r=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"fontSize"),o=this.getValueOfPropertyAt(s.lineIndex,s.charIndex,"deltaY"),l={fontSize:r*i.size,deltaY:o+r*i.baseline};this.setSelectionStyles(l,t,e)}_getLineLeftOffset(t){const e=this.getLineWidth(t),i=this.width-e,s=this.textAlign,r=this.direction,o=this.isEndOfWrapping(t);let l=0;return s===Vn||s===Ya&&!o||s===Ha&&!o||s===eh&&!o?0:(s===It&&(l=i/2),s===Ve&&(l=i),s===Ya&&(l=i/2),s===Ha&&(l=i),r==="rtl"&&(s===Ve||s===Vn||s===Ha?l=0:s===he||s===eh?l=-i:s!==It&&s!==Ya||(l=-i/2)),l)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(t){if(this.__lineWidths[t]!==void 0)return this.__lineWidths[t];const{width:e}=this.measureLine(t);return this.__lineWidths[t]=e,e}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(t,e,i){var s;return(s=this._getStyleDeclaration(t,e)[i])!==null&&s!==void 0?s:this[i]}_renderTextDecoration(t,e){if(!this[e]&&!this.styleHas(e))return;let i=this._getTopOffset();const s=this._getLeftOffset(),r=this.path,o=this._getWidthOfCharSpacing(),l=this.offsets[e];for(let h=0,u=this._textLines.length;h<u;h++){const d=this.getHeightOfLine(h);if(!this[e]&&!this.styleHas(e,h)){i+=d;continue}const g=this._textLines[h],p=d/this.lineHeight,m=this._getLineLeftOffset(h);let y,_,b=0,x=0,T=this.getValueOfPropertyAt(h,0,e),O=this.getValueOfPropertyAt(h,0,He);const P=i+p*(1-this._fontSizeFraction);let F=this.getHeightOfChar(h,0),X=this.getValueOfPropertyAt(h,0,"deltaY");for(let V=0,$=g.length;V<$;V++){const st=this.__charBounds[h][V];y=this.getValueOfPropertyAt(h,V,e),_=this.getValueOfPropertyAt(h,V,He);const ht=this.getHeightOfChar(h,V),ut=this.getValueOfPropertyAt(h,V,"deltaY");if(r&&y&&_)t.save(),t.fillStyle=O,t.translate(st.renderLeft,st.renderTop),t.rotate(st.angle),t.fillRect(-st.kernedWidth/2,l*ht+ut,st.kernedWidth,this.fontSize/15),t.restore();else if((y!==T||_!==O||ht!==F||ut!==X)&&x>0){let ct=s+m+b;this.direction==="rtl"&&(ct=this.width-ct-x),T&&O&&(t.fillStyle=O,t.fillRect(ct,P+l*F+X,x,this.fontSize/15)),b=st.left,x=st.width,T=y,O=_,F=ht,X=ut}else x+=st.kernedWidth}let R=s+m+b;this.direction==="rtl"&&(R=this.width-R-x),t.fillStyle=_,y&&_&&t.fillRect(R,P+l*F+X,x-o,this.fontSize/15),i+=d}this._removeShadow(t)}_getFontDeclaration(){let{fontFamily:t=this.fontFamily,fontStyle:e=this.fontStyle,fontWeight:i=this.fontWeight,fontSize:s=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;const o=t.includes("'")||t.includes('"')||t.includes(",")||qe.genericFonts.includes(t.toLowerCase())?t:'"'.concat(t,'"');return[e,i,"".concat(r?this.CACHE_FONT_SIZE:s,"px"),o].join(" ")}render(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(t)))}graphemeSplit(t){return Eh(t)}_splitTextIntoLines(t){const e=t.split(this._reNewline),i=new Array(e.length),s=[`
`];let r=[];for(let o=0;o<e.length;o++)i[o]=this.graphemeSplit(e[o]),r=r.concat(i[o],s);return r.pop(),{_unwrappedLines:i,lines:e,graphemeText:r,graphemeLines:i}}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return I(I({},super.toObject([...tw,...t])),{},{styles:C_(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(t,e){const{textLayoutProperties:i}=this.constructor;super.set(t,e);let s=!1,r=!1;if(typeof t=="object")for(const o in t)o==="path"&&this.setPathInfo(),s=s||i.includes(o),r=r||o==="path";else s=i.includes(t),r=t==="path";return r&&this.setPathInfo(),s&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(t,e,i){const s=Zn(t,qe.ATTRIBUTE_NAMES,i),r=I(I({},e),s),{textAnchor:o=he,textDecoration:l="",dx:h=0,dy:u=0,top:d=0,left:g=0,fontSize:p=Wf,strokeWidth:m=1}=r,y=ke(r,lE),_=new this((t.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),I({left:g+h,top:d+u,underline:l.includes("underline"),overline:l.includes("overline"),linethrough:l.includes("line-through"),strokeWidth:0,fontSize:p},y)),b=_.getScaledHeight()/_.height,x=((_.height+_.strokeWidth)*_.lineHeight-_.height)*b,T=_.getScaledHeight()+x;let O=0;return o===It&&(O=_.getScaledWidth()/2),o===Ve&&(O=_.getScaledWidth()),_.set({left:_.left-O,top:_.top-(T-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:m}),_}static fromObject(t){return this._fromObject(I(I({},t),{},{styles:S_(t.styles||{},t.text)}),{extraParam:"text"})}}A(qe,"textLayoutProperties",Q_),A(qe,"cacheProperties",[...Os,...tw]),A(qe,"ownDefaults",rE),A(qe,"type","Text"),A(qe,"genericFonts",["sans-serif","serif","cursive","fantasy","monospace"]),A(qe,"ATTRIBUTE_NAMES",lr.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),y_(qe,[class extends Jy{_toSVG(){const n=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(t)}toSVG(n){return this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:t,textSpans:e}=n;const i=this.getSvgTextDecoration(this);return[t.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(aE,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",i?'text-decoration="'.concat(i,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.join(""),`</text>
`]}_getSVGTextAndBg(n,t){const e=[],i=[];let s,r=n;this.backgroundColor&&i.push(...md(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,l=this._textLines.length;o<l;o++)s=this._getLineLeftOffset(o),this.direction==="rtl"&&(s+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(i,o,t+s,r),this._setSVGTextLineText(e,o,t+s,r),r+=this.getHeightOfLine(o);return{textSpans:e,textBgRects:i}}_createTextCharSpan(n,t,e,i){const s=this.getSvgSpanStyles(t,n!==n.trim()||!!n.match(oE)),r=s?'style="'.concat(s,'"'):"",o=t.deltaY,l=o?' dy="'.concat(Me(o,$t.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(Me(e,$t.NUM_FRACTION_DIGITS),'" y="').concat(Me(i,$t.NUM_FRACTION_DIGITS),'" ').concat(l).concat(r,">").concat(x_(n),"</tspan>")}_setSVGTextLineText(n,t,e,i){const s=this.getHeightOfLine(t),r=this.textAlign.includes(Vn),o=this._textLines[t];let l,h,u,d,g,p="",m=0;i+=s*(1-this._fontSizeFraction)/this.lineHeight;for(let y=0,_=o.length-1;y<=_;y++)g=y===_||this.charSpacing,p+=o[y],u=this.__charBounds[t][y],m===0?(e+=u.kernedWidth-u.width,m+=u.width):m+=u.kernedWidth,r&&!g&&this._reSpaceAndTab.test(o[y])&&(g=!0),g||(l=l||this.getCompleteStyleDeclaration(t,y),h=this.getCompleteStyleDeclaration(t,y+1),g=kh(l,h,!0)),g&&(d=this._getStyleDeclaration(t,y),n.push(this._createTextCharSpan(p,d,e,i)),p="",l=h,this.direction==="rtl"?e-=m:e+=m,m=0)}_setSVGTextLineBg(n,t,e,i){const s=this._textLines[t],r=this.getHeightOfLine(t)/this.lineHeight;let o,l=0,h=0,u=this.getValueOfPropertyAt(t,0,"textBackgroundColor");for(let d=0;d<s.length;d++){const{left:g,width:p,kernedWidth:m}=this.__charBounds[t][d];o=this.getValueOfPropertyAt(t,d,"textBackgroundColor"),o!==u?(u&&n.push(...md(u,e+h,i,l,r)),h=g,l=p,u=o):l+=m}o&&n.push(...md(u,e+h,i,l,r))}_getSVGLineTopOffset(n){let t,e=0;for(t=0;t<n;t++)e+=this.getHeightOfLine(t);const i=this.getHeightOfLine(t);return{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," white-space: pre;")}getSvgSpanStyles(n,t){const{fontFamily:e,strokeWidth:i,stroke:s,fill:r,fontSize:o,fontStyle:l,fontWeight:h,deltaY:u}=n,d=this.getSvgTextDecoration(n);return[s?el(Ei,s):"",i?"stroke-width: ".concat(i,"; "):"",e?"font-family: ".concat(e.includes("'")||e.includes('"')?e:"'".concat(e,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",l?"font-style: ".concat(l,"; "):"",h?"font-weight: ".concat(h,"; "):"",d&&"text-decoration: ".concat(d,"; "),r?el(He,r):"",u?"baseline-shift: ".concat(-u,"; "):"",t?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(t=>n[t.replace("-","")]).join(" ")}}]),lt.setClass(qe),lt.setSVGClass(qe);class cE{constructor(t){A(this,"target",void 0),A(this,"__mouseDownInPlace",!1),A(this,"__dragStartFired",!1),A(this,"__isDraggingOver",!1),A(this,"__dragStartSelection",void 0),A(this,"__dragImageDisposer",void 0),A(this,"_dispose",void 0),this.target=t;const e=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{e.forEach(i=>i()),this._dispose=void 0}}isPointerOverSelection(t){const e=this.target,i=e.getSelectionStartFromPointer(t);return e.isEditing&&i>=e.selectionStart&&i<=e.selectionEnd&&e.selectionStart<e.selectionEnd}start(t){return this.__mouseDownInPlace=this.isPointerOverSelection(t)}isActive(){return this.__mouseDownInPlace}end(t){const e=this.isActive();return e&&!this.__dragStartFired&&(this.target.setCursorByClick(t),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,e}getDragStartSelection(){return this.__dragStartSelection}setDragImage(t,e){var i;let{selectionStart:s,selectionEnd:r}=e;const o=this.target,l=o.canvas,h=new D(o.flipX?-1:1,o.flipY?-1:1),u=o._getCursorBoundaries(s),d=new D(u.left+u.leftOffset,u.top+u.topOffset).multiply(h).transform(o.calcTransformMatrix()),g=l.getScenePoint(t).subtract(d),p=o.getCanvasRetinaScaling(),m=o.getBoundingRect(),y=d.subtract(new D(m.left,m.top)),_=l.viewportTransform,b=y.add(g).transform(_,!0),x=o.backgroundColor,T=hg(o.styles);o.backgroundColor="";const O={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(O,0,s),o.setSelectionStyles(O,r,o.text.length),o.dirty=!0;const P=o.toCanvasElement({enableRetinaScaling:l.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=x,o.styles=T,o.dirty=!0,th(P,{position:"fixed",left:"".concat(-P.width,"px"),border:Mi,width:"".concat(P.width/p,"px"),height:"".concat(P.height/p,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{P.remove()},bn(t.target||this.target.hiddenTextarea).body.appendChild(P),(i=t.dataTransfer)===null||i===void 0||i.setDragImage(P,b.x,b.y)}onDragStart(t){this.__dragStartFired=!0;const e=this.target,i=this.isActive();if(i&&t.dataTransfer){const s=this.__dragStartSelection={selectionStart:e.selectionStart,selectionEnd:e.selectionEnd},r=e._text.slice(s.selectionStart,s.selectionEnd).join(""),o=I({text:e.text,value:r},s);t.dataTransfer.setData("text/plain",r),t.dataTransfer.setData("application/fabric",JSON.stringify({value:r,styles:e.getSelectionStyles(s.selectionStart,s.selectionEnd,!0)})),t.dataTransfer.effectAllowed="copyMove",this.setDragImage(t,o)}return e.abortCursorAnimation(),i}canDrop(t){if(this.target.editable&&!this.target.getActiveControl()&&!t.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const e=this.target.getSelectionStartFromPointer(t),i=this.__dragStartSelection;return e<i.selectionStart||e>i.selectionEnd}return!0}return!1}targetCanDrop(t){return this.target.canDrop(t)}dragEnterHandler(t){let{e}=t;const i=this.targetCanDrop(e);!this.__isDraggingOver&&i&&(this.__isDraggingOver=!0)}dragOverHandler(t){const{e}=t,i=this.targetCanDrop(e);!this.__isDraggingOver&&i?this.__isDraggingOver=!0:this.__isDraggingOver&&!i&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(e.preventDefault(),t.canDrop=!0,t.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(t){var e;const{e:i}=t,s=i.defaultPrevented;this.__isDraggingOver=!1,i.preventDefault();let r=(e=i.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain");if(r&&!s){const o=this.target,l=o.canvas;let h=o.getSelectionStartFromPointer(i);const{styles:u}=i.dataTransfer.types.includes("application/fabric")?JSON.parse(i.dataTransfer.getData("application/fabric")):{},d=r[Math.max(0,r.length-1)],g=0;if(this.__dragStartSelection){const p=this.__dragStartSelection.selectionStart,m=this.__dragStartSelection.selectionEnd;h>p&&h<=m?h=p:h>m&&(h-=m-p),o.removeChars(p,m),delete this.__dragStartSelection}o._reNewline.test(d)&&(o._reNewline.test(o._text[h])||h===o._text.length)&&(r=r.trimEnd()),t.didDrop=!0,t.dropTarget=o,o.insertChars(r,u,h),l.setActiveObject(o),o.enterEditing(i),o.selectionStart=Math.min(h+g,o._text.length),o.selectionEnd=Math.min(o.selectionStart+r.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(Wc,{index:h+g,action:"drop"}),l.fire("text:changed",{target:o}),l.contextTopDirty=!0,l.requestRenderAll()}}dragEndHandler(t){let{e}=t;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var i;const s=this.target,r=this.target.canvas,{selectionStart:o,selectionEnd:l}=this.__dragStartSelection,h=((i=e.dataTransfer)===null||i===void 0?void 0:i.dropEffect)||Mi;h===Mi?(s.selectionStart=o,s.selectionEnd=l,s._updateTextarea(),s.hiddenTextarea.focus()):(s.clearContextTop(),h==="move"&&(s.removeChars(o,l),s.selectionStart=s.selectionEnd=o,s.hiddenTextarea&&(s.hiddenTextarea.value=s.text),s._updateTextarea(),s.fire(Wc,{index:o,action:"dragend"}),r.fire("text:changed",{target:s}),r.requestRenderAll()),s.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const dv=/[ \n\.,;!\?\-]/;class hE extends qe{constructor(){super(...arguments),A(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(t){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(t)}_animateCursor(t){let{toValue:e,duration:i,delay:s,onComplete:r}=t;return ag({startValue:this._currentCursorOpacity,endValue:e,duration:i,delay:s,onComplete:r,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(t){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(t||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var t;(t=this._currentTickCompleteState)===null||t===void 0||t.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(t){this.abortCursorAnimation(),this._tick(t?0:this.cursorDelay)}abortCursorAnimation(){let t=!1;[this._currentTickState,this._currentTickCompleteState].forEach(e=>{e&&!e.isDone()&&(t=!0,e.abort())}),this._currentCursorOpacity=1,t&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(t=>!t||t.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(t){let e=0,i=t-1;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i--;for(;/\S/.test(this._text[i])&&i>-1;)e++,i--;return t-e}findWordBoundaryRight(t){let e=0,i=t;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i++;for(;/\S/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e}findLineBoundaryLeft(t){let e=0,i=t-1;for(;!/\n/.test(this._text[i])&&i>-1;)e++,i--;return t-e}findLineBoundaryRight(t){let e=0,i=t;for(;!/\n/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e}searchWordBoundary(t,e){const i=this._text;let s=t>0&&this._reSpace.test(i[t])&&(e===-1||!Nf.test(i[t-1]))?t-1:t,r=i[s];for(;s>0&&s<i.length&&!dv.test(r);)s+=e,r=i[s];return e===-1&&dv.test(r)&&s++,s}selectWord(t){t=t||this.selectionStart;const e=this.searchWordBoundary(t,-1),i=Math.max(e,this.searchWordBoundary(t,1));this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(t){t=t||this.selectionStart;const e=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(t){!this.isEditing&&this.editable&&(this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}updateSelectionOnMouseMove(t){if(this.getActiveControl())return;const e=this.hiddenTextarea;bn(e).activeElement!==e&&e.focus();const i=this.getSelectionStartFromPointer(t),s=this.selectionStart,r=this.selectionEnd;(i===this.__selectionStartOnMouseDown&&s!==r||s!==i&&r!==i)&&(i>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=i):(this.selectionStart=i,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===s&&this.selectionEnd===r||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(t,e,i){const s=i.slice(0,t),r=this.graphemeSplit(s).length;if(t===e)return{selectionStart:r,selectionEnd:r};const o=i.slice(t,e);return{selectionStart:r,selectionEnd:r+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(t,e,i){const s=i.slice(0,t).join("").length;return t===e?{selectionStart:s,selectionEnd:s}:{selectionStart:s,selectionEnd:s+i.slice(t,e).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const t=this.hiddenTextarea;this.text=t.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const e=this.fromStringToGraphemeSelection(t.selectionStart,t.selectionEnd,t.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),i=this.get2DCursorLocation(t),s=i.lineIndex,r=i.charIndex,o=this.getValueOfPropertyAt(s,r,"fontSize")*this.lineHeight,l=e.leftOffset,h=this.getCanvasRetinaScaling(),u=this.canvas.upperCanvasEl,d=u.width/h,g=u.height/h,p=d-o,m=g-o,y=new D(e.left+l,e.top+e.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new D(u.clientWidth/d,u.clientHeight/g));return y.x<0&&(y.x=0),y.x>p&&(y.x=p),y.y<0&&(y.y=0),y.y>m&&(y.y=m),y.x+=this.canvas._offset.left,y.y+=this.canvas._offset.top,{left:"".concat(y.x,"px"),top:"".concat(y.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const t=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditing(){const t=this._textBeforeEdit!==this.text;return this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire(Nc),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const t in this.styles)this._textLines[t]||delete this.styles[t]}removeStyleFromTo(t,e){const{lineIndex:i,charIndex:s}=this.get2DCursorLocation(t,!0),{lineIndex:r,charIndex:o}=this.get2DCursorLocation(e,!0);if(i!==r){if(this.styles[i])for(let l=s;l<this._unwrappedTextLines[i].length;l++)delete this.styles[i][l];if(this.styles[r])for(let l=o;l<this._unwrappedTextLines[r].length;l++){const h=this.styles[r][l];h&&(this.styles[i]||(this.styles[i]={}),this.styles[i][s+l-o]=h)}for(let l=i+1;l<=r;l++)delete this.styles[l];this.shiftLineStyles(r,i-r)}else if(this.styles[i]){const l=this.styles[i],h=o-s;for(let u=s;u<o;u++)delete l[u];for(const u in this.styles[i]){const d=parseInt(u,10);d>=o&&(l[d-h]=l[u],delete l[u])}}}shiftLineStyles(t,e){const i=Object.assign({},this.styles);for(const s in this.styles){const r=parseInt(s,10);r>t&&(this.styles[r+e]=i[r],i[r-e]||delete this.styles[r])}}insertNewlineStyleObject(t,e,i,s){const r={},o=this._unwrappedTextLines[t].length,l=o===e;let h=!1;i||(i=1),this.shiftLineStyles(t,i);const u=this.styles[t]?this.styles[t][e===0?e:e-1]:void 0;for(const g in this.styles[t]){const p=parseInt(g,10);p>=e&&(h=!0,r[p-e]=this.styles[t][g],l&&e===0||delete this.styles[t][g])}let d=!1;for(h&&!l&&(this.styles[t+i]=r,d=!0),(d||o>e)&&i--;i>0;)s&&s[i-1]?this.styles[t+i]={0:I({},s[i-1])}:u?this.styles[t+i]={0:I({},u)}:delete this.styles[t+i],i--;this._forceClearCache=!0}insertCharStyleObject(t,e,i,s){this.styles||(this.styles={});const r=this.styles[t],o=r?I({},r):{};i||(i=1);for(const h in o){const u=parseInt(h,10);u>=e&&(r[u+i]=o[u],o[u-i]||delete r[u])}if(this._forceClearCache=!0,s){for(;i--;)Object.keys(s[i]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+i]=I({},s[i]));return}if(!r)return;const l=r[e?e-1:1];for(;l&&i--;)this.styles[t][e+i]=I({},l)}insertNewStyleBlock(t,e,i){const s=this.get2DCursorLocation(e,!0),r=[0];let o,l=0;for(let h=0;h<t.length;h++)t[h]===`
`?(l++,r[l]=0):r[l]++;for(r[0]>0&&(this.insertCharStyleObject(s.lineIndex,s.charIndex,r[0],i),i=i&&i.slice(r[0]+1)),l&&this.insertNewlineStyleObject(s.lineIndex,s.charIndex+r[0],l),o=1;o<l;o++)r[o]>0?this.insertCharStyleObject(s.lineIndex+o,0,r[o],i):i&&this.styles[s.lineIndex+o]&&i[0]&&(this.styles[s.lineIndex+o][0]=i[0]),i=i&&i.slice(r[o]+1);r[o]>0&&this.insertCharStyleObject(s.lineIndex+o,0,r[o],i)}removeChars(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t+1;this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(t,e,i){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:i;s>i&&this.removeStyleFromTo(i,s);const r=this.graphemeSplit(t);this.insertNewStyleBlock(r,i,e),this._text=[...this._text.slice(0,i),...r,...this._text.slice(s)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(t,e,i){i<=t?(e===t?this._selectionDirection=he:this._selectionDirection===Ve&&(this._selectionDirection=he,this.selectionEnd=t),this.selectionStart=i):i>t&&i<e?this._selectionDirection===Ve?this.selectionEnd=i:this.selectionStart=i:(e===t?this._selectionDirection=Ve:this._selectionDirection===he&&(this._selectionDirection=Ve,this.selectionStart=e),this.selectionEnd=i)}}class uE extends hE{initHiddenTextarea(){const t=this.canvas&&bn(this.canvas.getElement())||Fr(),e=t.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o=>{let[l,h]=o;return e.setAttribute(l,h)});const{top:i,left:s,fontSize:r}=this._calcTextareaPosition();e.style.cssText="position: absolute; top: ".concat(i,"; left: ").concat(s,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(r,";"),(this.hiddenTextareaContainer||t.body).appendChild(e),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[l,h]=o;return e.addEventListener(l,this[h].bind(this))}),this.hiddenTextarea=e}blur(){this.abortCursorAnimation()}onKeyDown(t){if(!this.isEditing)return;const e=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(t){const e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),!this.isEditing)return;const i=()=>{this.updateFromTextArea(),this.fire(Wc),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void i();const s=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,r=this._text.length,o=s.length,l=this.selectionStart,h=this.selectionEnd,u=l!==h;let d,g,p,m,y=o-r;const _=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),b=l>_.selectionStart;u?(g=this._text.slice(l,h),y+=h-l):o<r&&(g=b?this._text.slice(h+y,h):this._text.slice(l,l-y));const x=s.slice(_.selectionEnd-y,_.selectionEnd);if(g&&g.length&&(x.length&&(d=this.getSelectionStyles(l,l+1,!1),d=x.map(()=>d[0])),u?(p=l,m=h):b?(p=h-g.length,m=h):(p=h,m=h+g.length),this.removeStyleFromTo(p,m)),x.length){const{copyPasteData:T}=Mn();e&&x.join("")===T.copiedText&&!$t.disableStyleCopyPaste&&(d=T.copiedTextStyle),this.insertNewStyleBlock(x,l,d)}i()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(t){let{target:e}=t;const{selectionStart:i,selectionEnd:s}=e;this.compositionStart=i,this.compositionEnd=s,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:t}=Mn();t.copiedText=this.getSelectedText(),$t.disableStyleCopyPaste?t.copiedTextStyle=void 0:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(t,e){let i,s=this._getLineLeftOffset(t);return e>0&&(i=this.__charBounds[t][e-1],s+=i.left+i.width),s}getDownCursorOffset(t,e){const i=this._getSelectionForOffset(t,e),s=this.get2DCursorLocation(i),r=s.lineIndex;if(r===this._textLines.length-1||t.metaKey||t.keyCode===34)return this._text.length-i;const o=s.charIndex,l=this._getWidthBeforeCursor(r,o),h=this._getIndexOnLine(r+1,l);return this._textLines[r].slice(o).length+h+1+this.missingNewlineOffset(r)}_getSelectionForOffset(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart}getUpCursorOffset(t,e){const i=this._getSelectionForOffset(t,e),s=this.get2DCursorLocation(i),r=s.lineIndex;if(r===0||t.metaKey||t.keyCode===33)return-i;const o=s.charIndex,l=this._getWidthBeforeCursor(r,o),h=this._getIndexOnLine(r-1,l),u=this._textLines[r].slice(0,o),d=this.missingNewlineOffset(r-1);return-this._textLines[r-1].length+h-u.length+(1-d)}_getIndexOnLine(t,e){const i=this._textLines[t];let s,r,o=this._getLineLeftOffset(t),l=0;for(let h=0,u=i.length;h<u;h++)if(s=this.__charBounds[t][h].width,o+=s,o>e){r=!0;const d=o-s,g=o,p=Math.abs(d-e);l=Math.abs(g-e)<p?h:h-1;break}return r||(l=i.length-1),l}moveCursorDown(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)}moveCursorUp(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",t)}_moveCursorUpOrDown(t,e){const i=this["get".concat(t,"CursorOffset")](e,this._selectionDirection===Ve);if(e.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),i!==0){const s=this.text.length;this.selectionStart=Ir(0,this.selectionStart,s),this.selectionEnd=Ir(0,this.selectionEnd,s),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(t){const e=this._selectionDirection===he?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),t!==0}moveCursorWithoutShift(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),t!==0}moveCursorLeft(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",t)}_move(t,e,i){let s;if(t.altKey)s=this["findWordBoundary".concat(i)](this[e]);else{if(!t.metaKey&&t.keyCode!==35&&t.keyCode!==36)return this[e]+=i==="Left"?-1:1,!0;s=this["findLineBoundary".concat(i)](this[e])}return s!==void 0&&this[e]!==s&&(this[e]=s,!0)}_moveLeft(t,e){return this._move(t,e,"Left")}_moveRight(t,e){return this._move(t,e,"Right")}moveCursorLeftWithoutShift(t){let e=!0;return this._selectionDirection=he,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e}moveCursorLeftWithShift(t){return this._selectionDirection===Ve&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=he,this._moveLeft(t,"selectionStart")):void 0}moveCursorRight(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)}_moveCursorLeftOrRight(t,e){const i="moveCursor".concat(t).concat(e.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[i](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(t){return this._selectionDirection===he&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Ve,this._moveRight(t,"selectionEnd")):void 0}moveCursorRightWithoutShift(t){let e=!0;return this._selectionDirection=Ve,this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e}}const yd=n=>!!n.button;class dE extends uE{constructor(){super(...arguments),A(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new cE(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(t){return this.draggableTextDelegate.onDragStart(t)}canDrop(t){return this.draggableTextDelegate.canDrop(t)}onMouseDown(t){if(!this.canvas)return;this.__newClickTime=+new Date;const e=t.pointer;this.isTripleClick(e)&&(this.fire("tripleclick",t),Gd(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y}doubleClickHandler(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))}tripleClickHandler(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))}_mouseDownHandler(t){let{e}=t;this.canvas&&this.editable&&!yd(e)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(e)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(t){let{e}=t;this.canvas&&this.editable&&!yd(e)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(t){let{e,transform:i}=t;const s=this.draggableTextDelegate.end(e);if(this.canvas){this.canvas.textEditingManager.unregister(this);const r=this.canvas._activeObject;if(r&&r!==this)return}!this.editable||this.group&&!this.group.interactive||i&&i.actionPerformed||yd(e)||s||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(t){const e=this.getSelectionStartFromPointer(t),i=this.selectionStart,s=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,s,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(t){const e=this.canvas.getScenePoint(t).transform(zi(this.calcTransformMatrix())).add(new D(-this._getLeftOffset(),-this._getTopOffset()));let i=0,s=0,r=0;for(let u=0;u<this._textLines.length&&i<=e.y;u++)i+=this.getHeightOfLine(u),r=u,u>0&&(s+=this._textLines[u-1].length+this.missingNewlineOffset(u-1));let o=Math.abs(this._getLineLeftOffset(r));const l=this._textLines[r].length,h=this.__charBounds[r];for(let u=0;u<l;u++){const d=o+h[u].kernedWidth;if(e.x<=d){Math.abs(e.x-d)<=Math.abs(e.x-o)&&s++;break}o=d,s++}return Math.min(this.flipX?l-s:s,this._text.length)}}const vc="moveCursorUp",yc="moveCursorDown",_c="moveCursorLeft",wc="moveCursorRight",bc="exitEditing",fE=I({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:bc,27:bc,33:vc,34:yc,35:wc,36:_c,37:_c,38:vc,39:wc,40:yc},keysMapRtl:{9:bc,27:bc,33:vc,34:yc,35:_c,36:wc,37:wc,38:vc,39:_c,40:yc},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Xn extends dE{static getDefaults(){return I(I({},super.getDefaults()),Xn.ownDefaults)}get type(){const t=super.type;return t==="itext"?"i-text":t}constructor(t,e){super(t,I(I({},Xn.ownDefaults),e)),this.initBehavior()}_set(t,e){return this.isEditing&&this._savedProps&&t in this._savedProps?(this._savedProps[t]=e,this):(t==="canvas"&&(this.canvas instanceof Io&&this.canvas.textEditingManager.remove(this),e instanceof Io&&e.textEditingManager.add(this)),super._set(t,e))}setSelectionStart(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)}setSelectionEnd(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)}_updateAndFire(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,i=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(t,e,i)}setSelectionStyles(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(t,e,i)}get2DCursorLocation(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(t,e)}render(t){super.render(t),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(t){const e=this.isEditing;this.isEditing=!1;const i=super.toCanvasElement(t);return this.isEditing=e,i}renderCursorOrSelection(){if(!this.isEditing)return;const t=this.clearContextTop(!0);if(!t)return;const e=this._getCursorBoundaries();this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),this.canvas.contextTopDirty=!0,t.restore()}_getCursorBoundaries(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;const i=this._getLeftOffset(),s=this._getTopOffset(),r=this._getCursorBoundariesOffsets(t,e);return{left:i,top:s,leftOffset:r.left,topOffset:r.top}}_getCursorBoundariesOffsets(t,e){return e?this.__getCursorBoundariesOffsets(t):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(t)}__getCursorBoundariesOffsets(t){let e=0,i=0;const{charIndex:s,lineIndex:r}=this.get2DCursorLocation(t);for(let u=0;u<r;u++)e+=this.getHeightOfLine(u);const o=this._getLineLeftOffset(r),l=this.__charBounds[r][s];l&&(i=l.left),this.charSpacing!==0&&s===this._textLines[r].length&&(i-=this._getWidthOfCharSpacing());const h={top:e,left:o+(i>0?i:0)};return this.direction==="rtl"&&(this.textAlign===Ve||this.textAlign===Vn||this.textAlign===Ha?h.left*=-1:this.textAlign===he||this.textAlign===eh?h.left=o-(i>0?i:0):this.textAlign!==It&&this.textAlign!==Ya||(h.left=o-(i>0?i:0))),h}renderCursorAt(t){const e=this._getCursorBoundaries(t,!0);this._renderCursor(this.canvas.contextTop,e,t)}renderCursor(t,e){this._renderCursor(t,e,this.selectionStart)}_renderCursor(t,e,i){const s=this.get2DCursorLocation(i),r=s.lineIndex,o=s.charIndex>0?s.charIndex-1:0,l=this.getValueOfPropertyAt(r,o,"fontSize"),h=this.getObjectScaling().x*this.canvas.getZoom(),u=this.cursorWidth/h,d=this.getValueOfPropertyAt(r,o,"deltaY"),g=e.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(r)/this.lineHeight-l*(1-this._fontSizeFraction);this.inCompositionMode&&this.renderSelection(t,e),t.fillStyle=this.cursorColor||this.getValueOfPropertyAt(r,o,He),t.globalAlpha=this._currentCursorOpacity,t.fillRect(e.left+e.leftOffset-u/2,g+e.top+d,u,l)}renderSelection(t,e){const i={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(t,i,e)}renderDragSourceEffect(){const t=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,t,this._getCursorBoundaries(t.selectionStart,!0))}renderDropTargetEffect(t){const e=this.getSelectionStartFromPointer(t);this.renderCursorAt(e)}_renderSelection(t,e,i){const s=e.selectionStart,r=e.selectionEnd,o=this.textAlign.includes(Vn),l=this.get2DCursorLocation(s),h=this.get2DCursorLocation(r),u=l.lineIndex,d=h.lineIndex,g=l.charIndex<0?0:l.charIndex,p=h.charIndex<0?0:h.charIndex;for(let m=u;m<=d;m++){const y=this._getLineLeftOffset(m)||0;let _=this.getHeightOfLine(m),b=0,x=0,T=0;if(m===u&&(x=this.__charBounds[u][g].left),m>=u&&m<d)T=o&&!this.isEndOfWrapping(m)?this.width:this.getLineWidth(m)||5;else if(m===d)if(p===0)T=this.__charBounds[d][p].left;else{const R=this._getWidthOfCharSpacing();T=this.__charBounds[d][p-1].left+this.__charBounds[d][p-1].width-R}b=_,(this.lineHeight<1||m===d&&this.lineHeight>1)&&(_/=this.lineHeight);let O=i.left+y+x,P=_,F=0;const X=T-x;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",P=1,F=_):t.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Ve||this.textAlign===Vn||this.textAlign===Ha?O=this.width-O-X:this.textAlign===he||this.textAlign===eh?O=i.left+y-T:this.textAlign!==It&&this.textAlign!==Ya||(O=i.left+y-T)),t.fillRect(O,i.top+i.topOffset+F,X,P),i.topOffset+=b}}getCurrentCharFontSize(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")}getCurrentCharColor(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,He)}_getCurrentCharIndex(){const t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}dispose(){this._exitEditing(),this.draggableTextDelegate.dispose(),super.dispose()}}A(Xn,"ownDefaults",fE),A(Xn,"type","IText"),lt.setClass(Xn),lt.setClass(Xn,"i-text");class Bi extends Xn{static getDefaults(){return I(I({},super.getDefaults()),Bi.ownDefaults)}constructor(t,e){super(t,I(I({},Bi.ownDefaults),e))}static createControls(){return{controls:v_()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Vn)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(t){let e=0,i=0,s=0;const r={};for(let o=0;o<t.graphemeLines.length;o++)t.graphemeText[s]===`
`&&o>0?(i=0,s++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[s])&&o>0&&(i++,s++),r[o]={line:e,offset:i},s+=t.graphemeLines[o].length,i+=t.graphemeLines[o].length;return r}styleHas(t,e){if(this._styleMap&&!this.isWrapping){const i=this._styleMap[e];i&&(e=i.line)}return super.styleHas(t,e)}isEmptyStyles(t){if(!this.styles)return!0;let e,i=0,s=t+1,r=!1;const o=this._styleMap[t],l=this._styleMap[t+1];o&&(t=o.line,i=o.offset),l&&(s=l.line,r=s===t,e=l.offset);const h=t===void 0?this.styles:{line:this.styles[t]};for(const u in h)for(const d in h[u]){const g=parseInt(d,10);if(g>=i&&(!r||g<e))for(const p in h[u][d])return!1}return!0}_getStyleDeclaration(t,e){if(this._styleMap&&!this.isWrapping){const i=this._styleMap[t];if(!i)return{};t=i.line,e=i.offset+e}return super._getStyleDeclaration(t,e)}_setStyleDeclaration(t,e,i){const s=this._styleMap[t];super._setStyleDeclaration(s.line,s.offset+e,i)}_deleteStyleDeclaration(t,e){const i=this._styleMap[t];super._deleteStyleDeclaration(i.line,i.offset+e)}_getLineStyle(t){const e=this._styleMap[t];return!!this.styles[e.line]}_setLineStyle(t){const e=this._styleMap[t];super._setLineStyle(e.line)}_wrapText(t,e){this.isWrapping=!0;const i=this.getGraphemeDataForRender(t),s=[];for(let r=0;r<i.wordsData.length;r++)s.push(...this._wrapLine(r,e,i));return this.isWrapping=!1,s}getGraphemeDataForRender(t){const e=this.splitByGrapheme,i=e?"":" ";let s=0;return{wordsData:t.map((r,o)=>{let l=0;const h=e?this.graphemeSplit(r):this.wordSplit(r);return h.length===0?[{word:[],width:0}]:h.map(u=>{const d=e?[u]:this.graphemeSplit(u),g=this._measureWord(d,o,l);return s=Math.max(g,s),l+=d.length+i.length,{word:d,width:g}})}),largestWordWidth:s}}_measureWord(t,e){let i,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=0;for(let o=0,l=t.length;o<l;o++)r+=this._getGraphemeBox(t[o],e,o+s,i,!0).kernedWidth,i=t[o];return r}wordSplit(t){return t.split(this._wordJoiners)}_wrapLine(t,e,i){let{largestWordWidth:s,wordsData:r}=i,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const l=this._getWidthOfCharSpacing(),h=this.splitByGrapheme,u=[],d=h?"":" ";let g=0,p=[],m=0,y=0,_=!0;e-=o;const b=Math.max(e,s,this.dynamicMinWidth),x=r[t];let T;for(m=0,T=0;T<x.length;T++){const{word:O,width:P}=x[T];m+=O.length,g+=y+P-l,g>b&&!_?(u.push(p),p=[],g=P,_=!0):g+=l,_||h||p.push(d),p=p.concat(O),y=h?0:this._measureWord([d],t,m),m++,_=!1}return T&&u.push(p),s+o>this.dynamicMinWidth&&(this.dynamicMinWidth=s-l+o),u}isEndOfWrapping(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line}missingNewlineOffset(t,e){return this.splitByGrapheme&&!e?this.isEndOfWrapping(t)?1:0:1}_splitTextIntoLines(t){const e=super._splitTextIntoLines(t),i=this._wrapText(e.lines,this.width),s=new Array(i.length);for(let r=0;r<i.length;r++)s[r]=i[r].join("");return e.lines=s,e.graphemeLines=i,e}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const t=new Map;for(const e in this._styleMap){const i=parseInt(e,10);if(this._textLines[i]){const s=this._styleMap[e].line;t.set("".concat(s),!0)}}for(const e in this.styles)t.has(e)||delete this.styles[e]}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...t])}}A(Bi,"type","Textbox"),A(Bi,"textLayoutProperties",[...Xn.textLayoutProperties,"width"]),A(Bi,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),lt.setClass(Bi);class of extends pl{shouldPerformLayout(t){return!!t.target.clipPath&&super.shouldPerformLayout(t)}shouldLayoutClipPath(){return!1}calcLayoutResult(t,e){const{target:i}=t,{clipPath:s,group:r}=i;if(!s||!this.shouldPerformLayout(t))return;const{width:o,height:l}=$n(M_(i,s)),h=new D(o,l);if(s.absolutePositioned)return{center:ys(s.getRelativeCenterPoint(),void 0,r?r.calcTransformMatrix():void 0),size:h};{const u=s.getRelativeCenterPoint().transform(i.calcOwnMatrix(),!0);if(this.shouldPerformLayout(t)){const{center:d=new D,correction:g=new D}=this.calcBoundingBox(e,t)||{};return{center:d.add(u),correction:g.subtract(u),size:h}}return{center:i.getRelativeCenterPoint().add(u),size:h}}}}A(of,"type","clip-path"),lt.setClass(of);class af extends pl{getInitialSize(t,e){let{target:i}=t,{size:s}=e;return new D(i.width||s.x,i.height||s.y)}}A(af,"type","fixed"),lt.setClass(af);class gE extends jo{subscribeTargets(t){const e=t.target;t.targets.reduce((i,s)=>(s.parent&&i.add(s.parent),i),new Set).forEach(i=>{i.layoutManager.subscribeTargets({target:i,targets:[e]})})}unsubscribeTargets(t){const e=t.target,i=e.getObjects();t.targets.reduce((s,r)=>(r.parent&&s.add(r.parent),s),new Set).forEach(s=>{!i.some(r=>r.parent===s)&&s.layoutManager.unsubscribeTargets({target:s,targets:[e]})})}}class Us extends ki{static getDefaults(){return I(I({},super.getDefaults()),Us.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Us.ownDefaults),this.setOptions(e);const{left:i,top:s,layoutManager:r}=e;this.groupInit(t,{left:i,top:s,layoutManager:r??new gE})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.multiSelectionStacking==="selection-order"?this.add(...e):e.forEach(s=>{const r=this._objects.findIndex(l=>l.isInFrontOf(s)),o=r===-1?this.size():r;this.insertAt(o,s)})}canEnterGroup(t){return this.getObjects().some(e=>e.isDescendantOf(t)||t.isDescendantOf(e))?(bs("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(t)}enterGroup(t,e){t.parent&&t.parent===t.group?t.parent._exitGroup(t):t.group&&t.parent!==t.group&&t.group.remove(t),this._enterGroup(t,e)}exitGroup(t,e){this._exitGroup(t,e),t.parent&&t.parent._enterGroup(t,!0)}_onAfterObjectsChange(t,e){super._onAfterObjectsChange(t,e);const i=new Set;e.forEach(s=>{const{parent:r}=s;r&&i.add(r)}),t===dg?i.forEach(s=>{s._onAfterObjectsChange(qc,e)}):i.forEach(s=>{s._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(t,e,i){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const s=I(I({hasControls:!1},i),{},{forActiveSelection:!0});for(let r=0;r<this._objects.length;r++)this._objects[r]._renderControls(t,s);super._renderControls(t,e),t.restore()}}A(Us,"type","ActiveSelection"),A(Us,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),lt.setClass(Us),lt.setClass(Us,"activeSelection");class iw{constructor(){A(this,"resources",{})}applyFilters(t,e,i,s,r){const o=r.getContext("2d");if(!o)return;o.drawImage(e,0,0,i,s);const l={sourceWidth:i,sourceHeight:s,imageData:o.getImageData(0,0,i,s),originalEl:e,originalImageData:o.getImageData(0,0,i,s),canvasEl:r,ctx:o,filterBackend:this};t.forEach(u=>{u.applyTo(l)});const{imageData:h}=l;return h.width===i&&h.height===s||(r.width=h.width,r.height=h.height),o.putImageData(h,0,0),l}}class sl{constructor(){let{tileSize:t=$t.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};A(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),A(this,"resources",{}),this.tileSize=t,this.setupGLContext(t,t),this.captureGPUInfo()}setupGLContext(t,e){this.dispose(),this.createWebGLCanvas(t,e)}createWebGLCanvas(t,e){const i=Ee();i.width=t,i.height=e;const s=i.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});s&&(s.clearColor(0,0,0,0),this.canvas=i,this.gl=s)}applyFilters(t,e,i,s,r,o){const l=this.gl,h=r.getContext("2d");if(!l||!h)return;let u;o&&(u=this.getCachedTexture(o,e));const d={originalWidth:e.width||e.originalWidth||0,originalHeight:e.height||e.originalHeight||0,sourceWidth:i,sourceHeight:s,destinationWidth:i,destinationHeight:s,context:l,sourceTexture:this.createTexture(l,i,s,u?void 0:e),targetTexture:this.createTexture(l,i,s),originalTexture:u||this.createTexture(l,i,s,u?void 0:e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:r},g=l.createFramebuffer();return l.bindFramebuffer(l.FRAMEBUFFER,g),t.forEach(p=>{p&&p.applyTo(d)}),function(p){const m=p.targetCanvas,y=m.width,_=m.height,b=p.destinationWidth,x=p.destinationHeight;y===b&&_===x||(m.width=b,m.height=x)}(d),this.copyGLTo2D(l,d),l.bindTexture(l.TEXTURE_2D,null),l.deleteTexture(d.sourceTexture),l.deleteTexture(d.targetTexture),l.deleteFramebuffer(g),h.setTransform(1,0,0,1,0,0),d}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(t,e,i,s,r){const{NEAREST:o,TEXTURE_2D:l,RGBA:h,UNSIGNED_BYTE:u,CLAMP_TO_EDGE:d,TEXTURE_MAG_FILTER:g,TEXTURE_MIN_FILTER:p,TEXTURE_WRAP_S:m,TEXTURE_WRAP_T:y}=t,_=t.createTexture();return t.bindTexture(l,_),t.texParameteri(l,g,r||o),t.texParameteri(l,p,r||o),t.texParameteri(l,m,d),t.texParameteri(l,y,d),s?t.texImage2D(l,0,h,h,u,s):t.texImage2D(l,0,h,e,i,0,h,u,null),_}getCachedTexture(t,e,i){const{textureCache:s}=this;if(s[t])return s[t];{const r=this.createTexture(this.gl,e.width,e.height,e,i);return r&&(s[t]=r),r}}evictCachesForKey(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])}copyGLTo2D(t,e){const i=t.canvas,s=e.targetCanvas,r=s.getContext("2d");if(!r)return;r.translate(0,s.height),r.scale(1,-1);const o=i.height-s.height;r.drawImage(i,0,o,s.width,s.height,0,0,s.width,s.height)}copyGLTo2DPutImageData(t,e){const i=e.targetCanvas.getContext("2d"),s=e.destinationWidth,r=e.destinationHeight,o=s*r*4;if(!i)return;const l=new Uint8Array(this.imageBuffer,0,o),h=new Uint8ClampedArray(this.imageBuffer,0,o);t.readPixels(0,0,s,r,t.RGBA,t.UNSIGNED_BYTE,l);const u=new ImageData(h,s,r);i.putImageData(u,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const t=this.gl,e={renderer:"",vendor:""};if(!t)return e;const i=t.getExtension("WEBGL_debug_renderer_info");if(i){const s=t.getParameter(i.UNMASKED_RENDERER_WEBGL),r=t.getParameter(i.UNMASKED_VENDOR_WEBGL);s&&(e.renderer=s.toLowerCase()),r&&(e.vendor=r.toLowerCase())}return this.gpuInfo=e,e}}let Ac;function nw(){const{WebGLProbe:n}=Mn();return n.queryWebGL(Ee()),$t.enableGLFiltering&&n.isSupported($t.textureSize)?new sl({tileSize:$t.textureSize}):new iw}function Dc(){return!Ac&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Ac=nw()),Ac}function pE(n){Ac=n}const mE=["filters","resizeFilter","src","crossOrigin","type"],sw=["cropX","cropY"];class Pe extends ge{static getDefaults(){return I(I({},super.getDefaults()),Pe.ownDefaults)}constructor(t,e){super(),A(this,"_lastScaleX",1),A(this,"_lastScaleY",1),A(this,"_filterScalingX",1),A(this,"_filterScalingY",1),this.filters=[],Object.assign(this,Pe.ownDefaults),this.setOptions(e),this.cacheKey="texture".concat(tr()),this.setElement(typeof t=="string"?(this.canvas&&bn(this.canvas.getElement())||Fr()).getElementById(t):t,e)}getElement(){return this._element}setElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=t,this._originalElement=t,this._setWidthHeight(e),t.classList.add(Pe.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(t){const e=Dc(!1);e instanceof sl&&e.evictCachesForKey(t)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(t=>{const e=this[t];e&&Mn().dispose(e),this[t]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const t=this.getElement();return t?{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}:{width:0,height:0}}_stroke(t){if(!this.stroke||this.strokeWidth===0)return;const e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath()}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=[];return this.filters.forEach(i=>{i&&e.push(i.toObject())}),I(I({},super.toObject([...sw,...t])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const t=[],e=this._element,i=-this.width/2,s=-this.height/2;let r=[],o=[],l="",h="";if(!e)return[];if(this.hasCrop()){const u=tr();r.push('<clipPath id="imageCrop_'+u+`">
`,'	<rect x="'+i+'" y="'+s+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),l=' clip-path="url(#imageCrop_'+u+')" '}if(this.imageSmoothing||(h=' image-rendering="optimizeSpeed"'),t.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(i-this.cropX,'" y="').concat(s-this.cropY,'" width="').concat(e.width||e.naturalWidth,'" height="').concat(e.height||e.naturalHeight,'"').concat(h).concat(l,`></image>
`)),this.stroke||this.strokeDashArray){const u=this.fill;this.fill=null,o=['	<rect x="'.concat(i,'" y="').concat(s,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=u}return r=this.paintFirst!==He?r.concat(o,t):r.concat(t,o),r}getSrc(t){const e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src")||"":e.src:this.src||""}getSvgSrc(t){return this.getSrc(t)}setSrc(t){let{crossOrigin:e,signal:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return za(t,{crossOrigin:e,signal:i}).then(s=>{e!==void 0&&this.set({crossOrigin:e}),this.setElement(s)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const t=this.resizeFilter,e=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),s=i.x,r=i.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||s>e&&r>e)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=s,void(this._lastScaleY=r);const l=Ee(),h=o.width,u=o.height;l.width=h,l.height=u,this._element=l,this._lastScaleX=t.scaleX=s,this._lastScaleY=t.scaleY=r,Dc().applyFilters([t],o,h,u,this._element),this._filterScalingX=l.width/this._originalElement.width,this._filterScalingY=l.height/this._originalElement.height}applyFilters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(t=t.filter(r=>r&&!r.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),t.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const e=this._originalElement,i=e.naturalWidth||e.width,s=e.naturalHeight||e.height;if(this._element===this._originalElement){const r=Ee();r.width=i,r.height=s,this._element=r,this._filteredEl=r}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,s),this._lastScaleX=1,this._lastScaleY=1);Dc().applyFilters(t,this._originalElement,i,s,this._element),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(t){t.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)}drawCacheOnCanvas(t){t.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(t)}shouldCache(){return this.needsItsOwnCache()}_renderFill(t){const e=this._element;if(!e)return;const i=this._filterScalingX,s=this._filterScalingY,r=this.width,o=this.height,l=Math.max(this.cropX,0),h=Math.max(this.cropY,0),u=e.naturalWidth||e.width,d=e.naturalHeight||e.height,g=l*i,p=h*s,m=Math.min(r*i,u-g),y=Math.min(o*s,d-p),_=-r/2,b=-o/2,x=Math.min(r,u/i-l),T=Math.min(o,d/s-h);e&&t.drawImage(e,g,p,m,y,_,b,x,T)}_needsResize(){const t=this.getTotalObjectScaling();return t.x!==this._lastScaleX||t.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:t,height:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i=this.getOriginalSize();this.width=t||i.width,this.height=e||i.height}parsePreserveAspectRatioAttribute(){const t=Jf(this.preserveAspectRatio||""),e=this.width,i=this.height,s={width:e,height:i};let r,o=this._element.width,l=this._element.height,h=1,u=1,d=0,g=0,p=0,m=0;return!t||t.alignX===Mi&&t.alignY===Mi?(h=e/o,u=i/l):(t.meetOrSlice==="meet"&&(h=u=k_(this._element,s),r=(e-o*h)/2,t.alignX==="Min"&&(d=-r),t.alignX==="Max"&&(d=r),r=(i-l*u)/2,t.alignY==="Min"&&(g=-r),t.alignY==="Max"&&(g=r)),t.meetOrSlice==="slice"&&(h=u=A_(this._element,s),r=o-e/h,t.alignX==="Mid"&&(p=r/2),t.alignX==="Max"&&(p=r),r=l-i/u,t.alignY==="Mid"&&(m=r/2),t.alignY==="Max"&&(m=r),o=e/h,l=i/u)),{width:o,height:l,scaleX:h,scaleY:u,offsetLeft:d,offsetTop:g,cropX:p,cropY:m}}static fromObject(t,e){let{filters:i,resizeFilter:s,src:r,crossOrigin:o,type:l}=t,h=ke(t,mE);return Promise.all([za(r,I(I({},e),{},{crossOrigin:o})),i&&ko(i,e),s&&ko([s],e),fl(h,e)]).then(u=>{let[d,g=[],[p]=[],m={}]=u;return new this(d,I(I({},h),{},{src:r,filters:g,resizeFilter:p},m))})}static fromURL(t){let{crossOrigin:e=null,signal:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;return za(t,{crossOrigin:e,signal:i}).then(r=>new this(r,s))}static async fromElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const s=Zn(t,this.ATTRIBUTE_NAMES,i);return this.fromURL(s["xlink:href"],e,s).catch(r=>(bs("log","Unable to parse Image",r),null))}}function _d(n){if(!FM.test(n.nodeName))return{};const t=n.getAttribute("viewBox");let e,i,s=1,r=1,o=0,l=0;const h=n.getAttribute("width"),u=n.getAttribute("height"),d=n.getAttribute("x")||0,g=n.getAttribute("y")||0,p=!(t&&Km.test(t)),m=!h||!u||h==="100%"||u==="100%";let y="",_=0,b=0;if(p&&(d||g)&&n.parentNode&&n.parentNode.nodeName!=="#document"&&(y=" translate("+Ti(d||"0")+" "+Ti(g||"0")+") ",e=(n.getAttribute("transform")||"")+y,n.setAttribute("transform",e),n.removeAttribute("x"),n.removeAttribute("y")),p&&m)return{width:0,height:0};const x={width:0,height:0};if(p)return x.width=Ti(h),x.height=Ti(u),x;const T=t.match(Km);o=-parseFloat(T[1]),l=-parseFloat(T[2]);const O=parseFloat(T[3]),P=parseFloat(T[4]);x.minX=o,x.minY=l,x.viewBoxWidth=O,x.viewBoxHeight=P,m?(x.width=O,x.height=P):(x.width=Ti(h),x.height=Ti(u),s=x.width/O,r=x.height/P);const F=Jf(n.getAttribute("preserveAspectRatio")||"");if(F.alignX!==Mi&&(F.meetOrSlice==="meet"&&(r=s=s>r?r:s),F.meetOrSlice==="slice"&&(r=s=s>r?s:r),_=x.width-O*s,b=x.height-P*s,F.alignX==="Mid"&&(_/=2),F.alignY==="Mid"&&(b/=2),F.alignX==="Min"&&(_=0),F.alignY==="Min"&&(b=0)),s===1&&r===1&&o===0&&l===0&&d===0&&g===0)return x;if((d||g)&&n.parentNode.nodeName!=="#document"&&(y=" translate("+Ti(d||"0")+" "+Ti(g||"0")+") "),e=y+" matrix("+s+" 0 0 "+r+" "+(o*s+_)+" "+(l*r+b)+") ",n.nodeName==="svg"){for(i=n.ownerDocument.createElementNS(Kd,"g");n.firstChild;)i.appendChild(n.firstChild);n.appendChild(i)}else i=n,i.removeAttribute("x"),i.removeAttribute("y"),e=i.getAttribute("transform")+e;return i.setAttribute("transform",e),x}A(Pe,"type","Image"),A(Pe,"cacheProperties",[...Os,...sw]),A(Pe,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),A(Pe,"CSS_CANVAS","canvas-img"),A(Pe,"ATTRIBUTE_NAMES",[...lr,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),lt.setClass(Pe),lt.setSVGClass(Pe);const ih=n=>n.tagName.replace("svg:",""),vE=Oh(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);function rw(n,t){let e,i,s,r,o=[];for(s=0,r=t.length;s<r;s++)e=t[s],i=n.getElementsByTagNameNS("http://www.w3.org/2000/svg",e),o=o.concat(Array.from(i));return o}const yE=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],wd="xlink:href";function ow(n,t){var e;const i=((e=t.getAttribute(wd))===null||e===void 0?void 0:e.slice(1))||"",s=n.getElementById(i);if(s&&s.getAttribute(wd)&&ow(n,s),s&&(yE.forEach(r=>{const o=s.getAttribute(r);!t.hasAttribute(r)&&o&&t.setAttribute(r,o)}),!t.children.length)){const r=s.cloneNode(!0);for(;r.firstChild;)t.appendChild(r.firstChild)}t.removeAttribute(wd)}const _E=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"];function aw(n){const t=n.getElementsByTagName("style");let e,i;const s={};for(e=0,i=t.length;e<i;e++){const r=(t[e].textContent||"").replace(/\/\*[\s\S]*?\*\//g,"");r.trim()!==""&&r.split("}").filter((o,l,h)=>h.length>1&&o.trim()).forEach(o=>{if((o.match(/{/g)||[]).length>1&&o.trim().startsWith("@"))return;const l=o.split("{"),h={},u=l[1].trim().split(";").filter(function(d){return d.trim()});for(e=0,i=u.length;e<i;e++){const d=u[e].split(":"),g=d[0].trim(),p=d[1].trim();h[g]=p}(o=l[0].trim()).split(",").forEach(d=>{(d=d.replace(/^svg/i,"").trim())!==""&&(s[d]=I(I({},s[d]||{}),h))})})}return s}const fv=n=>lt.getSVGClass(ih(n).toLowerCase());class wE{constructor(t,e,i,s,r){this.elements=t,this.options=e,this.reviver=i,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=s,this.clipPaths=r,this.gradientDefs=function(o){const l=rw(o,_E),h={};let u=l.length;for(;u--;){const d=l[u];d.getAttribute("xlink:href")&&ow(o,d);const g=d.getAttribute("id");g&&(h[g]=d)}return h}(s),this.cssRules=aw(s)}parse(){return Promise.all(this.elements.map(t=>this.createObject(t)))}async createObject(t){const e=fv(t);if(e){const i=await e.fromElement(t,this.options,this.cssRules);return this.resolveGradient(i,t,He),this.resolveGradient(i,t,Ei),i instanceof Pe&&i._originalElement?kc(i,i.parsePreserveAspectRatioAttribute()):kc(i),await this.resolveClipPath(i,t),this.reviver&&this.reviver(t,i),i}return null}extractPropertyDefinition(t,e,i){const s=t[e],r=this.regexUrl;if(!r.test(s))return;r.lastIndex=0;const o=r.exec(s)[1];return r.lastIndex=0,i[o]}resolveGradient(t,e,i){const s=this.extractPropertyDefinition(t,i,this.gradientDefs);if(s){const r=e.getAttribute(i+"-opacity"),o=_o.fromElement(s,t,I(I({},this.options),{},{opacity:r}));t.set(i,o)}}async resolveClipPath(t,e){const i=this.extractPropertyDefinition(t,"clipPath",this.clipPaths);if(i){const s=zi(t.calcTransformMatrix()),r=i[0].parentElement;let o=e;for(;o.parentElement&&o.getAttribute("clip-path")!==t.clipPath;)o=o.parentElement;o.parentElement.appendChild(r);const l=il("".concat(o.getAttribute("transform")||""," ").concat(r.getAttribute("originalTransform")||""));r.setAttribute("transform","matrix(".concat(l.join(","),")"));const h=await Promise.all(i.map(x=>fv(x).fromElement(x,this.options,this.cssRules).then(T=>(kc(T),T.fillRule=T.clipRule,delete T.clipRule,T)))),u=h.length===1?h[0]:new ki(h),d=De(s,u.calcTransformMatrix());u.clipPath&&await this.resolveClipPath(u,o);const{scaleX:g,scaleY:p,angle:m,skewX:y,translateX:_,translateY:b}=jr(d);u.set({flipX:!1,flipY:!1}),u.set({scaleX:g,scaleY:p,angle:m,skewX:y,skewY:0}),u.setPositionByOrigin(new D(_,b),It,It),t.clipPath=u}else delete t.clipPath}}const gv=n=>LM.test(ih(n)),lf=()=>({objects:[],elements:[],options:{},allElements:[]});async function pg(n,t){let{crossOrigin:e,signal:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(i&&i.aborted)return bs("log",new Yf("parseSVGDocument")),lf();const s=n.documentElement;(function(u){const d=rw(u,["use","svg:use"]),g=["x","y","xlink:href","href","transform"];for(const p of d){const m=p.attributes,y={};for(const V of m)V.value&&(y[V.name]=V.value);const _=(y["xlink:href"]||y.href||"").slice(1);if(_==="")return;const b=u.getElementById(_);if(b===null)return;let x=b.cloneNode(!0);const T=x.attributes,O={};for(const V of T)V.value&&(O[V.name]=V.value);const{x:P=0,y:F=0,transform:X=""}=y,R="".concat(X," ").concat(O.transform||""," translate(").concat(P,", ").concat(F,")");if(_d(x),/^svg$/i.test(x.nodeName)){const V=x.ownerDocument.createElementNS(Kd,"g");Object.entries(O).forEach($=>{let[st,ht]=$;return V.setAttributeNS(Kd,st,ht)}),V.append(...x.childNodes),x=V}for(const V of m){if(!V)continue;const{name:$,value:st}=V;if(!g.includes($))if($==="style"){const ht={};ef(st,ht),Object.entries(O).forEach(ct=>{let[bt,Et]=ct;ht[bt]=Et}),ef(O.style||"",ht);const ut=Object.entries(ht).map(ct=>ct.join(":")).join(";");x.setAttribute($,ut)}else!O[$]&&x.setAttribute($,st)}x.setAttribute("transform",R),x.setAttribute("instantiated_by_use","1"),x.removeAttribute("id"),p.parentNode.replaceChild(x,p)}})(n);const r=Array.from(s.getElementsByTagName("*")),o=I(I({},_d(s)),{},{crossOrigin:e,signal:i}),l=r.filter(u=>(_d(u),gv(u)&&!function(d){let g=d;for(;g&&(g=g.parentElement);)if(g&&g.nodeName&&vE.test(ih(g))&&!g.getAttribute("instantiated_by_use"))return!0;return!1}(u)));if(!l||l&&!l.length)return I(I({},lf()),{},{options:o,allElements:r});const h={};return r.filter(u=>ih(u)==="clipPath").forEach(u=>{u.setAttribute("originalTransform",u.getAttribute("transform")||"");const d=u.getAttribute("id");h[d]=Array.from(u.getElementsByTagName("*")).filter(g=>gv(g))}),{objects:await new wE(l,o,t,n,h).parse(),elements:l,options:o,allElements:r}}function lw(n,t,e){return pg(new(Yn()).DOMParser().parseFromString(n.trim(),"text/xml"),t,e)}function bE(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((i,s)=>{V_(n.replace(/^\n\s*/,"").trim(),{onComplete:r=>{const o=r.responseXML;o&&i(o),s()},signal:e.signal})}).then(i=>pg(i,t,e)).catch(()=>lf())}const cw=Dy,pv=n=>function(t,e,i){const{points:s,pathOffset:r}=i;return new D(s[n]).subtract(r).transform(De(i.getViewportTransform(),i.calcTransformMatrix()))},hw=(n,t,e,i)=>{const{target:s,pointIndex:r}=t,o=s,l=ys(new D(e,i),void 0,o.calcOwnMatrix());return o.points[r]=l.add(o.pathOffset),o.setDimensions(),!0},uw=(n,t)=>function(e,i,s,r){const o=i.target,l=new D(o.points[(n>0?n:o.points.length)-1]),h=l.subtract(o.pathOffset).transform(o.calcOwnMatrix()),u=t(e,I(I({},i),{},{pointIndex:n}),s,r),d=l.subtract(o.pathOffset).transform(o.calcOwnMatrix()).subtract(h);return o.left-=d.x,o.top-=d.y,u},mv=n=>ar(cw,uw(n,hw)),cf=(n,t,e)=>{const{path:i,pathOffset:s}=n,r=i[t];return new D(r[e]-s.x,r[e+1]-s.y).transform(De(n.getViewportTransform(),n.calcTransformMatrix()))};function xE(n,t,e){const{commandIndex:i,pointIndex:s}=this;return cf(e,i,s)}function CE(n,t,e,i){const{target:s}=t,{commandIndex:r,pointIndex:o}=this,l=((h,u,d,g,p)=>{const{path:m,pathOffset:y}=h,_=m[(g>0?g:m.length)-1],b=new D(_[p],_[p+1]),x=b.subtract(y).transform(h.calcOwnMatrix()),T=ys(new D(u,d),void 0,h.calcOwnMatrix());m[g][p]=T.x+y.x,m[g][p+1]=T.y+y.y,h.setDimensions();const O=b.subtract(h.pathOffset).transform(h.calcOwnMatrix()).subtract(x);return h.left-=O.x,h.top-=O.y,h.set("dirty",!0),!0})(s,e,i,r,o);return eg(this.actionName,I(I({},ng(n,t,e,i)),{},{commandIndex:r,pointIndex:o})),l}class dw extends di{constructor(t){super(t)}render(t,e,i,s,r){const o=I(I({},s),{},{cornerColor:this.controlFill,cornerStrokeColor:this.controlStroke,transparentCorners:!this.controlFill});super.render(t,e,i,o,r)}}class SE extends dw{constructor(t){super(t)}render(t,e,i,s,r){const{path:o}=r,{commandIndex:l,pointIndex:h,connectToCommandIndex:u,connectToPointIndex:d}=this;t.save(),t.strokeStyle=this.controlStroke,this.connectionDashArray&&t.setLineDash(this.connectionDashArray);const[g]=o[l],p=cf(r,u,d);if(g==="Q"){const m=cf(r,l,h+2);t.moveTo(m.x,m.y),t.lineTo(e,i)}else t.moveTo(e,i);t.lineTo(p.x,p.y),t.stroke(),t.restore(),super.render(t,e,i,s,r)}}const xc=(n,t,e,i,s,r)=>new(e?SE:dw)(I(I({commandIndex:n,pointIndex:t,actionName:"modifyPath",positionHandler:xE,actionHandler:CE,connectToCommandIndex:s,connectToPointIndex:r},i),e?i.controlPointStyle:i.pointStyle));var Vr=Object.freeze({__proto__:null,changeWidth:Jd,createObjectDefaultControls:cg,createPathControls:function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e={};let i="M";return n.path.forEach((s,r)=>{const o=s[0];switch(o!=="Z"&&(e["c_".concat(r,"_").concat(o)]=xc(r,s.length-2,!1,t)),o){case"C":e["c_".concat(r,"_C_CP_1")]=xc(r,1,!0,t,r-1,(l=>l==="C"?5:l==="Q"?3:1)(i)),e["c_".concat(r,"_C_CP_2")]=xc(r,3,!0,t,r,5);break;case"Q":e["c_".concat(r,"_Q_CP_1")]=xc(r,1,!0,t,r,3)}i=o}),e},createPolyActionHandler:mv,createPolyControls:function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e={};for(let i=0;i<(typeof n=="number"?n:n.points.length);i++)e["p".concat(i)]=new di(I({actionName:cw,positionHandler:pv(i),actionHandler:mv(i)},t));return e},createPolyPositionHandler:pv,createResizeControls:m_,createTextboxDefaultControls:v_,dragHandler:Zy,factoryPolyActionHandler:uw,getLocalPoint:Th,polyActionHandler:hw,renderCircleControl:s_,renderSquareControl:r_,rotationStyleHandler:o_,rotationWithSnapping:a_,scaleCursorStyleHandler:vo,scaleOrSkewActionName:fa,scaleSkewCursorStyleHandler:Sr,scalingEqually:da,scalingX:h_,scalingXOrSkewingY:Qd,scalingY:u_,scalingYOrSkewingX:tf,skewCursorStyleHandler:d_,skewHandlerX:g_,skewHandlerY:p_,wrapWithFireEvent:ar,wrapWithFixedAnchor:zr});const ml=n=>n.webgl!==void 0,TE=(n,t)=>{const e=Ee(),i=Ee().getContext("webgl"),s={imageBuffer:new ArrayBuffer(n*t*4)},r={destinationWidth:n,destinationHeight:t,targetCanvas:e};let o;e.width=n,e.height=t,o=Yn().performance.now(),sl.prototype.copyGLTo2D.call(s,i,r);const l=Yn().performance.now()-o;return o=Yn().performance.now(),sl.prototype.copyGLTo2DPutImageData.call(s,i,r),l>Yn().performance.now()-o},mg="precision highp float",OE=`
    `.concat(mg,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),PE=["type"],ME=["type"],EE=new RegExp(mg,"g");class Ne{get type(){return this.constructor.type}constructor(){let t=ke(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},PE);Object.assign(this,this.constructor.defaults,t)}getFragmentSource(){return OE}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:s="highp"}}=Mn();s!=="highp"&&(e=e.replace(EE,mg.replace("highp",s)));const r=t.createShader(t.VERTEX_SHADER),o=t.createShader(t.FRAGMENT_SHADER),l=t.createProgram();if(!r||!o||!l)throw new Hn("Vertex, fragment shader or program creation error");if(t.shaderSource(r,i),t.compileShader(r),!t.getShaderParameter(r,t.COMPILE_STATUS))throw new Hn("Vertex shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(r)));if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Hn("Fragment shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(o)));if(t.attachShader(l,r),t.attachShader(l,o),t.linkProgram(l),!t.getProgramParameter(l,t.LINK_STATUS))throw new Hn('Shader link error for "'.concat(this.type,'" ').concat(t.getProgramInfoLog(l)));const h=this.getUniformLocations(t,l)||{};return h.uStepW=t.getUniformLocation(l,"uStepW"),h.uStepH=t.getUniformLocation(l,"uStepH"),{program:l,attributeLocations:this.getAttributeLocations(t,l),uniformLocations:h}}getAttributeLocations(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}}getUniformLocations(t,e){const i=this.constructor.uniformLocations,s={};for(let r=0;r<i.length;r++)s[i[r]]=t.getUniformLocation(e,i[r]);return s}sendAttributeData(t,e,i){const s=e.aPosition,r=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,r),t.enableVertexAttribArray(s),t.vertexAttribPointer(s,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW)}_setupFrameBuffer(t){const e=t.context;if(t.passes>1){const i=t.destinationWidth,s=t.destinationHeight;t.sourceWidth===i&&t.sourceHeight===s||(e.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(e,i,s)),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.targetTexture,0)}else e.bindFramebuffer(e.FRAMEBUFFER,null),e.finish()}_swapTextures(t){t.passes--,t.pass++;const e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e}isNeutralState(t){return!1}applyTo(t){ml(t)?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){}getCacheKey(){return this.type}retrieveShader(t){const e=this.getCacheKey();return t.programCache[e]||(t.programCache[e]=this.createProgram(t.context)),t.programCache[e]}applyToWebGL(t){const e=t.context,i=this.retrieveShader(t);t.pass===0&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(i.program),this.sendAttributeData(e,i.attributeLocations,t.aPosition),e.uniform1f(i.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(i.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,i.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(t,e,i){t.activeTexture(i),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)}unbindAdditionalTexture(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)}sendUniformData(t,e){}createHelpLayer(t){if(!t.helpLayer){const e=Ee();e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}}toObject(){const t=Object.keys(this.constructor.defaults||{});return I({type:this.type},t.reduce((e,i)=>(e[i]=this[i],e),{}))}toJSON(){return this.toObject()}static async fromObject(t,e){return new this(ke(t,ME))}}A(Ne,"type","BaseFilter"),A(Ne,"uniformLocations",[]);const kE={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class pa extends Ne{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(kE[this.mode],`
        }
      }
      `)}applyTo2d(t){let{imageData:{data:e}}=t;const i=new se(this.color).getSource(),s=i[0]*this.alpha,r=i[1]*this.alpha,o=i[2]*this.alpha,l=1-this.alpha;for(let h=0;h<e.length;h+=4){const u=e[h],d=e[h+1],g=e[h+2];switch(this.mode){case"multiply":e[h]=u*s/255,e[h+1]=d*r/255,e[h+2]=g*o/255;break;case"screen":e[h]=255-(255-u)*(255-s)/255,e[h+1]=255-(255-d)*(255-r)/255,e[h+2]=255-(255-g)*(255-o)/255;break;case"add":e[h]=u+s,e[h+1]=d+r,e[h+2]=g+o;break;case"difference":e[h]=Math.abs(u-s),e[h+1]=Math.abs(d-r),e[h+2]=Math.abs(g-o);break;case"subtract":e[h]=u-s,e[h+1]=d-r,e[h+2]=g-o;break;case"darken":e[h]=Math.min(u,s),e[h+1]=Math.min(d,r),e[h+2]=Math.min(g,o);break;case"lighten":e[h]=Math.max(u,s),e[h+1]=Math.max(d,r),e[h+2]=Math.max(g,o);break;case"overlay":e[h]=s<128?2*u*s/255:255-2*(255-u)*(255-s)/255,e[h+1]=r<128?2*d*r/255:255-2*(255-d)*(255-r)/255,e[h+2]=o<128?2*g*o/255:255-2*(255-g)*(255-o)/255;break;case"exclusion":e[h]=s+u-2*s*u/255,e[h+1]=r+d-2*r*d/255,e[h+2]=o+g-2*o*g/255;break;case"tint":e[h]=s+u*l,e[h+1]=r+d*l,e[h+2]=o+g*l}}}sendUniformData(t,e){const i=new se(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(e.uColor,i)}}A(pa,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),A(pa,"type","BlendColor"),A(pa,"uniformLocations",["uColor"]),lt.setClass(pa);const AE={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},DE=["type","image"];class ma extends Ne{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return AE[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(t){const e=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,i,e.TEXTURE1),super.applyToWebGL(t),this.unbindAdditionalTexture(e,e.TEXTURE1)}createTexture(t,e){return t.getCachedTexture(e.cacheKey,e.getElement())}calculateMatrix(){const t=this.image,{width:e,height:i}=t.getElement();return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/i,1]}applyTo2d(t){let{imageData:{data:e,width:i,height:s},filterBackend:{resources:r}}=t;const o=this.image;r.blendImage||(r.blendImage=Ee());const l=r.blendImage,h=l.getContext("2d");l.width!==i||l.height!==s?(l.width=i,l.height=s):h.clearRect(0,0,i,s),h.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),h.drawImage(o.getElement(),0,0,i,s);const u=h.getImageData(0,0,i,s).data;for(let d=0;d<e.length;d+=4){const g=e[d],p=e[d+1],m=e[d+2],y=e[d+3],_=u[d],b=u[d+1],x=u[d+2],T=u[d+3];switch(this.mode){case"multiply":e[d]=g*_/255,e[d+1]=p*b/255,e[d+2]=m*x/255,e[d+3]=y*T/255;break;case"mask":e[d+3]=T}}}sendUniformData(t,e){const i=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,i)}toObject(){return I(I({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(t,e){let{type:i,image:s}=t,r=ke(t,DE);return Pe.fromObject(s,e).then(o=>new this(I(I({},r),{},{image:o})))}}A(ma,"type","BlendImage"),A(ma,"defaults",{mode:"multiply",alpha:1}),A(ma,"uniformLocations",["uTransformMatrix","uImage"]),lt.setClass(ma);class va extends Ne{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(t){ml(t)?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){t.imageData=this.simpleBlur(t)}simpleBlur(t){let{ctx:e,imageData:i,filterBackend:{resources:s}}=t;const{width:r,height:o}=i;s.blurLayer1||(s.blurLayer1=Ee(),s.blurLayer2=Ee());const l=s.blurLayer1,h=s.blurLayer2;l.width===r&&l.height===o||(h.width=l.width=r,h.height=l.height=o);const u=l.getContext("2d"),d=h.getContext("2d"),g=15,p=.06*this.blur*.5;let m,y,_,b;for(u.putImageData(i,0,0),d.clearRect(0,0,r,o),b=-15;b<=g;b++)m=(Math.random()-.5)/4,y=b/g,_=p*y*r+m,d.globalAlpha=1-Math.abs(y),d.drawImage(l,_,m),u.drawImage(h,0,0),d.globalAlpha=1,d.clearRect(0,0,h.width,h.height);for(b=-15;b<=g;b++)m=(Math.random()-.5)/4,y=b/g,_=p*y*o+m,d.globalAlpha=1-Math.abs(y),d.drawImage(l,m,_),u.drawImage(h,0,0),d.globalAlpha=1,d.clearRect(0,0,h.width,h.height);e.drawImage(l,0,0);const x=e.getImageData(0,0,l.width,l.height);return u.globalAlpha=1,u.clearRect(0,0,l.width,l.height),x}sendUniformData(t,e){const i=this.chooseRightDelta();t.uniform2fv(e.uDelta,i)}isNeutralState(){return this.blur===0}chooseRightDelta(){let t=1;const e=[0,0];this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio);const i=t*this.blur*.12;return this.horizontal?e[0]=i:e[1]=i,e}}A(va,"type","Blur"),A(va,"defaults",{blur:0}),A(va,"uniformLocations",["uDelta"]),lt.setClass(va);class ya extends Ne{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=Math.round(255*this.brightness);for(let s=0;s<e.length;s+=4)e[s]=e[s]+i,e[s+1]=e[s+1]+i,e[s+2]=e[s+2]+i}isNeutralState(){return this.brightness===0}sendUniformData(t,e){t.uniform1f(e.uBrightness,this.brightness)}}A(ya,"type","Brightness"),A(ya,"defaults",{brightness:0}),A(ya,"uniformLocations",["uBrightness"]),lt.setClass(ya);class Or extends Ne{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(t){const e=t.imageData.data,i=this.matrix,s=this.colorsOnly;for(let r=0;r<e.length;r+=4){const o=e[r],l=e[r+1],h=e[r+2];if(s)e[r]=o*i[0]+l*i[1]+h*i[2]+255*i[4],e[r+1]=o*i[5]+l*i[6]+h*i[7]+255*i[9],e[r+2]=o*i[10]+l*i[11]+h*i[12]+255*i[14];else{const u=e[r+3];e[r]=o*i[0]+l*i[1]+h*i[2]+u*i[3]+255*i[4],e[r+1]=o*i[5]+l*i[6]+h*i[7]+u*i[8]+255*i[9],e[r+2]=o*i[10]+l*i[11]+h*i[12]+u*i[13]+255*i[14],e[r+3]=o*i[15]+l*i[16]+h*i[17]+u*i[18]+255*i[19]}}}sendUniformData(t,e){const i=this.matrix,s=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],r=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,s),t.uniform4fv(e.uConstants,r)}toObject(){return I(I({},super.toObject()),{},{matrix:[...this.matrix]})}}function Hr(n,t){var e;const i=(A(e=class extends Or{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),A(e,"defaults",{colorsOnly:!1,matrix:t}),e);return lt.setClass(i,n),i}A(Or,"type","ColorMatrix"),A(Or,"defaults",{matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0}),A(Or,"uniformLocations",["uColorMatrix","uConstants"]),lt.setClass(Or);const jE=Hr("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]),IE=Hr("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]),RE=Hr("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]),LE=Hr("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]),FE=Hr("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]),BE=Hr("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]),zE=Hr("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class hf extends Ne{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.subFilters=t.subFilters||[]}applyTo(t){ml(t)&&(t.passes+=this.subFilters.length-1),this.subFilters.forEach(e=>{e.applyTo(t)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(t=>t.toObject())}}isNeutralState(){return!this.subFilters.some(t=>!t.isNeutralState())}static fromObject(t,e){return Promise.all((t.subFilters||[]).map(i=>lt.getClass(i.type).fromObject(i,e))).then(i=>new this({subFilters:i}))}}A(hf,"type","Composed"),lt.setClass(hf);class _a extends Ne{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(t){let{imageData:{data:e}}=t;const i=Math.floor(255*this.contrast),s=259*(i+255)/(255*(259-i));for(let r=0;r<e.length;r+=4)e[r]=s*(e[r]-128)+128,e[r+1]=s*(e[r+1]-128)+128,e[r+2]=s*(e[r+2]-128)+128}sendUniformData(t,e){t.uniform1f(e.uContrast,this.contrast)}}A(_a,"type","Contrast"),A(_a,"defaults",{contrast:0}),A(_a,"uniformLocations",["uContrast"]),lt.setClass(_a);const VE={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class wa extends Ne{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return VE[this.getCacheKey()]}applyTo2d(t){const e=t.imageData,i=e.data,s=this.matrix,r=Math.round(Math.sqrt(s.length)),o=Math.floor(r/2),l=e.width,h=e.height,u=t.ctx.createImageData(l,h),d=u.data,g=this.opaque?1:0;let p,m,y,_,b,x,T,O,P,F,X,R,V;for(X=0;X<h;X++)for(F=0;F<l;F++){for(b=4*(X*l+F),p=0,m=0,y=0,_=0,V=0;V<r;V++)for(R=0;R<r;R++)T=X+V-o,x=F+R-o,T<0||T>=h||x<0||x>=l||(O=4*(T*l+x),P=s[V*r+R],p+=i[O]*P,m+=i[O+1]*P,y+=i[O+2]*P,g||(_+=i[O+3]*P));d[b]=p,d[b+1]=m,d[b+2]=y,d[b+3]=g?i[b+3]:_}t.imageData=u}sendUniformData(t,e){t.uniform1fv(e.uMatrix,this.matrix)}toObject(){return I(I({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}A(wa,"type","Convolute"),A(wa,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),A(wa,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),lt.setClass(wa);const fw="Gamma";class ba extends Ne{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.gamma=t.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(t){let{imageData:{data:e}}=t;const i=this.gamma,s=1/i[0],r=1/i[1],o=1/i[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const l=this.rgbValues;for(let h=0;h<256;h++)l.r[h]=255*Math.pow(h/255,s),l.g[h]=255*Math.pow(h/255,r),l.b[h]=255*Math.pow(h/255,o);for(let h=0;h<e.length;h+=4)e[h]=l.r[e[h]],e[h+1]=l.g[e[h+1]],e[h+2]=l.b[e[h+2]]}sendUniformData(t,e){t.uniform3fv(e.uGamma,this.gamma)}isNeutralState(){const{gamma:t}=this;return t[0]===1&&t[1]===1&&t[2]===1}toObject(){return{type:fw,gamma:this.gamma.concat()}}}A(ba,"type",fw),A(ba,"defaults",{gamma:[1,1,1]}),A(ba,"uniformLocations",["uGamma"]),lt.setClass(ba);const HE={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class xa extends Ne{applyTo2d(t){let{imageData:{data:e}}=t;for(let i,s=0;s<e.length;s+=4){switch(this.mode){case"average":i=(e[s]+e[s+1]+e[s+2])/3;break;case"lightness":i=(Math.min(e[s],e[s+1],e[s+2])+Math.max(e[s],e[s+1],e[s+2]))/2;break;case"luminosity":i=.21*e[s]+.72*e[s+1]+.07*e[s+2]}e[s]=i,e[s+1]=i,e[s+2]=i}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return HE[this.mode]}sendUniformData(t,e){t.uniform1i(e.uMode,1)}isNeutralState(){return!1}}A(xa,"type","Grayscale"),A(xa,"defaults",{mode:"average"}),A(xa,"uniformLocations",["uMode"]),lt.setClass(xa);class jc extends Or{calculateMatrix(){const t=this.rotation*Math.PI,e=En(t),i=kn(t),s=1/3,r=Math.sqrt(s)*i,o=1-e;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=e+o/3,this.matrix[1]=s*o-r,this.matrix[2]=s*o+r,this.matrix[5]=s*o+r,this.matrix[6]=e+s*o,this.matrix[7]=s*o-r,this.matrix[10]=s*o-r,this.matrix[11]=s*o+r,this.matrix[12]=e+s*o}isNeutralState(){return this.rotation===0}applyTo(t){this.calculateMatrix(),super.applyTo(t)}toObject(){return{type:this.type,rotation:this.rotation}}}A(jc,"type","HueRotation"),A(jc,"defaults",{rotation:0}),lt.setClass(jc);class Ca extends Ne{applyTo2d(t){let{imageData:{data:e}}=t;for(let i=0;i<e.length;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2],this.alpha&&(e[i+3]=255-e[i+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(t,e){t.uniform1i(e.uInvert,Number(this.invert)),t.uniform1i(e.uAlpha,Number(this.alpha))}}A(Ca,"type","Invert"),A(Ca,"defaults",{alpha:!1,invert:!0}),A(Ca,"uniformLocations",["uInvert","uAlpha"]),lt.setClass(Ca);class Sa extends Ne{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=this.noise;for(let s=0;s<e.length;s+=4){const r=(.5-Math.random())*i;e[s]+=r,e[s+1]+=r,e[s+2]+=r}}sendUniformData(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())}isNeutralState(){return this.noise===0}}A(Sa,"type","Noise"),A(Sa,"defaults",{noise:0}),A(Sa,"uniformLocations",["uNoise","uSeed"]),lt.setClass(Sa);class Ta extends Ne{applyTo2d(t){let{imageData:{data:e,width:i,height:s}}=t;for(let r=0;r<s;r+=this.blocksize)for(let o=0;o<i;o+=this.blocksize){const l=4*r*i+4*o,h=e[l],u=e[l+1],d=e[l+2],g=e[l+3];for(let p=r;p<Math.min(r+this.blocksize,s);p++)for(let m=o;m<Math.min(o+this.blocksize,i);m++){const y=4*p*i+4*m;e[y]=h,e[y+1]=u,e[y+2]=d,e[y+3]=g}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}A(Ta,"type","Pixelate"),A(Ta,"defaults",{blocksize:4}),A(Ta,"uniformLocations",["uBlocksize"]),lt.setClass(Ta);class Oa extends Ne{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=255*this.distance,s=new se(this.color).getSource(),r=[s[0]-i,s[1]-i,s[2]-i],o=[s[0]+i,s[1]+i,s[2]+i];for(let l=0;l<e.length;l+=4){const h=e[l],u=e[l+1],d=e[l+2];h>r[0]&&u>r[1]&&d>r[2]&&h<o[0]&&u<o[1]&&d<o[2]&&(e[l+3]=0)}}sendUniformData(t,e){const i=new se(this.color).getSource(),s=this.distance,r=[0+i[0]/255-s,0+i[1]/255-s,0+i[2]/255-s,1],o=[i[0]/255+s,i[1]/255+s,i[2]/255+s,1];t.uniform4fv(e.uLow,r),t.uniform4fv(e.uHigh,o)}}A(Oa,"type","RemoveColor"),A(Oa,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),A(Oa,"uniformLocations",["uLow","uHigh"]),lt.setClass(Oa);class Pa extends Ne{sendUniformData(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)}getFilterWindow(){const t=this.tempScale;return Math.ceil(this.lanczosLobes/t)}getCacheKey(){const t=this.getFilterWindow();return"".concat(this.type,"_").concat(t)}getFragmentSource(){const t=this.getFilterWindow();return this.generateShader(t)}getTaps(){const t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,i=this.getFilterWindow(),s=new Array(i);for(let r=1;r<=i;r++)s[r-1]=t(r*e);return s}generateShader(t){const e=new Array(t);for(let i=1;i<=t;i++)e[i-1]="".concat(i,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(t,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(e.map((i,s)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(i,") * uTaps[").concat(s,"] + texture2D(uTexture, vTexCoord - ").concat(i,") * uTaps[").concat(s,`];
              sum += 2.0 * uTaps[`).concat(s,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(t){t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,super.applyTo(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,super.applyTo(t),t.sourceHeight=t.destinationHeight}applyTo(t){ml(t)?this.applyToForWebgl(t):this.applyTo2d(t)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(t){return e=>{if(e>=t||e<=-t)return 0;if(e<11920929e-14&&e>-11920929e-14)return 1;const i=(e*=Math.PI)/t;return Math.sin(e)/e*Math.sin(i)/i}}applyTo2d(t){const e=t.imageData,i=this.scaleX,s=this.scaleY;this.rcpScaleX=1/i,this.rcpScaleY=1/s;const r=e.width,o=e.height,l=Math.round(r*i),h=Math.round(o*s);let u;u=this.resizeType==="sliceHack"?this.sliceByTwo(t,r,o,l,h):this.resizeType==="hermite"?this.hermiteFastResize(t,r,o,l,h):this.resizeType==="bilinear"?this.bilinearFiltering(t,r,o,l,h):this.resizeType==="lanczos"?this.lanczosResize(t,r,o,l,h):new ImageData(l,h),t.imageData=u}sliceByTwo(t,e,i,s,r){const o=t.imageData,l=.5;let h=!1,u=!1,d=e*l,g=i*l;const p=t.filterBackend.resources;let m=0,y=0;const _=e;let b=0;p.sliceByTwo||(p.sliceByTwo=Ee());const x=p.sliceByTwo;(x.width<1.5*e||x.height<i)&&(x.width=1.5*e,x.height=i);const T=x.getContext("2d");for(T.clearRect(0,0,1.5*e,i),T.putImageData(o,0,0),s=Math.floor(s),r=Math.floor(r);!h||!u;)e=d,i=g,s<Math.floor(d*l)?d=Math.floor(d*l):(d=s,h=!0),r<Math.floor(g*l)?g=Math.floor(g*l):(g=r,u=!0),T.drawImage(x,m,y,e,i,_,b,d,g),m=_,y=b,b+=g;return T.getImageData(m,y,s,r)}lanczosResize(t,e,i,s,r){const o=t.imageData.data,l=t.ctx.createImageData(s,r),h=l.data,u=this.lanczosCreate(this.lanczosLobes),d=this.rcpScaleX,g=this.rcpScaleY,p=2/this.rcpScaleX,m=2/this.rcpScaleY,y=Math.ceil(d*this.lanczosLobes/2),_=Math.ceil(g*this.lanczosLobes/2),b={},x={x:0,y:0},T={x:0,y:0};return function O(P){let F,X,R,V,$,st,ht,ut,ct,bt,Et;for(x.x=(P+.5)*d,T.x=Math.floor(x.x),F=0;F<r;F++){for(x.y=(F+.5)*g,T.y=Math.floor(x.y),$=0,st=0,ht=0,ut=0,ct=0,X=T.x-y;X<=T.x+y;X++)if(!(X<0||X>=e)){bt=Math.floor(1e3*Math.abs(X-x.x)),b[bt]||(b[bt]={});for(let dt=T.y-_;dt<=T.y+_;dt++)dt<0||dt>=i||(Et=Math.floor(1e3*Math.abs(dt-x.y)),b[bt][Et]||(b[bt][Et]=u(Math.sqrt(Math.pow(bt*p,2)+Math.pow(Et*m,2))/1e3)),R=b[bt][Et],R>0&&(V=4*(dt*e+X),$+=R,st+=R*o[V],ht+=R*o[V+1],ut+=R*o[V+2],ct+=R*o[V+3]))}V=4*(F*s+P),h[V]=st/$,h[V+1]=ht/$,h[V+2]=ut/$,h[V+3]=ct/$}return++P<s?O(P):l}(0)}bilinearFiltering(t,e,i,s,r){let o,l,h,u,d,g,p,m,y,_,b,x,T,O=0;const P=this.rcpScaleX,F=this.rcpScaleY,X=4*(e-1),R=t.imageData.data,V=t.ctx.createImageData(s,r),$=V.data;for(p=0;p<r;p++)for(m=0;m<s;m++)for(d=Math.floor(P*m),g=Math.floor(F*p),y=P*m-d,_=F*p-g,T=4*(g*e+d),b=0;b<4;b++)o=R[T+b],l=R[T+4+b],h=R[T+X+b],u=R[T+X+4+b],x=o*(1-y)*(1-_)+l*y*(1-_)+h*_*(1-y)+u*y*_,$[O++]=x;return V}hermiteFastResize(t,e,i,s,r){const o=this.rcpScaleX,l=this.rcpScaleY,h=Math.ceil(o/2),u=Math.ceil(l/2),d=t.imageData.data,g=t.ctx.createImageData(s,r),p=g.data;for(let m=0;m<r;m++)for(let y=0;y<s;y++){const _=4*(y+m*s);let b=0,x=0,T=0,O=0,P=0,F=0,X=0;const R=(m+.5)*l;for(let V=Math.floor(m*l);V<(m+1)*l;V++){const $=Math.abs(R-(V+.5))/u,st=(y+.5)*o,ht=$*$;for(let ut=Math.floor(y*o);ut<(y+1)*o;ut++){let ct=Math.abs(st-(ut+.5))/h;const bt=Math.sqrt(ht+ct*ct);bt>1&&bt<-1||(b=2*bt*bt*bt-3*bt*bt+1,b>0&&(ct=4*(ut+V*e),X+=b*d[ct+3],T+=b,d[ct+3]<255&&(b=b*d[ct+3]/250),O+=b*d[ct],P+=b*d[ct+1],F+=b*d[ct+2],x+=b))}}p[_]=O/x,p[_+1]=P/x,p[_+2]=F/x,p[_+3]=X/T}return g}}A(Pa,"type","Resize"),A(Pa,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),A(Pa,"uniformLocations",["uDelta","uTaps"]),lt.setClass(Pa);class Ma extends Ne{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=-this.saturation;for(let s=0;s<e.length;s+=4){const r=Math.max(e[s],e[s+1],e[s+2]);e[s]+=r!==e[s]?(r-e[s])*i:0,e[s+1]+=r!==e[s+1]?(r-e[s+1])*i:0,e[s+2]+=r!==e[s+2]?(r-e[s+2])*i:0}}sendUniformData(t,e){t.uniform1f(e.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}A(Ma,"type","Saturation"),A(Ma,"defaults",{saturation:0}),A(Ma,"uniformLocations",["uSaturation"]),lt.setClass(Ma);class Ea extends Ne{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=-this.vibrance;for(let s=0;s<e.length;s+=4){const r=Math.max(e[s],e[s+1],e[s+2]),o=(e[s]+e[s+1]+e[s+2])/3,l=2*Math.abs(r-o)/255*i;e[s]+=r!==e[s]?(r-e[s])*l:0,e[s+1]+=r!==e[s+1]?(r-e[s+1])*l:0,e[s+2]+=r!==e[s+2]?(r-e[s+2])*l:0}}sendUniformData(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}A(Ea,"type","Vibrance"),A(Ea,"defaults",{vibrance:0}),A(Ea,"uniformLocations",["uVibrance"]),lt.setClass(Ea);var YE=Object.freeze({__proto__:null,BaseFilter:Ne,BlackWhite:zE,BlendColor:pa,BlendImage:ma,Blur:va,Brightness:ya,Brownie:jE,ColorMatrix:Or,Composed:hf,Contrast:_a,Convolute:wa,Gamma:ba,Grayscale:xa,HueRotation:jc,Invert:Ca,Kodachrome:RE,Noise:Sa,Pixelate:Ta,Polaroid:FE,RemoveColor:Oa,Resize:Pa,Saturation:Ma,Sepia:BE,Technicolor:LE,Vibrance:Ea,Vintage:IE});const XE=Object.freeze(Object.defineProperty({__proto__:null,ActiveSelection:Us,BaseBrush:Dh,BaseFabricObject:Fn,Canvas:Io,Canvas2dFilterBackend:iw,CanvasDOMManager:H_,Circle:wn,CircleBrush:J4,ClipPathLayout:of,Color:se,Control:di,Ellipse:zn,FabricImage:Pe,FabricObject:ge,FabricText:qe,FitContentLayout:Jc,FixedLayout:af,Gradient:_o,Group:ki,IText:Xn,Image:Pe,InteractiveFabricObject:Do,Intersection:xe,LayoutManager:jo,LayoutStrategy:pl,Line:Ws,Object:ge,Observable:jy,Path:fs,Pattern:Va,PatternBrush:tE,PencilBrush:nl,Point:D,Polygon:ga,Polyline:hn,Rect:pi,Shadow:Zi,SprayBrush:Q4,StaticCanvas:fn,StaticCanvasDOMManager:Qf,Text:qe,Textbox:Bi,Triangle:Ns,WebGLFilterBackend:sl,cache:To,classRegistry:lt,config:$t,controlsUtils:Vr,createCollectionMixin:or,filters:YE,getCSSRules:aw,getEnv:Mn,getFabricDocument:Fr,getFabricWindow:Yn,getFilterBackend:Dc,iMatrix:ci,initFilterBackend:nw,isPutImageFaster:TE,isWebGLPipelineState:ml,loadSVGFromString:lw,loadSVGFromURL:bE,parseAttributes:Zn,parseFontDeclaration:T_,parsePointsAttribute:K_,parseSVGDocument:pg,parseStyleAttribute:O_,parseTransformAttribute:il,runningAnimations:Qa,setEnv:PM,setFilterBackend:pE,util:J,version:Xc},Symbol.toStringTag,{value:"Module"})),rl="center",WE="left",NE="right",Cs={CANVAS_INIT_DONE:"canvas_init_done",ALIGNING_GUIDELINE_ENABLE:"aligning_guideline_enable",CANVAS_SIZE_CHANGED:"canvas_size_changed",DOCUMENT_SIZE_CHANGED:"document_size_changed",CANVAS_ZOOM:"canvas_zoom",CONTENT_CHANGED:"content_changed",MINIMAP_VIEWPORT_CHANGED:"minimap_viewport_changed",THUMB_CHANGED:"thumb_changed",COLOR_PICKER_MOVE:"color_picker_move",COLOR_PICKER_DOWN:"color_picker_down",TOOLBAR_MORE_LIST_CHANGE:"toolbar_more_list_change",COMMAND_CHANGED:"command_changed",SYNC_STATUS_CHANGED:"sync_status_changed",DOCUMENT_SIZE_CHANGED_AllTEMPLATE:"document_size_changed_alltemplate",TEMPLATE_COLLECT_CLICK:"template_collect_click"},Wn={SELECTION_CREATED:"selection:created",SELECTION_CLEARD:"selection:cleared",OBJECT_MODIFIED:"object:modified",SVG_FILL_MODIFIED:"svg:fill_modified",OBJECT_SELECTED:"object:selected",OBJECT_SELECTED_BY_RIGHT_CLICK:"object:selected_by_right_click",OBJECT_ROTATING:"object:rotating",OBJECT_SCALING:"object:scaling",OBJECT_MOVING:"object:moving",OBJECT_ADDED:"object:added",OBJECT_REMOVED:"object:removed",SELECTED_UPDATE:"selection:updated",SHOW_LOCK_SHAKE:"show_lock_shake",MOUSE_DBCLICK:"mousedblclick",MODIFIED:"modified",MOUSE_UP:"mouse:up",MOUSE_DOWN:"mouse:down",MOUSE_STRAT_DRAG:"mouse:start_drag",MOUSE_END_DRAG:"mouse:end_drag",MOUSE_MOVE:"mouse:move",MOUSE_OVER:"mouse:over",MOUSE_OUT:"mouse:out",MOUSE_DBLCLICK:"mouse:dblclick",TEXT_CHANGED:"text:changed",TEXT_SELECTION_CHANGED:"text:selection:changed",TEXT_EDITING_ENTERED:"text:editing:entered",TEXT_EDITING_EXITED:"text:editing:exited",TEXT_SCALE_CHANGE:"text_scale_change",TEXT_FONT_FAMILY_LOADED:"text_font_family_loaded",TEXT_FONT_INFO_READY:"text_font_info_ready",TEXT_FONT_LOAD_BY_OBJECTS:"text_font_load_by_objects",FTIMAGE_SHOW_CLIP:"FTImage:showClip",FTIMAGE_CLOSE_CLIP:"FTImage:closeClip",FTGRIDLINE_STATUS_CHANGED:"FTGridline:statusChanged",CANVAS_DRAGENTER:"dragenter",CANVAS_DRAGLEAVE:"dragleave",CANVAS_DRAGOVER:"dragover",CANVAS_DROP:"drop",BEFORE_RENDER:"before:render",AFTER_RENDER:"after:render",TOGGLE_PAGE:"toggle_page",PAGE_LOADED:"page_loaded",FTIMAGE_EXIT_EDIT:"FTimage_exit_edit",CANCEL_COLOR_PICK:"cancel_Color_pick",CHART_SCALE_CHANGE:"chart_scale_change",IMAGECONTAINER_DRAG_START:"imagecontainer_drag_start",IMAGECONTAINER_DRAGGING:"imagecontainer_dragging",IMAGECONTAINER_DRAG_END:"imagecontainer_drag_end",LEFT_MENU_TOGGLE:"left_menu_toggle",FILTER_TXT_UPLOAD_SUCCESS:"filter_txt_upload_success",FILTER_TXT_DRAW:"filter_txt_draw",FILTER_TXT_DRAW_NEED:"filter_txt_draw_need",MODIFIED_UI:"modified_ui",IMAGE_STROKE_CHANGE:"image_stroke_change",ADD_TEMPLATE_FAMILY_NAME:"add_template_family_name"},UE="color",aa="imageUrl",GE="#ffffff",$E={left:-.5,top:-.5,center:0,bottom:.5,right:.5},KE=n=>typeof n=="string"?$E[n]:n-.5,gw="not-allowed",qE=(n,t,e,i)=>{if(!t||!n)return"drag";const s=i.controls[t];return s.getActionName(e,s,i)};function pw(n){return n.originX===rl&&n.originY===rl}function vv(n){return-KE(n)+.5}const Ks=(n,t)=>n[t];function mw(n,t){const e=n.getTotalAngle(),i=e+J.radiansToDegrees(Math.atan2(t.y,t.x))+360;return Math.round(i%360/45)}function vl(n){return(t,e,i,s)=>{const{target:r,originX:o,originY:l,corner:h}=e,u=r.getRelativeCenterPoint(),d=r.translateToOriginPoint(u,o,l),g=n(t,e,i,s);return h==="mtr"&&r.isType("EditorImage")&&r.isCliping||h==="mtr"&&r.isType("EditorClippingMask")&&r.isCliping||h==="mtr"&&r.clippingParent&&r.clippingParent.isType("EditorClippingText")&&r.clippingParent.isCliping||r.setPositionByOrigin(d,e.originX,e.originY),g}}const{radiansToDegrees:ZE}=J,{wrapWithFireEvent:JE}=Vr,QE=(n,{target:t,ex:e,ey:i,theta:s,originX:r,originY:o},l,h)=>{const u=t.translateToOriginPoint(t.getRelativeCenterPoint(),r,o);if(Ks(t,"lockRotation"))return!1;const d=Math.atan2(i-u.y,e-u.x),g=Math.atan2(h-u.y,l-u.x);let p=ZE(g-d+s);if(t.snapAngle&&t.snapAngle>0){const y=t.snapAngle,_=t.snapThreshold||y,b=Math.ceil(p/y)*y,x=Math.floor(p/y)*y;Math.abs(p-x)<_?p=x:Math.abs(p-b)<_&&(p=b)}p<0&&(p=360+p),p%=360;const m=t.angle!==p;return t.isType("EditorImage")&&t.isCliping||t.isType("EditorClippingMask")&&t.isCliping?(t.clipAngle=p,t.updateClipAngle(t)):t.clippingParent&&t.clippingParent.isType("EditorClippingText")&&t.clippingParent.isCliping&&(t.clipAngle=p,t.clippingParent.updateClipAngle(t)),t.clippingParent&&t.clippingParent.isType("EditorClippingMask")&&t.clippingParent.isCliping?(t.clipAngle=p,t.clippingParent.updateClipAngle(t)):t.angle=p,m},t6=JE("rotating",vl(QE)),{getLocalPoint:e6,wrapWithFireEvent:vg}=Vr;function vw(n,t){const e=t.canvas,i=n[e.uniScaleKey];return e.uniformScaling&&!i||!e.uniformScaling&&i}function yw(n,t,e){const i=Ks(n,"lockScalingX"),s=Ks(n,"lockScalingY");if(i&&s||!t&&(i||s)&&e||i&&t==="x"||s&&t==="y")return!0;const{width:r,height:o,strokeWidth:l}=n;return r===0&&l===0&&t!=="y"||o===0&&l===0&&t!=="x"}const i6=["ew","nwse","ns","nesw","ew","nwse","ns","nesw","ew"],ka=(n,t,e)=>{const i=vw(n,e),s=t.x!==0&&t.y===0?"x":t.x===0&&t.y!==0?"y":"";if(yw(e,s,i))return gw;const r=mw(e,t);return`${i6[r]}-resize`};function yg(n,t,e,i,s={}){var r,o,l,h;console.log("scaleObject");const u=t.target,d=s.by,g=vw(n,u),p=yw(u,d,g);let m,y,_,b,x,T,O,P;if(p)return!1;if(t.gestureScale)y=t.scaleX*t.gestureScale,_=t.scaleY*t.gestureScale;else{if(m=e6(t,t.originX,t.originY,e,i),x=d!=="y"?Math.sign(m.x||t.signX||1):1,T=d!=="x"?Math.sign(m.y||t.signY||1):1,t.signX||(t.signX=x),t.signY||(t.signY=T),Ks(u,"lockScalingFlip")&&(t.signX!==x||t.signY!==T))return!1;if(b=u._getTransformedDimensions(),g&&!d){const R=Math.abs(m.x)+Math.abs(m.y),{original:V}=t,$=Math.abs(b.x*V.scaleX/u.scaleX)+Math.abs(b.y*V.scaleY/u.scaleY),st=R/$;if(y=V.scaleX*st,_=V.scaleY*st,u.isType("EditorClippingText")&&u.clippingPath instanceof Pe){const ht=Math.abs(b.x*V.clippingPath.scaleX/u.clippingPath.scaleX)+Math.abs(b.y*V.clippingPath.scaleY/u.clippingPath.scaleY),ut=R/ht;O=V.clippingPath.scaleX*ut,P=V.clippingPath.scaleY*ut}}else if(y=Math.abs(m.x*u.scaleX/b.x),_=Math.abs(m.y*u.scaleY/b.y),u.isType("EditorClippingText")&&u.clippingPath instanceof Pe){const{originX:R,originY:V,scaledWidth:$,scaledHeight:st}=u._getOrigin(),{scaleX:ht,scaleY:ut}=u._calcImageScale(R,V,$,st);O=ht,P=ut,u._caculateBounds(u.clippingPath._element),u.previousImageViewport=Object.assign({},u.imageViewport),u._updateImagePosition(),u._updateImageViewportPositionScale()}pw(t)&&(y*=2,_*=2),t.signX!==x&&d!=="y"&&(t.originX=vv(t.originX),y*=-1,t.signX=x),t.signY!==T&&d!=="x"&&(t.originY=vv(t.originY),_*=-1,t.signY=T)}const F=u.scaleX,X=u.scaleY;return d?(d==="x"&&u.set("scaleX",y),d==="y"&&u.set("scaleY",_),u.isType("EditorClippingText")&&u.clippingPath instanceof Pe&&(u.clippingPath.set("scaleX",O),u.clippingPath.set("scaleY",P),(l=u.clipPath)==null||l.set("scaleX",O),(h=u.clipPath)==null||h.set("scaleY",P))):(!Ks(u,"lockScalingX")&&u.set("scaleX",y),!Ks(u,"lockScalingY")&&u.set("scaleY",_),u.isType("EditorClippingText")&&u.clippingPath instanceof Pe&&(u.clippingPath.set("scaleX",O),u.clippingPath.set("scaleY",P),(r=u.clipPath)==null||r.set("scaleX",O),(o=u.clipPath)==null||o.set("scaleY",P))),(u.isType("ActiveSelection")||u.isType("Group"))&&(u._objects=u._objects.map((R,V)=>{var $,st;if(R.isType("EditorClippingText")&&R.clippingPath instanceof Pe){const ht=Math.abs(m.x)+Math.abs(m.y),{original:ut}=t,ct=Math.abs(b.x*ut.objects[V].clippingPath.scaleX/R.clippingPath.scaleX)+Math.abs(b.y*ut.objects[V].clippingPath.scaleY/R.clippingPath.scaleY),bt=ht/ct;O=ut.objects[V].clippingPath.scaleX*bt,P=ut.objects[V].clippingPath.scaleY*bt,($=R.clipPath)==null||$.set("scaleX",O),(st=R.clipPath)==null||st.set("scaleY",P),R.clippingPath.set("scaleX",O),R.clippingPath.set("scaleY",P)}return R})),F!==u.scaleX||X!==u.scaleY}const n6=(n,t,e,i)=>yg(n,t,e,i),s6=(n,t,e,i)=>yg(n,t,e,i,{by:"x"}),r6=(n,t,e,i)=>yg(n,t,e,i,{by:"y"}),Cc=vg("scaling",vl(n6)),o6=vg("scaling",vl(s6)),a6=vg("scaling",vl(r6)),l6=["ns","nesw","ew","nwse"],c6=(n,t,e)=>{if(t.x!==0&&Ks(e,"lockSkewingY")||t.y!==0&&Ks(e,"lockSkewingX"))return gw;const i=mw(e,t)%4;return`${l6[i]}-resize`},{skewHandlerX:h6,skewHandlerY:u6}=Vr;function _g(n,t){return n[t.canvas.altActionKey]}const yv=(n,t,e,i)=>_g(n,t.target)?u6(n,t,e,i):o6(n,t,e,i),_v=(n,t,e,i)=>_g(n,t.target)?h6(n,t,e,i):a6(n,t,e,i),wo=(n,t,e)=>_g(n,e)?c6(n,t,e):ka(n,t,e);var la=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nh={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */nh.exports;(function(n,t){(function(){var e,i="4.17.21",s=200,r="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",u=500,d="__lodash_placeholder__",g=1,p=2,m=4,y=1,_=2,b=1,x=2,T=4,O=8,P=16,F=32,X=64,R=128,V=256,$=512,st=30,ht="...",ut=800,ct=16,bt=1,Et=2,dt=3,_t=1/0,gt=9007199254740991,Kt=17976931348623157e292,zt=NaN,Ut=4294967295,ne=Ut-1,pe=Ut>>>1,qt=[["ary",R],["bind",b],["bindKey",x],["curry",O],["curryRight",P],["flip",$],["partial",F],["partialRight",X],["rearg",V]],oe="[object Arguments]",we="[object Array]",G="[object AsyncFunction]",pt="[object Boolean]",ot="[object Date]",xt="[object DOMException]",te="[object Error]",fe="[object Function]",M="[object GeneratorFunction]",k="[object Map]",H="[object Number]",tt="[object Null]",W="[object Object]",it="[object Promise]",mt="[object Proxy]",at="[object RegExp]",rt="[object Set]",et="[object String]",Pt="[object Symbol]",wt="[object Undefined]",Tt="[object WeakMap]",jt="[object WeakSet]",Yt="[object ArrayBuffer]",ee="[object DataView]",ie="[object Float32Array]",ei="[object Float64Array]",Ye="[object Int8Array]",_i="[object Int16Array]",ii="[object Int32Array]",Qn="[object Uint8Array]",Ur="[object Uint8ClampedArray]",ni="[object Uint16Array]",ji="[object Uint32Array]",wl=/\b__p \+= '';/g,mb=/\b(__p \+=) '' \+/g,vb=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Mg=/&(?:amp|lt|gt|quot|#39);/g,Eg=/[&<>"']/g,yb=RegExp(Mg.source),_b=RegExp(Eg.source),wb=/<%-([\s\S]+?)%>/g,bb=/<%([\s\S]+?)%>/g,kg=/<%=([\s\S]+?)%>/g,xb=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Cb=/^\w*$/,Sb=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Fh=/[\\^$.*+?()[\]{}|]/g,Tb=RegExp(Fh.source),Bh=/^\s+/,Ob=/\s/,Pb=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Mb=/\{\n\/\* \[wrapped with (.+)\] \*/,Eb=/,? & /,kb=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Ab=/[()=,{}\[\]\/\s]/,Db=/\\(\\)?/g,jb=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ag=/\w*$/,Ib=/^[-+]0x[0-9a-f]+$/i,Rb=/^0b[01]+$/i,Lb=/^\[object .+?Constructor\]$/,Fb=/^0o[0-7]+$/i,Bb=/^(?:0|[1-9]\d*)$/,zb=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bl=/($^)/,Vb=/['\n\r\u2028\u2029\\]/g,xl="\\ud800-\\udfff",Hb="\\u0300-\\u036f",Yb="\\ufe20-\\ufe2f",Xb="\\u20d0-\\u20ff",Dg=Hb+Yb+Xb,jg="\\u2700-\\u27bf",Ig="a-z\\xdf-\\xf6\\xf8-\\xff",Wb="\\xac\\xb1\\xd7\\xf7",Nb="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Ub="\\u2000-\\u206f",Gb=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Rg="A-Z\\xc0-\\xd6\\xd8-\\xde",Lg="\\ufe0e\\ufe0f",Fg=Wb+Nb+Ub+Gb,zh="[']",$b="["+xl+"]",Bg="["+Fg+"]",Cl="["+Dg+"]",zg="\\d+",Kb="["+jg+"]",Vg="["+Ig+"]",Hg="[^"+xl+Fg+zg+jg+Ig+Rg+"]",Vh="\\ud83c[\\udffb-\\udfff]",qb="(?:"+Cl+"|"+Vh+")",Yg="[^"+xl+"]",Hh="(?:\\ud83c[\\udde6-\\uddff]){2}",Yh="[\\ud800-\\udbff][\\udc00-\\udfff]",Gr="["+Rg+"]",Xg="\\u200d",Wg="(?:"+Vg+"|"+Hg+")",Zb="(?:"+Gr+"|"+Hg+")",Ng="(?:"+zh+"(?:d|ll|m|re|s|t|ve))?",Ug="(?:"+zh+"(?:D|LL|M|RE|S|T|VE))?",Gg=qb+"?",$g="["+Lg+"]?",Jb="(?:"+Xg+"(?:"+[Yg,Hh,Yh].join("|")+")"+$g+Gg+")*",Qb="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",tx="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Kg=$g+Gg+Jb,ex="(?:"+[Kb,Hh,Yh].join("|")+")"+Kg,ix="(?:"+[Yg+Cl+"?",Cl,Hh,Yh,$b].join("|")+")",nx=RegExp(zh,"g"),sx=RegExp(Cl,"g"),Xh=RegExp(Vh+"(?="+Vh+")|"+ix+Kg,"g"),rx=RegExp([Gr+"?"+Vg+"+"+Ng+"(?="+[Bg,Gr,"$"].join("|")+")",Zb+"+"+Ug+"(?="+[Bg,Gr+Wg,"$"].join("|")+")",Gr+"?"+Wg+"+"+Ng,Gr+"+"+Ug,tx,Qb,zg,ex].join("|"),"g"),ox=RegExp("["+Xg+xl+Dg+Lg+"]"),ax=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,lx=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],cx=-1,be={};be[ie]=be[ei]=be[Ye]=be[_i]=be[ii]=be[Qn]=be[Ur]=be[ni]=be[ji]=!0,be[oe]=be[we]=be[Yt]=be[pt]=be[ee]=be[ot]=be[te]=be[fe]=be[k]=be[H]=be[W]=be[at]=be[rt]=be[et]=be[Tt]=!1;var _e={};_e[oe]=_e[we]=_e[Yt]=_e[ee]=_e[pt]=_e[ot]=_e[ie]=_e[ei]=_e[Ye]=_e[_i]=_e[ii]=_e[k]=_e[H]=_e[W]=_e[at]=_e[rt]=_e[et]=_e[Pt]=_e[Qn]=_e[Ur]=_e[ni]=_e[ji]=!0,_e[te]=_e[fe]=_e[Tt]=!1;var hx={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},ux={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dx={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},fx={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},gx=parseFloat,px=parseInt,qg=typeof la=="object"&&la&&la.Object===Object&&la,mx=typeof self=="object"&&self&&self.Object===Object&&self,si=qg||mx||Function("return this")(),Wh=t&&!t.nodeType&&t,cr=Wh&&!0&&n&&!n.nodeType&&n,Zg=cr&&cr.exports===Wh,Nh=Zg&&qg.process,Qi=function(){try{var L=cr&&cr.require&&cr.require("util").types;return L||Nh&&Nh.binding&&Nh.binding("util")}catch{}}(),Jg=Qi&&Qi.isArrayBuffer,Qg=Qi&&Qi.isDate,tp=Qi&&Qi.isMap,ep=Qi&&Qi.isRegExp,ip=Qi&&Qi.isSet,np=Qi&&Qi.isTypedArray;function Yi(L,N,Y){switch(Y.length){case 0:return L.call(N);case 1:return L.call(N,Y[0]);case 2:return L.call(N,Y[0],Y[1]);case 3:return L.call(N,Y[0],Y[1],Y[2])}return L.apply(N,Y)}function vx(L,N,Y,Ct){for(var Ft=-1,ae=L==null?0:L.length;++Ft<ae;){var $e=L[Ft];N(Ct,$e,Y($e),L)}return Ct}function tn(L,N){for(var Y=-1,Ct=L==null?0:L.length;++Y<Ct&&N(L[Y],Y,L)!==!1;);return L}function yx(L,N){for(var Y=L==null?0:L.length;Y--&&N(L[Y],Y,L)!==!1;);return L}function sp(L,N){for(var Y=-1,Ct=L==null?0:L.length;++Y<Ct;)if(!N(L[Y],Y,L))return!1;return!0}function Ps(L,N){for(var Y=-1,Ct=L==null?0:L.length,Ft=0,ae=[];++Y<Ct;){var $e=L[Y];N($e,Y,L)&&(ae[Ft++]=$e)}return ae}function Sl(L,N){var Y=L==null?0:L.length;return!!Y&&$r(L,N,0)>-1}function Uh(L,N,Y){for(var Ct=-1,Ft=L==null?0:L.length;++Ct<Ft;)if(Y(N,L[Ct]))return!0;return!1}function Oe(L,N){for(var Y=-1,Ct=L==null?0:L.length,Ft=Array(Ct);++Y<Ct;)Ft[Y]=N(L[Y],Y,L);return Ft}function Ms(L,N){for(var Y=-1,Ct=N.length,Ft=L.length;++Y<Ct;)L[Ft+Y]=N[Y];return L}function Gh(L,N,Y,Ct){var Ft=-1,ae=L==null?0:L.length;for(Ct&&ae&&(Y=L[++Ft]);++Ft<ae;)Y=N(Y,L[Ft],Ft,L);return Y}function _x(L,N,Y,Ct){var Ft=L==null?0:L.length;for(Ct&&Ft&&(Y=L[--Ft]);Ft--;)Y=N(Y,L[Ft],Ft,L);return Y}function $h(L,N){for(var Y=-1,Ct=L==null?0:L.length;++Y<Ct;)if(N(L[Y],Y,L))return!0;return!1}var wx=Kh("length");function bx(L){return L.split("")}function xx(L){return L.match(kb)||[]}function rp(L,N,Y){var Ct;return Y(L,function(Ft,ae,$e){if(N(Ft,ae,$e))return Ct=ae,!1}),Ct}function Tl(L,N,Y,Ct){for(var Ft=L.length,ae=Y+(Ct?1:-1);Ct?ae--:++ae<Ft;)if(N(L[ae],ae,L))return ae;return-1}function $r(L,N,Y){return N===N?Ix(L,N,Y):Tl(L,op,Y)}function Cx(L,N,Y,Ct){for(var Ft=Y-1,ae=L.length;++Ft<ae;)if(Ct(L[Ft],N))return Ft;return-1}function op(L){return L!==L}function ap(L,N){var Y=L==null?0:L.length;return Y?Zh(L,N)/Y:zt}function Kh(L){return function(N){return N==null?e:N[L]}}function qh(L){return function(N){return L==null?e:L[N]}}function lp(L,N,Y,Ct,Ft){return Ft(L,function(ae,$e,me){Y=Ct?(Ct=!1,ae):N(Y,ae,$e,me)}),Y}function Sx(L,N){var Y=L.length;for(L.sort(N);Y--;)L[Y]=L[Y].value;return L}function Zh(L,N){for(var Y,Ct=-1,Ft=L.length;++Ct<Ft;){var ae=N(L[Ct]);ae!==e&&(Y=Y===e?ae:Y+ae)}return Y}function Jh(L,N){for(var Y=-1,Ct=Array(L);++Y<L;)Ct[Y]=N(Y);return Ct}function Tx(L,N){return Oe(N,function(Y){return[Y,L[Y]]})}function cp(L){return L&&L.slice(0,fp(L)+1).replace(Bh,"")}function Xi(L){return function(N){return L(N)}}function Qh(L,N){return Oe(N,function(Y){return L[Y]})}function Wo(L,N){return L.has(N)}function hp(L,N){for(var Y=-1,Ct=L.length;++Y<Ct&&$r(N,L[Y],0)>-1;);return Y}function up(L,N){for(var Y=L.length;Y--&&$r(N,L[Y],0)>-1;);return Y}function Ox(L,N){for(var Y=L.length,Ct=0;Y--;)L[Y]===N&&++Ct;return Ct}var Px=qh(hx),Mx=qh(ux);function Ex(L){return"\\"+fx[L]}function kx(L,N){return L==null?e:L[N]}function Kr(L){return ox.test(L)}function Ax(L){return ax.test(L)}function Dx(L){for(var N,Y=[];!(N=L.next()).done;)Y.push(N.value);return Y}function tu(L){var N=-1,Y=Array(L.size);return L.forEach(function(Ct,Ft){Y[++N]=[Ft,Ct]}),Y}function dp(L,N){return function(Y){return L(N(Y))}}function Es(L,N){for(var Y=-1,Ct=L.length,Ft=0,ae=[];++Y<Ct;){var $e=L[Y];($e===N||$e===d)&&(L[Y]=d,ae[Ft++]=Y)}return ae}function Ol(L){var N=-1,Y=Array(L.size);return L.forEach(function(Ct){Y[++N]=Ct}),Y}function jx(L){var N=-1,Y=Array(L.size);return L.forEach(function(Ct){Y[++N]=[Ct,Ct]}),Y}function Ix(L,N,Y){for(var Ct=Y-1,Ft=L.length;++Ct<Ft;)if(L[Ct]===N)return Ct;return-1}function Rx(L,N,Y){for(var Ct=Y+1;Ct--;)if(L[Ct]===N)return Ct;return Ct}function qr(L){return Kr(L)?Fx(L):wx(L)}function gn(L){return Kr(L)?Bx(L):bx(L)}function fp(L){for(var N=L.length;N--&&Ob.test(L.charAt(N)););return N}var Lx=qh(dx);function Fx(L){for(var N=Xh.lastIndex=0;Xh.test(L);)++N;return N}function Bx(L){return L.match(Xh)||[]}function zx(L){return L.match(rx)||[]}var Vx=function L(N){N=N==null?si:Zr.defaults(si.Object(),N,Zr.pick(si,lx));var Y=N.Array,Ct=N.Date,Ft=N.Error,ae=N.Function,$e=N.Math,me=N.Object,eu=N.RegExp,Hx=N.String,en=N.TypeError,Pl=Y.prototype,Yx=ae.prototype,Jr=me.prototype,Ml=N["__core-js_shared__"],El=Yx.toString,ue=Jr.hasOwnProperty,Xx=0,gp=function(){var a=/[^.]+$/.exec(Ml&&Ml.keys&&Ml.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),kl=Jr.toString,Wx=El.call(me),Nx=si._,Ux=eu("^"+El.call(ue).replace(Fh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Al=Zg?N.Buffer:e,ks=N.Symbol,Dl=N.Uint8Array,pp=Al?Al.allocUnsafe:e,jl=dp(me.getPrototypeOf,me),mp=me.create,vp=Jr.propertyIsEnumerable,Il=Pl.splice,yp=ks?ks.isConcatSpreadable:e,No=ks?ks.iterator:e,hr=ks?ks.toStringTag:e,Rl=function(){try{var a=pr(me,"defineProperty");return a({},"",{}),a}catch{}}(),Gx=N.clearTimeout!==si.clearTimeout&&N.clearTimeout,$x=Ct&&Ct.now!==si.Date.now&&Ct.now,Kx=N.setTimeout!==si.setTimeout&&N.setTimeout,Ll=$e.ceil,Fl=$e.floor,iu=me.getOwnPropertySymbols,qx=Al?Al.isBuffer:e,_p=N.isFinite,Zx=Pl.join,Jx=dp(me.keys,me),Ke=$e.max,hi=$e.min,Qx=Ct.now,tC=N.parseInt,wp=$e.random,eC=Pl.reverse,nu=pr(N,"DataView"),Uo=pr(N,"Map"),su=pr(N,"Promise"),Qr=pr(N,"Set"),Go=pr(N,"WeakMap"),$o=pr(me,"create"),Bl=Go&&new Go,to={},iC=mr(nu),nC=mr(Uo),sC=mr(su),rC=mr(Qr),oC=mr(Go),zl=ks?ks.prototype:e,Ko=zl?zl.valueOf:e,bp=zl?zl.toString:e;function C(a){if(Ie(a)&&!Bt(a)&&!(a instanceof Zt)){if(a instanceof nn)return a;if(ue.call(a,"__wrapped__"))return x0(a)}return new nn(a)}var eo=function(){function a(){}return function(c){if(!Ae(c))return{};if(mp)return mp(c);a.prototype=c;var f=new a;return a.prototype=e,f}}();function Vl(){}function nn(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=e}C.templateSettings={escape:wb,evaluate:bb,interpolate:kg,variable:"",imports:{_:C}},C.prototype=Vl.prototype,C.prototype.constructor=C,nn.prototype=eo(Vl.prototype),nn.prototype.constructor=nn;function Zt(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Ut,this.__views__=[]}function aC(){var a=new Zt(this.__wrapped__);return a.__actions__=Ii(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Ii(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Ii(this.__views__),a}function lC(){if(this.__filtered__){var a=new Zt(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function cC(){var a=this.__wrapped__.value(),c=this.__dir__,f=Bt(a),v=c<0,w=f?a.length:0,S=b2(0,w,this.__views__),E=S.start,j=S.end,B=j-E,K=v?j:E-1,q=this.__iteratees__,Q=q.length,vt=0,Ot=hi(B,this.__takeCount__);if(!f||!v&&w==B&&Ot==B)return Np(a,this.__actions__);var At=[];t:for(;B--&&vt<Ot;){K+=c;for(var Xt=-1,Dt=a[K];++Xt<Q;){var Gt=q[Xt],Jt=Gt.iteratee,Ui=Gt.type,xi=Jt(Dt);if(Ui==Et)Dt=xi;else if(!xi){if(Ui==bt)continue t;break t}}At[vt++]=Dt}return At}Zt.prototype=eo(Vl.prototype),Zt.prototype.constructor=Zt;function ur(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var v=a[c];this.set(v[0],v[1])}}function hC(){this.__data__=$o?$o(null):{},this.size=0}function uC(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function dC(a){var c=this.__data__;if($o){var f=c[a];return f===h?e:f}return ue.call(c,a)?c[a]:e}function fC(a){var c=this.__data__;return $o?c[a]!==e:ue.call(c,a)}function gC(a,c){var f=this.__data__;return this.size+=this.has(a)?0:1,f[a]=$o&&c===e?h:c,this}ur.prototype.clear=hC,ur.prototype.delete=uC,ur.prototype.get=dC,ur.prototype.has=fC,ur.prototype.set=gC;function ts(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var v=a[c];this.set(v[0],v[1])}}function pC(){this.__data__=[],this.size=0}function mC(a){var c=this.__data__,f=Hl(c,a);if(f<0)return!1;var v=c.length-1;return f==v?c.pop():Il.call(c,f,1),--this.size,!0}function vC(a){var c=this.__data__,f=Hl(c,a);return f<0?e:c[f][1]}function yC(a){return Hl(this.__data__,a)>-1}function _C(a,c){var f=this.__data__,v=Hl(f,a);return v<0?(++this.size,f.push([a,c])):f[v][1]=c,this}ts.prototype.clear=pC,ts.prototype.delete=mC,ts.prototype.get=vC,ts.prototype.has=yC,ts.prototype.set=_C;function es(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var v=a[c];this.set(v[0],v[1])}}function wC(){this.size=0,this.__data__={hash:new ur,map:new(Uo||ts),string:new ur}}function bC(a){var c=Ql(this,a).delete(a);return this.size-=c?1:0,c}function xC(a){return Ql(this,a).get(a)}function CC(a){return Ql(this,a).has(a)}function SC(a,c){var f=Ql(this,a),v=f.size;return f.set(a,c),this.size+=f.size==v?0:1,this}es.prototype.clear=wC,es.prototype.delete=bC,es.prototype.get=xC,es.prototype.has=CC,es.prototype.set=SC;function dr(a){var c=-1,f=a==null?0:a.length;for(this.__data__=new es;++c<f;)this.add(a[c])}function TC(a){return this.__data__.set(a,h),this}function OC(a){return this.__data__.has(a)}dr.prototype.add=dr.prototype.push=TC,dr.prototype.has=OC;function pn(a){var c=this.__data__=new ts(a);this.size=c.size}function PC(){this.__data__=new ts,this.size=0}function MC(a){var c=this.__data__,f=c.delete(a);return this.size=c.size,f}function EC(a){return this.__data__.get(a)}function kC(a){return this.__data__.has(a)}function AC(a,c){var f=this.__data__;if(f instanceof ts){var v=f.__data__;if(!Uo||v.length<s-1)return v.push([a,c]),this.size=++f.size,this;f=this.__data__=new es(v)}return f.set(a,c),this.size=f.size,this}pn.prototype.clear=PC,pn.prototype.delete=MC,pn.prototype.get=EC,pn.prototype.has=kC,pn.prototype.set=AC;function xp(a,c){var f=Bt(a),v=!f&&vr(a),w=!f&&!v&&Rs(a),S=!f&&!v&&!w&&ro(a),E=f||v||w||S,j=E?Jh(a.length,Hx):[],B=j.length;for(var K in a)(c||ue.call(a,K))&&!(E&&(K=="length"||w&&(K=="offset"||K=="parent")||S&&(K=="buffer"||K=="byteLength"||K=="byteOffset")||rs(K,B)))&&j.push(K);return j}function Cp(a){var c=a.length;return c?a[pu(0,c-1)]:e}function DC(a,c){return tc(Ii(a),fr(c,0,a.length))}function jC(a){return tc(Ii(a))}function ru(a,c,f){(f!==e&&!mn(a[c],f)||f===e&&!(c in a))&&is(a,c,f)}function qo(a,c,f){var v=a[c];(!(ue.call(a,c)&&mn(v,f))||f===e&&!(c in a))&&is(a,c,f)}function Hl(a,c){for(var f=a.length;f--;)if(mn(a[f][0],c))return f;return-1}function IC(a,c,f,v){return As(a,function(w,S,E){c(v,w,f(w),E)}),v}function Sp(a,c){return a&&In(c,Qe(c),a)}function RC(a,c){return a&&In(c,Li(c),a)}function is(a,c,f){c=="__proto__"&&Rl?Rl(a,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):a[c]=f}function ou(a,c){for(var f=-1,v=c.length,w=Y(v),S=a==null;++f<v;)w[f]=S?e:Vu(a,c[f]);return w}function fr(a,c,f){return a===a&&(f!==e&&(a=a<=f?a:f),c!==e&&(a=a>=c?a:c)),a}function sn(a,c,f,v,w,S){var E,j=c&g,B=c&p,K=c&m;if(f&&(E=w?f(a,v,w,S):f(a)),E!==e)return E;if(!Ae(a))return a;var q=Bt(a);if(q){if(E=C2(a),!j)return Ii(a,E)}else{var Q=ui(a),vt=Q==fe||Q==M;if(Rs(a))return $p(a,j);if(Q==W||Q==oe||vt&&!w){if(E=B||vt?{}:f0(a),!j)return B?d2(a,RC(E,a)):u2(a,Sp(E,a))}else{if(!_e[Q])return w?a:{};E=S2(a,Q,j)}}S||(S=new pn);var Ot=S.get(a);if(Ot)return Ot;S.set(a,E),Y0(a)?a.forEach(function(Dt){E.add(sn(Dt,c,f,Dt,a,S))}):V0(a)&&a.forEach(function(Dt,Gt){E.set(Gt,sn(Dt,c,f,Gt,a,S))});var At=K?B?Ou:Tu:B?Li:Qe,Xt=q?e:At(a);return tn(Xt||a,function(Dt,Gt){Xt&&(Gt=Dt,Dt=a[Gt]),qo(E,Gt,sn(Dt,c,f,Gt,a,S))}),E}function LC(a){var c=Qe(a);return function(f){return Tp(f,a,c)}}function Tp(a,c,f){var v=f.length;if(a==null)return!v;for(a=me(a);v--;){var w=f[v],S=c[w],E=a[w];if(E===e&&!(w in a)||!S(E))return!1}return!0}function Op(a,c,f){if(typeof a!="function")throw new en(o);return na(function(){a.apply(e,f)},c)}function Zo(a,c,f,v){var w=-1,S=Sl,E=!0,j=a.length,B=[],K=c.length;if(!j)return B;f&&(c=Oe(c,Xi(f))),v?(S=Uh,E=!1):c.length>=s&&(S=Wo,E=!1,c=new dr(c));t:for(;++w<j;){var q=a[w],Q=f==null?q:f(q);if(q=v||q!==0?q:0,E&&Q===Q){for(var vt=K;vt--;)if(c[vt]===Q)continue t;B.push(q)}else S(c,Q,v)||B.push(q)}return B}var As=Qp(jn),Pp=Qp(lu,!0);function FC(a,c){var f=!0;return As(a,function(v,w,S){return f=!!c(v,w,S),f}),f}function Yl(a,c,f){for(var v=-1,w=a.length;++v<w;){var S=a[v],E=c(S);if(E!=null&&(j===e?E===E&&!Ni(E):f(E,j)))var j=E,B=S}return B}function BC(a,c,f,v){var w=a.length;for(f=Vt(f),f<0&&(f=-f>w?0:w+f),v=v===e||v>w?w:Vt(v),v<0&&(v+=w),v=f>v?0:W0(v);f<v;)a[f++]=c;return a}function Mp(a,c){var f=[];return As(a,function(v,w,S){c(v,w,S)&&f.push(v)}),f}function ri(a,c,f,v,w){var S=-1,E=a.length;for(f||(f=O2),w||(w=[]);++S<E;){var j=a[S];c>0&&f(j)?c>1?ri(j,c-1,f,v,w):Ms(w,j):v||(w[w.length]=j)}return w}var au=t0(),Ep=t0(!0);function jn(a,c){return a&&au(a,c,Qe)}function lu(a,c){return a&&Ep(a,c,Qe)}function Xl(a,c){return Ps(c,function(f){return os(a[f])})}function gr(a,c){c=js(c,a);for(var f=0,v=c.length;a!=null&&f<v;)a=a[Rn(c[f++])];return f&&f==v?a:e}function kp(a,c,f){var v=c(a);return Bt(a)?v:Ms(v,f(a))}function wi(a){return a==null?a===e?wt:tt:hr&&hr in me(a)?w2(a):j2(a)}function cu(a,c){return a>c}function zC(a,c){return a!=null&&ue.call(a,c)}function VC(a,c){return a!=null&&c in me(a)}function HC(a,c,f){return a>=hi(c,f)&&a<Ke(c,f)}function hu(a,c,f){for(var v=f?Uh:Sl,w=a[0].length,S=a.length,E=S,j=Y(S),B=1/0,K=[];E--;){var q=a[E];E&&c&&(q=Oe(q,Xi(c))),B=hi(q.length,B),j[E]=!f&&(c||w>=120&&q.length>=120)?new dr(E&&q):e}q=a[0];var Q=-1,vt=j[0];t:for(;++Q<w&&K.length<B;){var Ot=q[Q],At=c?c(Ot):Ot;if(Ot=f||Ot!==0?Ot:0,!(vt?Wo(vt,At):v(K,At,f))){for(E=S;--E;){var Xt=j[E];if(!(Xt?Wo(Xt,At):v(a[E],At,f)))continue t}vt&&vt.push(At),K.push(Ot)}}return K}function YC(a,c,f,v){return jn(a,function(w,S,E){c(v,f(w),S,E)}),v}function Jo(a,c,f){c=js(c,a),a=v0(a,c);var v=a==null?a:a[Rn(on(c))];return v==null?e:Yi(v,a,f)}function Ap(a){return Ie(a)&&wi(a)==oe}function XC(a){return Ie(a)&&wi(a)==Yt}function WC(a){return Ie(a)&&wi(a)==ot}function Qo(a,c,f,v,w){return a===c?!0:a==null||c==null||!Ie(a)&&!Ie(c)?a!==a&&c!==c:NC(a,c,f,v,Qo,w)}function NC(a,c,f,v,w,S){var E=Bt(a),j=Bt(c),B=E?we:ui(a),K=j?we:ui(c);B=B==oe?W:B,K=K==oe?W:K;var q=B==W,Q=K==W,vt=B==K;if(vt&&Rs(a)){if(!Rs(c))return!1;E=!0,q=!1}if(vt&&!q)return S||(S=new pn),E||ro(a)?h0(a,c,f,v,w,S):y2(a,c,B,f,v,w,S);if(!(f&y)){var Ot=q&&ue.call(a,"__wrapped__"),At=Q&&ue.call(c,"__wrapped__");if(Ot||At){var Xt=Ot?a.value():a,Dt=At?c.value():c;return S||(S=new pn),w(Xt,Dt,f,v,S)}}return vt?(S||(S=new pn),_2(a,c,f,v,w,S)):!1}function UC(a){return Ie(a)&&ui(a)==k}function uu(a,c,f,v){var w=f.length,S=w,E=!v;if(a==null)return!S;for(a=me(a);w--;){var j=f[w];if(E&&j[2]?j[1]!==a[j[0]]:!(j[0]in a))return!1}for(;++w<S;){j=f[w];var B=j[0],K=a[B],q=j[1];if(E&&j[2]){if(K===e&&!(B in a))return!1}else{var Q=new pn;if(v)var vt=v(K,q,B,a,c,Q);if(!(vt===e?Qo(q,K,y|_,v,Q):vt))return!1}}return!0}function Dp(a){if(!Ae(a)||M2(a))return!1;var c=os(a)?Ux:Lb;return c.test(mr(a))}function GC(a){return Ie(a)&&wi(a)==at}function $C(a){return Ie(a)&&ui(a)==rt}function KC(a){return Ie(a)&&oc(a.length)&&!!be[wi(a)]}function jp(a){return typeof a=="function"?a:a==null?Fi:typeof a=="object"?Bt(a)?Lp(a[0],a[1]):Rp(a):em(a)}function du(a){if(!ia(a))return Jx(a);var c=[];for(var f in me(a))ue.call(a,f)&&f!="constructor"&&c.push(f);return c}function qC(a){if(!Ae(a))return D2(a);var c=ia(a),f=[];for(var v in a)v=="constructor"&&(c||!ue.call(a,v))||f.push(v);return f}function fu(a,c){return a<c}function Ip(a,c){var f=-1,v=Ri(a)?Y(a.length):[];return As(a,function(w,S,E){v[++f]=c(w,S,E)}),v}function Rp(a){var c=Mu(a);return c.length==1&&c[0][2]?p0(c[0][0],c[0][1]):function(f){return f===a||uu(f,a,c)}}function Lp(a,c){return ku(a)&&g0(c)?p0(Rn(a),c):function(f){var v=Vu(f,a);return v===e&&v===c?Hu(f,a):Qo(c,v,y|_)}}function Wl(a,c,f,v,w){a!==c&&au(c,function(S,E){if(w||(w=new pn),Ae(S))ZC(a,c,E,f,Wl,v,w);else{var j=v?v(Du(a,E),S,E+"",a,c,w):e;j===e&&(j=S),ru(a,E,j)}},Li)}function ZC(a,c,f,v,w,S,E){var j=Du(a,f),B=Du(c,f),K=E.get(B);if(K){ru(a,f,K);return}var q=S?S(j,B,f+"",a,c,E):e,Q=q===e;if(Q){var vt=Bt(B),Ot=!vt&&Rs(B),At=!vt&&!Ot&&ro(B);q=B,vt||Ot||At?Bt(j)?q=j:Fe(j)?q=Ii(j):Ot?(Q=!1,q=$p(B,!0)):At?(Q=!1,q=Kp(B,!0)):q=[]:sa(B)||vr(B)?(q=j,vr(j)?q=N0(j):(!Ae(j)||os(j))&&(q=f0(B))):Q=!1}Q&&(E.set(B,q),w(q,B,v,S,E),E.delete(B)),ru(a,f,q)}function Fp(a,c){var f=a.length;if(f)return c+=c<0?f:0,rs(c,f)?a[c]:e}function Bp(a,c,f){c.length?c=Oe(c,function(S){return Bt(S)?function(E){return gr(E,S.length===1?S[0]:S)}:S}):c=[Fi];var v=-1;c=Oe(c,Xi(kt()));var w=Ip(a,function(S,E,j){var B=Oe(c,function(K){return K(S)});return{criteria:B,index:++v,value:S}});return Sx(w,function(S,E){return h2(S,E,f)})}function JC(a,c){return zp(a,c,function(f,v){return Hu(a,v)})}function zp(a,c,f){for(var v=-1,w=c.length,S={};++v<w;){var E=c[v],j=gr(a,E);f(j,E)&&ta(S,js(E,a),j)}return S}function QC(a){return function(c){return gr(c,a)}}function gu(a,c,f,v){var w=v?Cx:$r,S=-1,E=c.length,j=a;for(a===c&&(c=Ii(c)),f&&(j=Oe(a,Xi(f)));++S<E;)for(var B=0,K=c[S],q=f?f(K):K;(B=w(j,q,B,v))>-1;)j!==a&&Il.call(j,B,1),Il.call(a,B,1);return a}function Vp(a,c){for(var f=a?c.length:0,v=f-1;f--;){var w=c[f];if(f==v||w!==S){var S=w;rs(w)?Il.call(a,w,1):yu(a,w)}}return a}function pu(a,c){return a+Fl(wp()*(c-a+1))}function t2(a,c,f,v){for(var w=-1,S=Ke(Ll((c-a)/(f||1)),0),E=Y(S);S--;)E[v?S:++w]=a,a+=f;return E}function mu(a,c){var f="";if(!a||c<1||c>gt)return f;do c%2&&(f+=a),c=Fl(c/2),c&&(a+=a);while(c);return f}function Wt(a,c){return ju(m0(a,c,Fi),a+"")}function e2(a){return Cp(oo(a))}function i2(a,c){var f=oo(a);return tc(f,fr(c,0,f.length))}function ta(a,c,f,v){if(!Ae(a))return a;c=js(c,a);for(var w=-1,S=c.length,E=S-1,j=a;j!=null&&++w<S;){var B=Rn(c[w]),K=f;if(B==="__proto__"||B==="constructor"||B==="prototype")return a;if(w!=E){var q=j[B];K=v?v(q,B,j):e,K===e&&(K=Ae(q)?q:rs(c[w+1])?[]:{})}qo(j,B,K),j=j[B]}return a}var Hp=Bl?function(a,c){return Bl.set(a,c),a}:Fi,n2=Rl?function(a,c){return Rl(a,"toString",{configurable:!0,enumerable:!1,value:Xu(c),writable:!0})}:Fi;function s2(a){return tc(oo(a))}function rn(a,c,f){var v=-1,w=a.length;c<0&&(c=-c>w?0:w+c),f=f>w?w:f,f<0&&(f+=w),w=c>f?0:f-c>>>0,c>>>=0;for(var S=Y(w);++v<w;)S[v]=a[v+c];return S}function r2(a,c){var f;return As(a,function(v,w,S){return f=c(v,w,S),!f}),!!f}function Nl(a,c,f){var v=0,w=a==null?v:a.length;if(typeof c=="number"&&c===c&&w<=pe){for(;v<w;){var S=v+w>>>1,E=a[S];E!==null&&!Ni(E)&&(f?E<=c:E<c)?v=S+1:w=S}return w}return vu(a,c,Fi,f)}function vu(a,c,f,v){var w=0,S=a==null?0:a.length;if(S===0)return 0;c=f(c);for(var E=c!==c,j=c===null,B=Ni(c),K=c===e;w<S;){var q=Fl((w+S)/2),Q=f(a[q]),vt=Q!==e,Ot=Q===null,At=Q===Q,Xt=Ni(Q);if(E)var Dt=v||At;else K?Dt=At&&(v||vt):j?Dt=At&&vt&&(v||!Ot):B?Dt=At&&vt&&!Ot&&(v||!Xt):Ot||Xt?Dt=!1:Dt=v?Q<=c:Q<c;Dt?w=q+1:S=q}return hi(S,ne)}function Yp(a,c){for(var f=-1,v=a.length,w=0,S=[];++f<v;){var E=a[f],j=c?c(E):E;if(!f||!mn(j,B)){var B=j;S[w++]=E===0?0:E}}return S}function Xp(a){return typeof a=="number"?a:Ni(a)?zt:+a}function Wi(a){if(typeof a=="string")return a;if(Bt(a))return Oe(a,Wi)+"";if(Ni(a))return bp?bp.call(a):"";var c=a+"";return c=="0"&&1/a==-_t?"-0":c}function Ds(a,c,f){var v=-1,w=Sl,S=a.length,E=!0,j=[],B=j;if(f)E=!1,w=Uh;else if(S>=s){var K=c?null:m2(a);if(K)return Ol(K);E=!1,w=Wo,B=new dr}else B=c?[]:j;t:for(;++v<S;){var q=a[v],Q=c?c(q):q;if(q=f||q!==0?q:0,E&&Q===Q){for(var vt=B.length;vt--;)if(B[vt]===Q)continue t;c&&B.push(Q),j.push(q)}else w(B,Q,f)||(B!==j&&B.push(Q),j.push(q))}return j}function yu(a,c){return c=js(c,a),a=v0(a,c),a==null||delete a[Rn(on(c))]}function Wp(a,c,f,v){return ta(a,c,f(gr(a,c)),v)}function Ul(a,c,f,v){for(var w=a.length,S=v?w:-1;(v?S--:++S<w)&&c(a[S],S,a););return f?rn(a,v?0:S,v?S+1:w):rn(a,v?S+1:0,v?w:S)}function Np(a,c){var f=a;return f instanceof Zt&&(f=f.value()),Gh(c,function(v,w){return w.func.apply(w.thisArg,Ms([v],w.args))},f)}function _u(a,c,f){var v=a.length;if(v<2)return v?Ds(a[0]):[];for(var w=-1,S=Y(v);++w<v;)for(var E=a[w],j=-1;++j<v;)j!=w&&(S[w]=Zo(S[w]||E,a[j],c,f));return Ds(ri(S,1),c,f)}function Up(a,c,f){for(var v=-1,w=a.length,S=c.length,E={};++v<w;){var j=v<S?c[v]:e;f(E,a[v],j)}return E}function wu(a){return Fe(a)?a:[]}function bu(a){return typeof a=="function"?a:Fi}function js(a,c){return Bt(a)?a:ku(a,c)?[a]:b0(le(a))}var o2=Wt;function Is(a,c,f){var v=a.length;return f=f===e?v:f,!c&&f>=v?a:rn(a,c,f)}var Gp=Gx||function(a){return si.clearTimeout(a)};function $p(a,c){if(c)return a.slice();var f=a.length,v=pp?pp(f):new a.constructor(f);return a.copy(v),v}function xu(a){var c=new a.constructor(a.byteLength);return new Dl(c).set(new Dl(a)),c}function a2(a,c){var f=c?xu(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.byteLength)}function l2(a){var c=new a.constructor(a.source,Ag.exec(a));return c.lastIndex=a.lastIndex,c}function c2(a){return Ko?me(Ko.call(a)):{}}function Kp(a,c){var f=c?xu(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.length)}function qp(a,c){if(a!==c){var f=a!==e,v=a===null,w=a===a,S=Ni(a),E=c!==e,j=c===null,B=c===c,K=Ni(c);if(!j&&!K&&!S&&a>c||S&&E&&B&&!j&&!K||v&&E&&B||!f&&B||!w)return 1;if(!v&&!S&&!K&&a<c||K&&f&&w&&!v&&!S||j&&f&&w||!E&&w||!B)return-1}return 0}function h2(a,c,f){for(var v=-1,w=a.criteria,S=c.criteria,E=w.length,j=f.length;++v<E;){var B=qp(w[v],S[v]);if(B){if(v>=j)return B;var K=f[v];return B*(K=="desc"?-1:1)}}return a.index-c.index}function Zp(a,c,f,v){for(var w=-1,S=a.length,E=f.length,j=-1,B=c.length,K=Ke(S-E,0),q=Y(B+K),Q=!v;++j<B;)q[j]=c[j];for(;++w<E;)(Q||w<S)&&(q[f[w]]=a[w]);for(;K--;)q[j++]=a[w++];return q}function Jp(a,c,f,v){for(var w=-1,S=a.length,E=-1,j=f.length,B=-1,K=c.length,q=Ke(S-j,0),Q=Y(q+K),vt=!v;++w<q;)Q[w]=a[w];for(var Ot=w;++B<K;)Q[Ot+B]=c[B];for(;++E<j;)(vt||w<S)&&(Q[Ot+f[E]]=a[w++]);return Q}function Ii(a,c){var f=-1,v=a.length;for(c||(c=Y(v));++f<v;)c[f]=a[f];return c}function In(a,c,f,v){var w=!f;f||(f={});for(var S=-1,E=c.length;++S<E;){var j=c[S],B=v?v(f[j],a[j],j,f,a):e;B===e&&(B=a[j]),w?is(f,j,B):qo(f,j,B)}return f}function u2(a,c){return In(a,Eu(a),c)}function d2(a,c){return In(a,u0(a),c)}function Gl(a,c){return function(f,v){var w=Bt(f)?vx:IC,S=c?c():{};return w(f,a,kt(v,2),S)}}function io(a){return Wt(function(c,f){var v=-1,w=f.length,S=w>1?f[w-1]:e,E=w>2?f[2]:e;for(S=a.length>3&&typeof S=="function"?(w--,S):e,E&&bi(f[0],f[1],E)&&(S=w<3?e:S,w=1),c=me(c);++v<w;){var j=f[v];j&&a(c,j,v,S)}return c})}function Qp(a,c){return function(f,v){if(f==null)return f;if(!Ri(f))return a(f,v);for(var w=f.length,S=c?w:-1,E=me(f);(c?S--:++S<w)&&v(E[S],S,E)!==!1;);return f}}function t0(a){return function(c,f,v){for(var w=-1,S=me(c),E=v(c),j=E.length;j--;){var B=E[a?j:++w];if(f(S[B],B,S)===!1)break}return c}}function f2(a,c,f){var v=c&b,w=ea(a);function S(){var E=this&&this!==si&&this instanceof S?w:a;return E.apply(v?f:this,arguments)}return S}function e0(a){return function(c){c=le(c);var f=Kr(c)?gn(c):e,v=f?f[0]:c.charAt(0),w=f?Is(f,1).join(""):c.slice(1);return v[a]()+w}}function no(a){return function(c){return Gh(Q0(J0(c).replace(nx,"")),a,"")}}function ea(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=eo(a.prototype),v=a.apply(f,c);return Ae(v)?v:f}}function g2(a,c,f){var v=ea(a);function w(){for(var S=arguments.length,E=Y(S),j=S,B=so(w);j--;)E[j]=arguments[j];var K=S<3&&E[0]!==B&&E[S-1]!==B?[]:Es(E,B);if(S-=K.length,S<f)return o0(a,c,$l,w.placeholder,e,E,K,e,e,f-S);var q=this&&this!==si&&this instanceof w?v:a;return Yi(q,this,E)}return w}function i0(a){return function(c,f,v){var w=me(c);if(!Ri(c)){var S=kt(f,3);c=Qe(c),f=function(j){return S(w[j],j,w)}}var E=a(c,f,v);return E>-1?w[S?c[E]:E]:e}}function n0(a){return ss(function(c){var f=c.length,v=f,w=nn.prototype.thru;for(a&&c.reverse();v--;){var S=c[v];if(typeof S!="function")throw new en(o);if(w&&!E&&Jl(S)=="wrapper")var E=new nn([],!0)}for(v=E?v:f;++v<f;){S=c[v];var j=Jl(S),B=j=="wrapper"?Pu(S):e;B&&Au(B[0])&&B[1]==(R|O|F|V)&&!B[4].length&&B[9]==1?E=E[Jl(B[0])].apply(E,B[3]):E=S.length==1&&Au(S)?E[j]():E.thru(S)}return function(){var K=arguments,q=K[0];if(E&&K.length==1&&Bt(q))return E.plant(q).value();for(var Q=0,vt=f?c[Q].apply(this,K):q;++Q<f;)vt=c[Q].call(this,vt);return vt}})}function $l(a,c,f,v,w,S,E,j,B,K){var q=c&R,Q=c&b,vt=c&x,Ot=c&(O|P),At=c&$,Xt=vt?e:ea(a);function Dt(){for(var Gt=arguments.length,Jt=Y(Gt),Ui=Gt;Ui--;)Jt[Ui]=arguments[Ui];if(Ot)var xi=so(Dt),Gi=Ox(Jt,xi);if(v&&(Jt=Zp(Jt,v,w,Ot)),S&&(Jt=Jp(Jt,S,E,Ot)),Gt-=Gi,Ot&&Gt<K){var Be=Es(Jt,xi);return o0(a,c,$l,Dt.placeholder,f,Jt,Be,j,B,K-Gt)}var vn=Q?f:this,ls=vt?vn[a]:a;return Gt=Jt.length,j?Jt=I2(Jt,j):At&&Gt>1&&Jt.reverse(),q&&B<Gt&&(Jt.length=B),this&&this!==si&&this instanceof Dt&&(ls=Xt||ea(ls)),ls.apply(vn,Jt)}return Dt}function s0(a,c){return function(f,v){return YC(f,a,c(v),{})}}function Kl(a,c){return function(f,v){var w;if(f===e&&v===e)return c;if(f!==e&&(w=f),v!==e){if(w===e)return v;typeof f=="string"||typeof v=="string"?(f=Wi(f),v=Wi(v)):(f=Xp(f),v=Xp(v)),w=a(f,v)}return w}}function Cu(a){return ss(function(c){return c=Oe(c,Xi(kt())),Wt(function(f){var v=this;return a(c,function(w){return Yi(w,v,f)})})})}function ql(a,c){c=c===e?" ":Wi(c);var f=c.length;if(f<2)return f?mu(c,a):c;var v=mu(c,Ll(a/qr(c)));return Kr(c)?Is(gn(v),0,a).join(""):v.slice(0,a)}function p2(a,c,f,v){var w=c&b,S=ea(a);function E(){for(var j=-1,B=arguments.length,K=-1,q=v.length,Q=Y(q+B),vt=this&&this!==si&&this instanceof E?S:a;++K<q;)Q[K]=v[K];for(;B--;)Q[K++]=arguments[++j];return Yi(vt,w?f:this,Q)}return E}function r0(a){return function(c,f,v){return v&&typeof v!="number"&&bi(c,f,v)&&(f=v=e),c=as(c),f===e?(f=c,c=0):f=as(f),v=v===e?c<f?1:-1:as(v),t2(c,f,v,a)}}function Zl(a){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=an(c),f=an(f)),a(c,f)}}function o0(a,c,f,v,w,S,E,j,B,K){var q=c&O,Q=q?E:e,vt=q?e:E,Ot=q?S:e,At=q?e:S;c|=q?F:X,c&=~(q?X:F),c&T||(c&=~(b|x));var Xt=[a,c,w,Ot,Q,At,vt,j,B,K],Dt=f.apply(e,Xt);return Au(a)&&y0(Dt,Xt),Dt.placeholder=v,_0(Dt,a,c)}function Su(a){var c=$e[a];return function(f,v){if(f=an(f),v=v==null?0:hi(Vt(v),292),v&&_p(f)){var w=(le(f)+"e").split("e"),S=c(w[0]+"e"+(+w[1]+v));return w=(le(S)+"e").split("e"),+(w[0]+"e"+(+w[1]-v))}return c(f)}}var m2=Qr&&1/Ol(new Qr([,-0]))[1]==_t?function(a){return new Qr(a)}:Uu;function a0(a){return function(c){var f=ui(c);return f==k?tu(c):f==rt?jx(c):Tx(c,a(c))}}function ns(a,c,f,v,w,S,E,j){var B=c&x;if(!B&&typeof a!="function")throw new en(o);var K=v?v.length:0;if(K||(c&=~(F|X),v=w=e),E=E===e?E:Ke(Vt(E),0),j=j===e?j:Vt(j),K-=w?w.length:0,c&X){var q=v,Q=w;v=w=e}var vt=B?e:Pu(a),Ot=[a,c,f,v,w,q,Q,S,E,j];if(vt&&A2(Ot,vt),a=Ot[0],c=Ot[1],f=Ot[2],v=Ot[3],w=Ot[4],j=Ot[9]=Ot[9]===e?B?0:a.length:Ke(Ot[9]-K,0),!j&&c&(O|P)&&(c&=~(O|P)),!c||c==b)var At=f2(a,c,f);else c==O||c==P?At=g2(a,c,j):(c==F||c==(b|F))&&!w.length?At=p2(a,c,f,v):At=$l.apply(e,Ot);var Xt=vt?Hp:y0;return _0(Xt(At,Ot),a,c)}function l0(a,c,f,v){return a===e||mn(a,Jr[f])&&!ue.call(v,f)?c:a}function c0(a,c,f,v,w,S){return Ae(a)&&Ae(c)&&(S.set(c,a),Wl(a,c,e,c0,S),S.delete(c)),a}function v2(a){return sa(a)?e:a}function h0(a,c,f,v,w,S){var E=f&y,j=a.length,B=c.length;if(j!=B&&!(E&&B>j))return!1;var K=S.get(a),q=S.get(c);if(K&&q)return K==c&&q==a;var Q=-1,vt=!0,Ot=f&_?new dr:e;for(S.set(a,c),S.set(c,a);++Q<j;){var At=a[Q],Xt=c[Q];if(v)var Dt=E?v(Xt,At,Q,c,a,S):v(At,Xt,Q,a,c,S);if(Dt!==e){if(Dt)continue;vt=!1;break}if(Ot){if(!$h(c,function(Gt,Jt){if(!Wo(Ot,Jt)&&(At===Gt||w(At,Gt,f,v,S)))return Ot.push(Jt)})){vt=!1;break}}else if(!(At===Xt||w(At,Xt,f,v,S))){vt=!1;break}}return S.delete(a),S.delete(c),vt}function y2(a,c,f,v,w,S,E){switch(f){case ee:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case Yt:return!(a.byteLength!=c.byteLength||!S(new Dl(a),new Dl(c)));case pt:case ot:case H:return mn(+a,+c);case te:return a.name==c.name&&a.message==c.message;case at:case et:return a==c+"";case k:var j=tu;case rt:var B=v&y;if(j||(j=Ol),a.size!=c.size&&!B)return!1;var K=E.get(a);if(K)return K==c;v|=_,E.set(a,c);var q=h0(j(a),j(c),v,w,S,E);return E.delete(a),q;case Pt:if(Ko)return Ko.call(a)==Ko.call(c)}return!1}function _2(a,c,f,v,w,S){var E=f&y,j=Tu(a),B=j.length,K=Tu(c),q=K.length;if(B!=q&&!E)return!1;for(var Q=B;Q--;){var vt=j[Q];if(!(E?vt in c:ue.call(c,vt)))return!1}var Ot=S.get(a),At=S.get(c);if(Ot&&At)return Ot==c&&At==a;var Xt=!0;S.set(a,c),S.set(c,a);for(var Dt=E;++Q<B;){vt=j[Q];var Gt=a[vt],Jt=c[vt];if(v)var Ui=E?v(Jt,Gt,vt,c,a,S):v(Gt,Jt,vt,a,c,S);if(!(Ui===e?Gt===Jt||w(Gt,Jt,f,v,S):Ui)){Xt=!1;break}Dt||(Dt=vt=="constructor")}if(Xt&&!Dt){var xi=a.constructor,Gi=c.constructor;xi!=Gi&&"constructor"in a&&"constructor"in c&&!(typeof xi=="function"&&xi instanceof xi&&typeof Gi=="function"&&Gi instanceof Gi)&&(Xt=!1)}return S.delete(a),S.delete(c),Xt}function ss(a){return ju(m0(a,e,T0),a+"")}function Tu(a){return kp(a,Qe,Eu)}function Ou(a){return kp(a,Li,u0)}var Pu=Bl?function(a){return Bl.get(a)}:Uu;function Jl(a){for(var c=a.name+"",f=to[c],v=ue.call(to,c)?f.length:0;v--;){var w=f[v],S=w.func;if(S==null||S==a)return w.name}return c}function so(a){var c=ue.call(C,"placeholder")?C:a;return c.placeholder}function kt(){var a=C.iteratee||Wu;return a=a===Wu?jp:a,arguments.length?a(arguments[0],arguments[1]):a}function Ql(a,c){var f=a.__data__;return P2(c)?f[typeof c=="string"?"string":"hash"]:f.map}function Mu(a){for(var c=Qe(a),f=c.length;f--;){var v=c[f],w=a[v];c[f]=[v,w,g0(w)]}return c}function pr(a,c){var f=kx(a,c);return Dp(f)?f:e}function w2(a){var c=ue.call(a,hr),f=a[hr];try{a[hr]=e;var v=!0}catch{}var w=kl.call(a);return v&&(c?a[hr]=f:delete a[hr]),w}var Eu=iu?function(a){return a==null?[]:(a=me(a),Ps(iu(a),function(c){return vp.call(a,c)}))}:Gu,u0=iu?function(a){for(var c=[];a;)Ms(c,Eu(a)),a=jl(a);return c}:Gu,ui=wi;(nu&&ui(new nu(new ArrayBuffer(1)))!=ee||Uo&&ui(new Uo)!=k||su&&ui(su.resolve())!=it||Qr&&ui(new Qr)!=rt||Go&&ui(new Go)!=Tt)&&(ui=function(a){var c=wi(a),f=c==W?a.constructor:e,v=f?mr(f):"";if(v)switch(v){case iC:return ee;case nC:return k;case sC:return it;case rC:return rt;case oC:return Tt}return c});function b2(a,c,f){for(var v=-1,w=f.length;++v<w;){var S=f[v],E=S.size;switch(S.type){case"drop":a+=E;break;case"dropRight":c-=E;break;case"take":c=hi(c,a+E);break;case"takeRight":a=Ke(a,c-E);break}}return{start:a,end:c}}function x2(a){var c=a.match(Mb);return c?c[1].split(Eb):[]}function d0(a,c,f){c=js(c,a);for(var v=-1,w=c.length,S=!1;++v<w;){var E=Rn(c[v]);if(!(S=a!=null&&f(a,E)))break;a=a[E]}return S||++v!=w?S:(w=a==null?0:a.length,!!w&&oc(w)&&rs(E,w)&&(Bt(a)||vr(a)))}function C2(a){var c=a.length,f=new a.constructor(c);return c&&typeof a[0]=="string"&&ue.call(a,"index")&&(f.index=a.index,f.input=a.input),f}function f0(a){return typeof a.constructor=="function"&&!ia(a)?eo(jl(a)):{}}function S2(a,c,f){var v=a.constructor;switch(c){case Yt:return xu(a);case pt:case ot:return new v(+a);case ee:return a2(a,f);case ie:case ei:case Ye:case _i:case ii:case Qn:case Ur:case ni:case ji:return Kp(a,f);case k:return new v;case H:case et:return new v(a);case at:return l2(a);case rt:return new v;case Pt:return c2(a)}}function T2(a,c){var f=c.length;if(!f)return a;var v=f-1;return c[v]=(f>1?"& ":"")+c[v],c=c.join(f>2?", ":" "),a.replace(Pb,`{
/* [wrapped with `+c+`] */
`)}function O2(a){return Bt(a)||vr(a)||!!(yp&&a&&a[yp])}function rs(a,c){var f=typeof a;return c=c??gt,!!c&&(f=="number"||f!="symbol"&&Bb.test(a))&&a>-1&&a%1==0&&a<c}function bi(a,c,f){if(!Ae(f))return!1;var v=typeof c;return(v=="number"?Ri(f)&&rs(c,f.length):v=="string"&&c in f)?mn(f[c],a):!1}function ku(a,c){if(Bt(a))return!1;var f=typeof a;return f=="number"||f=="symbol"||f=="boolean"||a==null||Ni(a)?!0:Cb.test(a)||!xb.test(a)||c!=null&&a in me(c)}function P2(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function Au(a){var c=Jl(a),f=C[c];if(typeof f!="function"||!(c in Zt.prototype))return!1;if(a===f)return!0;var v=Pu(f);return!!v&&a===v[0]}function M2(a){return!!gp&&gp in a}var E2=Ml?os:$u;function ia(a){var c=a&&a.constructor,f=typeof c=="function"&&c.prototype||Jr;return a===f}function g0(a){return a===a&&!Ae(a)}function p0(a,c){return function(f){return f==null?!1:f[a]===c&&(c!==e||a in me(f))}}function k2(a){var c=sc(a,function(v){return f.size===u&&f.clear(),v}),f=c.cache;return c}function A2(a,c){var f=a[1],v=c[1],w=f|v,S=w<(b|x|R),E=v==R&&f==O||v==R&&f==V&&a[7].length<=c[8]||v==(R|V)&&c[7].length<=c[8]&&f==O;if(!(S||E))return a;v&b&&(a[2]=c[2],w|=f&b?0:T);var j=c[3];if(j){var B=a[3];a[3]=B?Zp(B,j,c[4]):j,a[4]=B?Es(a[3],d):c[4]}return j=c[5],j&&(B=a[5],a[5]=B?Jp(B,j,c[6]):j,a[6]=B?Es(a[5],d):c[6]),j=c[7],j&&(a[7]=j),v&R&&(a[8]=a[8]==null?c[8]:hi(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=w,a}function D2(a){var c=[];if(a!=null)for(var f in me(a))c.push(f);return c}function j2(a){return kl.call(a)}function m0(a,c,f){return c=Ke(c===e?a.length-1:c,0),function(){for(var v=arguments,w=-1,S=Ke(v.length-c,0),E=Y(S);++w<S;)E[w]=v[c+w];w=-1;for(var j=Y(c+1);++w<c;)j[w]=v[w];return j[c]=f(E),Yi(a,this,j)}}function v0(a,c){return c.length<2?a:gr(a,rn(c,0,-1))}function I2(a,c){for(var f=a.length,v=hi(c.length,f),w=Ii(a);v--;){var S=c[v];a[v]=rs(S,f)?w[S]:e}return a}function Du(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var y0=w0(Hp),na=Kx||function(a,c){return si.setTimeout(a,c)},ju=w0(n2);function _0(a,c,f){var v=c+"";return ju(a,T2(v,R2(x2(v),f)))}function w0(a){var c=0,f=0;return function(){var v=Qx(),w=ct-(v-f);if(f=v,w>0){if(++c>=ut)return arguments[0]}else c=0;return a.apply(e,arguments)}}function tc(a,c){var f=-1,v=a.length,w=v-1;for(c=c===e?v:c;++f<c;){var S=pu(f,w),E=a[S];a[S]=a[f],a[f]=E}return a.length=c,a}var b0=k2(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(Sb,function(f,v,w,S){c.push(w?S.replace(Db,"$1"):v||f)}),c});function Rn(a){if(typeof a=="string"||Ni(a))return a;var c=a+"";return c=="0"&&1/a==-_t?"-0":c}function mr(a){if(a!=null){try{return El.call(a)}catch{}try{return a+""}catch{}}return""}function R2(a,c){return tn(qt,function(f){var v="_."+f[0];c&f[1]&&!Sl(a,v)&&a.push(v)}),a.sort()}function x0(a){if(a instanceof Zt)return a.clone();var c=new nn(a.__wrapped__,a.__chain__);return c.__actions__=Ii(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function L2(a,c,f){(f?bi(a,c,f):c===e)?c=1:c=Ke(Vt(c),0);var v=a==null?0:a.length;if(!v||c<1)return[];for(var w=0,S=0,E=Y(Ll(v/c));w<v;)E[S++]=rn(a,w,w+=c);return E}function F2(a){for(var c=-1,f=a==null?0:a.length,v=0,w=[];++c<f;){var S=a[c];S&&(w[v++]=S)}return w}function B2(){var a=arguments.length;if(!a)return[];for(var c=Y(a-1),f=arguments[0],v=a;v--;)c[v-1]=arguments[v];return Ms(Bt(f)?Ii(f):[f],ri(c,1))}var z2=Wt(function(a,c){return Fe(a)?Zo(a,ri(c,1,Fe,!0)):[]}),V2=Wt(function(a,c){var f=on(c);return Fe(f)&&(f=e),Fe(a)?Zo(a,ri(c,1,Fe,!0),kt(f,2)):[]}),H2=Wt(function(a,c){var f=on(c);return Fe(f)&&(f=e),Fe(a)?Zo(a,ri(c,1,Fe,!0),e,f):[]});function Y2(a,c,f){var v=a==null?0:a.length;return v?(c=f||c===e?1:Vt(c),rn(a,c<0?0:c,v)):[]}function X2(a,c,f){var v=a==null?0:a.length;return v?(c=f||c===e?1:Vt(c),c=v-c,rn(a,0,c<0?0:c)):[]}function W2(a,c){return a&&a.length?Ul(a,kt(c,3),!0,!0):[]}function N2(a,c){return a&&a.length?Ul(a,kt(c,3),!0):[]}function U2(a,c,f,v){var w=a==null?0:a.length;return w?(f&&typeof f!="number"&&bi(a,c,f)&&(f=0,v=w),BC(a,c,f,v)):[]}function C0(a,c,f){var v=a==null?0:a.length;if(!v)return-1;var w=f==null?0:Vt(f);return w<0&&(w=Ke(v+w,0)),Tl(a,kt(c,3),w)}function S0(a,c,f){var v=a==null?0:a.length;if(!v)return-1;var w=v-1;return f!==e&&(w=Vt(f),w=f<0?Ke(v+w,0):hi(w,v-1)),Tl(a,kt(c,3),w,!0)}function T0(a){var c=a==null?0:a.length;return c?ri(a,1):[]}function G2(a){var c=a==null?0:a.length;return c?ri(a,_t):[]}function $2(a,c){var f=a==null?0:a.length;return f?(c=c===e?1:Vt(c),ri(a,c)):[]}function K2(a){for(var c=-1,f=a==null?0:a.length,v={};++c<f;){var w=a[c];v[w[0]]=w[1]}return v}function O0(a){return a&&a.length?a[0]:e}function q2(a,c,f){var v=a==null?0:a.length;if(!v)return-1;var w=f==null?0:Vt(f);return w<0&&(w=Ke(v+w,0)),$r(a,c,w)}function Z2(a){var c=a==null?0:a.length;return c?rn(a,0,-1):[]}var J2=Wt(function(a){var c=Oe(a,wu);return c.length&&c[0]===a[0]?hu(c):[]}),Q2=Wt(function(a){var c=on(a),f=Oe(a,wu);return c===on(f)?c=e:f.pop(),f.length&&f[0]===a[0]?hu(f,kt(c,2)):[]}),tS=Wt(function(a){var c=on(a),f=Oe(a,wu);return c=typeof c=="function"?c:e,c&&f.pop(),f.length&&f[0]===a[0]?hu(f,e,c):[]});function eS(a,c){return a==null?"":Zx.call(a,c)}function on(a){var c=a==null?0:a.length;return c?a[c-1]:e}function iS(a,c,f){var v=a==null?0:a.length;if(!v)return-1;var w=v;return f!==e&&(w=Vt(f),w=w<0?Ke(v+w,0):hi(w,v-1)),c===c?Rx(a,c,w):Tl(a,op,w,!0)}function nS(a,c){return a&&a.length?Fp(a,Vt(c)):e}var sS=Wt(P0);function P0(a,c){return a&&a.length&&c&&c.length?gu(a,c):a}function rS(a,c,f){return a&&a.length&&c&&c.length?gu(a,c,kt(f,2)):a}function oS(a,c,f){return a&&a.length&&c&&c.length?gu(a,c,e,f):a}var aS=ss(function(a,c){var f=a==null?0:a.length,v=ou(a,c);return Vp(a,Oe(c,function(w){return rs(w,f)?+w:w}).sort(qp)),v});function lS(a,c){var f=[];if(!(a&&a.length))return f;var v=-1,w=[],S=a.length;for(c=kt(c,3);++v<S;){var E=a[v];c(E,v,a)&&(f.push(E),w.push(v))}return Vp(a,w),f}function Iu(a){return a==null?a:eC.call(a)}function cS(a,c,f){var v=a==null?0:a.length;return v?(f&&typeof f!="number"&&bi(a,c,f)?(c=0,f=v):(c=c==null?0:Vt(c),f=f===e?v:Vt(f)),rn(a,c,f)):[]}function hS(a,c){return Nl(a,c)}function uS(a,c,f){return vu(a,c,kt(f,2))}function dS(a,c){var f=a==null?0:a.length;if(f){var v=Nl(a,c);if(v<f&&mn(a[v],c))return v}return-1}function fS(a,c){return Nl(a,c,!0)}function gS(a,c,f){return vu(a,c,kt(f,2),!0)}function pS(a,c){var f=a==null?0:a.length;if(f){var v=Nl(a,c,!0)-1;if(mn(a[v],c))return v}return-1}function mS(a){return a&&a.length?Yp(a):[]}function vS(a,c){return a&&a.length?Yp(a,kt(c,2)):[]}function yS(a){var c=a==null?0:a.length;return c?rn(a,1,c):[]}function _S(a,c,f){return a&&a.length?(c=f||c===e?1:Vt(c),rn(a,0,c<0?0:c)):[]}function wS(a,c,f){var v=a==null?0:a.length;return v?(c=f||c===e?1:Vt(c),c=v-c,rn(a,c<0?0:c,v)):[]}function bS(a,c){return a&&a.length?Ul(a,kt(c,3),!1,!0):[]}function xS(a,c){return a&&a.length?Ul(a,kt(c,3)):[]}var CS=Wt(function(a){return Ds(ri(a,1,Fe,!0))}),SS=Wt(function(a){var c=on(a);return Fe(c)&&(c=e),Ds(ri(a,1,Fe,!0),kt(c,2))}),TS=Wt(function(a){var c=on(a);return c=typeof c=="function"?c:e,Ds(ri(a,1,Fe,!0),e,c)});function OS(a){return a&&a.length?Ds(a):[]}function PS(a,c){return a&&a.length?Ds(a,kt(c,2)):[]}function MS(a,c){return c=typeof c=="function"?c:e,a&&a.length?Ds(a,e,c):[]}function Ru(a){if(!(a&&a.length))return[];var c=0;return a=Ps(a,function(f){if(Fe(f))return c=Ke(f.length,c),!0}),Jh(c,function(f){return Oe(a,Kh(f))})}function M0(a,c){if(!(a&&a.length))return[];var f=Ru(a);return c==null?f:Oe(f,function(v){return Yi(c,e,v)})}var ES=Wt(function(a,c){return Fe(a)?Zo(a,c):[]}),kS=Wt(function(a){return _u(Ps(a,Fe))}),AS=Wt(function(a){var c=on(a);return Fe(c)&&(c=e),_u(Ps(a,Fe),kt(c,2))}),DS=Wt(function(a){var c=on(a);return c=typeof c=="function"?c:e,_u(Ps(a,Fe),e,c)}),jS=Wt(Ru);function IS(a,c){return Up(a||[],c||[],qo)}function RS(a,c){return Up(a||[],c||[],ta)}var LS=Wt(function(a){var c=a.length,f=c>1?a[c-1]:e;return f=typeof f=="function"?(a.pop(),f):e,M0(a,f)});function E0(a){var c=C(a);return c.__chain__=!0,c}function FS(a,c){return c(a),a}function ec(a,c){return c(a)}var BS=ss(function(a){var c=a.length,f=c?a[0]:0,v=this.__wrapped__,w=function(S){return ou(S,a)};return c>1||this.__actions__.length||!(v instanceof Zt)||!rs(f)?this.thru(w):(v=v.slice(f,+f+(c?1:0)),v.__actions__.push({func:ec,args:[w],thisArg:e}),new nn(v,this.__chain__).thru(function(S){return c&&!S.length&&S.push(e),S}))});function zS(){return E0(this)}function VS(){return new nn(this.value(),this.__chain__)}function HS(){this.__values__===e&&(this.__values__=X0(this.value()));var a=this.__index__>=this.__values__.length,c=a?e:this.__values__[this.__index__++];return{done:a,value:c}}function YS(){return this}function XS(a){for(var c,f=this;f instanceof Vl;){var v=x0(f);v.__index__=0,v.__values__=e,c?w.__wrapped__=v:c=v;var w=v;f=f.__wrapped__}return w.__wrapped__=a,c}function WS(){var a=this.__wrapped__;if(a instanceof Zt){var c=a;return this.__actions__.length&&(c=new Zt(this)),c=c.reverse(),c.__actions__.push({func:ec,args:[Iu],thisArg:e}),new nn(c,this.__chain__)}return this.thru(Iu)}function NS(){return Np(this.__wrapped__,this.__actions__)}var US=Gl(function(a,c,f){ue.call(a,f)?++a[f]:is(a,f,1)});function GS(a,c,f){var v=Bt(a)?sp:FC;return f&&bi(a,c,f)&&(c=e),v(a,kt(c,3))}function $S(a,c){var f=Bt(a)?Ps:Mp;return f(a,kt(c,3))}var KS=i0(C0),qS=i0(S0);function ZS(a,c){return ri(ic(a,c),1)}function JS(a,c){return ri(ic(a,c),_t)}function QS(a,c,f){return f=f===e?1:Vt(f),ri(ic(a,c),f)}function k0(a,c){var f=Bt(a)?tn:As;return f(a,kt(c,3))}function A0(a,c){var f=Bt(a)?yx:Pp;return f(a,kt(c,3))}var t5=Gl(function(a,c,f){ue.call(a,f)?a[f].push(c):is(a,f,[c])});function e5(a,c,f,v){a=Ri(a)?a:oo(a),f=f&&!v?Vt(f):0;var w=a.length;return f<0&&(f=Ke(w+f,0)),ac(a)?f<=w&&a.indexOf(c,f)>-1:!!w&&$r(a,c,f)>-1}var i5=Wt(function(a,c,f){var v=-1,w=typeof c=="function",S=Ri(a)?Y(a.length):[];return As(a,function(E){S[++v]=w?Yi(c,E,f):Jo(E,c,f)}),S}),n5=Gl(function(a,c,f){is(a,f,c)});function ic(a,c){var f=Bt(a)?Oe:Ip;return f(a,kt(c,3))}function s5(a,c,f,v){return a==null?[]:(Bt(c)||(c=c==null?[]:[c]),f=v?e:f,Bt(f)||(f=f==null?[]:[f]),Bp(a,c,f))}var r5=Gl(function(a,c,f){a[f?0:1].push(c)},function(){return[[],[]]});function o5(a,c,f){var v=Bt(a)?Gh:lp,w=arguments.length<3;return v(a,kt(c,4),f,w,As)}function a5(a,c,f){var v=Bt(a)?_x:lp,w=arguments.length<3;return v(a,kt(c,4),f,w,Pp)}function l5(a,c){var f=Bt(a)?Ps:Mp;return f(a,rc(kt(c,3)))}function c5(a){var c=Bt(a)?Cp:e2;return c(a)}function h5(a,c,f){(f?bi(a,c,f):c===e)?c=1:c=Vt(c);var v=Bt(a)?DC:i2;return v(a,c)}function u5(a){var c=Bt(a)?jC:s2;return c(a)}function d5(a){if(a==null)return 0;if(Ri(a))return ac(a)?qr(a):a.length;var c=ui(a);return c==k||c==rt?a.size:du(a).length}function f5(a,c,f){var v=Bt(a)?$h:r2;return f&&bi(a,c,f)&&(c=e),v(a,kt(c,3))}var g5=Wt(function(a,c){if(a==null)return[];var f=c.length;return f>1&&bi(a,c[0],c[1])?c=[]:f>2&&bi(c[0],c[1],c[2])&&(c=[c[0]]),Bp(a,ri(c,1),[])}),nc=$x||function(){return si.Date.now()};function p5(a,c){if(typeof c!="function")throw new en(o);return a=Vt(a),function(){if(--a<1)return c.apply(this,arguments)}}function D0(a,c,f){return c=f?e:c,c=a&&c==null?a.length:c,ns(a,R,e,e,e,e,c)}function j0(a,c){var f;if(typeof c!="function")throw new en(o);return a=Vt(a),function(){return--a>0&&(f=c.apply(this,arguments)),a<=1&&(c=e),f}}var Lu=Wt(function(a,c,f){var v=b;if(f.length){var w=Es(f,so(Lu));v|=F}return ns(a,v,c,f,w)}),I0=Wt(function(a,c,f){var v=b|x;if(f.length){var w=Es(f,so(I0));v|=F}return ns(c,v,a,f,w)});function R0(a,c,f){c=f?e:c;var v=ns(a,O,e,e,e,e,e,c);return v.placeholder=R0.placeholder,v}function L0(a,c,f){c=f?e:c;var v=ns(a,P,e,e,e,e,e,c);return v.placeholder=L0.placeholder,v}function F0(a,c,f){var v,w,S,E,j,B,K=0,q=!1,Q=!1,vt=!0;if(typeof a!="function")throw new en(o);c=an(c)||0,Ae(f)&&(q=!!f.leading,Q="maxWait"in f,S=Q?Ke(an(f.maxWait)||0,c):S,vt="trailing"in f?!!f.trailing:vt);function Ot(Be){var vn=v,ls=w;return v=w=e,K=Be,E=a.apply(ls,vn),E}function At(Be){return K=Be,j=na(Gt,c),q?Ot(Be):E}function Xt(Be){var vn=Be-B,ls=Be-K,im=c-vn;return Q?hi(im,S-ls):im}function Dt(Be){var vn=Be-B,ls=Be-K;return B===e||vn>=c||vn<0||Q&&ls>=S}function Gt(){var Be=nc();if(Dt(Be))return Jt(Be);j=na(Gt,Xt(Be))}function Jt(Be){return j=e,vt&&v?Ot(Be):(v=w=e,E)}function Ui(){j!==e&&Gp(j),K=0,v=B=w=j=e}function xi(){return j===e?E:Jt(nc())}function Gi(){var Be=nc(),vn=Dt(Be);if(v=arguments,w=this,B=Be,vn){if(j===e)return At(B);if(Q)return Gp(j),j=na(Gt,c),Ot(B)}return j===e&&(j=na(Gt,c)),E}return Gi.cancel=Ui,Gi.flush=xi,Gi}var m5=Wt(function(a,c){return Op(a,1,c)}),v5=Wt(function(a,c,f){return Op(a,an(c)||0,f)});function y5(a){return ns(a,$)}function sc(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new en(o);var f=function(){var v=arguments,w=c?c.apply(this,v):v[0],S=f.cache;if(S.has(w))return S.get(w);var E=a.apply(this,v);return f.cache=S.set(w,E)||S,E};return f.cache=new(sc.Cache||es),f}sc.Cache=es;function rc(a){if(typeof a!="function")throw new en(o);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function _5(a){return j0(2,a)}var w5=o2(function(a,c){c=c.length==1&&Bt(c[0])?Oe(c[0],Xi(kt())):Oe(ri(c,1),Xi(kt()));var f=c.length;return Wt(function(v){for(var w=-1,S=hi(v.length,f);++w<S;)v[w]=c[w].call(this,v[w]);return Yi(a,this,v)})}),Fu=Wt(function(a,c){var f=Es(c,so(Fu));return ns(a,F,e,c,f)}),B0=Wt(function(a,c){var f=Es(c,so(B0));return ns(a,X,e,c,f)}),b5=ss(function(a,c){return ns(a,V,e,e,e,c)});function x5(a,c){if(typeof a!="function")throw new en(o);return c=c===e?c:Vt(c),Wt(a,c)}function C5(a,c){if(typeof a!="function")throw new en(o);return c=c==null?0:Ke(Vt(c),0),Wt(function(f){var v=f[c],w=Is(f,0,c);return v&&Ms(w,v),Yi(a,this,w)})}function S5(a,c,f){var v=!0,w=!0;if(typeof a!="function")throw new en(o);return Ae(f)&&(v="leading"in f?!!f.leading:v,w="trailing"in f?!!f.trailing:w),F0(a,c,{leading:v,maxWait:c,trailing:w})}function T5(a){return D0(a,1)}function O5(a,c){return Fu(bu(c),a)}function P5(){if(!arguments.length)return[];var a=arguments[0];return Bt(a)?a:[a]}function M5(a){return sn(a,m)}function E5(a,c){return c=typeof c=="function"?c:e,sn(a,m,c)}function k5(a){return sn(a,g|m)}function A5(a,c){return c=typeof c=="function"?c:e,sn(a,g|m,c)}function D5(a,c){return c==null||Tp(a,c,Qe(c))}function mn(a,c){return a===c||a!==a&&c!==c}var j5=Zl(cu),I5=Zl(function(a,c){return a>=c}),vr=Ap(function(){return arguments}())?Ap:function(a){return Ie(a)&&ue.call(a,"callee")&&!vp.call(a,"callee")},Bt=Y.isArray,R5=Jg?Xi(Jg):XC;function Ri(a){return a!=null&&oc(a.length)&&!os(a)}function Fe(a){return Ie(a)&&Ri(a)}function L5(a){return a===!0||a===!1||Ie(a)&&wi(a)==pt}var Rs=qx||$u,F5=Qg?Xi(Qg):WC;function B5(a){return Ie(a)&&a.nodeType===1&&!sa(a)}function z5(a){if(a==null)return!0;if(Ri(a)&&(Bt(a)||typeof a=="string"||typeof a.splice=="function"||Rs(a)||ro(a)||vr(a)))return!a.length;var c=ui(a);if(c==k||c==rt)return!a.size;if(ia(a))return!du(a).length;for(var f in a)if(ue.call(a,f))return!1;return!0}function V5(a,c){return Qo(a,c)}function H5(a,c,f){f=typeof f=="function"?f:e;var v=f?f(a,c):e;return v===e?Qo(a,c,e,f):!!v}function Bu(a){if(!Ie(a))return!1;var c=wi(a);return c==te||c==xt||typeof a.message=="string"&&typeof a.name=="string"&&!sa(a)}function Y5(a){return typeof a=="number"&&_p(a)}function os(a){if(!Ae(a))return!1;var c=wi(a);return c==fe||c==M||c==G||c==mt}function z0(a){return typeof a=="number"&&a==Vt(a)}function oc(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=gt}function Ae(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function Ie(a){return a!=null&&typeof a=="object"}var V0=tp?Xi(tp):UC;function X5(a,c){return a===c||uu(a,c,Mu(c))}function W5(a,c,f){return f=typeof f=="function"?f:e,uu(a,c,Mu(c),f)}function N5(a){return H0(a)&&a!=+a}function U5(a){if(E2(a))throw new Ft(r);return Dp(a)}function G5(a){return a===null}function $5(a){return a==null}function H0(a){return typeof a=="number"||Ie(a)&&wi(a)==H}function sa(a){if(!Ie(a)||wi(a)!=W)return!1;var c=jl(a);if(c===null)return!0;var f=ue.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&El.call(f)==Wx}var zu=ep?Xi(ep):GC;function K5(a){return z0(a)&&a>=-gt&&a<=gt}var Y0=ip?Xi(ip):$C;function ac(a){return typeof a=="string"||!Bt(a)&&Ie(a)&&wi(a)==et}function Ni(a){return typeof a=="symbol"||Ie(a)&&wi(a)==Pt}var ro=np?Xi(np):KC;function q5(a){return a===e}function Z5(a){return Ie(a)&&ui(a)==Tt}function J5(a){return Ie(a)&&wi(a)==jt}var Q5=Zl(fu),tT=Zl(function(a,c){return a<=c});function X0(a){if(!a)return[];if(Ri(a))return ac(a)?gn(a):Ii(a);if(No&&a[No])return Dx(a[No]());var c=ui(a),f=c==k?tu:c==rt?Ol:oo;return f(a)}function as(a){if(!a)return a===0?a:0;if(a=an(a),a===_t||a===-_t){var c=a<0?-1:1;return c*Kt}return a===a?a:0}function Vt(a){var c=as(a),f=c%1;return c===c?f?c-f:c:0}function W0(a){return a?fr(Vt(a),0,Ut):0}function an(a){if(typeof a=="number")return a;if(Ni(a))return zt;if(Ae(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=Ae(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=cp(a);var f=Rb.test(a);return f||Fb.test(a)?px(a.slice(2),f?2:8):Ib.test(a)?zt:+a}function N0(a){return In(a,Li(a))}function eT(a){return a?fr(Vt(a),-gt,gt):a===0?a:0}function le(a){return a==null?"":Wi(a)}var iT=io(function(a,c){if(ia(c)||Ri(c)){In(c,Qe(c),a);return}for(var f in c)ue.call(c,f)&&qo(a,f,c[f])}),U0=io(function(a,c){In(c,Li(c),a)}),lc=io(function(a,c,f,v){In(c,Li(c),a,v)}),nT=io(function(a,c,f,v){In(c,Qe(c),a,v)}),sT=ss(ou);function rT(a,c){var f=eo(a);return c==null?f:Sp(f,c)}var oT=Wt(function(a,c){a=me(a);var f=-1,v=c.length,w=v>2?c[2]:e;for(w&&bi(c[0],c[1],w)&&(v=1);++f<v;)for(var S=c[f],E=Li(S),j=-1,B=E.length;++j<B;){var K=E[j],q=a[K];(q===e||mn(q,Jr[K])&&!ue.call(a,K))&&(a[K]=S[K])}return a}),aT=Wt(function(a){return a.push(e,c0),Yi(G0,e,a)});function lT(a,c){return rp(a,kt(c,3),jn)}function cT(a,c){return rp(a,kt(c,3),lu)}function hT(a,c){return a==null?a:au(a,kt(c,3),Li)}function uT(a,c){return a==null?a:Ep(a,kt(c,3),Li)}function dT(a,c){return a&&jn(a,kt(c,3))}function fT(a,c){return a&&lu(a,kt(c,3))}function gT(a){return a==null?[]:Xl(a,Qe(a))}function pT(a){return a==null?[]:Xl(a,Li(a))}function Vu(a,c,f){var v=a==null?e:gr(a,c);return v===e?f:v}function mT(a,c){return a!=null&&d0(a,c,zC)}function Hu(a,c){return a!=null&&d0(a,c,VC)}var vT=s0(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=kl.call(c)),a[c]=f},Xu(Fi)),yT=s0(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=kl.call(c)),ue.call(a,c)?a[c].push(f):a[c]=[f]},kt),_T=Wt(Jo);function Qe(a){return Ri(a)?xp(a):du(a)}function Li(a){return Ri(a)?xp(a,!0):qC(a)}function wT(a,c){var f={};return c=kt(c,3),jn(a,function(v,w,S){is(f,c(v,w,S),v)}),f}function bT(a,c){var f={};return c=kt(c,3),jn(a,function(v,w,S){is(f,w,c(v,w,S))}),f}var xT=io(function(a,c,f){Wl(a,c,f)}),G0=io(function(a,c,f,v){Wl(a,c,f,v)}),CT=ss(function(a,c){var f={};if(a==null)return f;var v=!1;c=Oe(c,function(S){return S=js(S,a),v||(v=S.length>1),S}),In(a,Ou(a),f),v&&(f=sn(f,g|p|m,v2));for(var w=c.length;w--;)yu(f,c[w]);return f});function ST(a,c){return $0(a,rc(kt(c)))}var TT=ss(function(a,c){return a==null?{}:JC(a,c)});function $0(a,c){if(a==null)return{};var f=Oe(Ou(a),function(v){return[v]});return c=kt(c),zp(a,f,function(v,w){return c(v,w[0])})}function OT(a,c,f){c=js(c,a);var v=-1,w=c.length;for(w||(w=1,a=e);++v<w;){var S=a==null?e:a[Rn(c[v])];S===e&&(v=w,S=f),a=os(S)?S.call(a):S}return a}function PT(a,c,f){return a==null?a:ta(a,c,f)}function MT(a,c,f,v){return v=typeof v=="function"?v:e,a==null?a:ta(a,c,f,v)}var K0=a0(Qe),q0=a0(Li);function ET(a,c,f){var v=Bt(a),w=v||Rs(a)||ro(a);if(c=kt(c,4),f==null){var S=a&&a.constructor;w?f=v?new S:[]:Ae(a)?f=os(S)?eo(jl(a)):{}:f={}}return(w?tn:jn)(a,function(E,j,B){return c(f,E,j,B)}),f}function kT(a,c){return a==null?!0:yu(a,c)}function AT(a,c,f){return a==null?a:Wp(a,c,bu(f))}function DT(a,c,f,v){return v=typeof v=="function"?v:e,a==null?a:Wp(a,c,bu(f),v)}function oo(a){return a==null?[]:Qh(a,Qe(a))}function jT(a){return a==null?[]:Qh(a,Li(a))}function IT(a,c,f){return f===e&&(f=c,c=e),f!==e&&(f=an(f),f=f===f?f:0),c!==e&&(c=an(c),c=c===c?c:0),fr(an(a),c,f)}function RT(a,c,f){return c=as(c),f===e?(f=c,c=0):f=as(f),a=an(a),HC(a,c,f)}function LT(a,c,f){if(f&&typeof f!="boolean"&&bi(a,c,f)&&(c=f=e),f===e&&(typeof c=="boolean"?(f=c,c=e):typeof a=="boolean"&&(f=a,a=e)),a===e&&c===e?(a=0,c=1):(a=as(a),c===e?(c=a,a=0):c=as(c)),a>c){var v=a;a=c,c=v}if(f||a%1||c%1){var w=wp();return hi(a+w*(c-a+gx("1e-"+((w+"").length-1))),c)}return pu(a,c)}var FT=no(function(a,c,f){return c=c.toLowerCase(),a+(f?Z0(c):c)});function Z0(a){return Yu(le(a).toLowerCase())}function J0(a){return a=le(a),a&&a.replace(zb,Px).replace(sx,"")}function BT(a,c,f){a=le(a),c=Wi(c);var v=a.length;f=f===e?v:fr(Vt(f),0,v);var w=f;return f-=c.length,f>=0&&a.slice(f,w)==c}function zT(a){return a=le(a),a&&_b.test(a)?a.replace(Eg,Mx):a}function VT(a){return a=le(a),a&&Tb.test(a)?a.replace(Fh,"\\$&"):a}var HT=no(function(a,c,f){return a+(f?"-":"")+c.toLowerCase()}),YT=no(function(a,c,f){return a+(f?" ":"")+c.toLowerCase()}),XT=e0("toLowerCase");function WT(a,c,f){a=le(a),c=Vt(c);var v=c?qr(a):0;if(!c||v>=c)return a;var w=(c-v)/2;return ql(Fl(w),f)+a+ql(Ll(w),f)}function NT(a,c,f){a=le(a),c=Vt(c);var v=c?qr(a):0;return c&&v<c?a+ql(c-v,f):a}function UT(a,c,f){a=le(a),c=Vt(c);var v=c?qr(a):0;return c&&v<c?ql(c-v,f)+a:a}function GT(a,c,f){return f||c==null?c=0:c&&(c=+c),tC(le(a).replace(Bh,""),c||0)}function $T(a,c,f){return(f?bi(a,c,f):c===e)?c=1:c=Vt(c),mu(le(a),c)}function KT(){var a=arguments,c=le(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var qT=no(function(a,c,f){return a+(f?"_":"")+c.toLowerCase()});function ZT(a,c,f){return f&&typeof f!="number"&&bi(a,c,f)&&(c=f=e),f=f===e?Ut:f>>>0,f?(a=le(a),a&&(typeof c=="string"||c!=null&&!zu(c))&&(c=Wi(c),!c&&Kr(a))?Is(gn(a),0,f):a.split(c,f)):[]}var JT=no(function(a,c,f){return a+(f?" ":"")+Yu(c)});function QT(a,c,f){return a=le(a),f=f==null?0:fr(Vt(f),0,a.length),c=Wi(c),a.slice(f,f+c.length)==c}function tO(a,c,f){var v=C.templateSettings;f&&bi(a,c,f)&&(c=e),a=le(a),c=lc({},c,v,l0);var w=lc({},c.imports,v.imports,l0),S=Qe(w),E=Qh(w,S),j,B,K=0,q=c.interpolate||bl,Q="__p += '",vt=eu((c.escape||bl).source+"|"+q.source+"|"+(q===kg?jb:bl).source+"|"+(c.evaluate||bl).source+"|$","g"),Ot="//# sourceURL="+(ue.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++cx+"]")+`
`;a.replace(vt,function(Dt,Gt,Jt,Ui,xi,Gi){return Jt||(Jt=Ui),Q+=a.slice(K,Gi).replace(Vb,Ex),Gt&&(j=!0,Q+=`' +
__e(`+Gt+`) +
'`),xi&&(B=!0,Q+=`';
`+xi+`;
__p += '`),Jt&&(Q+=`' +
((__t = (`+Jt+`)) == null ? '' : __t) +
'`),K=Gi+Dt.length,Dt}),Q+=`';
`;var At=ue.call(c,"variable")&&c.variable;if(!At)Q=`with (obj) {
`+Q+`
}
`;else if(Ab.test(At))throw new Ft(l);Q=(B?Q.replace(wl,""):Q).replace(mb,"$1").replace(vb,"$1;"),Q="function("+(At||"obj")+`) {
`+(At?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(j?", __e = _.escape":"")+(B?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Q+`return __p
}`;var Xt=tm(function(){return ae(S,Ot+"return "+Q).apply(e,E)});if(Xt.source=Q,Bu(Xt))throw Xt;return Xt}function eO(a){return le(a).toLowerCase()}function iO(a){return le(a).toUpperCase()}function nO(a,c,f){if(a=le(a),a&&(f||c===e))return cp(a);if(!a||!(c=Wi(c)))return a;var v=gn(a),w=gn(c),S=hp(v,w),E=up(v,w)+1;return Is(v,S,E).join("")}function sO(a,c,f){if(a=le(a),a&&(f||c===e))return a.slice(0,fp(a)+1);if(!a||!(c=Wi(c)))return a;var v=gn(a),w=up(v,gn(c))+1;return Is(v,0,w).join("")}function rO(a,c,f){if(a=le(a),a&&(f||c===e))return a.replace(Bh,"");if(!a||!(c=Wi(c)))return a;var v=gn(a),w=hp(v,gn(c));return Is(v,w).join("")}function oO(a,c){var f=st,v=ht;if(Ae(c)){var w="separator"in c?c.separator:w;f="length"in c?Vt(c.length):f,v="omission"in c?Wi(c.omission):v}a=le(a);var S=a.length;if(Kr(a)){var E=gn(a);S=E.length}if(f>=S)return a;var j=f-qr(v);if(j<1)return v;var B=E?Is(E,0,j).join(""):a.slice(0,j);if(w===e)return B+v;if(E&&(j+=B.length-j),zu(w)){if(a.slice(j).search(w)){var K,q=B;for(w.global||(w=eu(w.source,le(Ag.exec(w))+"g")),w.lastIndex=0;K=w.exec(q);)var Q=K.index;B=B.slice(0,Q===e?j:Q)}}else if(a.indexOf(Wi(w),j)!=j){var vt=B.lastIndexOf(w);vt>-1&&(B=B.slice(0,vt))}return B+v}function aO(a){return a=le(a),a&&yb.test(a)?a.replace(Mg,Lx):a}var lO=no(function(a,c,f){return a+(f?" ":"")+c.toUpperCase()}),Yu=e0("toUpperCase");function Q0(a,c,f){return a=le(a),c=f?e:c,c===e?Ax(a)?zx(a):xx(a):a.match(c)||[]}var tm=Wt(function(a,c){try{return Yi(a,e,c)}catch(f){return Bu(f)?f:new Ft(f)}}),cO=ss(function(a,c){return tn(c,function(f){f=Rn(f),is(a,f,Lu(a[f],a))}),a});function hO(a){var c=a==null?0:a.length,f=kt();return a=c?Oe(a,function(v){if(typeof v[1]!="function")throw new en(o);return[f(v[0]),v[1]]}):[],Wt(function(v){for(var w=-1;++w<c;){var S=a[w];if(Yi(S[0],this,v))return Yi(S[1],this,v)}})}function uO(a){return LC(sn(a,g))}function Xu(a){return function(){return a}}function dO(a,c){return a==null||a!==a?c:a}var fO=n0(),gO=n0(!0);function Fi(a){return a}function Wu(a){return jp(typeof a=="function"?a:sn(a,g))}function pO(a){return Rp(sn(a,g))}function mO(a,c){return Lp(a,sn(c,g))}var vO=Wt(function(a,c){return function(f){return Jo(f,a,c)}}),yO=Wt(function(a,c){return function(f){return Jo(a,f,c)}});function Nu(a,c,f){var v=Qe(c),w=Xl(c,v);f==null&&!(Ae(c)&&(w.length||!v.length))&&(f=c,c=a,a=this,w=Xl(c,Qe(c)));var S=!(Ae(f)&&"chain"in f)||!!f.chain,E=os(a);return tn(w,function(j){var B=c[j];a[j]=B,E&&(a.prototype[j]=function(){var K=this.__chain__;if(S||K){var q=a(this.__wrapped__),Q=q.__actions__=Ii(this.__actions__);return Q.push({func:B,args:arguments,thisArg:a}),q.__chain__=K,q}return B.apply(a,Ms([this.value()],arguments))})}),a}function _O(){return si._===this&&(si._=Nx),this}function Uu(){}function wO(a){return a=Vt(a),Wt(function(c){return Fp(c,a)})}var bO=Cu(Oe),xO=Cu(sp),CO=Cu($h);function em(a){return ku(a)?Kh(Rn(a)):QC(a)}function SO(a){return function(c){return a==null?e:gr(a,c)}}var TO=r0(),OO=r0(!0);function Gu(){return[]}function $u(){return!1}function PO(){return{}}function MO(){return""}function EO(){return!0}function kO(a,c){if(a=Vt(a),a<1||a>gt)return[];var f=Ut,v=hi(a,Ut);c=kt(c),a-=Ut;for(var w=Jh(v,c);++f<a;)c(f);return w}function AO(a){return Bt(a)?Oe(a,Rn):Ni(a)?[a]:Ii(b0(le(a)))}function DO(a){var c=++Xx;return le(a)+c}var jO=Kl(function(a,c){return a+c},0),IO=Su("ceil"),RO=Kl(function(a,c){return a/c},1),LO=Su("floor");function FO(a){return a&&a.length?Yl(a,Fi,cu):e}function BO(a,c){return a&&a.length?Yl(a,kt(c,2),cu):e}function zO(a){return ap(a,Fi)}function VO(a,c){return ap(a,kt(c,2))}function HO(a){return a&&a.length?Yl(a,Fi,fu):e}function YO(a,c){return a&&a.length?Yl(a,kt(c,2),fu):e}var XO=Kl(function(a,c){return a*c},1),WO=Su("round"),NO=Kl(function(a,c){return a-c},0);function UO(a){return a&&a.length?Zh(a,Fi):0}function GO(a,c){return a&&a.length?Zh(a,kt(c,2)):0}return C.after=p5,C.ary=D0,C.assign=iT,C.assignIn=U0,C.assignInWith=lc,C.assignWith=nT,C.at=sT,C.before=j0,C.bind=Lu,C.bindAll=cO,C.bindKey=I0,C.castArray=P5,C.chain=E0,C.chunk=L2,C.compact=F2,C.concat=B2,C.cond=hO,C.conforms=uO,C.constant=Xu,C.countBy=US,C.create=rT,C.curry=R0,C.curryRight=L0,C.debounce=F0,C.defaults=oT,C.defaultsDeep=aT,C.defer=m5,C.delay=v5,C.difference=z2,C.differenceBy=V2,C.differenceWith=H2,C.drop=Y2,C.dropRight=X2,C.dropRightWhile=W2,C.dropWhile=N2,C.fill=U2,C.filter=$S,C.flatMap=ZS,C.flatMapDeep=JS,C.flatMapDepth=QS,C.flatten=T0,C.flattenDeep=G2,C.flattenDepth=$2,C.flip=y5,C.flow=fO,C.flowRight=gO,C.fromPairs=K2,C.functions=gT,C.functionsIn=pT,C.groupBy=t5,C.initial=Z2,C.intersection=J2,C.intersectionBy=Q2,C.intersectionWith=tS,C.invert=vT,C.invertBy=yT,C.invokeMap=i5,C.iteratee=Wu,C.keyBy=n5,C.keys=Qe,C.keysIn=Li,C.map=ic,C.mapKeys=wT,C.mapValues=bT,C.matches=pO,C.matchesProperty=mO,C.memoize=sc,C.merge=xT,C.mergeWith=G0,C.method=vO,C.methodOf=yO,C.mixin=Nu,C.negate=rc,C.nthArg=wO,C.omit=CT,C.omitBy=ST,C.once=_5,C.orderBy=s5,C.over=bO,C.overArgs=w5,C.overEvery=xO,C.overSome=CO,C.partial=Fu,C.partialRight=B0,C.partition=r5,C.pick=TT,C.pickBy=$0,C.property=em,C.propertyOf=SO,C.pull=sS,C.pullAll=P0,C.pullAllBy=rS,C.pullAllWith=oS,C.pullAt=aS,C.range=TO,C.rangeRight=OO,C.rearg=b5,C.reject=l5,C.remove=lS,C.rest=x5,C.reverse=Iu,C.sampleSize=h5,C.set=PT,C.setWith=MT,C.shuffle=u5,C.slice=cS,C.sortBy=g5,C.sortedUniq=mS,C.sortedUniqBy=vS,C.split=ZT,C.spread=C5,C.tail=yS,C.take=_S,C.takeRight=wS,C.takeRightWhile=bS,C.takeWhile=xS,C.tap=FS,C.throttle=S5,C.thru=ec,C.toArray=X0,C.toPairs=K0,C.toPairsIn=q0,C.toPath=AO,C.toPlainObject=N0,C.transform=ET,C.unary=T5,C.union=CS,C.unionBy=SS,C.unionWith=TS,C.uniq=OS,C.uniqBy=PS,C.uniqWith=MS,C.unset=kT,C.unzip=Ru,C.unzipWith=M0,C.update=AT,C.updateWith=DT,C.values=oo,C.valuesIn=jT,C.without=ES,C.words=Q0,C.wrap=O5,C.xor=kS,C.xorBy=AS,C.xorWith=DS,C.zip=jS,C.zipObject=IS,C.zipObjectDeep=RS,C.zipWith=LS,C.entries=K0,C.entriesIn=q0,C.extend=U0,C.extendWith=lc,Nu(C,C),C.add=jO,C.attempt=tm,C.camelCase=FT,C.capitalize=Z0,C.ceil=IO,C.clamp=IT,C.clone=M5,C.cloneDeep=k5,C.cloneDeepWith=A5,C.cloneWith=E5,C.conformsTo=D5,C.deburr=J0,C.defaultTo=dO,C.divide=RO,C.endsWith=BT,C.eq=mn,C.escape=zT,C.escapeRegExp=VT,C.every=GS,C.find=KS,C.findIndex=C0,C.findKey=lT,C.findLast=qS,C.findLastIndex=S0,C.findLastKey=cT,C.floor=LO,C.forEach=k0,C.forEachRight=A0,C.forIn=hT,C.forInRight=uT,C.forOwn=dT,C.forOwnRight=fT,C.get=Vu,C.gt=j5,C.gte=I5,C.has=mT,C.hasIn=Hu,C.head=O0,C.identity=Fi,C.includes=e5,C.indexOf=q2,C.inRange=RT,C.invoke=_T,C.isArguments=vr,C.isArray=Bt,C.isArrayBuffer=R5,C.isArrayLike=Ri,C.isArrayLikeObject=Fe,C.isBoolean=L5,C.isBuffer=Rs,C.isDate=F5,C.isElement=B5,C.isEmpty=z5,C.isEqual=V5,C.isEqualWith=H5,C.isError=Bu,C.isFinite=Y5,C.isFunction=os,C.isInteger=z0,C.isLength=oc,C.isMap=V0,C.isMatch=X5,C.isMatchWith=W5,C.isNaN=N5,C.isNative=U5,C.isNil=$5,C.isNull=G5,C.isNumber=H0,C.isObject=Ae,C.isObjectLike=Ie,C.isPlainObject=sa,C.isRegExp=zu,C.isSafeInteger=K5,C.isSet=Y0,C.isString=ac,C.isSymbol=Ni,C.isTypedArray=ro,C.isUndefined=q5,C.isWeakMap=Z5,C.isWeakSet=J5,C.join=eS,C.kebabCase=HT,C.last=on,C.lastIndexOf=iS,C.lowerCase=YT,C.lowerFirst=XT,C.lt=Q5,C.lte=tT,C.max=FO,C.maxBy=BO,C.mean=zO,C.meanBy=VO,C.min=HO,C.minBy=YO,C.stubArray=Gu,C.stubFalse=$u,C.stubObject=PO,C.stubString=MO,C.stubTrue=EO,C.multiply=XO,C.nth=nS,C.noConflict=_O,C.noop=Uu,C.now=nc,C.pad=WT,C.padEnd=NT,C.padStart=UT,C.parseInt=GT,C.random=LT,C.reduce=o5,C.reduceRight=a5,C.repeat=$T,C.replace=KT,C.result=OT,C.round=WO,C.runInContext=L,C.sample=c5,C.size=d5,C.snakeCase=qT,C.some=f5,C.sortedIndex=hS,C.sortedIndexBy=uS,C.sortedIndexOf=dS,C.sortedLastIndex=fS,C.sortedLastIndexBy=gS,C.sortedLastIndexOf=pS,C.startCase=JT,C.startsWith=QT,C.subtract=NO,C.sum=UO,C.sumBy=GO,C.template=tO,C.times=kO,C.toFinite=as,C.toInteger=Vt,C.toLength=W0,C.toLower=eO,C.toNumber=an,C.toSafeInteger=eT,C.toString=le,C.toUpper=iO,C.trim=nO,C.trimEnd=sO,C.trimStart=rO,C.truncate=oO,C.unescape=aO,C.uniqueId=DO,C.upperCase=lO,C.upperFirst=Yu,C.each=k0,C.eachRight=A0,C.first=O0,Nu(C,function(){var a={};return jn(C,function(c,f){ue.call(C.prototype,f)||(a[f]=c)}),a}(),{chain:!1}),C.VERSION=i,tn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){C[a].placeholder=C}),tn(["drop","take"],function(a,c){Zt.prototype[a]=function(f){f=f===e?1:Ke(Vt(f),0);var v=this.__filtered__&&!c?new Zt(this):this.clone();return v.__filtered__?v.__takeCount__=hi(f,v.__takeCount__):v.__views__.push({size:hi(f,Ut),type:a+(v.__dir__<0?"Right":"")}),v},Zt.prototype[a+"Right"]=function(f){return this.reverse()[a](f).reverse()}}),tn(["filter","map","takeWhile"],function(a,c){var f=c+1,v=f==bt||f==dt;Zt.prototype[a]=function(w){var S=this.clone();return S.__iteratees__.push({iteratee:kt(w,3),type:f}),S.__filtered__=S.__filtered__||v,S}}),tn(["head","last"],function(a,c){var f="take"+(c?"Right":"");Zt.prototype[a]=function(){return this[f](1).value()[0]}}),tn(["initial","tail"],function(a,c){var f="drop"+(c?"":"Right");Zt.prototype[a]=function(){return this.__filtered__?new Zt(this):this[f](1)}}),Zt.prototype.compact=function(){return this.filter(Fi)},Zt.prototype.find=function(a){return this.filter(a).head()},Zt.prototype.findLast=function(a){return this.reverse().find(a)},Zt.prototype.invokeMap=Wt(function(a,c){return typeof a=="function"?new Zt(this):this.map(function(f){return Jo(f,a,c)})}),Zt.prototype.reject=function(a){return this.filter(rc(kt(a)))},Zt.prototype.slice=function(a,c){a=Vt(a);var f=this;return f.__filtered__&&(a>0||c<0)?new Zt(f):(a<0?f=f.takeRight(-a):a&&(f=f.drop(a)),c!==e&&(c=Vt(c),f=c<0?f.dropRight(-c):f.take(c-a)),f)},Zt.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Zt.prototype.toArray=function(){return this.take(Ut)},jn(Zt.prototype,function(a,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),v=/^(?:head|last)$/.test(c),w=C[v?"take"+(c=="last"?"Right":""):c],S=v||/^find/.test(c);w&&(C.prototype[c]=function(){var E=this.__wrapped__,j=v?[1]:arguments,B=E instanceof Zt,K=j[0],q=B||Bt(E),Q=function(Gt){var Jt=w.apply(C,Ms([Gt],j));return v&&vt?Jt[0]:Jt};q&&f&&typeof K=="function"&&K.length!=1&&(B=q=!1);var vt=this.__chain__,Ot=!!this.__actions__.length,At=S&&!vt,Xt=B&&!Ot;if(!S&&q){E=Xt?E:new Zt(this);var Dt=a.apply(E,j);return Dt.__actions__.push({func:ec,args:[Q],thisArg:e}),new nn(Dt,vt)}return At&&Xt?a.apply(this,j):(Dt=this.thru(Q),At?v?Dt.value()[0]:Dt.value():Dt)})}),tn(["pop","push","shift","sort","splice","unshift"],function(a){var c=Pl[a],f=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",v=/^(?:pop|shift)$/.test(a);C.prototype[a]=function(){var w=arguments;if(v&&!this.__chain__){var S=this.value();return c.apply(Bt(S)?S:[],w)}return this[f](function(E){return c.apply(Bt(E)?E:[],w)})}}),jn(Zt.prototype,function(a,c){var f=C[c];if(f){var v=f.name+"";ue.call(to,v)||(to[v]=[]),to[v].push({name:c,func:f})}}),to[$l(e,x).name]=[{name:"wrapper",func:e}],Zt.prototype.clone=aC,Zt.prototype.reverse=lC,Zt.prototype.value=cC,C.prototype.at=BS,C.prototype.chain=zS,C.prototype.commit=VS,C.prototype.next=HS,C.prototype.plant=XS,C.prototype.reverse=WS,C.prototype.toJSON=C.prototype.valueOf=C.prototype.value=NS,C.prototype.first=C.prototype.head,No&&(C.prototype[No]=YS),C},Zr=Vx();cr?((cr.exports=Zr)._=Zr,Wh._=Zr):si._=Zr}).call(la)})(nh,nh.exports);var mi=nh.exports;const{getLocalPoint:d6,wrapWithFireEvent:f6}=Vr,g6=(n,t,e,i)=>{var s,r,o,l;const h=d6(t,t.originX,t.originY,e,i);if(t.originX===rl||t.originX===NE&&h.x<0||t.originX===WE&&h.x>0){const{target:u}=t,d=u.strokeWidth/(u.strokeUniform?u.scaleX:1),g=pw(t)?2:1,p=u.width,m=Math.ceil(Math.abs(h.x*g/u.scaleX)-d);if(u.isType("EditorClippingText")&&u.clippingPath instanceof Pe){const{originX:y,originY:_,scaledWidth:b,scaledHeight:x}=u._getOrigin();u.isChangeWidth=!0,u.set("width",Math.max(m,0)),u.isChangeWidth=!1;const{scaleX:T,scaleY:O}=u._calcImageScale(y,_,b,x);return(s=u.clippingPath)==null||s.set("scaleX",T),(r=u.clippingPath)==null||r.set("scaleY",O),(o=u.clipPath)==null||o.set("scaleX",T),(l=u.clipPath)==null||l.set("scaleY",O),u._updateImageViewportScale(b,x),u._updateImageViewportPositionScale(),p!==u.width}return u.set("width",Math.max(m,0)),p!==u.width}return!1},wv=f6("resizing",vl(g6)),{Control:_n}=XE,{rotationStyleHandler:p6,scaleOrSkewActionName:Sc}=Vr,m6=`<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink">
<title>Icon / Ball Control / Ball Control-Spin</title>
<desc>Created with Sketch.</desc>
<g id="Icon-/-Ball-Control-/-Ball-Control-Spin" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
  <circle id="" stroke-opacity="0.15" stroke="#000000" fill="#FFFFFF" cx="12" cy="12" r="11.5">
  </circle>
  <g id="Icon-/-cursor-/-Spin" fill="#1B1E24">
    <path
      d="M10.6666667,6 L10.6666667,10 L9.06333333,8.39666667 C8.014,9.252 7.33333333,10.5433333 7.33333333,12 C7.33333333,14.5733333 9.42733333,16.6666667 12,16.6666667 L12,16.6666667 L12,18 C8.686,18 6,15.314 6,12 C6,10.1726667 6.81933333,8.54133333 8.10866667,7.442 L8.10866667,7.442 L6.66666667,6 L10.6666667,6 Z M12,6 C15.314,6 18,8.686 18,12 C18,13.8273333 17.1806667,15.4586667 15.8913333,16.558 L15.8913333,16.558 L17.3333333,18 L13.3333333,18 L13.3333333,14 L14.9366667,15.6033333 C15.986,14.748 16.6666667,13.4566667 16.6666667,12 C16.6666667,9.42666667 14.5726667,7.33333333 12,7.33333333 L12,7.33333333 Z"
      id=""></path>
  </g>
</g>
</svg>`,v6=`data:image/svg+xml;charset=utf8,${encodeURIComponent(m6)}`;function _w(n,t,e,i,s,r,o){o!==void 0&&(n.save(),n.translate(t,e),n.rotate(J.degreesToRadians(o)),n.drawImage(i,-s/2,-r/2,s,r),n.restore())}const y6=document.createElement("img");document.createElement("img");const ww=document.createElement("img");ww.src=v6;function bv(n,t,e,i,s){_w(n,t,e,y6,20,25,s.angle)}function _6(n,t,e,i,s){_w(n,t,e,ww,20,20,s.angle)}function bw(n,t,e,i,s,r){n.beginPath(),n.moveTo(t+r,e),n.arcTo(t+i,e,t+i,e+s,r),n.arcTo(t+i,e+s,t,e+s,r),n.arcTo(t,e+s,t,e,r),n.arcTo(t,e,t+i,e,r),n.closePath()}function xv(n,t,e,i,s){n.save(),n.translate(t,e),n.rotate(J.degreesToRadians(s.angle)),bw(n,-2,-10,4,18,2),n.lineWidth=4,n.stroke(),n.fillStyle="#ffffff",n.fill(),n.restore()}function Cv(n,t,e,i,s){n.save(),n.translate(t,e),n.rotate(J.degreesToRadians(s.angle)),bw(n,-10,-2,18,4,2),n.lineWidth=4,n.stroke(),n.fillStyle="#ffffff",n.fill(),n.restore()}const xw=()=>({ml:new _n({x:-.5,y:0,offsetX:-1,cursorStyleHandler:wo,actionHandler:yv,getActionName:Sc,render:xv}),mr:new _n({x:.5,y:0,offsetX:1,cursorStyleHandler:wo,actionHandler:yv,getActionName:Sc,render:xv}),mb:new _n({x:0,y:.5,offsetY:1,cursorStyleHandler:wo,actionHandler:_v,getActionName:Sc,render:Cv}),mt:new _n({x:0,y:-.5,offsetY:-1,cursorStyleHandler:wo,actionHandler:_v,getActionName:Sc,render:Cv}),tl:new _n({x:-.5,y:-.5,cursorStyleHandler:ka,actionHandler:Cc}),tr:new _n({x:.5,y:-.5,cursorStyleHandler:ka,actionHandler:Cc}),bl:new _n({x:-.5,y:.5,cursorStyleHandler:ka,actionHandler:Cc}),br:new _n({x:.5,y:.5,cursorStyleHandler:ka,actionHandler:Cc}),mtr:new _n({x:0,y:-.5,actionHandler:t6,cursorStyleHandler:p6,offsetY:-30,withConnection:!0,actionName:"rotate",render:_6,cursorStyle:"none"})}),w6=()=>({mr:new _n({x:.5,y:0,offsetX:1,actionHandler:wv,cursorStyleHandler:wo,actionName:"resizing",render:bv}),ml:new _n({x:-.5,y:0,offsetX:-1,actionHandler:wv,cursorStyleHandler:wo,actionName:"resizing",render:bv})}),b6=()=>({...xw(),...w6()});ge.ownDefaults.controls={...ge.prototype.controls||{},...xw()};Bi&&(Bi.ownDefaults.controls={...Bi.prototype.controls||{},...b6()},Bi.ownDefaults.controls.mt.setVisibility(!1),Bi.ownDefaults.controls.mb.setVisibility(!1));function yl(n,t){return t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(i=>{i!=="constructor"&&Object.defineProperty(n.prototype,i,Object.getOwnPropertyDescriptor(e.prototype,i)||Object.create(null))})}),n}class x6 extends or(di){shouldActivate(t,e,i,{tl:s,tr:r,br:o,bl:l}){var h,u;const d=e.clipParent||e.clipChild;return(((h=e.canvas)==null?void 0:h.getActiveObject())===e||((u=e.canvas)==null?void 0:u.getActiveObject())===d||e===d)&&e.isControlVisible(t)&&xe.isPointInPolygon(i,[s,r,o,l])}}yl(di,[x6]);const bd="stateProperties";function Sv(n,t,e){const i={};e&&e.forEach(function(s){i[s]=n[s]}),mi.extend(n[t],i,!0)}function uf(n,t,e){if(n===t)return!0;if(Array.isArray(n)){if(!Array.isArray(t)||n.length!==t.length)return!1;for(var i=0,s=n.length;i<s;i++)if(!uf(n[i],t[i]))return!1;return!0}else if(n&&typeof n=="object"){var r=Object.keys(n),o;if(!t||typeof t!="object"||!e&&r.length!==Object.keys(t).length)return!1;for(var i=0,s=r.length;i<s;i++)if(o=r[i],!(o==="canvas"||o==="group")&&!uf(n[o],t[o]))return!1;return!0}}let C6=class extends or(ge){hasStateChanged(n){n=n||bd;const t="_"+n;return Object.keys(this[t]).length<this[n].length?!0:!uf(this[t],this,!0)}getSavedState(n){const t=n&&n.propertySet||"stateProperties";return mi.cloneDeep(this["_"+t])}saveState(n){const t=n&&n.propertySet||bd,e="_"+t;if(!this[e])return this.setupState(n);Sv(this,e,this[t]),n&&n.stateProperties&&Sv(this,e,n.stateProperties);const i="_"+(n&&n.propertySet||"stateProperties"),s=this.toDatalessObject().objects;return this[i].objects=s,this}setupState(n){n=n||{};const t=n.propertySet||bd;return n.propertySet=t,this["_"+t]={},this.saveState(n),this}};yl(ge,[C6]);const S6=["sourceType","sourceChannel","imageViewport","imageAngle","imageScale","imageCanvasScale","preImageScale","originalImageSize","hdImageSize","initialViewSize","initialImageSize","effectId","effectBrightness","brightness","saturation","contrast","sharpen","blur","stockPhotoInfo","imageVip","resizeFilterType","cutoutKey","skinKey","carToonKey","originInfo","imgStyles","imgStylesKey","imgStylesVip","strokeLineJoin","tint","tempereature","effectFilterId","effectFilterStrength","effectFilterIsPro","effectFilterSize","effectFilterDefalStrength","effectFilterName","effectFilterGroupName","cutoutUrl","skinUrl","cutoutKeyTemplate","preTrimImageViewport","originalImageObject","originalClipPathObject"];Object.assign(ge.ownDefaults,{paintFirst:"stroke",lockScalingFlip:!0,cornerStrokeColor:"rgba(0,0,0, 0.15)",cornerSize:12,cornerRoundSize:3,cornerColor:"rgba(255,255,255,1)",transparentCorners:!1,cornerStyle:"circle",borderColor:"#3f9eff",borderDashArray:[3,0],borderScaleFactor:2,borderOpacityWhenMoving:1,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform ".split(" ").concat(S6)});Object.assign(ki.ownDefaults,{_controlsVisibility:{mt:!1,mb:!1,ml:!1,mr:!1}});const T6="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let Cw=(n=21)=>{let t="",e=crypto.getRandomValues(new Uint8Array(n));for(;n--;)t+=T6[e[n]&63];return t};function O6(n,t,e,i){const s=n/e,r=t/i;return Math.min(s,r)}const P6=ge.prototype.render;class M6 extends or(ge){setOptions(t={}){this._setOptions(t),t.objectId||this.generateNewObjectId()}generateNewObjectId(){this.objectId=Cw(10)}showLoadError(t){this.loadError||lw(`<?xml version="1.0" encoding="UTF-8"?>
          <svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <!-- Generator: Sketch 53.2 (72643) - https://sketchapp.com -->
              <title>Icon / Error 2</title>
              <desc>Created with Sketch.</desc>
              <g id="Icon-/-Error-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <path d="M8,1 C4.134,1 1,4.134 1,8 C1,11.866 4.134,15 8,15 C11.866,15 15,11.866 15,8 C15,4.134 11.866,1 8,1" id="Fill-1" fill="#F24A62"></path>
                  <path d="M8.0363,13.1456 C7.4563,13.1456 6.9853,12.6986 6.9853,12.1456 C6.9853,11.5936 7.4563,11.1456 8.0363,11.1456 C8.6163,11.1456 9.0873,11.5936 9.0873,12.1456 C9.0873,12.6986 8.6163,13.1456 8.0363,13.1456 Z M8.0724,10.1319 C7.5194,10.1319 7.0724,9.6849 7.0724,9.1319 L7.0724,4.1319 C7.0724,3.5789 7.5194,3.1319 8.0724,3.1319 C8.6254,3.1319 9.0724,3.5789 9.0724,4.1319 L9.0724,9.1319 C9.0724,9.6849 8.6254,10.1319 8.0724,10.1319 Z" id="" fill="#FFFFFF"></path>
              </g>
          </svg>`).then(({objects:e,options:i})=>{this.loadError=J.groupSVGElements(e,i),this.loadError.originX="center",this.loadError.originY="center",this.loadError.objectCaching=!1,this.dirty=!0,t&&t()})}renderLoadErrorIcon(t){if(this.loadError){const e=this.loadError.width,i=this.loadError.height,s=O6(this.width,this.height,e,i);this.loadError.scale(s),t.save(),this.loadError.render(t),t.restore()}}clone(t){const e=this.toObject(t);return this.constructor.fromObject(e)}render(t){var e;const i=this.animationObject||((e=this.originalTarget)==null?void 0:e.animationObject)||this;P6.call(i,t)}animateFlip(t,e){const i=this;if(e===i[t])return i;const{canvas:s,group:r}=i,o=t==="imageFlipX"?"scaleX":"scaleY";let l=i.get("animationObject");return l||(i.canvas=void 0,i.group=void 0,l=mi.cloneDeep(i),l.canvas=s,l.group=r,l._set("cacheGlyphs",i.get("cacheGlyphs")),i.canvas=s,i.group=r),l.set("animation",{[o]:-i[o]}),i.set("animationObject",l),i[t]=e,l.animate(l.get("animation"),{duration:300,onChange:function(h){h<0&&(l[t]=e,l[o]=Math.abs(l[o])),i.dirty=!0;const u=i.getRelativeCenterPoint();l.angle=i.angle,l.group=i.group,l.dirty=!0,l.setPositionByOrigin(u,"center","center"),l.set("animationObject",l),i.set("animationObject",l),s==null||s.requestRenderAll()},onComplete:function(){l[t]=e,l.set("animation",void 0),l.dispose(),i.dirty=!0,i.cacheWidth=0,i.cacheHeight=0,i.clipPath&&(i.clipPath.cacheWidth=0,i.clipPath.cacheHeight=0),delete i.animationObject,s==null||s.requestRenderAll()},easing:J.ease.easeInOutQuad}),i}_fireDataChanged(t){const e={target:this,withoutStep:t};this.canvas&&this.canvas.fire("object:modified",e)}}yl(ge,[M6]);const E6=n=>{let t,e;return n.isType("EditorClippingText")&&n.clippingPath instanceof Pe&&(t={scaleX:n.clippingPath.scaleX,scaleY:n.clippingPath.scaleY}),(n.isType("ActiveSelection")||n.isType("Group"))&&(e=n._objects.map(i=>i.isType("EditorClippingText")&&i.clippingPath?{clippingPath:{scaleX:i.clippingPath.scaleX,scaleY:i.clippingPath.scaleY}}:{clippingPath:void 0})),{scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top,clippingPath:t,objects:e}},k6=(n,...t)=>console[n]("fabric",...t),{sendPointToPlane:Tv,degreesToRadians:A6}=J,{dragHandler:D6}=Vr;class j6 extends or(Io){findObjectWithId(t){for(let e=0;e<this._objects.length;e++)if(t===this._objects[e].objectId)return this._objects[e]}_setupCurrentTransform(t,e,i){var s;const r=e.group?Tv(this.getScenePoint(t),void 0,e.group.calcTransformMatrix()):this.getScenePoint(t),{key:o="",control:l}=e.getActiveControl()||{},h=i&&l?(s=l.getActionHandler(t,e,l))==null?void 0:s.bind(l):D6,u=qE(i,o,t,e),d=t[this.centeredKey],g=this._shouldCenterTransform(e,u,d)?{x:rl,y:rl}:this._getOriginFromCorner(e,o),p={target:e,action:u,actionHandler:h,actionPerformed:!1,corner:o,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:r.x-e.left,offsetY:r.y-e.top,originX:g.x,originY:g.y,ex:r.x,ey:r.y,lastX:r.x,lastY:r.y,theta:A6(e.angle),width:e.width,height:e.height,shiftKey:t.shiftKey,altKey:d,original:{...E6(e),originX:g.x,originY:g.y}};this._currentTransform=p,this.stateful&&e.saveState(),this.fire("before:transform",{e:t,transform:p})}_transformObject(t){const e=this.getScenePoint(t),i=this._currentTransform,s=i.target,r=s.group?Tv(e,void 0,s.group.calcTransformMatrix()):e;if(i.action==="drag"&&!s.isMoving){const o=this.getViewportPoint(t),l=this.getScenePoint(t),h=this._target,u={e:t,target:h,subTargets:this.targets||[],button:1,isClick:!1,pointer:this._pointer,absolutePointer:this._absolutePointer,viewportPoint:o,scenePoint:l,transform:this._currentTransform};this.fire("mouse:start_drag",u)}s.isMoving=!0,i.shiftKey=t.shiftKey,i.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,i,r),i.actionPerformed&&this.requestRenderAll()}}yl(Io,[j6]);const I6=fn.getDefaults();fn.getDefaults=()=>({...I6,stateful:!0});class R6 extends or(fn){constructor(){super(...arguments),Nt(this,"stateful")}_onObjectAdded(t){this.stateful&&t.setupState(),t.canvas&&t.canvas!==this&&(k6("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}}yl(fn,[R6]);class Sw extends ge{constructor(t){super(t)}updateClipCoords(t,e){this.clipCoords=t,this.clipObject=t.clipPath,this.maskAlpha=e,this.needRedraw=!0}needRefresh(){this.needRedraw=!0}renderCache(t){this._cacheCanvas||(this._cacheCanvas=J.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._cacheCanvas.width=this.width,this._cacheCanvas.height=this.height),this.needRedraw&&(this._cacheContext&&this.drawObject(this._cacheContext),this.needRedraw=!1)}drawObject(t){t.clearRect(0,0,this.width,this.height),t.save(),t.fillStyle=`rgba(0, 0, 0, ${this.maskAlpha})`,t.fillRect(0,0,this.width,this.height),t.restore(),t.save();const e=this.getViewportTransform();if(t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this.clipCoords)if(this.clipObject){console.log("drawObject");const i=this.clipCoords.width/this.clipObject.width,s=this.clipCoords.height/this.clipObject.height,r={x:this.clipCoords.tl.x,y:this.clipCoords.tl.y},o=this.clipObject.flipX,l=this.clipObject.flipY,h=this.clipObject.angle,u=this.clipObject.left,d=this.clipObject.top,g=this.clipObject.scaleX,p=this.clipObject.scaleY,m=this.clipObject.originX,y=this.clipObject.originY;this.clipCoords.flipX===!0&&(this.clipObject.flipX=!0),this.clipCoords.flipY===!0&&(this.clipObject.flipY=!0),this.clipObject.angle=this.clipCoords.angle,this.clipObject.scaleX=i,this.clipObject.scaleY=s,this.clipObject.left=r.x,this.clipObject.top=r.y,this.clipObject.originX="left",this.clipObject.originY="top",this.clipObject.render(t),this.clipObject.flipX=o,this.clipObject.flipY=l,this.clipObject.angle=h,this.clipObject.scaleX=g,this.clipObject.scaleY=p,this.clipObject.left=u,this.clipObject.top=d,this.clipObject.originX=m,this.clipObject.originY=y}else t.beginPath(),t.moveTo(this.clipCoords.tl.x,this.clipCoords.tl.y),t.lineTo(this.clipCoords.tr.x,this.clipCoords.tr.y),t.lineTo(this.clipCoords.br.x,this.clipCoords.br.y),t.lineTo(this.clipCoords.bl.x,this.clipCoords.bl.y),t.lineTo(this.clipCoords.tl.x,this.clipCoords.tl.y),t.closePath(),t.fillStyle="#000",t.fill();t.restore()}}Object.assign(Sw.ownDefaults,{clipCoords:void 0,clipObject:void 0,needRedraw:!0,maskAlpha:.1});class L6 extends ge{static getDefaults(){return{...super.getDefaults(),options:void 0,display:void 0,canvas:void 0,rect:void 0}}constructor(t,e={}){super(e),this.canvas=t,this.options=e,this.options.hiddenDelayMS||(this.options.hiddenDelayMS=500),this.options.color||(this.options.color="#fff"),this.options.size||(this.options.size=1),this.options.grid||(this.options.grid=3),t.on("before:render",()=>{this.clearContextTop()}),t.on("after:render",()=>{this.drawWithRect()})}show(t){this.rect={left:t.left,top:t.top,width:t.width,height:t.height,angle:t.angle,centerPoint:t.centerPoint}}clearContextTop(){var t;(t=this.canvas)!=null&&t.contextTop&&this.canvas.clearContext(this.canvas.contextTop)}drawWithRect(){if(!this.canvas)return;const t=this.canvas.getSelectionContext();if(this.rect&&t){const e=this.canvas.viewportTransform;t.save(),t.lineWidth=this.options.size/e[0],t.strokeStyle=this.options.color;const i=new D(this.rect.left,this.rect.top),s=J.degreesToRadians(this.rect.angle),r=i.rotate(s,this.rect.centerPoint);let o=0,l=0;r.x!==this.rect.centerPoint.x||r.y!==this.rect.centerPoint.y?(o=r.x,l=r.y):(o=r.x-.5*this.rect.width,l=r.y-.5*this.rect.height);let h=J.composeMatrix({translateX:o,translateY:l,angle:this.rect.angle});h=J.multiplyTransformMatrices(e,h),t.transform(h[0],h[1],h[2],h[3],h[4],h[5]),t.beginPath(),this.drawGridlines(t,this.rect.width,this.rect.height),t.closePath(),t.stroke(),t.restore()}}drawGridlines(t,e,i){const s=e/this.options.grid,r=i/this.options.grid;for(let o=1;o<this.options.grid;o++)t.moveTo(0,o*r),t.lineTo(e,o*r);for(let o=1;o<this.options.grid;o++)t.moveTo(o*s,0),t.lineTo(o*s,i)}hide(){var t;this.rect&&(this.options.hiddenDelayMS&&this.options.hiddenDelayMS>0?setTimeout(()=>{var e;this.rect=void 0,(e=this.canvas)==null||e.requestRenderAll()},this.options.hiddenDelayMS):(this.rect=void 0,(t=this.canvas)==null||t.requestRenderAll()))}}class F6{constructor(){Nt(this,"EventList"),this.EventList=new Array}addEventListener(t,e){this.EventList.push({name:t,listener:e})}removeEventListener(t,e){this.EventList=e?this.EventList.filter(i=>!(i.name===t&&i.listener===e)):this.EventList.filter(i=>i.name!==t)}dispatchEvent(t,e){this.EventList.filter(i=>i.name===t).map(i=>i.listener).forEach(i=>i(e))}}const Ss=new F6,B6=n=>{const t={min:600,max:2560},e={width:n.width,height:n.height,scale:1},i=1/Math.max(Math.min(Math.max(n.width,n.height),t.min)/t.min,Math.max(n.width,n.height)/t.max);return i!==1&&(e.width*=i,e.height*=i,e.scale=i),e};function z6(n,t,e,i){const s=n/e,r=t/i;return Math.min(s,r)}let V6=class extends Io{constructor(n,t,e){super(n,t),this._documentScale=1,this.maxScaleValue=5,this.currentHoverObject=void 0,this.isCliping=!1,this.clipTarget=void 0,this.currentClipCoords=void 0,this.isMainCanvas=e==null?void 0:e.isMainCanvas,this.scrollPaddingX=60,this.scrollPaddingY=60,this.gridlinesView=new L6(this,{grid:3}),this._initCanvas()}_initCanvas(){this.selectionBorderColor="rgb(176,207,255)",this.selectionColor="rgba(44,125,250,0.1)",this.selectionLineWidth=1,this.moveCursor="move",this.skipOffscreen=!1}_showOrHideGridlines(n){n&&n.show===!0&&this.currentClipCoords?this.gridlinesView.show({left:this.currentClipCoords.left,top:this.currentClipCoords.top,width:this.currentClipCoords.width,height:this.currentClipCoords.height,angle:this.currentClipCoords.angle,centerPoint:this.currentClipCoords.centerPoint}):this.gridlinesView.hide()}updateCanvasSize(n,t){t||(t=Object.assign({},this.designRect)),this.setDimensions(n),this.canvasSize=n,this.centerPoint=new D(.5*this.canvasSize.width,.5*this.canvasSize.height),this.clipObject=new Sw({width:n.width,height:n.height}),this.clipPath=this.clipObject,this._internalUpdateDocumentSize(t),this.clipObject.width=n.width,this.clipObject.height=n.height,this.renderAll()}_internalUpdateDocumentSize(n){const t=B6(n);this._documentScale=t.scale,this.designRect={x:(this.canvasSize.width-t.width)/2,y:(this.canvasSize.height-t.height)/2,width:t.width,height:t.height},this.originalVptMatrix=[1,0,0,1,this.designRect.x,this.designRect.y],this.viewportTransform=mi.clone(this.originalVptMatrix),this.defaultClipCoords={tl:new D(0,0),tr:new D(this.designRect.width,0),br:new D(this.designRect.width,this.designRect.height),bl:new D(0,this.designRect.height),left:0,top:0,width:this.designRect.width,height:this.designRect.height,angle:0,centerPoint:new D(.5*this.designRect.width,.5*this.designRect.height)};const e=120,i=z6(this.canvasSize.width-e,this.canvasSize.height-e,this.designRect.width,this.designRect.height);this.minScaleValue=.5*i,this.updateClipArea();const s=this.canvasSize.width/this.designRect.width;this.fitWidthVptMatrix=void 0,this.fitVptMatrix=void 0,this.zoomToPoint(this.centerPoint,s),this.fitWidthVptMatrix=mi.clone(this.viewportTransform),this.viewportTransform=mi.clone(this.originalVptMatrix),this.fitVptMatrix=void 0,this.zoomToPoint(this.centerPoint,i,!0),this.fitVptMatrix=mi.clone(this.viewportTransform)}zoomToPoint(n,t,e){const i=Math.min(Math.max(t,this.minScaleValue),this.maxScaleValue);return super.zoomToPoint(n,i),this.clipObject.needRefresh(),this._fixTranslate(),e&&this.isMainCanvas&&this.delayedDispatchEvent(),this}delayedDispatchEvent(){Ss.dispatchEvent(Cs.CANVAS_ZOOM,{zoomLevel:this.getZoom(),isInit:!0,documentSize:this.designRect})}_fixTranslate(){if(this.fitVptMatrix){const n=this.viewportTransform;if(!n)return;if(n[4]=Math.min(this.fitVptMatrix[4],n[4]),n[5]=Math.min(this.fitVptMatrix[5],n[5]),n[0]<this.fitVptMatrix[0]){const t=this.centerPoint,e=new D(t.x,t.y),i=this.fitVptMatrix.slice(0),s=new D(e.x,e.y).transform(J.invertTransform(i));i[0]=n[0],i[3]=n[0];const r=s.transform(i);i[4]+=e.x-r.x,i[5]+=e.y-r.y,n[4]=Math.max(i[4],n[4]),n[5]=Math.max(i[5],n[5])}this.setViewportTransform(n)}}updateClipArea(n,t){this.isCliping=!0,this.clipTarget=t,n||(n=this.defaultClipCoords,this.isCliping=!1),this.currentClipCoords=n;const e=n.clipPath;if(e){const i=mi.clone(e);this.currentClipCoords.clipPath=i,this.clipObject.updateClipCoords(this.currentClipCoords,this.isCliping?.3:0)}else this.clipObject.updateClipCoords(this.currentClipCoords,this.isCliping?.1:0);this.getElement().style.backgroundColor=this.isCliping?"rgba(0, 0, 0, 0.15)":"transparent"}drawClipPathOnCanvas(n){this.viewportTransform;const t=this.clipPath;n.save(),n.globalCompositeOperation="destination-in",t&&t._cacheCanvas&&t._cacheCanvas.width!==0&&t._cacheCanvas.height!==0&&n.drawImage(t._cacheCanvas,0,0),n.restore()}setCurrentHoverObject(n){this.currentHoverObject=n,this.requestRenderAll()}drawControls(n){const t=this._activeObject;t&&t.group&&t.group._renderControls(n,{hasControls:!1,borderDashArray:[4,4]}),t&&t._renderControls(n)}getArtboard(){return this._objects[0]}getdesignRect(){return this.designRect}getdesignRectWithZoom(){const n=this.designRect,t=n.width,e=n.height,i=this.viewportTransform;return{x:i[4],y:i[5],width:t*i[0],height:e*i[0]}}loadFromObjects(n,t){const e=this,i=this.renderOnAddRemove;this.renderOnAddRemove=!1,this._objects=[],this.clear(),this.__setupCanvas({},n,i,function(){e.isLoading=!1,e.loadingImage=void 0,e.requestRenderAll(),t&&t()})}__setupCanvas(n,t,e,i){const s=this;t.forEach(function(r,o){s.add(r)}),this.renderOnAddRemove=e,delete n.objects,delete n.backgroundImage,delete n.overlayImage,delete n.background,delete n.overlay,this._setOptions(n),this.renderAll(),i&&i()}insertAt(n,t,e){const i=this._objects;return e?i[n]=t:i.splice(n,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this}_setCursorFromEvent(n,t){if(!t){this.setCursor(this.defaultCursor);return}let e=t.hoverCursor||this.hoverCursor;const i=this._activeObject===this._activeSelection?this._activeObject:null,s=(!i||t.group!==i)&&t.findControl(this.getViewportPoint(n));if(!s)t.subTargetCheck&&this.targets.concat().reverse().map(r=>{e=r.hoverCursor||e}),this.setCursor(e);else{const r=t.controls[s.key];this.setCursor(r.cursorStyleHandler(n,r,t))}n.fabricObjectCorner=s,this.requestRenderAll()}findObjectWithId(n){for(let t=0;t<this._objects.length;t++)if(n===this._objects[t].objectId)return this._objects[t]}checkCanScroll(){const n=this.getZoom(),{width:t,height:e}=this.designRect,{width:i,height:s}=this.canvasSize;let r=!0,o=!0,l=this.scrollPaddingX,h=this.scrollPaddingY,u=-(n*t+this.scrollPaddingX-i),d=-(n*e+this.scrollPaddingY-s);return n*t+2*this.scrollPaddingX<i&&(r=!1),n*e+2*this.scrollPaddingY<s&&(o=!1),{minX:u,maxX:l,minY:d,maxY:h,canScrollX:r,canScrollY:o}}moveCanvasByOffset(n,t){const{viewportTransform:e=[]}=this,i=mi.clone(e),s=i[0],r=i[1],o=i[2],l=i[3];let h=i[4],u=i[5];const d=this.checkCanScroll(),g=d.minX,p=d.maxX,m=d.minY,y=d.maxY,_=d.canScrollX,b=d.canScrollY;_&&(h=Math.max(g,Math.min(h+=n,p))),b&&(u=Math.max(m,Math.min(u+=t,y))),this.setViewportTransform([s,r,o,l,h,u]),Ss.dispatchEvent(Cs.MINIMAP_VIEWPORT_CHANGED,this),this.clipPath&&this.clipPath.needRefresh(),this.renderAll()}},xd={};function df(n,t){return new Promise(e=>{if(xd[n]){e(xd[n]);return}J.loadImage(n,{...t}).then(i=>{xd[n]=i,e(i)}).catch(()=>{e(n)})})}const H6=n=>!!n&&n.toLive!==void 0;function Ov(n,t,e,i){const s=n/e,r=t/i;return Math.max(s,r)}const Y6=["sourceType","sourceChannel","imageViewport","imageAngle","imageScale","imageCanvasScale","preImageScale","originalImageSize","hdImageSize","initialViewSize","initialImageSize","effectId","effectBrightness","brightness","saturation","contrast","sharpen","blur","stockPhotoInfo","aiPhotoInfo","imageVip","resizeFilterType","cutoutKey","skinKey","carToonKey","originInfo","imgStyles","imgStylesKey","imgStylesVip","strokeLineJoin","tint","tempereature","effectFilterId","effectFilterStrength","effectFilterIsPro","effectFilterSize","effectFilterDefalStrength","effectFilterName","effectFilterGroupName","cutoutUrl","skinUrl","cutoutKeyTemplate","preTrimImageViewport"],X6=["cropX","cropY"];class Yr extends Pe{constructor(t,e){super(t,{filters:[],...e}),this.on("mousedblclick",this._onDoubleClick.bind(this)),this.on("moving",this._onMoving.bind(this)),this.on("scaling",this._onScaling.bind(this)),this.on("mousedown",this._onMousedown.bind(this)),this.on("mouseup",this._onMouseup.bind(this))}_onScaling(t){const{transform:e}=t,i=this.getOriginalRect();if(this.isCliping&&t&&t.transform&&i){if(this.scaleX<=this.minScale||this.scaleY<=this.minScale){const s=this.translateToOriginPoint(this.getCenterPoint(),e.originX,e.originY);this.scaleX=this.minScale,this.scaleY=this.minScale,this.setPositionByOrigin(s,e.originX,e.originY)}else this.editingScale=this.scaleX,this.editingScaleX=this.scaleX,this.editingScaleY=this.scaleY;this._showOrHideGridlines(!0)}}_onMoving(){const t=this.getOriginalRect();this.isCliping&&t&&(this._adjustPositionV2(),this._showOrHideGridlines(!0))}_adjustPositionV2(){const t=this.getPreviousCenterPoint(),e=J.rotatePoint(new D(this.left,this.top),t,J.degreesToRadians(-this.angle)),i=e.x,s=e.y;this.clipChild.rotate(-this.imageAngle||0),this.clipChild.setCoords();const r=this.clipChild.getBoundingRect(!0,!0);this.clipChild.rotate(this.editingAngle||0),this.clipChild.setCoords();const o=r.left-(this.getScaledWidth()-r.width),l=r.top-(this.getScaledHeight()-r.height),h=J.capValue(o,i,r.left),u=J.capValue(l,s,r.top);if(h!=i||u!=s){const d=J.rotatePoint(new D(h,u),t,J.degreesToRadians(this.angle));this.set("left",d.x),this.set("top",d.y)}}_showOrHideGridlines(t){var e;(e=this.canvas)==null||e.fire(Wn.FTGRIDLINE_STATUS_CHANGED,{show:t})}_onMouseup(){this._showOrHideGridlines(!1)}_onMousedown(t){const{transform:e}=t,i=this.getOriginalRect(),s=this.getPreviousCenterPoint();if(i&&t&&t.transform){let r=0,o=0;this.clipChild.rotate(-this.imageAngle||0),this.clipChild.setCoords();const l=this.clipChild.getBoundingRect();this.clipChild.rotate(this.editingAngle||0),this.clipChild.setCoords();const h=J.rotatePoint(new D(this.left,this.top),s,J.degreesToRadians(-this.angle)),{width:u}=this,{height:d}=this,g=this.getScaledWidth(),p=this.getScaledHeight(),m=l.left-h.x,y=l.top-h.y;e.corner==="tl"?(r=(g-m)/u,o=(p-y)/d):e.corner==="tr"?(r=(m+l.width)/u,o=(p-y)/d):e.corner==="br"?(r=(m+l.width)/u,o=(y+l.height)/d):e.corner==="bl"&&(r=(g-m)/u,o=(y+l.height)/d),this.minScale=Math.max(r,o)}}getPreviousCenterPoint(){return this.clipChild&&this.clipChild.getCenterPoint()}rotateActiveObjectByStep(t=45){this.rotateByStep(t)}rotateByStep(t=45){const e=this.angle>=315?0:this.angle+t;return this.rotate(e),this}rotate(t){this.clippingParent&&this.clippingParent.isCliping?this.clippingParent.updateClipAngle({clipAngle:t}):super.rotate(t)}updateClipAngle(t){const e=t.clipAngle-(this.editingAngle||0);this.imageAngle=e,this.isCliping&&this._adjustRotatePosition(),this.imageCanvasScale=this._caculateCanvasScale(this.getOriginalRect())}_adjustRotatePosition(){const t=this.clipChild.getCenterPoint(),e=new D(this.left,this.top),i=J.degreesToRadians(this.getClipAngle()-this.angle),s=e.rotate(i,t);this.set("left",s.x),this.set("top",s.y),this.set("angle",this.getClipAngle());const r=this.getScaledWidth(),o=this.getScaledHeight();this.clipChild.rotate(-this.imageAngle||0),this.clipChild.setCoords();const l=this.clipChild.getBoundingRect();this.clipChild.rotate(this.editingAngle||0),this.clipChild.setCoords();const h=J.rotatePoint(new D(this.left,this.top),t,J.degreesToRadians(-this.angle)),u=Math.abs((t.x-h.x)/r),d=Math.abs((t.y-h.y)/o),g=Math.min(u,1-u),p=Math.min(d,1-d),m=l.width/(r*g*2),y=l.height/(o*p*2),_=Math.max(m,y)*this.scaleX,b=this.originX,x=this.originY;this.originX=u,this.originY=d,this._setPositionByChangeOrigin(new D(this.left,this.top),b,x,u,d),_>this.editingScale&&(this.scale(_),this.setCoords()),this.originX=b,this.originY=x,this._setPositionByChangeOrigin(new D(this.left,this.top),u,d,b,x),this.setCoords()}_setPositionByChangeOrigin(t,e,i,s,r){let o=this.translateToGivenOrigin(t,e,i,s,r);if(this.angle){const l=J.degreesToRadians(this.angle);o=o.rotate(l,t)}this.set("left",o.x),this.set("top",o.y)}_caculateCanvasScale(t){if(!this.imageAngle||!this.imageViewport)return 1;let e=this.width,i=this.height;t&&(e=t.width,i=t.height);const s=new pi({width:e,height:i,left:0,top:0,originX:"center",originY:"center"});s.rotate(this.imageAngle||0),s.setCoords();const r=s.getBoundingRect().width,o=s.getBoundingRect().height,l=Math.max(r/e,o/i);return l>1?l:1}_onDoubleClick(){this.getOriginalRect()?this.closeClipBounds(!0):this.showClipBounds()}closeClipBounds(t){var e,i;const s=this.getOriginalRect();if(s&&this.isCliping&&this.imageViewport){this.setControlsVisibility({mt:!0,mb:!0,ml:!0,mr:!0,mtr:!0});const r=this.getPreviousCenterPoint();this.getOriginClipInfo().scaleX;const o=this.getOriginClipInfo().scaleX,l=this.getOriginClipInfo().scaleY;if(t){const u=this.getScaledWidth(),d=this.getScaledHeight(),g=J.rotatePoint(new D(this.left,this.top),r,J.degreesToRadians(-this.angle)),p=(s.x-g.x)/u,m=(s.y-g.y)/d;this.imageViewport.x=p,this.imageViewport.y=m,this.imageViewport.width=this.getClipArea().width/u,this.imageViewport.height=this.getClipArea().height/d,this.imageViewport=function(y,_){const b=y.width*_,x=y.height*_,T=y.width-b,O=y.height-x,P=y.x+.5*T,F=y.y+.5*O;return{x:J.toFixed(P,3),y:J.toFixed(F,3),width:J.toFixed(b,3),height:J.toFixed(x,3)}}(this.imageViewport,this.imageCanvasScale),this.flipX&&(this.imageViewport.x=1-this.imageViewport.width-this.imageViewport.x),this.flipY&&(this.imageViewport.y=1-this.imageViewport.height-this.imageViewport.y),this.group&&(this.group.dirty=!0)}else this.imageViewport=this.previousImageViewport;this.imageAngle&&(this.angle=(this.angle||0)-this.imageAngle),this.scaleX=o,this.scaleY=l;const h=J.rotatePoint(new D(s.x,s.y),r,J.degreesToRadians(this.angle));this.left=h.x,this.top=h.y,this.width=s.width,this.height=s.height,this.clipChild.clipParent=null,(!this.clippingPath||this.clippingPath.isType("Rect"))&&(this.clippingPath=this.clipChild),(e=this.canvas)==null||e.remove(this.clipChild),this.clipChild=null,this.onClipChanged(!1,t),(i=this.canvas)==null||i.fire(Wn.FTIMAGE_CLOSE_CLIP,{object:this})}}showClipBounds(){var t,e;if(!this.isCliping&&this.imageViewport){this.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1}),this.clipChild=new pi({width:this.width,height:this.height,left:this.left,top:this.top,angle:this.angle||0,scaleX:this.scaleX,scaleY:this.scaleY,fill:"#00000000",centeredRotation:!0,excludeFromExport:!0,changeSizeWhenScaleXY:!0,strokeWidth:0}),this.clipChild.clipParent=this,this.clipChild.setControlsVisibility({mtr:!1}),this.editingAngle=this.angle||0;const i=this.calcACoords(),s=this.getCenterPoint();this.editingScale=this.scaleX,this.editingScaleX=this.scaleX,this.editingScaleY=this.scaleY;const r=this.getScaledWidth()/this.imageViewport.width/this.scaleX,o=this.getScaledHeight()/this.imageViewport.height/this.scaleY;this.width=r,this.height=o;const l=this.getScaledWidth(),h=this.getScaledHeight();this.scaleX*=this.imageCanvasScale,this.scaleY*=this.imageCanvasScale;const u=this.getScaledWidth(),d=this.getScaledHeight(),g=this.getOriginalRect();if(!g)return;const p=new D(g.x,g.y);this.flipX&&(this.imageViewport.x=1-this.imageViewport.width-this.imageViewport.x),this.flipY&&(this.imageViewport.y=1-this.imageViewport.height-this.imageViewport.y);let m=p.x-this.imageViewport.x*l,y=p.y-this.imageViewport.y*h;if(this.imageAngle){const T={x:this.imageViewport.x+this.imageViewport.width/2,y:this.imageViewport.y+this.imageViewport.height/2};m-=(u-l)*T.x,y-=(d-h)*T.y}const _=this.angle||0,b=_+(this.imageAngle||0),x=J.rotatePoint(new D(m,y),s,J.degreesToRadians(b));this.left=x.x,this.top=x.y,this.previousImageViewport=Object.assign({},this.imageViewport),this.imageViewport.x=0,this.imageViewport.y=0,this.imageViewport.width=1,this.imageViewport.height=1,this.onClipChanged(!0),this.imageAngle&&(this.angle=b),(t=this.canvas)==null||t.fire(Wn.FTIMAGE_SHOW_CLIP,{object:this,clipCoords:Object.assign({},i,{left:g.x,top:g.y,width:this.getClipArea().width,height:this.getClipArea().height,angle:_,flipX:this.flipX,flipY:this.flipY,centerPoint:s,clipPath:this._clipExtraData()})}),this.rotate(b),this.group||this.setCoords(),(e=this.canvas)==null||e.add(this.clipChild),this.clipChild.on("moving",this.updateClipReact.bind(this)),this.clipChild.on("mouseup",this._onClipMouseUp.bind(this))}}updateClipReact(){var t;if(this.clipChild){const e=this.getOriginalRect();if(!e)return;const i=this.clipChild.calcACoords(),s=this.clipChild.getCenterPoint();(t=this.canvas)==null||t.fire(Wn.FTIMAGE_SHOW_CLIP,{object:this,clipCoords:Object.assign({},i,{left:e.x,top:e.y,width:this.getClipArea().width,height:this.getClipArea().height,angle:this.clipChild.angle,flipX:this.flipX,flipY:this.flipY,centerPoint:s,clipPath:this._clipExtraData()}),isUpdate:!0})}}getOriginClipInfo(){return this.clipChild}getClipAngle(){let t=this.editingAngle;return this.isCliping||(t=this.angle),(this.imageAngle||0)+(t||0)}isPerpendicular(){const t=(this.imageAngle||0)%90;return t<=1||90-t<=1}_onClipMouseUp(){this._showOrHideGridlines(!1)}getClipArea(){const t=this.clipChild;return{width:t?t.getScaledWidth():0,height:t?t.getScaledHeight():0}}_clipExtraData(){return this.clippingPath||void 0}getOriginalRect(){const t=this.clipChild;if(t){const e=t.getCenterPoint(),i=new D(t.left,t.top),s=J.degreesToRadians(-(t.angle||0)),r=i.rotate(s,e);return{x:r.x,y:r.y,width:t.width,height:t.height}}return null}onClipChanged(t,e){this.isCliping=t,this.imageChanged=!0,t?this.clipPath=void 0:this.clippingPath&&this.setClipTo()}setClipTo(){this.clippingPath&&(this.clipPath=this.clippingPath||this.clipChild,this.clipPath&&(this.clipPath.objectCaching=!1,this.clipPath.originX="center",this.clipPath.originY="center",this.clipPath.left=0,this.clipPath.top=0,this.clipPath.angle=0,this._updateClipSize()))}_updateClipSize(){const t=this.clipPath;t&&(t.scaleX=this.width/t.width,t.scaleY=this.height/t.height,t.dirty=!0)}_drawClipPath(t,e){if(!e)return;const i=e.scaleX,s=e.scaleY;e.scaleX*=this.scaleX,e.scaleY*=this.scaleY,e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),e.scaleX=i,e.scaleY=s,this.drawClipPathOnCache(t,e)}_updateState(t){}setElement(t,e={}){this.removeTexture(this.cacheKey),this.removeTexture(`${this.cacheKey}_filtered`),this._element=t,this._originalElement=t,this._setWidthHeight(e),t&&t instanceof HTMLImageElement&&t.classList.add(Pe.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}requestRenderCanvas(){this.dirty=!0,this.group&&(this.group.dirty=!0),this.clipPath&&(this.clipPath.dirty=!0),this.canvas&&this.canvas.requestRenderAll()}_caculateBounds(t){const e=this.width,i=this.height,s=t.naturalWidth||t.width,r=t.naturalHeight||t.height;this.originalImageSize={width:s,height:r},this._caculateViewport(e,i,s,r),this.setCoords()}_caculateViewport(t,e,i,s){const r=Ov(t,e,i,s),o=r*i,l=r*s;this.initialImageSize={width:o,height:l},this.initialViewSize={width:this.width,height:this.height};const h=(o-t)/2,u=(l-e)/2;this.imageViewport={x:h/o,y:u/l,width:t/o,height:e/l}}getImageLoadingImageViewport(t){const e=this.width,i=this.height,s=t.naturalWidth||t.width,r=t.naturalHeight||t.height,o=Ov(e,i,s,r),l=o*s,h=o*r;return{x:(l-e)/2/l,y:(h-i)/2/h,width:e/l,height:i/h}}getDrawImageViewport(){return this.imageViewport}hnadleChangedImage(t){return t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement}isImageReady(){const t=this._originalElement,e=this.getElement(),i=e.naturalWidth||e.width;let s=!1;return t||(s=!0),this.sourceType===aa&&i>0&&!s}applyFilters(t){return this.isImageReady()&&(super.applyFilters(t),this.imageChanged=!0,this.temperatureAndTintChanged=!0,this.filtersChanged=!0),this}applyStyles(t){const e=t.effectId,i=t.effectBrightness,s=t.brightness,r=t.contrast,o=t.saturation,l=t.blur,h=t.tint,u=t.temperature;this.filters=[],l!==void 0&&l!==0&&console.log("blur...."),e!==void 0&&e!==0?console.log("effectId...."):i!==void 0&&i!==0&&console.log("effectBrightness...."),s!==void 0&&s!==0&&console.log("brightness...."),r!==void 0&&r!==0&&console.log("contrast....."),o!==void 0&&o!==0&&console.log("saturation....."),h!==void 0&&h!==0&&console.log("tint....."),u!==void 0&&u!==0&&console.log("temperature......"),console.log("applyFilters"),this.applyFilters(),this.requestRenderCanvas()}setSrc(t,e){const{crossOrigin:i,signal:s}=e;return this.imageUrl=t,this.src=t,delete this.loadError,delete this.loadErrorType,this.imageLoading=!0,this.sourceType=aa,df(t,{crossOrigin:i,signal:s}).then(r=>{this.hnadleChangedImage(r)?(typeof i<"u"&&this.set({crossOrigin:i}),this.imageLoading=!1,this.setElement(r,{width:e.width,height:e.height}),this._caculateBounds(r)):this.showLoadError(()=>{this.requestRenderCanvas()}),this.applyStyles(this),this.requestRenderCanvas()})}setSource(t,e,i,s){let r=s.withoutStep||!1;this.isType("EditorImage")&&this.sourceType===void 0&&(r=!0),this.loadError=null,this.sourceType=e,e===aa&&(this.setSrc(t,Object.assign({},s,{crossOrigin:"anonymous"})).then(()=>{this._fireDataChanged(r)}),this._set("fill",void 0)),this.dirty=!0}_fireDataChanged(t){super._fireDataChanged(t)}_releaseCanvas(t){t instanceof HTMLCanvasElement&&t!==this.getElement()&&(e=>{e.width=1,e.height=1;const i=e.getContext("2d");i&&i.clearRect(0,0,1,1)})(t)}drawOurSelfCanvas(t,e){var i;const s=J.createCanvasElement();let r=t.width,o=t.height;return e&&(r=t.width/e,o=t.height/e),s.width=r,s.height=o,(i=s.getContext("2d"))==null||i.drawImage(t,0,0,r,o),this._releaseCanvas(t),s}_renderTemperatureAndTint(t){if(this.temperatureAndTintChanged){if(this.tintTemperatureCanvas=t,this.tintTemperatureCanvas){this.temperatureAndTintChanged=!1;const e=this.drawOurSelfCanvas(this.tintTemperatureCanvas,this.tintTemperatureCanvas.proportion);return this.myTintTemperatureCanvas=e,e}return t}return this.myTintTemperatureCanvas?this.myTintTemperatureCanvas:t}_renderFill(t){if(this.readyToRender){let e=this.fill;e||(e=GE);const i=this.width,s=this.height;if(this.sourceType===aa&&this.imageViewport&&this.originalImageSize&&this.isImageReady()||this.imageViewport&&this.imageLoading&&this.originalImageSize){let r=this._element;const o=this.imageLoading?r.width:this.originalImageSize.width,l=this.imageLoading?r.height:this.originalImageSize.height;if(r&&r.width>0){const h=this.imageLoading?this.getImageLoadingImageViewport(r):this.getDrawImageViewport();let u=h.x*o,d=h.y*l,g=h.width*o,p=h.height*l;this.resizeFilterType&&this.resizeFilter&&(g=Math.min(g,i*this._filterScalingX),p=Math.min(p,s*this._filterScalingY),u=Math.max(u,u*this._filterScalingX),d=Math.max(d,s*this._filterScalingY));const m=-i/2,y=-s/2,_=i,b=s;r=this._renderTemperatureAndTint(r),t.save(),this.imageAngle&&!this.isCliping&&(t.rotate(J.degreesToRadians(this.imageAngle)),t.scale(this.imageCanvasScale,this.imageCanvasScale)),r&&t.drawImage(r,u,d,g,p,m,y,_,b),t.restore()}else t.fillStyle="transparent",t.fillRect(-i/2,-s/2,this.width,this.height)}else if(this.sourceType===UE){const r=H6(e);t.fillStyle=r?e.toLive(t):e,t.fillRect(-i/2,-s/2,this.width,this.height)}}}_render(t){this.loadError?this.renderLoadErrorIcon(t):(super._render(t),!this.shouldCache()&&this._shouldRenderLoadingMask()&&this._renderLoadingMask(t))}_drawCroppingLines(t){if(!this.isCliping)return;const e=this.clipChild.width,i=this.clipChild.height,s=this.canvas.getZoom()*$t.devicePixelRatio;t.save(),t.lineWidth=1,t.globalAlpha=1,t.strokeStyle="#f6f7fa",t.beginPath(),t.moveTo(-e/2+e/3,-i/2),t.lineTo(-e/2+e/3,i/2),t.moveTo(-e/2+2*e/3,-i/2),t.lineTo(-e/2+2*e/3,i/2),t.moveTo(-e/2,-i/2+i/3),t.lineTo(e/2,-i/2+i/3),t.moveTo(-e/2,-i/2+2*i/3),t.lineTo(e/2,-i/2+2*i/3),t.scale(1/(this.clipChild.scaleX*s),1/(this.clipChild.scaleY*s)),t.stroke(),t.restore()}_shouldRenderLoadingMask(){return this.sourceType===aa&&this.imageLoading}_renderLoadingMask(t){var e;const i=this.width,s=this.height,r=+new Date/2%360*Math.PI/180,o=+new Date/4%360*Math.PI/180,l=this.canvas&&this.canvas.getZoom()||1,h=Math.max(this.scaleX||1,this.scaleY||1),u=12/h/l,d=2/h/l;t.save(),t.fillStyle="rgba(210,210,210,".concat((.2+.4*Math.sin(o/2)).toString(),")"),t.fillRect(-i/2,-s/2,i,s),t.strokeStyle="#3F9EFF",t.lineWidth=d,t.beginPath(),t.arc(0,0,u,r,r+Math.PI),t.stroke(),t.restore(),(e=this.canvas)==null||e.requestRenderAll()}toObject(t=[]){const e=[];return this.filters.forEach(i=>{i&&e.push(i.toObject())}),{...super.toObject([...X6,...Y6,...t]),src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e,...this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{}}}static fromObject({filters:t,resizeFilter:e,src:i,crossOrigin:s,type:r,...o},l={}){return Promise.all([df(i,{...l,crossOrigin:s}),t&&J.enlivenObjects(t,l),e&&J.enlivenObjects([e],l),J.enlivenObjectEnlivables(o,l)]).then(([h,u=[],[d]=[],g={}])=>{const p=new this(h,{...o,src:i,filters:u,resizeFilter:d,...g});return p._caculateBounds(h),p})}}Nt(Yr,"type","EditorImage");Object.assign(Yr.ownDefaults,{strokeWidth:0,readyToRender:!0,sourceType:void 0,loadError:void 0,temperatureAndTintChanged:!0,tintTemperatureCanvas:void 0,myTintTemperatureCanvas:void 0,filtersChanged:!0,imageChanged:!0,isCropping:!1,isCliping:!1,clipChild:void 0,imageCanvasScale:1,clippingPath:void 0});lt.setClass(Yr,"editorimage");lt.setClass(Yr,"editorImage");lt.setClass(Yr,"EditorImage");const Tw=class Ow extends Yr{constructor(t,e){const i=Object.assign({},{lockRotation:!0,hoverCursor:"default",backgroundColor:"#ffffff",fill:"transparent",objectCaching:!1,lockUniScaling:!0},e),s={...t};super(s,i),this._updateState(!1,!0)}_updateState(t,e){this.lockMovementX=!t,this.lockMovementY=!t,this.lockScalingX=!t,this.lockScalingY=!t,this.hasControls=t,this.canSelection=!t,this.selectable=!1}fromObject(t,e){return e&&e(new Ow("",t))}static fromObject({filters:t,resizeFilter:e,src:i,crossOrigin:s,type:r,...o},l={}){return Promise.all([df(i,{...l,crossOrigin:s}),t&&J.enlivenObjects(t,l),e&&J.enlivenObjects([e],l),J.enlivenObjectEnlivables(o,l)]).then(([h,u=[],[d]=[],g={}])=>{const p=new this(h,{...o,src:i,filters:u,resizeFilter:d,...g});return p._caculateBounds(h),p})}};Nt(Tw,"type","EditorBackground");let wg=Tw;lt.setClass(wg);lt.setSVGClass(wg);class W6{constructor(t,e,i){this._objects=[],this._objectsJSON=void 0,this.isReady=!0,this.autoTry=0,this.isLoading=!1,this.pageId||(this.pageId=Cw(10)),this.canvas=t,this.addDefaultBackground(e)}addDefaultBackground(t){if(t&&this._objects.length===0){const e=new wg(t);this.add(e)}}add(t){t._set("canvas",this.canvas),t.setCoords(),t.fire("object:added",{target:t}),t.fire("added"),this._objects.push(t),t._pageId=this.pageId}onSelect(t){const e=this;if(!(!e||!e.canvas)&&this.isReady){const i=function(){e.canvas.isLoading=!1,e.canvas.loadFromObjects(e._objects,function(){e._objects=e.canvas._objects,t&&t(!0)})};this._objectsJSON||i()}}}const N6=99;class U6 extends V6{constructor(t,e,i){super(t,e,i)}initialize(t,e){this.updateCanvasSize(t,e),this.initPage()}initPage(){this._pages=[],this.currentPageId="";const t=new W6(this,this.designRect);this.addPage(t)}addPage(t,e,i,s){this._pages.length>=N6||(i!==void 0?this._pages.splice(i,0,t):this._pages.push(t),this.setPage(s||t.pageId))}setPage(t,e){this.onSelectPage(t,!1,e)}onSelectPage(t,e,i){const s=this;this.currentPageId=t;const r=this.getPageByPageId(t);r&&(this._objects=r._objects,this.discardActiveObject(),e?i&&i():(r.isLoading=!0,r.onSelect(function(o){o?(s.requestRenderAll(),r.isLoading=!1):r.autoTry<3&&(r.autoTry+=1,s.onSelectPage(t,e,i)),i&&i()})))}getPageByPageId(t){const e=this._pages.filter(i=>i.pageId===t);if(e)return e[0];throw"invalid pageId"}}class jh extends qe{_applyTextbox(t,e=0){if(!(t&&t instanceof qe))return;this.sourceTextbox=t;let i=t.text.replace(/\r?\n/gi," ");if(t.text.length>i.length){const s=i.split(" ");let r=s.length;for(;(r-=1)>-1&&!s[r];)s.splice(r,1);i=s.join(" ")}this.curveAmount=Math.max(-1,Math.min(1,e)),this.text=i,this.styles={},this.charSpacing=t.charSpacing,this.fontSize=t.fontSize,this.underline=t.underline,this.linethrough=t.linethrough,this.overline=t.overline,this.stroke=t.stroke,this.strokeWidth=t.strokeWidth,this.shadow=t.shadow,this.outerGlow=t.outerGlow,t.styles,this.styles,this.initDimensions(),this._resetCurvedCharData()}_resetCurvedCharData(){delete this.curveCharData}_getCurvedCharData(){if(this.curveCharData)return this.curveCharData;const t=this.curveAmount||0,e=0,i=this._textLines[e],s=this.width+this._getWidthOfCharSpacing(),r=this.height,o={chars:[],highlights:[],underlines:[],linethroughs:[],overlines:[],bounds:null,attributes:{curved:t!==0,curveAmount:t,lineW:s,lineH:r,minFontSize:0}};if(this.curveCharData=o,!i.length)return o.bounds={minX:0,minY:0,maxX:0,maxY:r,width:0,height:r},o;let l=null,h=0;const u=(m,y,_,b=null)=>{const x=b||this.getCompleteStyleDeclaration(e,m);x.textBackgroundColor?l?l.color===x.textBackgroundColor?l.end=Math.max(0,Math.min(1,(y+_)/s)):(l=null,u(m,y,_,x)):(l={color:x.textBackgroundColor,start:Math.max(0,Math.min(1,y/s)),end:Math.max(0,Math.min(1,(y+_)/s))},o.highlights.push(l)):l&&(l=null)},d=this._getTopOffset()+this.getHeightOfLine(e)/this.lineHeight*(1-this._fontSizeFraction),g={underline:null,linethrough:null,overline:null},p=(m,y,_,b="underline",x=null)=>{const T=x||this.getCompleteStyleDeclaration(e,m);if(T[b]){let O=g[b];const P=h/s,F=1+Math.abs(P);if(O)O.color===T.fill&&O.size===T.fontSize?O.end=Math.max(P,Math.min(F,(y+_)/s)):(O=null,g[b]=O,p(m,y,_,b,T));else switch(O={color:T.fill,size:T.fontSize,top:d+this.offsets[b]*this.getHeightOfChar(e,m),start:Math.max(P,Math.min(F,y/s)),end:Math.max(P,Math.min(F,(y+_)/s))},g[b]=O,b){case"underline":o.underlines.push(O);break;case"linethrough":o.linethroughs.push(O);break;case"overline":o.overlines.push(O);break}}else g[b]&&(g[b]=null)};if(t){const m=Math.PI*2,y=t<0?-1:1,_=Math.PI/180*15,b=Math.min(m,this.text.length*_),x=Math.abs(t)*b,T=s*(m/x),O=T/m+r/4*Math.abs(t),P={x:s/2,y:r/2+O*y};o.attributes.directionFactor=y,o.attributes.activeBeta=x,o.attributes.circleRadius=O,o.attributes.circleCenter=P,o.attributes.circleCircumference=T,o.attributes.arcLength=x/m*T;let F=0;for(let X=0;X<i.length;X++){const R=this.__charBounds[e][X],V=this.getCompleteStyleDeclaration(e,X);o.attributes.minFontSize=o.attributes.minFontSize?Math.min(o.attributes.minFontSize,V.fontSize):V.fontSize,u(X,F,R.kernedWidth,V),p(X,F,R.kernedWidth,"underline",V),p(X,F,R.kernedWidth,"linethrough",V),p(X,F,R.kernedWidth,"overline",V),F+=R.kernedWidth/2;const $=(F-P.x)/P.x,st=(x/2*$-Math.PI/2)*y,ht=P.x+Math.cos(st)*O,ut=P.y+Math.sin(st)*O,ct=Math.atan2(ut-P.y,ht-P.x)+Math.PI/2+(t<0?Math.PI:0),bt=R.kernedWidth,Et=r,dt=Math.sqrt((bt/2)**2+(Et/2)**2);o.chars.push({x:ht,y:ut,rotation:ct,width:bt,height:Et,offsetB:0,offsetD:0,offsetX:0,offsetY:0}),F+=R.kernedWidth/2;for(let _t=0;_t<4;_t++){const gt=Math.atan2(Et/2*(_t<2?-1:1),bt/2*(_t%3?-1:1)),Kt=ct+gt,zt=Math.cos(Kt)*dt+ht,Ut=Math.sin(Kt)*dt+ut;o.bounds?(o.bounds.minX=Math.min(o.bounds.minX,zt),o.bounds.minY=Math.min(o.bounds.minY,Ut),o.bounds.maxX=Math.max(o.bounds.maxX,zt),o.bounds.maxY=Math.max(o.bounds.maxY,Ut)):o.bounds={minX:zt,minY:Ut,maxX:zt,maxY:Ut,width:0,height:0}}}}else{let m=0;for(let y=0;y<i.length;y++){const _=this.__charBounds[e][y],b=this.getCompleteStyleDeclaration(e,y);o.attributes.minFontSize=o.attributes.minFontSize?Math.min(o.attributes.minFontSize,b.fontSize):b.fontSize,u(y,m,_.kernedWidth,b),p(y,m,_.kernedWidth,"underline",b),p(y,m,_.kernedWidth,"linethrough",b),p(y,m,_.kernedWidth,"overline",b),m+=_.kernedWidth/2,o.chars.push({x:m,y:r/2,rotation:0,width:_.kernedWidth,height:r,offsetB:0,offsetD:0,offsetX:0,offsetY:0}),m+=_.kernedWidth/2}o.bounds={minX:0,minY:0,maxX:m,maxY:r,width:0,height:0}}return o.bounds?(o.bounds.width=o.bounds.maxX-o.bounds.minX,o.bounds.height=o.bounds.maxY-o.bounds.minY):o.bounds={minX:0,minY:0,maxX:0,maxY:r,width:0,height:r},o.chars.forEach(m=>{m.offsetX=m.x-o.bounds.minX,m.offsetY=m.y-o.bounds.minY,m.offsetD=Math.sqrt(m.offsetX**2+m.offsetY**2),m.offsetB=Math.atan2(m.offsetY,m.offsetX)}),o}_arcFill(t,e="",i=0,s=0,r=0,o=0,l=!1){if(!t||!e)return;const h=Math.max(0,i),u=Math.max(h,s);if(h===u||r===o)return;const d=Math.PI*2,g=Math.PI/1800;let p=l?o:r,m=l?r:o;for(;p<0;)p+=d;for(;m<0;)m+=d;for(;m<p;)m+=d;const y=Math.abs(m%d-p%d)<g;y&&(p=0,m=d),t.fillStyle=e,t.beginPath(),t.arc(0,0,u,p,m,!1),h?t.arc(0,0,h,m,p,!0):y||t.lineTo(0,0),t.fill()}_renderTextDecoration(t,e){const i=this.canvas?this.canvas.getRetinaScaling():1,s=this._getCurvedCharData(),{bounds:r,underlines:o,linethroughs:l,overlines:h}=s;let u=null;switch(e){case"underline":u=o;break;case"linethrough":u=l;break;case"overline":u=h;break}if(u&&u.length&&r){t.save();const d=t.fillStyle,{curved:g,lineW:p,lineH:m,minFontSize:y}=s.attributes,_=y/15,b=this.angle*(Math.PI/180);if(g){t.save(),t.translate(-r.width/2,-r.height/2);let{circleCenter:x={x:0,y:0},circleRadius:T=0,activeBeta:O=0,directionFactor:P=1}=s.attributes;const F=this.scaleX<0?1:0,X=this.scaleY<0?1:0,R=Math.pow(-1,F+X),V=(x.x-r.minX)*this.scaleX,$=(x.y-r.minY)*this.scaleY,st=Math.sqrt(V**2+$**2),ht=Math.atan2($,V)+b*R,ut=(Math.cos(ht)*st+this.left)*i,ct=(Math.sin(ht)*st+this.top)*i;this.scaleX*i,this.scaleY*i,t.save(),t.transform(1,0,0,1,ut,ct),t.rotate(b);const bt=-(Math.PI/2*P)-O/2,Et=-(Math.PI/2*P)+O/2-bt;u.forEach(dt=>{const _t=P<0?1-dt.start:dt.start,gt=P<0?1-dt.end:dt.end,Kt=Et*_t+bt,zt=Et*gt+bt,Ut=P<0?T+dt.top+_:T-dt.top,ne=Ut-_;this._arcFill(t,dt.color,ne,Ut,Kt,zt,P<0)}),t.restore(),t.restore()}else{t.save(),t.translate(-r.width/2,-r.height/2);let x=this.left*i,T=this.top*i;this.scaleX*i,this.scaleY*i,t.save(),t.transform(1,0,0,1,x,T),t.rotate(b),o.forEach(O=>{t.fillStyle=O.color,t.fillRect(O.start*p,m/2+O.top,(O.end-O.start)*p,_)}),t.restore(),t.restore()}t.restore(),t.fillStyle=d,this._removeShadow(t)}}_renderCharsCurved(t,e,i,s,r,o){if(o)return;const l=this.canvas?this.canvas.getRetinaScaling():1;this.debugCurve&&(e.lineWidth=1/this.scaleX);const h=e.getTransform(),u=this._getCurvedCharData(),{chars:d,bounds:g,attributes:p}=u;if(d&&g){e.save(),e.translate(-g.width/2,-g.height/2);let m=this.angle*(Math.PI/180);for(let y=0;y<d.length;y++){const _=d[y],b=(Math.cos(_.offsetB+m)*_.offsetD*this.scaleX+this.left)*l,x=(Math.sin(_.offsetB+m)*_.offsetD*this.scaleY+this.top)*l;this.scaleX*l,this.scaleY*l,e.save(),e.transform(1,0,0,1,b,x),e.rotate(_.rotation+m),this.debugCurve&&t==="fillText"&&e.strokeRect(-(_.width/2),-(_.height/2),_.width,_.height),this._renderChar(t,e,o,y,i[y],-(_.width/2),r),e.restore()}this.debugCurve&&t==="fillText"&&(e.setTransform(this.scaleX,0,0,this.scaleY,this.left,this.top),e.rotate(m),e.strokeRect(0,0,g.width,g.height)),e.restore()}e.setTransform(h)}_renderChars(t,e,i,s,r,o){var l=this.getHeightOfLine(o),h=this.textAlign.indexOf("justify")!==-1,u,d,g="",p,m=0,y;if(!h&&this.charSpacing===0&&this.isEmptyStyles(o),e.save(),r-=l*this._fontSizeFraction/this.lineHeight,this._renderCharsCurved(t,e,i,s,r,o),this.debugCurve){l=this.height;for(let _=0,b=i.length-1;_<=b;_++)y=!0,g+=i[_],p=this.__charBounds[o][_],m===0?(s+=p.kernedWidth-p.width,m+=p.width):m+=p.kernedWidth,h&&!y&&this._reSpaceAndTab.test(i[_])&&(y=!0),y||(u=u||this.getCompleteStyleDeclaration(o,_),d=this.getCompleteStyleDeclaration(o,_+1),y=this._hasStyleChanged(u,d)),y&&(this._renderChar(t,e,o,_,g,s,r,l),g="",u=d,s+=m,m=0)}e.restore()}}lt.setClass(jh,"editorcurvedtext");lt.setClass(jh,"editorCurvedText");lt.setClass(jh,"EditorCurvedText");class Xr extends Bi{static getDefaults(){return{...super.getDefaults(),objectCaching:!0,locked:!1,isUpperCase:!1}}constructor(t,e){super(t,e),this.generateCurveText(),this.on("scaling",this._onScaling.bind(this))}_onScaling(){const t=this.scaleX,e=Math.abs(t);this.scaleX=1,this.scaleY=1,this.width*=e,this.height*=e,this.set("fontSize",this.fontSize*e)}generateCurveText(){this.curvedText=new jh("",{left:0,top:0,textAlign:"left",fontSize:60,fill:"rgb(0,0,0)",padding:10,debugMode:!1,debugCurve:!1}),this.curvedText.objectCaching=!0,this.curvedText.paintFirst="stroke",this.curvedText.noScaleCache=!1,this.curvedText.strokeWidth=0}enterEditing(t){this.isEditing||!this.editable||this.locked||(this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}initDimensions(){if(this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&!this.hasCurved()&&this._set("width",this.dynamicMinWidth),this.textAlign.includes("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.hasCurvedText())){const t=this.getCurveAmount();this.curvedText._applyTextbox(this,t);const{bounds:e}=this.curvedText._getCurvedCharData();if(e){const i=this.angle*(Math.PI/180),s=(this.width-e.width)/2,r=this.left+s*Math.cos(i),o=this.top+s*Math.sin(i);this.left=r,this.top=o,this.width=e.width,this.height=e.height,this.setCoords()}}}getCurveAmount(){return!this.curved||!this.curved.enabled?0:this.curved.type==="circle"?1:(this.curved.degrees||0)/100}hasCurved(){return this.curved&&this.curved.enabled}hasCurvedText(){return this.curved&&this.curved.enabled&&this.curvedText}_shouldRenderCurvedText(){return this.hasCurvedText()&&!this.isEditing}render(t){if(this.hasCurved()){const e=this.getCurveAmount();this.curvedText._applyTextbox(this,e);const{bounds:i}=this.curvedText._getCurvedCharData();if(i){const s=this.angle*(Math.PI/180),r=(this.width-i.width)/2,o=this.left+r*Math.cos(s),l=this.top+r*Math.sin(s);this.left=o,this.top=l,this.width=i.width,this.height=i.height,this.setCoords()}}this.originalStroke=this.stroke,this.originalShadow=this.shadow,this.originalOuterGlow=this.outerGlow,this.hasCurvedText()&&this.isEditing&&(this.stroke="transparent",this.shadow=null,this.outerGlow=null,this.curvedText.stroke="transparent",this.curvedText.shadow=null,this.curvedText.outerGlow=null),this._renderOuterGlow(t)||super.render(t),this.stroke=this.originalStroke,this.shadow=this.originalShadow,this.outerGlow=this.originalOuterGlow,this.curvedText.stroke=this.originalStroke,this.curvedText.shadow=this.originalShadow,this.curvedText.outerGlow=this.originalOuterGlow}_render(t){if(!this.hasCurved()){super._render(t);return}this._shouldRenderCurvedText()?this.curvedText._render(t):(t.save(),t.globalAlpha=this.opacity/4,this.curvedText._render(t),t.restore(),this.initDimensions(),super._render(t))}_removeOuterGlow(t){this.outerGlow&&(t.shadowColor="",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}_renderOuterGlow(t){if(!this.outerGlow||!this.outerGlow.color||!this.outerGlow.blur||this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||!t.canvas.width||!t.canvas.height)return;if(!this._outerGlowCacheCtx){const d=J.createCanvasElement().getContext("2d");this._outerGlowCacheCtx=d}const e=this._outerGlowCacheCtx,i=e.canvas;i.width!==t.canvas.width||i.height!==t.canvas.height?(i.width=t.canvas.width,i.height=t.canvas.height):(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,i.width,i.height));const s=this.stroke,r=this.shadow,o=this.opacity,l=this.objectCaching,h=this.fill;this.stroke=null,this.shadow=null,this.objectCaching=!1,this.opacity=1,this.fill=this.outerGlow.color,this.curvedText&&this.hasCurvedText()&&!this.isEditing&&(this.curvedText.stroke=null,this.curvedText.shadow=null,this.curvedText.objectCaching=!1,this.curvedText.opacity=1,this.curvedText.fill=this.outerGlow.color),e.save(),e.setTransform(t.getTransform());const u=[1.25,1.5,1.75,2];for(let d=0;d<u.length;d++)this._setOuterGlow(e,u[d]),super.render(e);return this.stroke=s,this.shadow=r,this.objectCaching=l,this.fill=h,this.curvedText&&this.hasCurvedText()&&!this.isEditing&&(this.curvedText.stroke=s,this.curvedText.shadow=r,this.curvedText.objectCaching=l,this.curvedText.fill=h),this._removeOuterGlow(e),super.render(e),e.restore(),this.opacity=o,this.curvedText&&this.hasCurvedText()&&!this.isEditing&&(this.curvedText.opacity=o),t.save(),this._setOpacity(t),t.setTransform(1,0,0,1,0,0),t.imageSmoothingEnabled=!0,t.drawImage(e.canvas,0,0),t.restore(),!0}_setOuterGlow(t,e=1){if(!this.outerGlow)return;const i=this.outerGlow,s=this.canvas,r=this.getCanvasRetinaScaling(),[o,,,l]=(s==null?void 0:s.viewportTransform)||ci,h=o*r,u=l*r,d=i.nonScaling?new D(1,1):this.getObjectScaling(),g=i.blur*$t.browserShadowBlurConstant*(h+u)*(d.x+d.y)/4;t.shadowBlur=g/e,t.shadowColor=i.color,t.shadowOffsetX=0,t.shadowOffsetY=0}_getTransformedDimensions(t={},e=!0){const i={scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth,...t},s=i.strokeWidth,r=i.width,o=i.height,l=i.skewX===0&&i.skewY===0;let h;return l?h=new D(r*i.scaleX,o*i.scaleY):h=J.sizeAfterTransform(r,o,i),e?h:h.scalarAdd(s)}_splitText(){let t=this.text;this.isUpperCase&&(t=this.text.toUpperCase());const e=this._splitTextIntoLines(t);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}_set(t,e){return["isUpperCase"].includes(t)&&(this.dirty=!0,this._forceClearCache=!0),super._set(t,e)}toObject(t=[]){return super.toObject(["curved",...t])}static fromObject(t){return this._fromObject({...t,styles:J.stylesFromArray(t.styles||{},t.text)},{extraParam:"text"})}}Nt(Xr,"type","EditorTextbox");Object.defineProperty(Xr.prototype,"curved",{get(){return this.__curved},set(n){this.__curved=n,n!=null&&n.enabled?this.setControlsVisibility({mr:!1,ml:!1}):this.setControlsVisibility({mr:!0,ml:!0})}});lt.setClass(Xr,"editortextbox");lt.setClass(Xr,"editorTextbox");lt.setClass(Xr,"EditorTextbox");const G6=n=>JSON.parse(JSON.stringify(n));function $6(n,t,e,i){var s=n/e,r=t/i;return Math.max(s,r)}class Yo extends Xr{constructor(t,e){super(t,e),this.scaleFactor=1,this.setClipTo(!0),this.on("rotating",this._onRotating.bind(this)),this.on("mousedown",this._onMousedown.bind(this))}_onMousedown(){this.previousImageViewport=Object.assign({},this.imageViewport),this.previousViewSize={width:this.width,height:this.height};const t=this.clippingPath.getScaledWidth(),e=this.clippingPath.getScaledHeight();this.width>=this.height&&this.width/this.height>=t/e?(this.isRatioW=!0,this.isRatioH=!1):(this.isRatioW=!1,this.isRatioH=!0)}_onRotating(){this.editingAngle=this.angle||0}initDimensions(){var t,e,i,s;const{height:r,width:o}=this;if(!this.initialized)return;this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes("justify")&&this.enlargeSpaces();const{originX:l,originY:h,scaledWidth:u,scaledHeight:d}=this._getOrigin();if(this.height=this.calcTextHeight(),this.clippingPath&&(Math.abs(r-this.height)>=1||Math.abs(o-this.width)>=1)&&this.clippingPath&&this.clipPath&&!this.isChangeWidth){const{scaleX:g,scaleY:p}=this._calcImageScale(l,h,u,d);(t=this.clippingPath)==null||t.set("scaleX",g),(e=this.clippingPath)==null||e.set("scaleY",p),(i=this.clipPath)==null||i.set("scaleX",g),(s=this.clipPath)==null||s.set("scaleY",p),this._updateImageViewportScale(u,d)}}_getOrigin(){const t=this,e=t.getRelativeCenterPoint(),i=J.degreesToRadians(-t.clippingPath.angle),s=new D(t.clippingPath.left,t.clippingPath.top).rotate(i,e),r=t.clippingPath.getScaledWidth(),o=t.clippingPath.getScaledHeight(),l=Math.abs((e.x-s.x)/r),h=Math.abs((e.y-s.y)/o),u=Math.min(l,1-l),d=Math.min(h,1-h);return{originX:u,originY:d,scaledWidth:r,scaledHeight:o}}_getResizeAsImage(){const t=this;return t.scaleX/t.scaleY!==1}_calcImageScale(t,e,i,s){const r=this,o=r.imageAngle||0;r.rotate(-o),r.setCoords();const l=r.getBoundingRect();r.rotate(r.editingAngle||0),r.setCoords();const h=l.width/(i*t*2),u=l.height/(s*e*2);let d,g;if(r._getResizeAsImage()||o!=0){const p=Math.max(h,u);d=p*r.clippingPath.scaleX,g=p*r.clippingPath.scaleY}else r.width>=r.height&&r.width/r.height>=i/s?(d=h*r.clippingPath.scaleX,g=h*r.clippingPath.scaleY):(d=u*r.clippingPath.scaleX,g=u*r.clippingPath.scaleY);return{scaleX:d,scaleY:g}}_updateImageViewportScale(t,e){const i=this;if(!i.imageViewport)return;i.width>=i.height&&i.width/i.height>=t/e?(!i.isRatioW||!i.isMoveW)&&(i.isRatioW=!0,i.isRatioH=!1,i.isMoveH=!1,i.isMoveW=!1,i._caculateBounds(i.clippingPath._element),i.previousImageViewport=Object.assign({},i.imageViewport)):(!i.isRatioH||!i.isMoveH)&&(i.isRatioH=!0,i.isRatioW=!1,i.isMoveH=!1,i.isMoveW=!1,i._caculateBounds(i.clippingPath._element),i.previousImageViewport=Object.assign({},i.imageViewport)),i._updateImagePosition();const s=i.initialImageSize.width/i.initialImageSize.height,r=i.width,o=i.height,l=i.previousImageViewport||i.imageViewport||{x:0,y:0,width:1,height:1},h=i.previousViewSize||{width:i.width,height:i.height},u=1+(i.width-h.width)/h.width,d=l.width*u;if(i.imageViewport.x+d>1){const g=1-i.imageViewport.x,p=o/(r/g/s),m=(l.height-p)/2;i.imageViewport.y=J.capValue(0,l.y+m,1),i.imageViewport.height=J.capValue(0,p,1-i.imageViewport.y),i.imageViewport.width=g}else i.imageViewport.width=d;i._updateImagePosition()}_updateImageViewportPositionScale(){var t,e;const i=this;let s,r;const o=i.getCenterPoint();s=J.rotatePoint(new D(i.clippingPath.left,i.clippingPath.top),o,J.degreesToRadians(-i.clippingPath.angle));const l=s.x,h=s.y;i.rotate(-i.imageAngle||0),i.setCoords();const u=i.getBoundingRect();i.rotate(i.editingAngle||0),i.setCoords();const d=u.left-(i.clippingPath.getScaledWidth()-u.width),g=u.top-(i.clippingPath.getScaledHeight()-u.height),p=J.capValue(d,l,u.left),m=J.capValue(g,h,u.top);r=J.rotatePoint(new D(p,m),o,J.degreesToRadians(i.clippingPath.angle)),i.clippingPath.set("left",r.x),i.clippingPath.set("top",r.y),(t=i.clipPath)==null||t.set("left",r.x),(e=i.clipPath)==null||e.set("top",r.y);const y=i.getCenterPoint(),_=i.getTotalAngle();s=i.getXY();const b=J.rotatePoint(new D(s.x,s.y),y,J.degreesToRadians(-(_||0))),x=i.clippingPath.getScaledWidth(),T=i.clippingPath.getScaledHeight();r=J.rotatePoint(new D(i.clippingPath.left,i.clippingPath.top),y,J.degreesToRadians(-i.clippingPath.angle));const O=(b.x-r.x)/x,P=(b.y-r.y)/T;i.imageViewport&&(i.imageViewport.x=O,i.imageViewport.y=P)}_updateImagePosition(){if(this.clippingPath&&this.clipPath&&this.imageViewport){const t=this.getCenterPoint(),e=this.getTotalAngle(),i=this.getXY(),s=new D(i.x,i.y).rotate(J.degreesToRadians(-(e||0)),t),r=this.clippingPath.getScaledWidth(),o=this.clippingPath.getScaledHeight();let l=s.x-this.imageViewport.x*r,h=s.y-this.imageViewport.y*o;const u=e+(this.imageAngle||0),d=new D(l,h).rotate(J.degreesToRadians(u),t);this.clippingPath.setPositionByOrigin(new D(d.x,d.y),"left","top"),this.clipPath.setPositionByOrigin(new D(d.x,d.y),"left","top"),this.clippingPath.angle=u,this.clipPath.angle=u}}setClipTo(t,e){this.clippingPath&&(this.clipPath=mi.cloneDeep(this.clippingPath),this.clipPath&&(this.clipPath.absolutePositioned=!0,this._updateClipSize(t,e)))}_updateCenterImageViewport(){if(!this.imageViewport)return;const t=this.getScaledWidth(),e=this.getScaledHeight(),i=t/this.imageViewport.width,s=e/this.imageViewport.height,r=(i-this.getScaledWidth())/2/i,o=(s-this.getScaledHeight())/2/s;this.imageViewport.x=r,this.imageViewport.y=o}_updateClipSize(t,e){const i=this.clipPath;if(i&&t){if(this.imageViewport&&!e){const F=this.getRelativeCenterPoint(),X=this.clippingPath.getScaledWidth(),R=this.clippingPath.getScaledHeight(),V=new D(this.left,this.top).rotate(J.degreesToRadians(-(this.angle||0)),F),$={x:V.x,y:V.y,width:this.width,height:this.height},st=new D($.x,$.y),ht=st.x-this.imageViewport.x*X,ut=st.y-this.imageViewport.y*R,ct=(this.angle||0)+(this.imageAngle||0),bt=J.rotatePoint(new D(ht,ut),F,J.degreesToRadians(ct));this.clippingPath.setPositionByOrigin(new D(bt.x,bt.y),"left","top"),this.clippingPath.angle=ct,i.setPositionByOrigin(new D(bt.x,bt.y),"left","top"),i.angle=ct,i.dirty=!0}else{if(this.hasCurved()){const qt=this.getCurveAmount();this.curvedText._applyTextbox(this,qt);const{bounds:oe}=this.curvedText._getCurvedCharData();if(oe){const we=this.angle*(Math.PI/180),G=(this.width-oe.width)/2,pt=this.left+G*Math.cos(we),ot=this.top+G*Math.sin(we);this.left=pt,this.top=ot,this.width=oe.width,this.height=oe.height,this.setCoords()}}const F=this.getCenterPoint(),X=this.getScaledWidth()/this.clippingPath.width||1,R=this.getScaledHeight()/this.clippingPath.height||1,V=Math.max(X,R);i.scale(V),this.clippingPath.scale(V);const $=this.clippingPath.getScaledWidth(),st=this.clippingPath.getScaledHeight(),ht=V*this.clippingPath.width,ut=V*this.clippingPath.height,ct=(ht-this.getScaledWidth())/2/ht,bt=(ut-this.getScaledHeight())/2/ut,Et=this.getScaledWidth(),dt=this.getScaledHeight();this.initialImageSize={width:ht,height:ut},this.initialViewSize={width:this.width,height:this.height},this.imageViewport={x:ct,y:bt,width:Et/ht,height:dt/ut};const _t=J.rotatePoint(new D(this.left,this.top),F,J.degreesToRadians(-(this.angle||0))),gt={x:_t.x,y:_t.y,width:this.width,height:this.height},Kt=new D(gt.x,gt.y),zt=Kt.x-ct*$,Ut=Kt.y-bt*st,ne=(this.angle||0)+(this.imageAngle||0),pe=J.rotatePoint(new D(zt,Ut),F,J.degreesToRadians(ne));i.setPositionByOrigin(new D(pe.x,pe.y),"left","top"),i.angle=ne,i.dirty=!0,this.clippingPath.setPositionByOrigin(new D(pe.x,pe.y),"left","top"),this.clippingPath.angle=ne}this.editingScaleX=this.clippingPath.scaleX,this.editingScaleY=this.clippingPath.scaleY,this.editingAngle=this.angle||0;const s=this.getRelativeCenterPoint(),r=new D(this.clippingPath.left,this.clippingPath.top),o=J.rotatePoint(r,s,J.degreesToRadians(this.getClipAngle()-this.clippingPath.angle));this.clippingPath.set("left",o.x),this.clippingPath.set("top",o.y),this.clippingPath.set("angle",this.getClipAngle());const l=this.clippingPath.getScaledWidth(),h=this.clippingPath.getScaledHeight();this.rotate(-this.imageAngle||0),this.setCoords();const u=this.getBoundingRect();this.rotate(this.editingAngle||0),this.setCoords();const d=J.rotatePoint(new D(this.clippingPath.left,this.clippingPath.top),s,J.degreesToRadians(-this.clippingPath.angle)),g=Math.abs((s.x-d.x)/l),p=Math.abs((s.y-d.y)/h),m=Math.min(g,1-g),y=Math.min(p,1-p),_=u.width/(l*m*2),b=u.height/(h*y*2),x=Math.max(_,b)*this.clippingPath.scaleX,T=Math.max(_,b)*this.clippingPath.scaleY,O=this.originX,P=this.originY;this.originX=g,this.originY=p,this._setPositionByChangeOrigin(new D(this.clippingPath.left,this.clippingPath.top),O,P,g,p),(x>this.editingScaleX||T>this.editingScaleY)&&(this.clippingPath.scaleX=x,this.clippingPath.scaleY=T,this.clippingPath.setCoords(),this.clipPath&&(this.clipPath.scaleX=x,this.clipPath.scaleY=T,this.clipPath.setCoords())),this.originX=O,this.originY=P,this._setPositionByChangeOrigin(new D(this.clippingPath.left,this.clippingPath.top),g,p,O,P),this.clippingPath.setCoords()}}_setShadow(t){this.isCliping||super._setShadow(t)}_renderTextStroke(t){this.isCliping||super._renderTextStroke(t)}drawObject(t,e){const i=this.fill,s=this.stroke,r=this.shadow;e?(this.fill="black",this.stroke="",this.shadow=null,this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this.fill=i,this.stroke=s,this.curvedText.stroke=s,this.shadow=r}_render(t){this.isCliping&&(this.curvedText.stroke=""),super._render(t),this._updateImagePosition(),this._renderClippingText(t)}_renderClippingText(t){if(!this.clippingPath||this.isNotVisible())return;this._cacheClippingPathCanvas||(this._cacheClippingPathCanvas=J.createCanvasElement());const e=this._cacheClippingPathCanvas,i=e.getContext("2d");i.save(),e.width!==t.canvas.width||e.height!==t.canvas.height?(e.width=t.canvas.width,e.height=t.canvas.height):(i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,e.width,e.height));const s=t.getTransform();i.setTransform(s),i.save(),this.stroke="",this.curvedText.stroke="",super._render(i),i.restore(),i.save(),this._drawClipPath(i,this.clipPath),i.restore(),t.save(),t.setTransform(1,0,0,1,0,0),t.drawImage(e,0,0,e.width,e.height),t.restore(),i.restore()}_drawClipPath(t,e){if(!e)return;const i=e.scaleX,s=e.scaleY;(this.scaleX>1||this.scaleY>1)&&(e.scaleX*=this.scaleX,e.scaleY*=this.scaleY),e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),e.scaleX=i,e.scaleY=s,this.drawClipPathOnCache(t,e)}drawClipPathOnCache(t,e){if(t.save(),t.globalCompositeOperation="source-atop",e.absolutePositioned){var i=J.invertTransform(this.calcTransformMatrix());t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}_onDoubleClick(){var t;this.group?(t=this.canvas)==null||t.fire(Wn.FTIMAGE_SHOW_CLIP,{object:this,clipCoords:Object.assign({},this.aCoords,{left:this.left,top:this.top,width:this.getScaledWidth(),height:this.getScaledHeight(),angle:this.angle,clipPath:this._clipExtraData(),centerPoint:this.getCenterPoint()})}):this.isCliping?this.closeClipBounds(!0):this.showClipBounds()}closeClipBounds(t){var e,i,s,r;this.dirty=!0;var o=this.getOriginalRect();if(o&&this.isCliping&&this.imageViewport){this.clipChild?this.clipChild.getCenterPoint():this.getCenterPoint(),!t&&this.clipChild&&(this.clipChild.setOptions(this.clipChildState),this.clipChild.setCoords());var l=this.getPreviousCenterPoint();if(this.getOriginClipInfo().scaleX,t){var h=this.clippingPath.getScaledWidth(),u=this.clippingPath.getScaledHeight(),d=J.degreesToRadians(-this.clippingPath.angle),g=new D(this.clippingPath.left,this.clippingPath.top).rotate(d,l),p=(o.x-g.x)/h,m=(o.y-g.y)/u;this.imageViewport.x=p,this.imageViewport.y=m,this.imageViewport.width=this.getClipArea().width/h,this.imageViewport.height=this.getClipArea().height/u}else this.imageViewport=this.previousImageViewport;this.clipChild.clipParent=null,(e=this.canvas)==null||e.remove(this.clipChild),this.clipChild=null,this.selectable=!0,this.evented=!0,this.hasControls=!0,this.clippingPath.clippingParent=null,this.onClipChanged(!1,t),(i=this.canvas)==null||i.setActiveObject(this),(s=this.canvas)==null||s.remove(this.clippingPath),(r=this.canvas)==null||r.fire(Wn.FTIMAGE_CLOSE_CLIP,{object:this})}}getOriginClipInfo(){return this.clipChild}getOriginalRect(){const t=this.clipChild;if(t){const e=t.getCenterPoint(),i=J.rotatePoint(new D(t.left,t.top),e,J.degreesToRadians(-(t.angle||0)));return{x:i.x,y:i.y,width:t.width,height:t.height}}return null}showClipBounds(){var t,e,i,s;if(this.clipPath&&!this.isCliping&&this.imageViewport){this.clipChild=new pi({width:this.width,height:this.height,left:this.left,top:this.top,angle:this.angle||0,scaleX:this.scaleX,scaleY:this.scaleY,fill:"#00000000",centeredRotation:!0,excludeFromExport:!0,changeSizeWhenScaleXY:!0,hasControls:!1}),this.clipChild.clipParent=this,this.clippingPath.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1}),this.editingAngle=this.angle||0;const r=this.calcACoords(),o=this.getCenterPoint();this.editingScale=this.clippingPath.scaleX,this.editingScaleX=this.clippingPath.scaleX,this.editingScaleY=this.clippingPath.scaleY;const l=this.clippingPath.getScaledWidth(),h=this.clippingPath.getScaledHeight(),u=this.getOriginalRect(),d=new D(u.x,u.y);let g=d.x-this.imageViewport.x*l,p=d.y-this.imageViewport.y*h;const m=this.angle||0,y=m+(this.imageAngle||0),_=J.rotatePoint(new D(g,p),o,J.degreesToRadians(y));this.clippingPath.left=_.x,this.clippingPath.top=_.y,this.clipPath.left=_.x,this.clipPath.top=_.y,this.previousImageViewport=Object.assign({},this.imageViewport),this.imageViewport.x=0,this.imageViewport.y=0,this.imageViewport.width=1,this.imageViewport.height=1,this.onClipChanged(!0),this.imageAngle&&(this.clippingPath.angle=y),(t=this.canvas)==null||t.fire(Wn.FTIMAGE_SHOW_CLIP,{object:this,clipCoords:Object.assign({},r,{left:u.x,top:u.y,width:this.getClipArea().width,height:this.getClipArea().height,angle:m,flipX:this.flipX,flipY:this.flipY,centerPoint:o,clipPath:this._clipExtraData()})}),this.selectable=!1,this.evented=!1,this.hasControls=!1,this.clippingPath.clippingParent=this,(e=this.canvas)==null||e.add(this.clippingPath),(i=this.canvas)==null||i.add(this.clipChild),(s=this.canvas)==null||s.setActiveObject(this.clippingPath),this.clippingPath.on("moving",this._onClippingPathMoving.bind(this)),this.clippingPath.on("mousedown",this._onClippingPathMousedown.bind(this)),this.clippingPath.on("scaling",this._onClippingPathScaling.bind(this))}}onClipChanged(t,e){this.isCliping=t,t?this.clipPath=void 0:this.clippingPath&&this.setClipTo()}getClipArea(){const t=this.clipChild;return{width:t?t.getScaledWidth():0,height:t?t.getScaledHeight():0}}_clipExtraData(){return this||void 0}_onClippingPathMoving(){this.dirty=!0;const t=this.getOriginalRect();this.isCliping&&t&&this._adjustPositionV2()}_adjustPositionV2(){const t=this.getPreviousCenterPoint(),e=J.rotatePoint(new D(this.clippingPath.left,this.clippingPath.top),t,J.degreesToRadians(-this.clippingPath.angle)),i=e.x,s=e.y;this.clipChild.rotate(-this.imageAngle||0),this.clipChild.setCoords();const r=this.clipChild.getBoundingRect();this.clipChild.rotate(this.editingAngle||0),this.clipChild.setCoords();const o=r.left-(this.clippingPath.getScaledWidth()-r.width),l=r.top-(this.clippingPath.getScaledHeight()-r.height),h=J.capValue(o,i,r.left),u=J.capValue(l,s,r.top);if(h!=i||u!=s){const d=J.rotatePoint(new D(h,u),t,J.degreesToRadians(this.clippingPath.angle));this.clippingPath.set("left",d.x),this.clippingPath.set("top",d.y);const g=this.clippingPath.getScaledWidth(),p=this.clippingPath.getScaledHeight();this.width>=this.height&&this.width/this.height>=g/p?(this.isMoveW=!0,this.isMoveH=!1):(this.isMoveW=!1,this.isMoveH=!0)}}getPreviousCenterPoint(){return this.clipChild&&this.clipChild.getCenterPoint()}_onClippingPathScaling(t){const{transform:e}=t,i=this.getOriginalRect();if(this.isCliping&&t&&t.transform&&i){if(this.clippingPath.scaleX<=this.minScale||this.clippingPath.scaleY<=this.minScale){const o=this.clippingPath.translateToOriginPoint(this.clippingPath.getCenterPoint(),e.originX,e.originY);this.clippingPath.scaleX=this.minScale,this.clippingPath.scaleY=this.minScale,this.clippingPath.setPositionByOrigin(o,e.originX,e.originY)}else this.editingScale=this.clippingPath.scaleX,this.editingScaleX=this.clippingPath.scaleX,this.editingScaleY=this.clippingPath.scaleY;const s=this.clippingPath.getScaledWidth(),r=this.clippingPath.getScaledHeight();this.width>=this.height&&this.width/this.height>=s/r?(this.isMoveW=!0,this.isMoveH=!1):(this.isMoveW=!1,this.isMoveH=!0)}}_onClippingPathMousedown(t){var e=t.transform,i=e&&e.corner,s=this.getOriginalRect(),r=this.getPreviousCenterPoint();if(s&&t&&t.transform){this.clipChild.rotate(-this.imageAngle||0),this.clipChild.setCoords();var o=this.clipChild.getBoundingRect();this.clipChild.rotate(this.editingAngle||0),this.clipChild.setCoords();var l=J.rotatePoint(new D(this.clippingPath.left,this.clippingPath.top),r,J.degreesToRadians(-this.clippingPath.angle)),h=0,u=0,d=this.clippingPath.width,g=this.clippingPath.height,p=this.clippingPath.getScaledWidth(),m=this.clippingPath.getScaledHeight(),y=o.left-l.x,_=o.top-l.y;i==="tl"?(h=(p-y)/d,u=(m-_)/g):i==="tr"?(h=(y+o.width)/d,u=(m-_)/g):i==="br"?(h=(y+o.width)/d,u=(_+o.height)/g):i==="bl"?(h=(p-y)/d,u=(_+o.height)/g):i==="mt"?(h=1/0,u=(m-_)/g):i==="mr"?(h=(y+o.width)/d,u=1/0):i==="mb"?(h=1/0,u=(_+o.height)/g):i==="ml"&&(h=(p-y)/d,u=1/0),this.minScale=Math.max(h,u),this.minScaleX=h,this.minScaleY=u}}updateClipAngle(t){const e=t.clipAngle-(this.editingAngle||0);this.imageAngle=e,this.isCliping&&this._adjustRotatePosition()}_adjustRotatePosition(){var t=this.clipChild.getRelativeCenterPoint(),e=new D(this.clippingPath.left,this.clippingPath.top),i=J.rotatePoint(e,t,J.degreesToRadians(this.getClipAngle()-this.clippingPath.angle));this.clippingPath.set("left",i.x),this.clippingPath.set("top",i.y),this.clippingPath.set("angle",this.getClipAngle());const s=this.clippingPath.getScaledWidth(),r=this.clippingPath.getScaledHeight();this.clipChild.rotate(-this.imageAngle||0),this.clipChild.setCoords();var o=this.clipChild.getBoundingRect();this.clipChild.rotate(this.editingAngle||0),this.clipChild.setCoords();var l=J.rotatePoint(new D(this.clippingPath.left,this.clippingPath.top),t,J.degreesToRadians(-this.clippingPath.angle)),h=Math.abs((t.x-l.x)/s),u=Math.abs((t.y-l.y)/r),d=Math.min(h,1-h),g=Math.min(u,1-u),p=o.width/(s*d*2),m=o.height/(r*g*2);Math.max(p,m)*this.clippingPath.scaleX;var y=Math.max(p,m)*this.clippingPath.scaleX,_=Math.max(p,m)*this.clippingPath.scaleY,b=this.originX,x=this.originY;this.originX=h,this.originY=u,this._setPositionByChangeOrigin(new D(this.clippingPath.left,this.clippingPath.top),b,x,h,u),(y>this.editingScaleX||_>this.editingScaleY)&&(this.clippingPath.scaleX=y,this.clippingPath.scaleY=_,this.clippingPath.setCoords(),this.clipPath&&(this.clipPath.scaleX=y,this.clipPath.scaleY=_,this.clipPath.setCoords())),this.originX=b,this.originY=x,this._setPositionByChangeOrigin(new D(this.clippingPath.left,this.clippingPath.top),h,u,b,x),this.clippingPath.setCoords()}_setPositionByChangeOrigin(t,e,i,s,r){var o,l,h=this.clippingPath.translateToGivenOrigin(t,e,i,s,r);this.clippingPath.angle&&(h=J.rotatePoint(h,t,J.degreesToRadians(this.clippingPath.angle))),this.clippingPath.set("left",h.x),this.clippingPath.set("top",h.y),(o=this.clipPath)==null||o.set("left",h.x),(l=this.clipPath)==null||l.set("top",h.y)}getClipAngle(){let t=this.editingAngle;return this.isCliping||(t=this.angle),(this.imageAngle||0)+(t||0)}updateClipReact(){var t;if(this.clipChild){const e=this.getOriginalRect();if(!e)return;const i=this.clipChild.calcACoords(),s=this.clipChild.getCenterPoint();(t=this.canvas)==null||t.fire(Wn.FTIMAGE_SHOW_CLIP,{object:this,clipCoords:Object.assign({},i,{left:e.x,top:e.y,width:this.getClipArea().width,height:this.getClipArea().height,angle:this.clipChild.angle,flipX:this.flipX,flipY:this.flipY,centerPoint:s,clipPath:this._clipExtraData()}),isUpdate:!0})}}_caculateCanvasScale(t){if(!this.imageAngle||!this.imageViewport)return 1;let e=this.clippingPath.width,i=this.clippingPath.height;t&&(e=t.width,i=t.height);const s=new pi({width:e,height:i,left:0,top:0,originX:"center",originY:"center"});s.rotate(this.imageAngle),s.setCoords();const r=s.getBoundingRect().width,o=s.getBoundingRect().height,l=Math.max(r/e,o/i);return l>1?l:1}_caculateBounds(t){const e=this.getScaledWidth(),i=this.getScaledHeight(),s=t.naturalWidth||t.width,r=t.naturalHeight||t.height;this._caculateViewport1(e,i,s,r),this.setCoords()}_caculateViewport(t,e,i,s){const r=$6(t,e,i,s),o=r*i,l=r*s;this.initialImageSize={width:o,height:l},this.initialViewSize={width:this.width,height:this.height};const h=(o-t)/2,u=(l-e)/2;this.imageViewport={x:h/o,y:u/l,width:t/o,height:e/l}}_caculateViewport1(t,e,i,s){const r=i,o=s,l=0,h=0,u=Math.max(this.clippingPath.scaleX,this.clippingPath.scaleY),d=u*i,g=u*s;this.initialImageSize={width:d,height:g},this.initialViewSize={width:this.width,height:this.height};const p=u*r,m=u*o,y=(p-t)/2+l*u,_=(m-e)/2+h*u;this.imageViewport={x:y/d,y:_/g,width:t/d,height:e/g}}toObject(t=[]){return super.toObject(["minWidth","splitByGrapheme","clippingPath","imageViewport","imageAngle","previousImageViewport","initialImageSize",...t])}static _fromObject({type:t,...e},{extraParam:i,...s}={}){const r=e.curved;return delete e.curved,J.enlivenObjectEnlivables(G6(e),s).then(o=>{const l={...s,...o};if(l.curved=r,i){const{[i]:h,...u}=l,d={...u.originalImageObject};return Object.keys(d).length===0?new this(h,u):J.enlivenObjects([u.originalImageObject]).then(g=>(u.clippingPath=g[0],u.clippingPath.objectCaching=!1,new this(h,u)))}else{const h={...l.originalImageObject};return Object.keys(h).length===0?new this(l):J.enlivenObjects([l.originalImageObject]).then(u=>(l.clippingPath=u[0],l.clippingPath.objectCaching=!1,new this(l)))}})}static fromObject(t){return this._fromObject({...t,styles:J.stylesFromArray(t.styles||{},t.text)},{extraParam:"text"})}}Nt(Yo,"type","EditorClippingText");Object.defineProperty(Yo.prototype,"tileImageOption",{get(){return this.__tileImageOption},set(n){var t,e;this.__tileImageOption=n,this.clippingPath&&(this.clippingPath.set("isClippingText",this.tileImageOption.enabled),this.clippingPath.set("tileImageOption",this.tileImageOption),(t=this.clipPath)==null||t.set("isClippingText",this.tileImageOption.enabled),(e=this.clipPath)==null||e.set("tileImageOption",this.tileImageOption))}});Object.defineProperty(Yo.prototype,"flipX",{get(){return this.__flipX},set(n){this.__flipX=n,this.clippingPath&&this.clippingPath.set("flipX",this.flipX),this.clipPath&&this.clipPath.set("flipX",this.flipX)}});lt.setClass(Yo,"editorclippingtext");lt.setClass(Yo,"editorClippingText");lt.setClass(Yo,"EditorClippingText");function Pw(n){const t=St(n);return[t,e=>{e instanceof Function?t.value=e(t.value):t.value=e}]}const[K6,q6]=Pw(),Dn=()=>({canvas:K6,setCanvas:q6});function Z6(){const{setCanvas:n}=Dn(),t={preserveObjectStacking:!0,fireRightClick:!0,stopContextMenu:!0,perPixelTargetFind:!0,targetFindTolerance:10,controlsAboveOverlay:!0,allowTouchScrolling:!0},e=document.createElement("canvas"),i=hh(new U6(e,t,{isMainCanvas:!0}));return n(i),i}const Wr=xM("editorStore",{state:()=>({activeSidebarItem:{sidebarItemId:"",sidebarItemTitle:"",sidebarItemType:"",previousSidebarItemId:"",previousSidebarItemTitle:"",previousSidebarItemType:"",selectedCurrent:0},isActiveSidebar:!0,isActiveSidebarMobile:!0,isToggleSidebar:!0,isEffects:!1,isFontFamily:!1,wrapperEl:St(),layout:"grid"}),getters:{getActiveSidebarItem:n=>n.activeSidebarItem,getIsActiveSidebar:n=>n.isActiveSidebar,getIsActiveSidebarMobile:n=>n.isActiveSidebarMobile,getIsToggleSidebar:n=>n.isToggleSidebar,getIsEffects:n=>n.isEffects,getIsFontFamily:n=>n.isFontFamily,getWrapperEl:n=>n.wrapperEl,getLayout:n=>n.layout},actions:{setActiveSidebarItem(n){this.activeSidebarItem=n},setIsActiveSidebar(n){this.isActiveSidebar=n},setIsActiveSidebarMobile(n){this.isActiveSidebarMobile=n},setIsToggleSidebar(n){this.isToggleSidebar=n},setIsEffects(n){this.isEffects=n},setIsFontFamily(n){this.isFontFamily=n},setWrapperEl(n){this.wrapperEl=n.value},setLayout(n){this.layout=n}}}),J6={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Q6(n,t){return U(),Z("svg",J6,t[0]||(t[0]=[z("path",{d:"M11.875 10.208a.625.625 0 1 0 1.25 0v-3.75h3.75a.625.625 0 1 0 0-1.25h-3.75v-3.75a.625.625 0 1 0-1.25 0v3.75h-3.75a.625.625 0 0 0 0 1.25h3.75v3.75Z",fill:"currentColor"},null,-1),z("path",{d:"M6.015 3.333H5c-.92 0-1.667.746-1.667 1.667v10c0 .92.746 1.666 1.667 1.666h8.333c.92 0 1.667-.746 1.667-1.666v-2.151h-1.25v2.15c0 .23-.187.417-.417.417H5A.417.417 0 0 1 4.583 15V5c0-.23.187-.417.417-.417h1.015v-1.25Z",fill:"currentColor"},null,-1)]))}const tk={render:Q6},ek={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function ik(n,t){return U(),Z("svg",ek,t[0]||(t[0]=[z("path",{fill:"currentColor","fill-rule":"evenodd",d:"M3.75 5.25h16.5a.75.75 0 1 1 0 1.5H3.75a.75.75 0 0 1 0-1.5zm4 4h8.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5zm-4 4h16.5a.75.75 0 1 1 0 1.5H3.75a.75.75 0 1 1 0-1.5zm4 4h8.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5z"},null,-1)]))}const nk={render:ik},sk={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"};function rk(n,t){return U(),Z("svg",sk,t[0]||(t[0]=[z("defs",null,[z("path",{id:"_1025355287__a",d:"M3.8 17.3h16.6c.9 0 .9 1.6-.1 1.5H3.8c-.8 0-.9-1.4 0-1.5zm0-8h16.6c.9 0 .9 1.6-.1 1.5H3.8c-.8 0-.9-1.4 0-1.5zm0 4h16.6c.9 0 .9 1.6-.1 1.5H3.8c-.8 0-.9-1.4 0-1.5zm0-8c5.5 0 11-.1 16.5 0 .9 0 .9 1.5-.1 1.5-5.5-.1-11 0-16.5-.1-.9 0-.9-1.4-.1-1.4Z"})],-1),z("use",{fill:"currentColor","xlink:href":"#_1025355287__a","fill-rule":"evenodd"},null,-1)]))}const ok={render:rk},ak={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"};function lk(n,t){return U(),Z("svg",ak,t[0]||(t[0]=[z("defs",null,[z("path",{id:"_310417673__a",d:"M3.75 5.25h16.5a.75.75 0 1 1 0 1.5H3.75a.75.75 0 0 1 0-1.5zm0 4h8.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5zm0 4h16.5a.75.75 0 1 1 0 1.5H3.75a.75.75 0 1 1 0-1.5zm0 4h8.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5z"})],-1),z("use",{fill:"currentColor","xlink:href":"#_310417673__a","fill-rule":"evenodd"},null,-1)]))}const ck={render:lk},hk={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function uk(n,t){return U(),Z("svg",hk,t[0]||(t[0]=[z("path",{fill:"currentColor","fill-rule":"evenodd",d:"M20.25 5.25a.75.75 0 1 1 0 1.5H3.75a.75.75 0 0 1 0-1.5h16.5zm0 4a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zm0 4a.75.75 0 1 1 0 1.5H3.75a.75.75 0 1 1 0-1.5h16.5zm0 4a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5z"},null,-1)]))}const dk={render:uk},fk={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function gk(n,t){return U(),Z("svg",fk,t[0]||(t[0]=[z("path",{d:"M4 10.1v2.83L12.93 4H10.1L4 10.1zm0-2.829L7.272 4H4V7.27zm0 8.487v2.828L18.586 4h-2.828L4 15.759zM20 13.9v-2.83L11.07 20h2.83l6.1-6.1zm0 2.828L16.729 20H20v-3.272zm0-8.486V5.414L5.414 20h2.828L20 8.243zM2 22V2h20v20H2z","fill-rule":"evenodd"},null,-1)]))}const pk={render:gk},mk={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function vk(n,t){return U(),Z("svg",mk,t[0]||(t[0]=[z("path",{fill:"currentColor","fill-rule":"evenodd",d:"M7.08 4.72h4.44c2.03 0 3.5.3 4.41.87.92.57 1.37 1.49 1.37 2.75 0 .85-.2 1.55-.6 2.1-.4.54-.93.87-1.6.98v.1c.91.2 1.56.58 1.96 1.13.4.56.6 1.3.6 2.2 0 1.31-.47 2.33-1.4 3.06A6.1 6.1 0 0 1 12.41 19H7.08V4.72zm3.03 5.66h1.75c.82 0 1.42-.13 1.79-.38.36-.26.55-.68.55-1.26 0-.55-.2-.94-.6-1.18a3.86 3.86 0 0 0-1.9-.36h-1.6v3.18zm0 2.4v3.72h1.97c.83 0 1.45-.16 1.84-.48.4-.32.6-.8.6-1.46 0-1.19-.85-1.78-2.54-1.78h-1.87z"},null,-1)]))}const yk={render:vk},_k={xmlns:"http://www.w3.org/2000/svg",version:"1.2",viewBox:"0 0 25 24",width:"25",height:"24",class:"brightness svg","aria-hidden":"true",focusable:"false"};function wk(n,t){return U(),Z("svg",_k,t[0]||(t[0]=[Eo('<path class="a icon-active" d="m15.5 12.6h-6.4l2.3-3.3h1.9z"></path><path class="b icon-active__stroke" d="m9.3 12.4c0-1.7 1.4-3.1 3.1-3.1 1.7 0 3 1.4 3 3.1 0 1.6-1.3 3-3 3-1.7 0-3.1-1.4-3.1-3z"></path><path class="b icon-active__stroke" d="m20.9 3.5l-3.9 3.8"></path><path class="b icon-active__stroke" d="m24.4 12h-5.4"></path><path class="b icon-active__stroke" d="m20.9 20.5l-3.9-3.8"></path><path class="b icon-active__stroke" d="m12.4 24v-5.4"></path><path class="b icon-active__stroke" d="m3.9 20.5l3.8-3.8"></path><path class="b icon-active__stroke" d="m0.4 12h5.4"></path><path class="b icon-active__stroke" d="m3.9 3.5l3.8 3.8"></path><path class="b icon-active__stroke" d="m12.4 0v5.4"></path><path class="c icon-active" d="m9.3 12.2c0 0 0.3-2.4 2.5-2.9 2.3-0.6 0.4 2.4 0.4 2.4"></path><path class="a icon-active" d="m15.5 12.6c0 0 0.1-3-2.7-3.3z"></path>',12)]))}const bk={render:wk},xk={viewBox:"64 64 896 896",focusable:"false","data-icon":"clear",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"};function Ck(n,t){return U(),Z("svg",xk,[z("defs",null,[(U(),vi(Ka("style")))]),t[0]||(t[0]=z("path",{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"},null,-1))])}const Sk={render:Ck},Tk={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function Ok(n,t){return U(),Z("svg",Tk,t[0]||(t[0]=[z("path",{fill:"currentColor",d:"M15 5.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h2.5v-1.5H5a.5.5 0 0 1-.5-.5V5c0-.28.22-.5.5-.5h8c.28 0 .5.22.5.5v.5H15zm-4 3a.5.5 0 0 0-.5.5v10c0 .28.22.5.5.5h8a.5.5 0 0 0 .5-.5V9a.5.5 0 0 0-.5-.5h-8zM11 7h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V9c0-1.1.9-2 2-2z"},null,-1)]))}const Pk={render:Ok},Mk={xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",class:"injected-svg","data-src":"https://static.create.vista.com/images/textEffects/curved.svg","xmlns:xlink":"http://www.w3.org/1999/xlink"};function Ek(n,t){return U(),Z("svg",Mk,t[0]||(t[0]=[z("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.04 5.713A1.2 1.2 0 0118.136 5h3.137a1.2 1.2 0 011.096.713l7.102 15.979a1.2 1.2 0 01-1.096 1.687h-1.843a1.2 1.2 0 01-1.097-.713l-1.74-3.913h-7.982l-1.739 3.913a1.2 1.2 0 01-1.097.713h-1.843a1.2 1.2 0 01-1.096-1.687l7.102-15.98zm.007 10.04h5.315l-2.657-5.98-2.658 5.98z",fill:"#000"},null,-1),z("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.295 29.75c1.513-1.144 3.558-2.124 6.617-2.124 3.344 0 5.475 1.17 7.026 2.445a2.836 2.836 0 101.376-1.458c-1.778-1.487-4.362-2.987-8.402-2.987-3.9 0-6.444 1.4-8.215 2.834a2.836 2.836 0 101.598 1.289z",fill:"#000"},null,-1)]))}const kk={render:Ek},Ak={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function Dk(n,t){return U(),Z("svg",Ak,t[0]||(t[0]=[z("path",{fill:"currentColor",d:"M8 5a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3h4.25a.75.75 0 1 1 0 1.5H19V18a3 3 0 0 1-3 3H8a3 3 0 0 1-3-3V6.5H3.75a.75.75 0 0 1 0-1.5H8zM6.5 6.5V18c0 .83.67 1.5 1.5 1.5h8c.83 0 1.5-.67 1.5-1.5V6.5h-11zm3-1.5h5c0-.83-.67-1.5-1.5-1.5h-2c-.83 0-1.5.67-1.5 1.5zm-.25 4h1.5v8h-1.5V9zm4 0h1.5v8h-1.5V9z"},null,-1)]))}const jk={render:Dk},Ik={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Rk(n,t){return U(),Z("svg",Ik,t[0]||(t[0]=[z("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5 3h8a2 2 0 0 1 2 2v.5h-1.5V5a.5.5 0 0 0-.5-.5H5a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h2.5V17H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Zm6 5.5a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V9a.5.5 0 0 0-.5-.5h-8ZM19 7h-8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2Z",fill:"currentColor"},null,-1),z("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15 11a.75.75 0 0 0-.75.75v1.5h-1.5a.75.75 0 0 0 0 1.5h1.5v1.5a.75.75 0 0 0 1.5 0v-1.5h1.5a.75.75 0 0 0 0-1.5h-1.5v-1.5A.75.75 0 0 0 15 11Z",fill:"currentColor"},null,-1)]))}const Lk={render:Rk},Fk={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function Bk(n,t){return U(),Z("svg",Fk,t[0]||(t[0]=[z("path",{fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linejoin":"round",d:"m6.5 4.25.75-.75a2.121 2.121 0 0 1 3 3L6.5 10.25 2.75 6.5a2.121 2.121 0 0 1 3-3l.75.75zm7 6 4-7.5 4 7.5h-8zm-10.75 3.5h7.5v7.5h-7.5v-7.5zm14.75-.25a4 4 0 1 0 0 8 4 4 0 0 0 0-8z"},null,-1)]))}const zk={render:Bk},Vk={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function Hk(n,t){return U(),Z("svg",Vk,t[0]||(t[0]=[z("title",null,"eyedropper",-1),z("path",{d:"M19.35,11.72L17.22,13.85L15.81,12.43L8.1,20.14L3.5,22L2,20.5L3.86,15.9L11.57,8.19L10.15,6.78L12.28,4.65L19.35,11.72M16.76,3C17.93,1.83 19.83,1.83 21,3C22.17,4.17 22.17,6.07 21,7.24L19.08,9.16L14.84,4.92L16.76,3M5.56,17.03L4.5,19.5L6.97,18.44L14.4,11L13,9.6L5.56,17.03Z"},null,-1)]))}const Yk={render:Hk},Xk={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function Wk(n,t){return U(),Z("svg",Xk,t[0]||(t[0]=[z("path",{fill:"currentColor",d:"M5.5 4h4c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-4A1.5 1.5 0 0 1 4 9.5v-4C4 4.67 4.67 4 5.5 4zm9 0h4c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-4A1.5 1.5 0 0 1 13 9.5v-4c0-.83.67-1.5 1.5-1.5zm0 9h4c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-4a1.5 1.5 0 0 1-1.5-1.5v-4c0-.83.67-1.5 1.5-1.5zm-9 0h4c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-4A1.5 1.5 0 0 1 4 18.5v-4c0-.83.67-1.5 1.5-1.5zm0-7.5v4h4v-4h-4zm9 0v4h4v-4h-4zm0 9v4h4v-4h-4zm-9 0v4h4v-4h-4z"},null,-1)]))}const Nk={render:Wk},Uk={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function Gk(n,t){return U(),Z("svg",Uk,t[0]||(t[0]=[z("path",{fill:"currentColor",d:"M20 17.05A2.5 2.5 0 1 1 17.05 20H6.95A2.5 2.5 0 1 1 4 17.05V6.95A2.5 2.5 0 1 1 6.95 4h10.1A2.5 2.5 0 1 1 20 6.95v10.1zm-1.5.16V6.79a2.5 2.5 0 0 1-1.3-1.29H6.8a2.5 2.5 0 0 1-1.3 1.3v10.4a2.5 2.5 0 0 1 1.3 1.3h10.4a2.5 2.5 0 0 1 1.3-1.3zM4.5 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm15-15a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9-6.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7zm0-1.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm4.75-2.5h1.5v5c0 .97-.78 1.75-1.75 1.75h-5v-1.5h5c.14 0 .25-.11.25-.25v-5z"},null,-1)]))}const $k={render:Gk},Kk={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function qk(n,t){return U(),Z("svg",Kk,t[0]||(t[0]=[z("path",{d:"m2.325 10.665 1.67 1.99a8.75 8.75 0 1 1 5.543 7.255.75.75 0 1 1 .54-1.399 7.25 7.25 0 1 0-4.434-5.084l2.668-2.238a.75.75 0 0 1 .964 1.149l-3.064 2.571a1.75 1.75 0 0 1-2.465-.216L1.175 11.63a.75.75 0 0 1 1.15-.964Z",fill:"currentColor"},null,-1),z("path",{d:"M13.45 7.75a.75.75 0 0 0-1.5 0v5c0 .285.16.545.415.672l3 1.5a.75.75 0 1 0 .67-1.342l-2.585-1.293V7.75Z",fill:"currentColor"},null,-1)]))}const Zk={render:qk},Jk={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function Qk(n,t){return U(),Z("svg",Jk,t[0]||(t[0]=[z("path",{fill:"currentColor","fill-rule":"evenodd",d:"m14.73 6.5-3.67 11H14l-.3 1.5H6l.3-1.5h2.81l3.68-11H10l.3-1.5H18l-.3 1.5h-2.97z"},null,-1)]))}const tA={render:Qk},eA={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function iA(n,t){return U(),Z("svg",eA,t[0]||(t[0]=[z("path",{d:"M16 18.7c-.2 0-.4 0-.6-.2L1.7 11a1.1 1.1 0 010-2l13.7-7.6a1.1 1.1 0 011.2 0L30.3 9a1.1 1.1 0 010 2l-13.7 7.6-.6.2zM4.6 9.9L16 16.2 27.4 10 16 3.6 4.6 9.9z",fill:"currentColor"},null,-1),z("path",{d:"M16 24.8c-.2 0-.4 0-.6-.2L1.7 17a1.1 1.1 0 010-2l5.5-3a1.1 1.1 0 111.1 2l-3.7 2L16 22.3 27.4 16l-3.7-2a1.1 1.1 0 111-2l5.6 3a1.1 1.1 0 010 2l-13.7 7.6-.6.2z",fill:"currentColor"},null,-1),z("path",{d:"M16 30.9c-.2 0-.4 0-.6-.2L1.7 23.1a1.1 1.1 0 010-2l5.5-3a1.1 1.1 0 111.1 2l-3.7 2L16 28.4l11.4-6.3-3.7-2a1.1 1.1 0 111-2l5.6 3a1.1 1.1 0 010 2l-13.7 7.6-.6.2z",fill:"currentColor"},null,-1)]))}const nA={render:iA},sA={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function rA(n,t){return U(),Z("svg",sA,t[0]||(t[0]=[z("path",{d:"M7.349 15.508c0 1.263.43 2.249 1.292 2.957.861.708 2.01 1.063 3.445 1.063 1.436 0 2.571-.355 3.407-1.063.836-.708 1.254-1.636 1.254-2.785 0-.885-.205-1.611-.614-2.18H18V12H6.432v1.5h7.175c.388.185.688.367.9.544.492.408.737.957.737 1.646 0 .753-.27 1.362-.813 1.828-.542.46-1.324.689-2.345.689-1.02 0-1.815-.227-2.383-.68-.561-.453-.842-1.126-.842-2.019v-.23H7.349v.23ZM8.351 11h2.918c-.667-.268-1.147-.523-1.441-.765-.473-.396-.709-.916-.709-1.56 0-.715.233-1.28.699-1.694.466-.415 1.193-.622 2.182-.622.983 0 1.723.242 2.22.727.498.485.747 1.117.747 1.895v.21h1.512v-.21c0-1.148-.405-2.093-1.215-2.833-.804-.74-1.892-1.11-3.264-1.11-1.372 0-2.447.348-3.225 1.043-.772.69-1.158 1.573-1.158 2.651 0 .948.245 1.704.734 2.268Z",fill:"currentColor"},null,-1)]))}const oA={render:rA},aA={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function lA(n,t){return U(),Z("svg",aA,t[0]||(t[0]=[z("path",{fill:"currentColor","fill-rule":"evenodd",d:"M11.75 5.25h7.5a.75.75 0 1 1 0 1.5h-7.5a.75.75 0 1 1 0-1.5zm0 6h7.5a.75.75 0 1 1 0 1.5h-7.5a.75.75 0 1 1 0-1.5zm0 6h7.5a.75.75 0 1 1 0 1.5h-7.5a.75.75 0 1 1 0-1.5zM6 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 6a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 6a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"},null,-1)]))}const cA={render:lA},hA={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function uA(n,t){return U(),Z("svg",hA,t[0]||(t[0]=[z("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 18.5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5h6.5c.275 0 .5.225.5.5v13.5H4Zm8.5 1.497V20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6.5c1.102 0 2 .895 2 2v3.997h2L20 9c1.105 0 2 .892 2 2v7l-1.5-.001V11c0-.278-.222-.5-.5-.5l-3.126-.001-4.374-.002v8l7.5.003a.5.5 0 0 0 .5-.5H22a2 2 0 0 1-2 2l-7.5-.003ZM5 7.497h4.5v-1.5H5v1.5Zm0 3h4.5v-1.5H5v1.5Zm4.5 3H5v-1.5h4.5v1.5Zm-4.5 3h4.5v-1.5H5v1.5Zm11-3h-2v-1.5h2v1.5Zm0 3h-2v-1.5h2v1.5Zm3-3h-2v-1.5h2v1.5Zm0 3h-2v-1.5h2v1.5Z",fill:"currentColor"},null,-1)]))}const dA={render:uA},fA={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function gA(n,t){return U(),Z("svg",fA,t[0]||(t[0]=[z("path",{fill:"currentColor",d:"M12.75 14.33v3.03a.75.75 0 0 1-1.5 0v-3.03c-.6-.3-1.03-.94-1.03-1.69 0-1.02.8-1.85 1.78-1.85s1.78.83 1.78 1.85c0 .75-.42 1.4-1.03 1.69zM6 8h12a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2zm0 1.5a.5.5 0 0 0-.5.5v9c0 .28.22.5.5.5h12a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5H6zM7.5 8H6a6 6 0 1 1 12 0h-1.5a4.5 4.5 0 1 0-9 0z"},null,-1)]))}const pA={render:gA},mA={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function vA(n,t){return U(),Z("svg",mA,t[0]||(t[0]=[z("path",{fill:"currentColor","fill-rule":"evenodd",d:"M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"},null,-1)]))}const yA={render:vA},_A={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function wA(n,t){return U(),Z("svg",_A,t[0]||(t[0]=[z("path",{fill:"currentColor",d:"m8.55 5.78 5.96 5.97c.1.1.1.25 0 .35l-5.87 5.87a.75.75 0 0 0 1.06 1.06l5.87-5.87c.69-.68.69-1.79 0-2.47L9.61 4.72a.75.75 0 0 0-1.06 1.06z"},null,-1)]))}const bA={render:wA},xA={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function CA(n,t){return U(),Z("svg",xA,t[0]||(t[0]=[Eo('<g fill="currentColor" fill-rule="evenodd"><path d="M3 2h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zm0 8h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1zm0 8h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1z"></path><path d="M11 2h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zm0 8h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1zm0 8h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1z" opacity=".45"></path><path d="M19 2h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zm0 8h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1zm0 8h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1z" opacity=".15"></path><path d="M7 6h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm0 8h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1z" opacity=".7"></path><path d="M15 6h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm0 8h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1z" opacity=".3"></path></g>',1)]))}const SA={render:CA},TA={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function OA(n,t){return U(),Z("svg",TA,t[0]||(t[0]=[z("path",{fill:"currentColor",d:"m6.14 7.5 1.44 5.62a.5.5 0 0 0 .48.38h10.41c.76 0 1.4-.57 1.5-1.32l.5-4.12a.5.5 0 0 0-.5-.56H6.14zM5.74 6h14.23a2 2 0 0 1 1.98 2.24l-.5 4.12A3 3 0 0 1 18.47 15H8.07a2 2 0 0 1-1.94-1.5l-.19-.72a.75.75 0 0 1-.15-.3L3.84 4.62l-2.33-.89a.75.75 0 1 1 .54-1.4l2.7 1.03c.23.09.4.28.46.52L5.73 6zM9 22a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm8 0a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm-8-1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm8 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"},null,-1)]))}const PA={render:OA},MA={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function EA(n,t){return U(),Z("svg",MA,t[0]||(t[0]=[z("mask",{id:"_1304310517__a",fill:"#fff"},[z("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 5a2 2 0 1 0-4 0H8v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V5h-2Z"})],-1),z("path",{d:"M14 5h-1.5v1.5H14V5Zm-4 0v1.5h1.5V5H10ZM8 5V3.5H6.5V5H8Zm8 0h1.5V3.5H16V5Zm-4-.5a.5.5 0 0 1 .5.5h3A3.5 3.5 0 0 0 12 1.5v3Zm-.5.5a.5.5 0 0 1 .5-.5v-3A3.5 3.5 0 0 0 8.5 5h3ZM8 6.5h2v-3H8v3ZM9.5 8V5h-3v3h3ZM9 7.5a.5.5 0 0 1 .5.5h-3A2.5 2.5 0 0 0 9 10.5v-3Zm6 0H9v3h6v-3Zm-.5.5a.5.5 0 0 1 .5-.5v3A2.5 2.5 0 0 0 17.5 8h-3Zm0-3v3h3V5h-3ZM14 6.5h2v-3h-2v3Z",fill:"currentColor",mask:"url(#_1304310517__a)"},null,-1),z("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 6.5h1.714c.316 0 .572.224.572.5v13c0 .276-.256.5-.572.5H6.286c-.316 0-.572-.224-.572-.5V7c0-.276.256-.5.572-.5H8V5H6.286C5.023 5 4 5.895 4 7v13c0 1.105 1.023 2 2.286 2h11.428C18.977 22 20 21.105 20 20V7c0-1.105-1.023-2-2.286-2H16v1.5Z",fill:"currentColor"},null,-1)]))}const kA={render:EA},AA={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function DA(n,t){return U(),Z("svg",AA,t[0]||(t[0]=[z("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M25.334 4H6.666A2.667 2.667 0 0 0 4 6.666v18.668A2.67 2.67 0 0 0 6.666 28h18.668A2.667 2.667 0 0 0 28 25.334V6.666A2.667 2.667 0 0 0 25.334 4ZM6.666 26h9.994l-4.878-6.608a.666.666 0 0 0-1.074.004L6.116 25.71c.12.174.32.29.55.29Zm18.668 0a.668.668 0 0 0 .666-.666v-3.63l-4.914-6.588a.666.666 0 0 0-1.072.004l-4.44 6.04 3.57 4.84h6.19Zm-2.646-12.08L26 18.36V6.666A.666.666 0 0 0 25.334 6H6.666A.666.666 0 0 0 6 6.666v15.802l3.09-4.248a2.666 2.666 0 0 1 4.302-.014l.938 1.27 4.07-5.54a2.666 2.666 0 0 1 4.288-.016ZM9.334 11.334a2 2 0 1 0 4 0 2 2 0 0 0-4 0Z",fill:"currentColor"},null,-1)]))}const jA={render:DA},IA={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function RA(n,t){return U(),Z("svg",IA,t[0]||(t[0]=[z("path",{fill:"currentColor",d:"M15.45 17.97 9.5 12.01a.25.25 0 0 1 0-.36l5.87-5.87a.75.75 0 0 0-1.06-1.06l-5.87 5.87c-.69.68-.69 1.8 0 2.48l5.96 5.96a.75.75 0 0 0 1.06-1.06z"},null,-1)]))}const LA={render:RA},FA={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function BA(n,t){return U(),Z("svg",FA,t[0]||(t[0]=[z("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.078 5.333H5.334A2.667 2.667 0 0 0 2.667 8v2.667c0 .203.023.402.066.592a2.315 2.315 0 0 0-.066.55v12.382c0 1.367 1.194 2.476 2.667 2.476h21.333c1.473 0 2.667-1.109 2.667-2.477V11.81c0-1.368-1.194-2.477-2.667-2.477h-9.333l-.726-2.176a2.667 2.667 0 0 0-2.53-1.824Zm-8.744 4h9.892L14.71 7.79a.667.667 0 0 0-.633-.456H5.334A.667.667 0 0 0 4.667 8v1.411c.213-.05.436-.078.667-.078Zm-.667 2.477c0-.229.267-.477.667-.477h21.333c.4 0 .667.248.667.477v12.38c0 .229-.267.477-.667.477H5.334c-.4 0-.667-.248-.667-.477V11.81Z",fill:"currentColor"},null,-1)]))}const zA={render:BA},VA={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function HA(n,t){return U(),Z("svg",VA,t[0]||(t[0]=[z("path",{fill:"currentColor",d:"m18.054 7.252-2.296-2.296a.75.75 0 0 1 1.06-1.06l2.83 2.828a1.75 1.75 0 0 1 0 2.475l-2.832 2.831a.75.75 0 0 1-1.06-1.06l2.219-2.22H8a4.25 4.25 0 0 0 0 8.5h4a.75.75 0 0 1 0 1.5H8a5.75 5.75 0 0 1 0-11.5h10c.018 0 .036 0 .054.002Z"},null,-1)]))}const YA={render:HA},XA={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"};function WA(n,t){return U(),Z("svg",XA,t[0]||(t[0]=[z("path",{d:"M20,13.33l-2.56,2.56-3.18-3.21-1.58,1.58,3.21,3.18L13.33,20H20ZM6.67,20,4.11,17.44l3.21-3.18L5.74,12.68,2.56,15.89,0,13.33V20ZM0,6.67,2.56,4.11,5.74,7.32,7.32,5.74,4.11,2.56,6.67,0H0ZM13.33,0l2.56,2.56L12.68,5.74l1.58,1.58,3.18-3.21L20,6.67V0Z"},null,-1)]))}const NA={render:WA},UA={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function GA(n,t){return U(),Z("svg",UA,t[0]||(t[0]=[z("path",{fill:"currentColor",d:"M15.25 18.48V15a.75.75 0 1 0-1.5 0v4c0 .97.78 1.75 1.75 1.75h4a.75.75 0 1 0 0-1.5h-2.6a8.75 8.75 0 0 0-2.07-15.53.75.75 0 1 0-.49 1.42 7.25 7.25 0 0 1 .91 13.34zM8.75 5.52V9a.75.75 0 0 0 1.5 0V5c0-.97-.78-1.75-1.75-1.75h-4a.75.75 0 0 0 0 1.5h2.6a8.75 8.75 0 0 0 2.18 15.57.75.75 0 0 0 .47-1.43 7.25 7.25 0 0 1-1-13.37z"},null,-1)]))}const $A={render:GA},KA={xmlns:"http://www.w3.org/2000/svg",version:"1.2",viewBox:"0 0 25 24",width:"25",height:"24",class:"drop-shadow svg","aria-hidden":"true",focusable:"false"};function qA(n,t){return U(),Z("svg",KA,t[0]||(t[0]=[z("path",{class:"a icon-active",d:"m23.3 24.1h-16.8c-0.7 0-1.3-0.6-1.3-1.4v-17.3c0-0.7 0.6-1.3 1.3-1.3h16.8c0.8 0 1.4 0.6 1.4 1.3v17.3c0 0.8-0.6 1.4-1.4 1.4z"},null,-1),z("path",{class:"b icon-active__stroke",d:"m19.9 21.2h-17.3c-0.7 0-1.4-0.6-1.4-1.3v-17.3c0-0.7 0.7-1.4 1.4-1.4h17.3c0.7 0 1.3 0.7 1.3 1.4v17.3c0 0.7-0.6 1.3-1.3 1.3z"},null,-1),z("path",{class:"c icon-active__stroke",d:"m19.9 21.2h-17.3c-0.7 0-1.4-0.6-1.4-1.3v-17.3c0-0.7 0.7-1.4 1.4-1.4h17.3c0.7 0 1.3 0.7 1.3 1.4v17.3c0 0.7-0.6 1.3-1.3 1.3z"},null,-1)]))}const ZA={render:qA},JA={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function QA(n,t){return U(),Z("svg",JA,t[0]||(t[0]=[z("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 6a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 3 6Zm0 6a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 3 12Zm.75 5.25a.75.75 0 0 0 0 1.5h7.5a.75.75 0 0 0 0-1.5h-7.5Z",fill:"currentColor"},null,-1),z("path",{d:"M17.75 4a.75.75 0 0 0-.75.75v14.5a.75.75 0 0 0 1.5 0V4.75a.75.75 0 0 0-.75-.75Z",fill:"currentColor"},null,-1),z("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.72 16.43a.75.75 0 0 1 1.06 0l1.97 1.97 1.97-1.97a.75.75 0 1 1 1.06 1.06l-2.145 2.146a1.254 1.254 0 0 1-1.364.271 1.248 1.248 0 0 1-.406-.271L14.72 17.49a.75.75 0 0 1 0-1.06ZM20.78 7.573a.75.75 0 0 1-1.06 0l-1.97-1.97-1.97 1.97a.75.75 0 1 1-1.06-1.06l2.145-2.146a1.255 1.255 0 0 1 1.364-.272c.152.063.29.156.406.272l2.145 2.146a.75.75 0 0 1 0 1.06Z",fill:"currentColor"},null,-1)]))}const tD={render:QA},eD={xmlns:"http://www.w3.org/2000/svg",version:"1.2",viewBox:"0 0 26 26",width:"26",height:"26",class:"stroke svg","aria-hidden":"true",focusable:"false"};function iD(n,t){return U(),Z("svg",eD,t[0]||(t[0]=[z("path",{class:"a icon-active",d:"m19.8 21.5h-13.7c-0.6 0-1.1-0.5-1.1-1.2v-14.1c0-0.6 0.5-1.1 1.1-1.1h13.7c0.6 0 1.1 0.5 1.1 1.1v14.1c0 0.7-0.5 1.2-1.1 1.2z"},null,-1),z("path",{class:"b icon-active",d:"m19.8 21.5h-13.7c-0.6 0-1.1-0.5-1.1-1.2v-14.1c0-0.6 0.5-1.1 1.1-1.1h13.7c0.6 0 1.1 0.5 1.1 1.1v14.1c0 0.7-0.5 1.2-1.1 1.2z"},null,-1),z("path",{class:"c icon-active__stroke",d:"m22.8 25h-19.7c-0.9 0-1.6-0.7-1.6-1.6v-20.3c0-0.9 0.7-1.6 1.6-1.6h19.7c0.9 0 1.6 0.7 1.6 1.6v20.3c0 0.9-0.7 1.6-1.6 1.6z"},null,-1)]))}const nD={render:iD},sD={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function rD(n,t){return U(),Z("svg",sD,t[0]||(t[0]=[z("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M25.333 4H6.667A2.667 2.667 0 0 0 4 6.667v18.666A2.667 2.667 0 0 0 6.667 28h18.666A2.667 2.667 0 0 0 28 25.333V6.667A2.667 2.667 0 0 0 25.333 4ZM6 6.667C6 6.298 6.298 6 6.667 6h10.666v20H6.667A.667.667 0 0 1 6 25.333V6.667Zm13.333 6.666V6h6c.369 0 .667.298.667.667v6.666h-6.667Zm0 2V26h6a.667.667 0 0 0 .667-.667v-10h-6.667Z",fill:"currentColor"},null,-1)]))}const oD={render:rD},aD={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function lD(n,t){return U(),Z("svg",aD,t[0]||(t[0]=[z("path",{d:"M11 2 5.5 16h2.25l1.12-3h6.25l1.12 3h2.25L13 2h-2zm-1.38 9L12 4.67 14.38 11H9.62z",fill:"currentColor"},null,-1)]))}const cD={render:lD},hD={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function uD(n,t){return U(),Z("svg",hD,t[0]||(t[0]=[z("path",{fill:"currentColor","fill-rule":"evenodd",d:"M18 5.5h-5.25V18c0 .28.22.5.5.5h2a.75.75 0 1 1 0 1.5h-6.5a.75.75 0 1 1 0-1.5h2a.5.5 0 0 0 .5-.5V5.5H6a.5.5 0 0 0-.5.5v1.25a.75.75 0 0 1-1.5 0V5.5C4 4.67 4.67 4 5.5 4h13c.83 0 1.5.67 1.5 1.5v1.75a.75.75 0 1 1-1.5 0V6a.5.5 0 0 0-.5-.5z"},null,-1)]))}const dD={render:uD},fD={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"};function gD(n,t){return U(),Z("svg",fD,t[0]||(t[0]=[z("path",{"fill-rule":"evenodd",d:"M6.5,0,.33,6.17A10,10,0,0,1,6.5,0ZM10,0a10,10,0,0,1,2.59.34L.34,12.59A10.18,10.18,0,0,1,0,10.1L10.1,0Zm4.63,1.13a10.68,10.68,0,0,1,1.7,1.13L2.26,16.33a10.68,10.68,0,0,1-1.13-1.7Zm3.11,2.54a10.68,10.68,0,0,1,1.13,1.7L5.37,18.87a10.68,10.68,0,0,1-1.7-1.13ZM19.5,13.2a10,10,0,0,1-6.17,6.18Zm.16-5.79A9.78,9.78,0,0,1,20,9.9L9.9,20H9.62a9.51,9.51,0,0,1-2.21-.33Z"},null,-1)]))}const pD={render:gD},mD={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function vD(n,t){return U(),Z("svg",mD,t[0]||(t[0]=[z("path",{d:"M6 21.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H6.75a.75.75 0 0 1-.75-.75ZM15.754 14.006V5h1.528v8.95c0 1.574-.476 2.807-1.424 3.703-.948.896-2.253 1.347-3.92 1.347-1.667 0-2.952-.454-3.862-1.356-.904-.902-1.358-2.145-1.358-3.733V5h1.528v9.025c0 1.168.32 2.072.966 2.704.646.632 1.592.945 2.83.945 1.183 0 2.1-.313 2.746-.945.646-.638.966-1.548.966-2.723Z",fill:"currentColor"},null,-1)]))}const yD={render:vD},_D={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function wD(n,t){return U(),Z("svg",_D,t[0]||(t[0]=[z("path",{fill:"currentColor",d:"m6.05 7.25 2.22-2.22A.75.75 0 0 0 7.2 3.97L4.43 6.75c-.69.68-.69 1.8 0 2.48l2.83 2.83A.75.75 0 0 0 8.32 11L6.07 8.75H16a4.25 4.25 0 1 1 0 8.5h-4a.75.75 0 1 0 0 1.5h4a5.75 5.75 0 0 0 0-11.5H6.05z"},null,-1)]))}const bD={render:wD},xD={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function CD(n,t){return U(),Z("svg",xD,t[0]||(t[0]=[z("path",{fill:"currentColor",d:"M17 9h3v11H9v-3c.51 0 1.01-.05 1.5-.14v1.64h8v-8h-1.64c.1-.49.14-.99.14-1.5zm-8 6A6 6 0 1 1 9 3a6 6 0 0 1 0 12zm0-1.5a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9z"},null,-1)]))}const SD={render:CD},TD={xmlns:"http://www.w3.org/2000/svg",fill:"none",width:"32",height:"32",viewBox:"0 0 32 32"};function OD(n,t){return U(),Z("svg",TD,t[0]||(t[0]=[z("path",{"clip-rule":"evenodd",d:"M10.3 6.12A6 6 0 0 1 22 8v2.667H8a2.667 2.667 0 0 0-2.667 2.666v12A2.667 2.667 0 0 0 8 28h16a2.667 2.667 0 0 0 2.667-2.667v-12A2.667 2.667 0 0 0 24 10.667V8A8 8 0 0 0 8.401 5.493a1 1 0 0 0 1.9.626zm-2.967 7.213c0-.368.299-.666.667-.666h16c.368 0 .667.298.667.666v12A.667.667 0 0 1 24 26H8a.667.667 0 0 1-.667-.667zm7.668 5.77-.003 4.043a1 1 0 1 0 2 .002L17 19.102c.809-.394 1.37-1.251 1.37-2.245 0-1.367-1.062-2.476-2.371-2.476s-2.37 1.109-2.37 2.476c0 .995.561 1.853 1.371 2.247z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const PD={render:OD},MD={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function ED(n,t){return U(),Z("svg",MD,t[0]||(t[0]=[z("path",{fill:"currentColor","fill-rule":"evenodd",d:"m8.77 19-.29-1.37h-.07c-.48.6-.96 1.01-1.44 1.22-.47.22-1.07.33-1.79.33-.95 0-1.7-.25-2.24-.74-.54-.5-.81-1.2-.81-2.1 0-1.95 1.55-2.97 4.66-3.06l1.64-.05v-.6c0-.76-.17-1.32-.5-1.68-.32-.36-.84-.54-1.55-.54-.8 0-1.71.25-2.73.74l-.44-1.11a6.86 6.86 0 0 1 3.26-.83c1.15 0 2 .25 2.55.76.55.51.83 1.33.83 2.46V19H8.77zm-3.3-1.03c.91 0 1.63-.25 2.14-.75.52-.5.78-1.2.78-2.09v-.87l-1.46.06a5.3 5.3 0 0 0-2.5.54c-.52.32-.78.82-.78 1.5 0 .52.16.92.48 1.2.32.27.77.41 1.34.41zM21.15 19l-1.6-4.09H14.4L12.82 19h-1.51l5.08-12.9h1.26L22.7 19h-1.55zm-2.06-5.43-1.5-3.98c-.19-.5-.39-1.13-.6-1.86-.12.56-.3 1.18-.55 1.86l-1.5 3.98h4.15z"},null,-1)]))}const kD={render:ED},AD={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function DD(n,t){return U(),Z("svg",AD,t[0]||(t[0]=[z("path",{fill:"currentColor",d:"M5.5 4h4c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-4A1.5 1.5 0 0 1 4 9.5v-4C4 4.67 4.67 4 5.5 4zm9 0h4c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-4A1.5 1.5 0 0 1 13 9.5v-4c0-.83.67-1.5 1.5-1.5zm0 9h4c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-4a1.5 1.5 0 0 1-1.5-1.5v-4c0-.83.67-1.5 1.5-1.5zm-9 0h4c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-4A1.5 1.5 0 0 1 4 18.5v-4c0-.83.67-1.5 1.5-1.5zm0-7.5v4h4v-4h-4zm9 0v4h4v-4h-4zm0 9v4h4v-4h-4zm-9 0v4h4v-4h-4z"},null,-1)]))}const jD={render:DD},ID={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function RD(n,t){return U(),Z("svg",ID,t[0]||(t[0]=[z("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"m18.72 4.22-3.865 3.865V5.398a.75.75 0 1 0-1.5 0v3.754c0 .967.53 1.496 1.497 1.496H18.6a.75.75 0 1 0 0-1.5h-2.687l3.868-3.868a.75.75 0 1 0-1.06-1.06ZM5.28 19.78l3.867-3.866v2.688a.75.75 0 0 0 1.5 0V14.85c0-.967-.527-1.5-1.494-1.5H5.401a.75.75 0 0 0 0 1.5h2.687l-3.869 3.87a.75.75 0 0 0 1.06 1.06Z",fill:"currentColor"},null,-1)]))}const LD={render:RD},FD={xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24"};function BD(n,t){return U(),Z("svg",FD,t[0]||(t[0]=[z("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 12C3 7.03111 7.03111 3 12 3C16.9689 3 21 7.03111 21 12C21 16.9689 16.9689 21 12 21C7.03111 21 3 16.9689 3 12ZM12 4.38462C7.79581 4.38462 4.38462 7.79581 4.38462 12C4.38462 16.2042 7.79581 19.6154 12 19.6154C16.2042 19.6154 19.6154 16.2042 19.6154 12C19.6154 7.79581 16.2042 4.38462 12 4.38462Z",fill:"currentColor"},null,-1),z("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.9995 7.8457C12.3819 7.8457 12.6919 8.15566 12.6919 8.53801V11.3072H15.4611C15.8434 11.3072 16.1534 11.6172 16.1534 11.9995C16.1534 12.3819 15.8434 12.6919 15.4611 12.6919H12.6919V15.4611C12.6919 15.8434 12.3819 16.1534 11.9995 16.1534C11.6172 16.1534 11.3072 15.8434 11.3072 15.4611V12.6919H8.53801C8.15566 12.6919 7.8457 12.3819 7.8457 11.9995C7.8457 11.6172 8.15566 11.3072 8.53801 11.3072H11.3072V8.53801C11.3072 8.15566 11.6172 7.8457 11.9995 7.8457Z",fill:"currentColor"},null,-1)]))}const zD={render:BD},VD={xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24"};function HD(n,t){return U(),Z("svg",VD,t[0]||(t[0]=[z("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 12C3 7.03111 7.03111 3 12 3C16.9689 3 21 7.03111 21 12C21 16.9689 16.9689 21 12 21C7.03111 21 3 16.9689 3 12ZM12 4.38462C7.79581 4.38462 4.38462 7.79581 4.38462 12C4.38462 16.2042 7.79581 19.6154 12 19.6154C16.2042 19.6154 19.6154 16.2042 19.6154 12C19.6154 7.79581 16.2042 4.38462 12 4.38462Z",fill:"currentColor"},null,-1),z("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.8457 11.9999C7.8457 11.6176 8.15566 11.3076 8.53801 11.3076H15.4611C15.8434 11.3076 16.1534 11.6176 16.1534 11.9999C16.1534 12.3823 15.8434 12.6922 15.4611 12.6922H8.53801C8.15566 12.6922 7.8457 12.3823 7.8457 11.9999Z",fill:"currentColor"},null,-1)]))}const YD={render:HD},Pv=Object.assign({"./svg/icon-add-page.svg":tk,"./svg/icon-align-center.svg":nk,"./svg/icon-align-justify.svg":ok,"./svg/icon-align-left.svg":ck,"./svg/icon-align-right.svg":dk,"./svg/icon-background.svg":pk,"./svg/icon-bold.svg":yk,"./svg/icon-brightness.svg":bk,"./svg/icon-clear.svg":Sk,"./svg/icon-copy.svg":Pk,"./svg/icon-curved.svg":kk,"./svg/icon-delete.svg":jk,"./svg/icon-duplicate.svg":Lk,"./svg/icon-element.svg":zk,"./svg/icon-eyedropper.svg":Yk,"./svg/icon-grid.svg":Nk,"./svg/icon-group.svg":$k,"./svg/icon-history.svg":Zk,"./svg/icon-italic.svg":tA,"./svg/icon-layers.svg":nA,"./svg/icon-linethrough.svg":oA,"./svg/icon-list.svg":cA,"./svg/icon-listings.svg":dA,"./svg/icon-lock.svg":pA,"./svg/icon-more.svg":yA,"./svg/icon-next-page.svg":bA,"./svg/icon-opacity.svg":SA,"./svg/icon-orders.svg":PA,"./svg/icon-paste.svg":kA,"./svg/icon-photo.svg":jA,"./svg/icon-previous-page.svg":LA,"./svg/icon-projects.svg":zA,"./svg/icon-redo.svg":YA,"./svg/icon-resize.svg":NA,"./svg/icon-rotate.svg":$A,"./svg/icon-shadow.svg":ZA,"./svg/icon-spacing.svg":tD,"./svg/icon-stroke.svg":nD,"./svg/icon-template.svg":oD,"./svg/icon-text-color.svg":cD,"./svg/icon-text.svg":dD,"./svg/icon-transparen.svg":pD,"./svg/icon-underline.svg":yD,"./svg/icon-undo.svg":bD,"./svg/icon-ungroup.svg":SD,"./svg/icon-unlock.svg":PD,"./svg/icon-uppercase.svg":kD,"./svg/icon-view-page.svg":jD,"./svg/icon-zoom-fit.svg":LD,"./svg/icon-zoom-in.svg":zD,"./svg/icon-zoom-out.svg":YD}),XD=()=>{var n;const t={};for(const e in Pv){const i=(n=e.match(/([\w-]*)\.svg$/))==null?void 0:n[1];i&&(t[i]=Pv[e])}return t},WD=XD(),bg={props:{name:{type:String,required:!0},size:{type:Number,default:24}},setup(n){const t=yt(()=>{const i=WD[n.name];if(i)return i}),e=yt(()=>{const{size:i}=n;return`${i}px`});return{svgComponent:t,getSize:e}}},Mv=()=>{zf(n=>({"38eaa7c2":n.getSize}))},Ev=bg.setup;bg.setup=Ev?(n,t)=>(Mv(),Ev(n,t)):Mv;const Ht=(n,t)=>{const e=n.__vccOpts||n;for(const[i,s]of t)e[i]=s;return e};var ND={class:"base-icon"},UD={class:"base-icon--size base-icon__item"};function GD(n,t,e,i,s,r){return U(),Z("span",ND,[z("span",UD,[(U(),vi(Ka(i.svgComponent),{role:"img"}))])])}const Ue=Ht(bg,[["render",GD],["__scopeId","data-v-9cfca5ae"]]),$D=Qt({setup(){}});var KD={class:"base-btn__content"};function qD(n,t,e,i,s,r){return U(),Z("button",{type:"button",class:li(["base-btn w-32px h-32px py-2 px-3 inline-flex justify-center items-center gap-x-2 text-sm font-medium rounded-lg border border-transparent text-gray-800 focus:outline-none disabled:opacity-50 disabled:pointer-events-none dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700 hover:cursor-pointer",{"!bg-slate-200":n.$attrs.active}])},[t[0]||(t[0]=z("span",{class:"base-btn__overlay"},null,-1)),z("span",KD,[Un(n.$slots,"default",{},void 0,!0)])],2)}const Je=Ht($D,[["render",qD],["__scopeId","data-v-11cf0740"]]),ZD=Qt({props:{text:{type:String,default:"Tooltip"},location:{type:String,default:"bottom"}},setup(){return{Location}}});var JD={class:"group relative inline-block"};function QD(n,t,e,i,s,r){return U(),Z("div",JD,[Un(n.$slots,"default"),z("div",{class:li(["bg-[#424242] dark:bg-dark-2 absolute z-999 mt-3 whitespace-nowrap rounded-[5px] py-1.5 px-3.5 text-sm text-white opacity-0 group-hover:opacity-100",{"right-full top-1/2 -translate-y-1/2":n.location==="start","left-full top-1/2 -translate-y-1/2":n.location==="end","bottom-full left-1/2 -translate-x-1/2":n.location==="top","top-full left-1/2 -translate-x-1/2":n.location==="bottom"}])},[z("span",{class:li(["bg-[#424242] dark:bg-dark-2 absolute h-2 w-2 rotate-45 -z-10",{"right-[-3px] top-1/2 -translate-y-1/2":n.location==="start","left-[-3px] top-1/2 -translate-y-1/2":n.location==="end","bottom-[-3px] left-1/2 -translate-x-1/2":n.location==="top","top-[-3px] left-1/2 -translate-x-1/2":n.location==="bottom"}])},null,2),yy(" "+ms(n.text),1)],2)])}const Ge=Ht(ZD,[["render",QD]]),t7=Qt({components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge},setup(){const n=()=>{},t=()=>{};return Di(()=>{}),{onUndo:n,onRedo:t}}});var e7={class:"history"};function i7(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip");return U(),Z("div",e7,[nt(h,{text:"Undo",location:"bottom"},{default:Mt(function(){return[nt(l,null,{default:Mt(function(){return[nt(o,{name:"icon-undo",class:"text-white"})]}),_:1})]}),_:1}),nt(h,{text:"Redo",location:"bottom"},{default:Mt(function(){return[nt(l,null,{default:Mt(function(){return[nt(o,{name:"icon-redo",class:"text-white"})]}),_:1})]}),_:1})])}const n7=Ht(t7,[["render",i7],["__scopeId","data-v-734c66b7"]]),s7=Qt({components:{HistoryCanvas:n7}});var r7={class:"w-full h-56px editor__navbar"},o7={class:"w-full h-full flex items-center"},a7={id:"editor-history",class:"h-full flex flex-1 justify-center items-center"};function l7(n,t,e,i,s,r){var o=ft("HistoryCanvas");return U(),Z("header",r7,[z("div",o7,[t[0]||(t[0]=Eo('<div class="h-full flex flex-1 justify-start items-center" data-v-55f05cc3><button type="button" class="flex shrink-0 justify-center items-center gap-2 size-[46px] text-sm font-medium rounded-lg border border-transparent text-white hover:border-white focus:outline-none focus:border-white disabled:opacity-50 disabled:pointer-events-none" data-v-55f05cc3><svg class="shrink-0 size-24px" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" data-v-55f05cc3><path d="m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z" data-v-55f05cc3></path><polyline points="9 22 9 12 15 12 15 22" data-v-55f05cc3></polyline></svg></button></div>',1)),z("div",a7,[nt(o)]),t[1]||(t[1]=Eo('<div class="h-full flex flex-1 justify-end items-center" data-v-55f05cc3><button type="button" class="shadow-1 dark:shadow-box-dark !bg-slate-100 dark:bg-gray-2 border-transparent border rounded-md inline-flex items-center justify-center py-3 px-7 mr-24px text-center text-base font-medium text-dark hover:bg-gray-4 dark:hover:bg-dark-3 disabled:bg-gray-3 disabled:border-gray-3 disabled:text-dark-5" data-v-55f05cc3> Export </button><span class="inline-block size-[38px] bg-gray-100 rounded-full overflow-hidden" data-v-55f05cc3><svg class="size-full text-gray-300" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-55f05cc3><rect x="0.62854" y="0.359985" width="15" height="15" rx="7.5" fill="white" data-v-55f05cc3></rect><path d="M8.12421 7.20374C9.21151 7.20374 10.093 6.32229 10.093 5.23499C10.093 4.14767 9.21151 3.26624 8.12421 3.26624C7.0369 3.26624 6.15546 4.14767 6.15546 5.23499C6.15546 6.32229 7.0369 7.20374 8.12421 7.20374Z" fill="currentColor" data-v-55f05cc3></path><path d="M11.818 10.5975C10.2992 12.6412 7.42106 13.0631 5.37731 11.5537C5.01171 11.2818 4.69296 10.9631 4.42107 10.5975C4.28982 10.4006 4.27107 10.1475 4.37419 9.94123L4.51482 9.65059C4.84296 8.95684 5.53671 8.51624 6.30546 8.51624H9.95231C10.7023 8.51624 11.3867 8.94749 11.7242 9.62249L11.8742 9.93184C11.968 10.1475 11.9586 10.4006 11.818 10.5975Z" fill="currentColor" data-v-55f05cc3></path></svg></span></div>',1))])])}const c7=Ht(s7,[["render",l7],["__scopeId","data-v-55f05cc3"]]),h7=[{id:"photos",name:"Photos",icon:"icon-photo"},{id:"shapes",name:"Shapes",icon:"icon-element"},{id:"text",name:"Text",icon:"icon-text"}],u7={props:{widthMenu:{type:Number,default:78},widthPanel:{type:Number,default:303}},setup(){const n=Wr(),t=yt(()=>n.getIsToggleSidebar),e=yt({get:()=>n.getIsActiveSidebarMobile,set:i=>n.setIsActiveSidebarMobile(i)});return{isToggleSidebar:t,isActiveSidebarMobile:e}}};var d7={class:"base-sidebar-container"},f7={class:"base-sidebar-menu"};function g7(n,t,e,i,s,r){return U(),Z("aside",{class:li(["base-sidebar","light","base-sidebar-menu--background",{"base-sidebar--open":i.isToggleSidebar}])},[z("div",d7,[z("nav",f7,[Un(n.$slots,"menu",{},void 0,!0)]),z("div",{class:li(["base-sidebar-panel","light",{"base-sidebar-panel--open":i.isToggleSidebar,"base-sidebar-panel--close":!i.isToggleSidebar}])},[Un(n.$slots,"panel",{},void 0,!0),i.isToggleSidebar?Un(n.$slots,"toggle",{key:0},void 0,!0):Js("",!0)],2)])],2)}const p7=Ht(u7,[["render",g7],["__scopeId","data-v-51394da5"]]),m7={components:{BaseIcon:Ue},props:{items:{type:Array,default:()=>[]}},setup(){const n=Wr(),t=yt(()=>n.getIsActiveSidebar),e=yt(()=>n.getActiveSidebarItem.selectedCurrent),i=yt(()=>n.getIsToggleSidebar),s=(o,l)=>{const h=n.getActiveSidebarItem.sidebarItemId;console.log(h,"active"),console.log(o.toLowerCase(),"name.toLowerCase()"),h===o.toLowerCase()||n.setActiveSidebarItem({sidebarItemId:o.toLowerCase(),sidebarItemTitle:o.toLowerCase(),sidebarItemType:o,selectedCurrent:l,previousSidebarItemId:n.getActiveSidebarItem.sidebarItemId,previousSidebarItemTitle:n.getActiveSidebarItem.sidebarItemTitle,previousSidebarItemType:n.getActiveSidebarItem.sidebarItemType}),setTimeout(()=>{t.value||n.setIsActiveSidebar(!0)},100)},r=yt(()=>{let o=0;return e.value===0?o=0:o=`${e.value}00`,{transform:`translateY(calc(${o}% + 0px))`,opacity:i.value&&!n.getIsEffects?1:0}});return We(i,o=>{o||(n.setActiveSidebarItem({...n.getActiveSidebarItem,selectedCurrent:-1}),n.setIsActiveSidebar(!1))}),{isToggleSidebar:i,selectedItem:e,styleActive:r,isActiveSidebar:t,onSelectItem:s}}};var v7={class:"sidebar-menu"},y7={class:"sidebar-menu__content sidebar-menu__content--column"},_7={class:"sidebar-menu__wrapper",style:{height:"calc(100% - ".concat(16,"px)")}},w7={role:"tablist","aria-orientation":"vertical",class:"flex flex-col sidebar-menu__tablist",tabindex:"0"},b7=["onClick"],x7={class:"sidebar-menu__label"};function C7(n,t,e,i,s,r){var o=ft("base-icon");return U(),Z("div",v7,[z("div",y7,[z("div",_7,[z("div",w7,[z("div",{style:qi(i.styleActive),class:li(["sidebar-menu__tab-selected",{"sidebar-menu__tab-selected--active":i.isActiveSidebar}])},null,6),(U(!0),Z(Ce,null,Zs(e.items,function(l,h){return U(),Z("div",{class:li(["sidebar-menu__tab",{"sidebar-menu__tab--active":i.selectedItem===h&&i.isToggleSidebar}]),key:h,onClick:function(u){return i.onSelectItem(l.name,h)}},[nt(o,{name:l.icon},null,8,["name"]),z("span",x7,ms(l.name),1)],10,b7)}),128))])])])])}const S7=Ht(m7,[["render",C7],["__scopeId","data-v-7112f86d"]]),T7={setup(){const n=Wr(),t=yt(()=>n.getIsToggleSidebar),e=yt(()=>n.getIsEffects),i=yt(()=>n.getIsFontFamily?"a Font":n.getActiveSidebarItem.sidebarItemType);return{isToggleSidebar:t,isEffects:e,containerPanel:i,toggleSidebar:()=>{n.setIsToggleSidebar(!t.value)},handleScrollTo:()=>{n.getWrapperEl.scrollTo(20)}}}};var O7={class:"sidebar-panel"},P7={class:"sidebar-panel__main"},M7={class:"sidebar-panel__header"},E7={key:0,class:"sidebar-panel__title text-h5"},k7={class:"sidebar-panel__content"};function A7(n,t,e,i,s,r){return U(),Z("div",O7,[z("div",P7,[z("div",M7,[i.isEffects?(U(),Z("p",E7,"Effects")):Js("",!0),t[0]||(t[0]=Eo('<div class="mb-2 px-2 w-full" data-v-246be2fe><div class="relative" data-v-246be2fe><div class="absolute left-0 inset-y-0 pl-3 flex items-center" data-v-246be2fe><svg class="fill-current h-6 w-6 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" data-v-246be2fe><path d="M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z" data-v-246be2fe></path></svg></div><input class="w-full border !border-gray pl-12 pr-4 py-5 rounded-2 focus:border-blue-500 focus:shadow-outline outline-none" type="text" placeholder="Search..." data-v-246be2fe></div></div>',1))]),z("div",k7,[Un(n.$slots,"content",{},void 0,!0)])])])}const D7=Ht(T7,[["render",A7],["__scopeId","data-v-246be2fe"]]);function _l(n){return xf()?(_1(n),!0):!1}function Cd(){const n=new Set,t=e=>{n.delete(e)};return{on:e=>{n.add(e);const i=()=>t(e);return _l(i),{off:i}},off:t,trigger:(...e)=>Promise.all(Array.from(n).map(i=>i(...e)))}}function Re(n){return typeof n=="function"?n():$s(n)}const Mw=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const j7=n=>n!=null,I7=Object.prototype.toString,R7=n=>I7.call(n)==="[object Object]",On=()=>{};function Ew(n,t){function e(...i){return new Promise((s,r)=>{Promise.resolve(n(()=>t.apply(this,i),{fn:t,thisArg:this,args:i})).then(s).catch(r)})}return e}function L7(n,t={}){let e,i,s=On;const r=o=>{clearTimeout(o),s(),s=On};return o=>{const l=Re(n),h=Re(t.maxWait);return e&&r(e),l<=0||h!==void 0&&h<=0?(i&&(r(i),i=null),Promise.resolve(o())):new Promise((u,d)=>{s=t.rejectOnCancel?d:u,h&&!i&&(i=setTimeout(()=>{e&&r(e),i=null,u(o())},h)),e=setTimeout(()=>{i&&r(i),i=null,u(o())},l)})}}function F7(...n){let t=0,e,i=!0,s=On,r,o,l,h,u;!Se(n[0])&&typeof n[0]=="object"?{delay:o,trailing:l=!0,leading:h=!0,rejectOnCancel:u=!1}=n[0]:[o,l=!0,h=!0,u=!1]=n;const d=()=>{e&&(clearTimeout(e),e=void 0,s(),s=On)};return g=>{const p=Re(o),m=Date.now()-t,y=()=>r=g();return d(),p<=0?(t=Date.now(),y()):(m>p&&(h||!i)?(t=Date.now(),y()):l&&(r=new Promise((_,b)=>{s=u?b:_,e=setTimeout(()=>{t=Date.now(),i=!0,_(y()),d()},Math.max(0,p-m))})),!h&&!e&&(e=setTimeout(()=>i=!0,p)),i=!1,r)}}function kv(n,t=!1,e="Timeout"){return new Promise((i,s)=>{setTimeout(t?()=>s(e):i,n)})}function B7(n,...t){return t.some(e=>e in n)}function z7(n){return Fo()}function Sd(...n){if(n.length!==1)return RP(...n);const t=n[0];return typeof t=="function"?Mo(AP(()=>({get:t,set:On}))):St(t)}function V7(n,t=200,e={}){return Ew(L7(t,e),n)}function H7(n,t=200,e=!1,i=!0,s=!1){return Ew(F7(t,e,i,s),n)}function kw(n,t=!0,e){z7()?Di(n,e):t?n():_s(n)}function ff(n,t=!1){function e(g,{flush:p="sync",deep:m=!1,timeout:y,throwOnTimeout:_}={}){let b=null;const x=[new Promise(T=>{b=We(n,O=>{g(O)!==t&&(b?b():_s(()=>b==null?void 0:b()),T(O))},{flush:p,deep:m,immediate:!0})})];return y!=null&&x.push(kv(y,_).then(()=>Re(n)).finally(()=>b==null?void 0:b())),Promise.race(x)}function i(g,p){if(!Se(g))return e(O=>O===g,p);const{flush:m="sync",deep:y=!1,timeout:_,throwOnTimeout:b}=p??{};let x=null;const T=[new Promise(O=>{x=We([n,g],([P,F])=>{t!==(P===F)&&(x?x():_s(()=>x==null?void 0:x()),O(P))},{flush:m,deep:y,immediate:!0})})];return _!=null&&T.push(kv(_,b).then(()=>Re(n)).finally(()=>(x==null||x(),Re(n)))),Promise.race(T)}function s(g){return e(p=>!!p,g)}function r(g){return i(null,g)}function o(g){return i(void 0,g)}function l(g){return e(Number.isNaN,g)}function h(g,p){return e(m=>{const y=Array.from(m);return y.includes(g)||y.includes(Re(g))},p)}function u(g){return d(1,g)}function d(g=1,p){let m=-1;return e(()=>(m+=1,m>=g),p)}return Array.isArray(Re(n))?{toMatch:e,toContains:h,changed:u,changedTimes:d,get not(){return ff(n,!t)}}:{toMatch:e,toBe:i,toBeTruthy:s,toBeNull:r,toBeNaN:l,toBeUndefined:o,changed:u,changedTimes:d,get not(){return ff(n,!t)}}}function Y7(n){return ff(n)}function X7(n,t,e={}){const{immediate:i=!0}=e,s=St(!1);let r=null;function o(){r&&(clearTimeout(r),r=null)}function l(){s.value=!1,o()}function h(...u){o(),s.value=!0,r=setTimeout(()=>{s.value=!1,r=null,n(...u)},Re(t))}return i&&(s.value=!0,Mw&&h()),_l(l),{isPending:Mo(s),start:h,stop:l}}function Cn(n){var t;const e=Re(n);return(t=e==null?void 0:e.$el)!=null?t:e}const Nr=Mw?window:void 0;function Av(...n){let t,e,i,s;if(typeof n[0]=="string"||Array.isArray(n[0])?([e,i,s]=n,t=Nr):[t,e,i,s]=n,!t)return On;Array.isArray(e)||(e=[e]),Array.isArray(i)||(i=[i]);const r=[],o=()=>{r.forEach(d=>d()),r.length=0},l=(d,g,p,m)=>(d.addEventListener(g,p,m),()=>d.removeEventListener(g,p,m)),h=We(()=>[Cn(t),Re(s)],([d,g])=>{if(o(),!d)return;const p=R7(g)?{...g}:g;r.push(...e.flatMap(m=>i.map(y=>l(d,m,y,p))))},{immediate:!0,flush:"post"}),u=()=>{h(),o()};return _l(u),u}function W7(){const n=St(!1),t=Fo();return t&&Di(()=>{n.value=!0},t),n}function Aw(n){const t=W7();return yt(()=>(t.value,!!n()))}function Ih(n,t,e={}){const{window:i=Nr,...s}=e;let r;const o=Aw(()=>i&&"ResizeObserver"in i),l=()=>{r&&(r.disconnect(),r=void 0)},h=yt(()=>{const g=Re(n);return Array.isArray(g)?g.map(p=>Cn(p)):[Cn(g)]}),u=We(h,g=>{if(l(),o.value&&i){r=new ResizeObserver(t);for(const p of g)p&&r.observe(p,s)}},{immediate:!0,flush:"post"}),d=()=>{l(),u()};return _l(d),{isSupported:o,stop:d}}function gf(n,t={width:0,height:0},e={}){const{window:i=Nr,box:s="content-box"}=e,r=yt(()=>{var g,p;return(p=(g=Cn(n))==null?void 0:g.namespaceURI)==null?void 0:p.includes("svg")}),o=St(t.width),l=St(t.height),{stop:h}=Ih(n,([g])=>{const p=s==="border-box"?g.borderBoxSize:s==="content-box"?g.contentBoxSize:g.devicePixelContentBoxSize;if(i&&r.value){const m=Cn(n);if(m){const y=m.getBoundingClientRect();o.value=y.width,l.value=y.height}}else if(p){const m=Array.isArray(p)?p:[p];o.value=m.reduce((y,{inlineSize:_})=>y+_,0),l.value=m.reduce((y,{blockSize:_})=>y+_,0)}else o.value=g.contentRect.width,l.value=g.contentRect.height},e);kw(()=>{const g=Cn(n);g&&(o.value="offsetWidth"in g?g.offsetWidth:t.width,l.value="offsetHeight"in g?g.offsetHeight:t.height)});const u=We(()=>Cn(n),g=>{o.value=g?t.width:0,l.value=g?t.height:0});function d(){h(),u()}return{width:o,height:l,stop:d}}function N7(n,t,e={}){const{root:i,rootMargin:s="0px",threshold:r=0,window:o=Nr,immediate:l=!0}=e,h=Aw(()=>o&&"IntersectionObserver"in o),u=yt(()=>{const y=Re(n);return(Array.isArray(y)?y:[y]).map(Cn).filter(j7)});let d=On;const g=St(l),p=h.value?We(()=>[u.value,Cn(i),g.value],([y,_])=>{if(d(),!g.value||!y.length)return;const b=new IntersectionObserver(t,{root:Cn(_),rootMargin:s,threshold:r});y.forEach(x=>x&&b.observe(x)),d=()=>{b.disconnect(),d=On}},{immediate:l,flush:"post"}):On,m=()=>{d(),p(),g.value=!1};return _l(m),{isSupported:h,isActive:g,pause(){d(),g.value=!1},resume(){g.value=!0},stop:m}}function U7(n,t={}){const{window:e=Nr,scrollTarget:i,threshold:s=0}=t,r=St(!1);return N7(n,o=>{let l=r.value,h=0;for(const u of o)u.time>=h&&(h=u.time,l=u.isIntersecting);r.value=l},{root:i,window:e,threshold:s}),r}const G7={json:"application/json",text:"text/plain"};function Dv(n){return n&&B7(n,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch","updateDataOnError")}function Td(n){return typeof Headers<"u"&&n instanceof Headers?Object.fromEntries(n.entries()):n}function Dw(n,...t){var e;const i=typeof AbortController=="function";let s={},r={immediate:!0,refetch:!1,timeout:0,updateDataOnError:!1};const o={method:"GET",type:"text",payload:void 0};t.length>0&&(Dv(t[0])?r={...r,...t[0]}:s=t[0]),t.length>1&&Dv(t[1])&&(r={...r,...t[1]});const{fetch:l=(e=Nr)==null?void 0:e.fetch,initialData:h,timeout:u}=r,d=Cd(),g=Cd(),p=Cd(),m=St(!1),y=St(!1),_=St(!1),b=St(null),x=ja(null),T=ja(null),O=ja(h||null),P=yt(()=>i&&y.value);let F,X;const R=()=>{i&&(F==null||F.abort(),F=new AbortController,F.signal.onabort=()=>_.value=!0,s={...s,signal:F.signal})},V=dt=>{y.value=dt,m.value=!dt};u&&(X=X7(R,u,{immediate:!1}));let $=0;const st=async(dt=!1)=>{var _t,gt;R(),V(!0),T.value=null,b.value=null,_.value=!1,$+=1;const Kt=$,zt={method:o.method,headers:{}};if(o.payload){const qt=Td(zt.headers),oe=Re(o.payload);!o.payloadType&&oe&&Object.getPrototypeOf(oe)===Object.prototype&&!(oe instanceof FormData)&&(o.payloadType="json"),o.payloadType&&(qt["Content-Type"]=(_t=G7[o.payloadType])!=null?_t:o.payloadType),zt.body=o.payloadType==="json"?JSON.stringify(oe):oe}let Ut=!1;const ne={url:Re(n),options:{...zt,...s},cancel:()=>{Ut=!0}};if(r.beforeFetch&&Object.assign(ne,await r.beforeFetch(ne)),Ut||!l)return V(!1),Promise.resolve(null);let pe=null;return X&&X.start(),l(ne.url,{...zt,...ne.options,headers:{...Td(zt.headers),...Td((gt=ne.options)==null?void 0:gt.headers)}}).then(async qt=>{if(x.value=qt,b.value=qt.status,pe=await qt.clone()[o.type](),!qt.ok)throw O.value=h||null,new Error(qt.statusText);return r.afterFetch&&({data:pe}=await r.afterFetch({data:pe,response:qt})),O.value=pe,d.trigger(qt),qt}).catch(async qt=>{let oe=qt.message||qt.name;if(r.onFetchError&&({error:oe,data:pe}=await r.onFetchError({data:pe,error:qt,response:x.value})),T.value=oe,r.updateDataOnError&&(O.value=pe),g.trigger(qt),dt)throw qt;return null}).finally(()=>{Kt===$&&V(!1),X&&X.stop(),p.trigger(null)})},ht=Sd(r.refetch);We([ht,Sd(n)],([dt])=>dt&&st(),{deep:!0});const ut={isFinished:Mo(m),isFetching:Mo(y),statusCode:b,response:x,error:T,data:O,canAbort:P,aborted:_,abort:R,execute:st,onFetchResponse:d.on,onFetchError:g.on,onFetchFinally:p.on,get:ct("GET"),put:ct("PUT"),post:ct("POST"),delete:ct("DELETE"),patch:ct("PATCH"),head:ct("HEAD"),options:ct("OPTIONS"),json:Et("json"),text:Et("text"),blob:Et("blob"),arrayBuffer:Et("arrayBuffer"),formData:Et("formData")};function ct(dt){return(_t,gt)=>{if(!y.value)return o.method=dt,o.payload=_t,o.payloadType=gt,Se(o.payload)&&We([ht,Sd(o.payload)],([Kt])=>Kt&&st(),{deep:!0}),{...ut,then(Kt,zt){return bt().then(Kt,zt)}}}}function bt(){return new Promise((dt,_t)=>{Y7(m).toBe(!0).then(()=>dt(ut)).catch(gt=>_t(gt))})}function Et(dt){return()=>{if(!y.value)return o.type=dt,{...ut,then(_t,gt){return bt().then(_t,gt)}}}}return r.immediate&&Promise.resolve().then(()=>st()),{...ut,then(dt,_t){return bt().then(dt,_t)}}}const jv=1;function $7(n,t={}){const{throttle:e=0,idle:i=200,onStop:s=On,onScroll:r=On,offset:o={left:0,right:0,top:0,bottom:0},eventListenerOptions:l={capture:!1,passive:!0},behavior:h="auto",window:u=Nr,onError:d=R=>{console.error(R)}}=t,g=St(0),p=St(0),m=yt({get(){return g.value},set(R){_(R,void 0)}}),y=yt({get(){return p.value},set(R){_(void 0,R)}});function _(R,V){var $,st,ht,ut;if(!u)return;const ct=Re(n);if(!ct)return;(ht=ct instanceof Document?u.document.body:ct)==null||ht.scrollTo({top:($=Re(V))!=null?$:y.value,left:(st=Re(R))!=null?st:m.value,behavior:Re(h)});const bt=((ut=ct==null?void 0:ct.document)==null?void 0:ut.documentElement)||(ct==null?void 0:ct.documentElement)||ct;m!=null&&(g.value=bt.scrollLeft),y!=null&&(p.value=bt.scrollTop)}const b=St(!1),x=Kn({left:!0,right:!1,top:!0,bottom:!1}),T=Kn({left:!1,right:!1,top:!1,bottom:!1}),O=R=>{b.value&&(b.value=!1,T.left=!1,T.right=!1,T.top=!1,T.bottom=!1,s(R))},P=V7(O,e+i),F=R=>{var V;if(!u)return;const $=((V=R==null?void 0:R.document)==null?void 0:V.documentElement)||(R==null?void 0:R.documentElement)||Cn(R),{display:st,flexDirection:ht}=getComputedStyle($),ut=$.scrollLeft;T.left=ut<g.value,T.right=ut>g.value;const ct=Math.abs(ut)<=(o.left||0),bt=Math.abs(ut)+$.clientWidth>=$.scrollWidth-(o.right||0)-jv;st==="flex"&&ht==="row-reverse"?(x.left=bt,x.right=ct):(x.left=ct,x.right=bt),g.value=ut;let Et=$.scrollTop;R===u.document&&!Et&&(Et=u.document.body.scrollTop),T.top=Et<p.value,T.bottom=Et>p.value;const dt=Math.abs(Et)<=(o.top||0),_t=Math.abs(Et)+$.clientHeight>=$.scrollHeight-(o.bottom||0)-jv;st==="flex"&&ht==="column-reverse"?(x.top=_t,x.bottom=dt):(x.top=dt,x.bottom=_t),p.value=Et},X=R=>{var V;if(!u)return;const $=(V=R.target.documentElement)!=null?V:R.target;F($),b.value=!0,P(R),r(R)};return Av(n,"scroll",e?H7(X,e,!0,!1):X,l),kw(()=>{try{const R=Re(n);if(!R)return;F(R)}catch(R){d(R)}}),Av(n,"scrollend",O,l),{x:m,y,isScrolling:b,arrivedState:x,directions:T,measure(){const R=Re(n);u&&R&&F(R)}}}function K7(n){return typeof Window<"u"&&n instanceof Window?n.document.documentElement:typeof Document<"u"&&n instanceof Document?n.documentElement:n}function jw(n,t,e={}){var i;const{direction:s="bottom",interval:r=100,canLoadMore:o=()=>!0}=e,l=Kn($7(n,{...e,offset:{[s]:(i=e.distance)!=null?i:0,...e.offset}})),h=St(),u=yt(()=>!!h.value),d=yt(()=>K7(Re(n))),g=U7(d);function p(){if(l.measure(),!d.value||!g.value||!o(d.value))return;const{scrollHeight:m,clientHeight:y,scrollWidth:_,clientWidth:b}=d.value,x=s==="bottom"||s==="top"?m<=y:_<=b;(l.arrivedState[s]||x)&&(h.value||(h.value=Promise.all([t(l),new Promise(T=>setTimeout(T,r))]).finally(()=>{h.value=null,_s(()=>p())})))}return We(()=>[l.arrivedState[s],g.value],p,{immediate:!0}),{isLoading:u,reset(){_s(()=>p())}}}function Iw(n,t){const{containerStyle:e,wrapperProps:i,scrollTo:s,calculateRange:r,currentList:o,containerRef:l}="itemHeight"in t?J7(t,n):Z7(t,n);return{list:o,scrollTo:s,containerProps:{ref:l,onScroll:()=>{r()},style:e},wrapperProps:i}}function Rw(n){const t=St(null),e=gf(t),i=St([]),s=ja(n);return{state:St({start:0,end:10}),source:s,currentList:i,size:e,containerRef:t}}function Lw(n,t,e){return i=>{if(typeof e=="number")return Math.ceil(i/e);const{start:s=0}=n.value;let r=0,o=0;for(let l=s;l<t.value.length;l++){const h=e(l);if(r+=h,o=l,r>i)break}return o-s}}function Fw(n,t){return e=>{if(typeof t=="number")return Math.floor(e/t)+1;let i=0,s=0;for(let r=0;r<n.value.length;r++){const o=t(r);if(i+=o,i>=e){s=r;break}}return s+1}}function Bw(n,t,e,i,{containerRef:s,state:r,currentList:o,source:l}){return()=>{const h=s.value;if(h){const u=e(n==="vertical"?h.scrollTop:h.scrollLeft),d=i(n==="vertical"?h.clientHeight:h.clientWidth),g=u-t,p=u+d+t;r.value={start:g<0?0:g,end:p>l.value.length?l.value.length:p},o.value=l.value.slice(r.value.start,r.value.end).map((m,y)=>({data:m,index:y+r.value.start}))}}}function zw(n,t){return e=>typeof n=="number"?e*n:t.value.slice(0,e).reduce((i,s,r)=>i+n(r),0)}function Vw(n,t,e,i){We([n.width,n.height,t,e],()=>{i()})}function Hw(n,t){return yt(()=>typeof n=="number"?t.value.length*n:t.value.reduce((e,i,s)=>e+n(s),0))}const q7={horizontal:"scrollLeft",vertical:"scrollTop"};function Yw(n,t,e,i){return s=>{i.value&&(i.value[q7[n]]=e(s),t())}}function Z7(n,t){const e=Rw(t),{state:i,source:s,currentList:r,size:o,containerRef:l}=e,h={overflowX:"auto"},{itemWidth:u,overscan:d=5}=n,g=Lw(i,s,u),p=Fw(s,u),m=Bw("horizontal",d,p,g,e),y=zw(u,s),_=yt(()=>y(i.value.start)),b=Hw(u,s);Vw(o,t,l,m);const x=Yw("horizontal",m,y,l),T=yt(()=>({style:{height:"100%",width:`${b.value-_.value}px`,marginLeft:`${_.value}px`,display:"flex"}}));return{scrollTo:x,calculateRange:m,wrapperProps:T,containerStyle:h,currentList:r,containerRef:l}}function J7(n,t){const e=Rw(t),{state:i,source:s,currentList:r,size:o,containerRef:l}=e,h={overflowY:"auto"},{itemHeight:u,overscan:d=5}=n,g=Lw(i,s,u),p=Fw(s,u),m=Bw("vertical",d,p,g,e),y=zw(u,s),_=yt(()=>y(i.value.start)),b=Hw(u,s);Vw(o,t,l,m);const x=Yw("vertical",m,y,l),T=yt(()=>({style:{width:"100%",height:`${b.value-_.value}px`,marginTop:`${_.value}px`}}));return{calculateRange:m,scrollTo:x,containerStyle:h,wrapperProps:T,currentList:r,containerRef:l}}const Q7=Qt({props:{overflowHidden:{type:Boolean,default:!1}}});function tj(n,t,e,i,s,r){return U(),Z("div",{class:li(["sidebar-panel__wrapper",{"drag-overflow-hidden":n.overflowHidden}]),style:{overflow:"hidden"}},[Un(n.$slots,"wrapper")],2)}const Xw=Ht(Q7,[["render",tj]]),Jn=()=>{const n=Wr(),{canvas:t}=Dn(),e=()=>{const o=t.value;return o==null?void 0:o.getActiveObject()},[i,s]=Pw(e());yt(()=>n.getIsEffects);const r=()=>{const o=t.value.getActiveObject();s(o)};return Di(()=>{const o=t.value;o&&(o.on("selection:created",r),o.on("selection:updated",r),o.on("selection:cleared",r))}),Lr(()=>{const o=t.value;o&&(o.off("selection:created",r),o.off("selection:updated",r),o.off("selection:cleared",r))}),{activeObject:i}},uo=St(),Hi=()=>{const{canvas:n}=Dn(),{activeObject:t}=Jn();return{scaleElementToCanvasSize:(e,i=.5)=>{let s=e.width,r=e.height;const o=n.value.designRect.width,l=n.value.designRect.height,h=Math.min(o,l),u=Math.max(s,r);e.scaleX=h/u*i,e.scaleY=h/u*i,e.setCoords()},elementUpdate:(e,i)=>{t.value&&(t.value.set(e,i),t.value.setCoords(),n.value.requestRenderAll())},copyElement:()=>{const e=n.value,i=[],s=e.getActiveObject();return s&&s.clone(i).then(r=>{uo.value=r}),!0},pasteElement:()=>{const e=n.value,i=[];return console.log(uo.value,"clipboard.value"),uo.value?(uo.value.clone(i).then(s=>{e.discardActiveObject(),s.set({left:s.left+20,top:s.top+20,evented:!0}),s.type==="activeSelection"?(s.canvas=e,s.forEachObject(o=>{e.add(o)})):(s.superType==="node"&&(s=s.duplicate()),e.add(s));const r=uo.value.set({top:s.top,left:s.left});uo.value=r,s.setCoords(),e.setActiveObject(s),e.requestRenderAll()}),!0):!1},deleteElement:()=>{const e=n.value;let i=e.getActiveObject();if(i){if(i.isType("ActiveSelection"))for(let s of i.getObjects())e.remove(s);else e.remove(i);e.discardActiveObject(),e.requestRenderAll()}},lockElement:()=>{const e=t.value;e&&(e.set({lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,hasControls:!1,locked:!0}),e.setCoords(),n.value.renderAll())},unLockElement:()=>{const e=t.value;e&&(e.set({lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,hasControls:!0,locked:!1}),e.setCoords(),n.value.renderAll())},groupElements:()=>{const e=n.value.getActiveObject();if(!e||!e.isType("activeselection"))return;const i=n.value.getActiveObjects();n.value.discardActiveObject();const s=new ki(i,{interactive:!0,subTargetCheck:!0,isActiveGroup:!0,objectCaching:!1});n.value.remove(...i),n.value.add(s),n.value.setActiveObject(s),n.value.renderAll()},unGroupElements:()=>{}}},Ww=()=>{const{canvas:n}=Dn(),t=Hi(),e=()=>{const s={fontFamily:"EmparioArmani",fontSize:120,lineHeight:.9,scaleX:1,scaleY:1,textAlign:"center",fontStyle:"normal",objectCaching:!1,perPixelTargetFind:!1,strokeNofill:!0,width:700};return new Xr("This is a text",s)},i=s=>{const r=new Yr("",{width:s.imageWidth||s.orgWidth||s.width,height:s.imageHeight||s.orgHeight||s.height});let o=s.url;return s.src&&(o=s.src),s.thumbnail&&(r._element=s.thumbnail,r.originalImageSize={width:s.thumbnail.width,height:s.thumbnail.height},r.imageViewport={x:0,y:0,width:1,height:1}),r.setSource(o,"imageUrl",function(l){console.log(l,"e")},{width:r.width,height:r.height}),t.scaleElementToCanvasSize(r,.25),r};return{createElement:async s=>{let r=n.value.getArtboard().width,o=n.value.getArtboard().height,l;s.type==="EditorImage"?l=await i(s):s.type==="EditorTextbox"&&(l=e()),l&&(l.top=s.top??o/2-l.getScaledHeight()/2,l.left=s.left??r/2-l.getScaledWidth()/2,l.setCoords(),n.value.add(l),n.value.setActiveObject(l),n.value.requestRenderAll())}}},ej=Qt({props:{width:{type:Number},height:{type:Number},thumbUrl:{type:String},margin:{type:Number,default:12},active:{type:Boolean,default:!1}},emits:["selected-item"],setup(n,{emit:t}){return{onSelectedItem:e=>{console.log("onSelectedItem"),t("selected-item",e)}}}});var ij={class:"item-image"},nj=["srcset","src"];function sj(n,t,e,i,s,r){return U(),Z("div",{class:li(["base-item-image",{"base-item-image--selected":n.active}]),style:qi(" width: ".concat(n.width,"px; margin: 0px ").concat(n.margin,"px; height: ").concat(n.height,"px; "))},[z("div",ij,[z("img",{srcset:n.thumbUrl,src:n.thumbUrl,class:"image",draggable:"false",alt:"",crossOrigin:"anonymous",onClick:t[0]||(t[0]=Hf(function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return n.onSelectedItem&&n.onSelectedItem.apply(n,o)},["stop"]))},null,8,nj),t[1]||(t[1]=z("div",{class:"image-overlay"},null,-1))])],6)}const Nw=Ht(ej,[["render",sj],["__scopeId","data-v-340ed6e6"]]),rj=n=>{let t=null;const e=()=>{var i,s;t={top:((i=n.value)==null?void 0:i.scrollTop)??0,left:((s=n.value)==null?void 0:s.scrollLeft)??0}};N1(async()=>{var i,s;await _s(),t&&((i=n.value)==null||i.scroll(t)),(s=n.value)==null||s.addEventListener("scroll",e)}),U1(()=>{var i;(i=n.value)==null||i.removeEventListener("scroll",e)})},oj=(n,t,e)=>(e*=n.length-1,n=Uw(n),t>n+e),aj=(n,t)=>n.map(e=>(e=Object.assign({},e),e.width=Math.max(e.minWidth||0,t/e.height*e.width),e.height=t,e)),Uw=n=>n.reduce((t,e)=>t+e.width,0),lj=(n,t,e,i=0)=>!(n===0||t>=e||Math.abs(e-n)>Math.abs(e-t))||t<i||t===0,Iv=(n,t,e)=>(e=e.some(i=>i.footer)||t.some(i=>i.Fb!=null),n=n.length<t.length?t[n.length].Gqa:0,e?n:0),Rv=(n,t,e,i=0,s=Number.MAX_VALUE,r=0)=>({height:Math.max(i,Math.min(t,s)),elements:n.map(o=>({child:o,width:Math.max(t/o.height*o.width,e,o.minWidth||0),footer:o.footer})),Gqa:r}),Ic=(n,t,e,i)=>{let s=(n.length-1)*e;if(n.length*i>t-s)return 0;const r=Uw(n),o=(t-s)/r;return s=n.filter(l=>l.width*o>=i),s.length===n.length?o*n[0].height:(n=n.length-s.length,Ic(s,t-n*i-n*e,e,i))},Gw=()=>{let n=[];return{assetsGridlayout:(t,e)=>{if(!t||e.length===0)return[];const i={b:t.clientWidth-8,c:112,d:void 0,e:void 0,f:8,g:1,h:58,k:!1,l:!1,m:!0,children:e},{b:s,c:r,d:o,e:l,f:h,g:u=1,h:d,k:g,l:p,m}=i;if(s!=null){let y=0,_=[],b=i.Dea||1/0,x=[...n];n=[];let T=i.children.filter(P=>0<P.width&&0<P.height),O=aj(T,r);T=0,0<O.length&&(_=[O[0]],y=Ic(_,s,h,d));for(const P of O.slice(1))if(O=y,y=Ic([..._,P],s,h,d),lj(O,y,r,o)){const F=Iv(n,x,_),X=Rv(_,O,d,o,l,F);if(n.push(X),T+=_.length,b<=n.length&&T>=u)break;_=[P],y=Ic(_,s,h,d)}else _.push(P);if(0<_.length&&(b>n.length||u>T)){let P;if(b=oj(_,s,h),g&&b&&0<n.length)return;x=Iv(n,x,_),b=m&&b&&!((P=n[n.length-1])===null||P===void 0)&&P.height?n[n.length-1].height:Math.min(r,y),n.push(Rv(_,b,d,o,l,x))}}return n},assetsListLayout:(t,e)=>!t||e.length===0?[]:e}},$w=n=>{const{isBearerTokenRequired:t,query:e,json:i}=n;return s=>xg(s,[cj(t),hj(e),dj(i)])},xg=(n,t)=>t.reduce((e,i)=>i(e),n),cj=(n=!1)=>n?t=>(t.cancel(),t):Xo,hj=n=>{const t=uh(n);return!t||Object.keys(t).length===0?Xo:e=>(e.url+=uj(t),e)},uj=n=>{const t=new URLSearchParams;for(const[i,s]of Object.entries(n)){if(Array.isArray(s)){s.forEach(r=>t.append(i,r.toString()));continue}s&&t.append(i,s.toString())}const e=t.toString();return e.length>0?`?${e}`:""},dj=n=>{const t=uh(n);return t?e=>(e.options.headers={...e.options.headers,"Content-Type":"application/json"},e.options.body=JSON.stringify(fj(t)),e):Xo},fj=n=>Object.fromEntries(Object.entries(n).filter(([t,e])=>e!==""&&e!==void 0&&e!==null)),Kw=n=>{const{responseSchema:t,errorResponseSchema:e}=n;return i=>xg(i,[gj(t),pj(e)])},gj=n=>n?t=>{if(!t.response.ok)return t;if(!n.safeParse(t.data).success)throw new TypeError("TYPE_ERROR");return t}:Xo,pj=n=>n?t=>{if(t.response.ok)return t;if(!n.safeParse(t.data).success)throw new TypeError("TYPE_ERROR");return t}:Xo,qw=n=>{const{errorResponseSchema:t}=n;return e=>xg(e,[mj(),vj(),yj(),_j(t)])},mj=()=>n=>(n.error,n),vj=()=>n=>(n.error,n),yj=()=>n=>(n.response,n),_j=n=>n?t=>{const e=typeof t.data=="string"?JSON.parse(t.data):t.data;return n.safeParse(e).success,t}:Xo,Xo=n=>n,Zw=function(n){const t=n.scrollHeight>n.clientHeight,e=window.getComputedStyle(n).overflowY.indexOf("hidden")!==-1;return t&&!e},wj="https://pixabay.com/api/",bj="45921881-4317fce2111e9cd4e835e278e",xj=()=>({getPixabayImages:n=>{const t=St(50),e=St(0),i=St(1),s=St(!1),r=St([]),o=St(!0),l=St();let h=[];const u=uh(n.query);for(const[g,p]of Object.entries(u))g==="per_page"&&(t.value=p),g==="page"&&(e.value=p);const d=async()=>{o.value=!0,l.value=void 0,n.query={key:`${bj}`,...n.query,per_page:`${t.value}`,page:`${e.value}`};const{data:g}=await Dw(wj,{beforeFetch:$w(n),afterFetch:Kw(n),onFetchError:qw(n)}).get();o.value=!1;try{const p=JSON.parse(g.value),m=p.hits;i.value=Math.ceil(p.totalHits/t.value),h?h=h.concat(m):h=m,r.value=h,s.value=e.value<i.value}catch(p){o.value=!1,l.value=p,r.value=[],s.value=!1}};return We(e,()=>{e.value>0&&e.value<=i.value?d():e.value=i.value}),{data:r,isFetching:o,error:l,page:e,hasNextPage:s,isScrollable:Zw}}}),Cj={components:{BasePanel:Xw,BaseItem:Nw,BaseTooltip:Ge},setup(n,{expose:t}){const e=Ww(),{getPixabayImages:i}=xj(),{assetsGridlayout:s,assetsListLayout:r}=Gw(),o=St(),l=St(!1),h=St(),u=25,d=St(1),g=St("people"),p=($,st)=>{const ht={type:"EditorImage",...st,thumbnail:$.target,crossOrigin:"anonymous"};e.createElement(ht)},{data:m,isFetching:y,error:_,page:b,hasNextPage:x,isScrollable:T}=i({isBearerTokenRequired:!1,query:{q:`${g.value}`,image_type:"photo",per_page:`${u}`,page:`${d.value}`,pretty:!0}}),O=yt(()=>m.value.map($=>({id:$.id,type:"EditorImage",width:$.imageWidth,height:$.imageHeight,url:$.largeImageURL,src:$.largeImageURL,thumbUrl:$.previewURL,crossOrigin:"anonymous"}))),P=yt(()=>(h.value=s(o.value,O.value),h.value)),{list:F,containerProps:X,wrapperProps:R,scrollTo:V}=Iw(P,{itemHeight:$=>{const st=8+20/P.value.length;return P.value[$].height+st},overscan:10});return t({scrollTo:V}),rj(X.ref),Di(()=>{jw(X.ref,()=>{x.value&&(b.value+=1)},{distance:10,throttle:200}),Ih(X.ref,()=>{h.value=s(o.value,O.value),T(X.ref.value)||(b.value=d.value)})}),{overflowHidden:l,photoEl:o,listPhotos:F,containerProps:X,wrapperProps:R,onAddImage:p,data:m}}};var Sj={ref:"photoEl",class:"sidebar-panel__photos"},Tj={style:{display:"flex","flex-direction":"column","min-width":"100%","min-height":"100%"}};function Oj(n,t,e,i,s,r){var o=ft("BaseItem"),l=ft("BasePanel");return U(),vi(l,{overflowHidden:i.overflowHidden},{wrapper:Mt(function(){return[z("div",{class:"sidebar-panel__scroll",ref:i.containerProps.ref,onScroll:t[0]||(t[0]=function(){for(var h,u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];return i.containerProps.onScroll&&(h=i.containerProps).onScroll.apply(h,u)})},[z("div",hl(i.wrapperProps,{class:"sidebar-panel__inner"}),[z("div",Sj,[z("div",Tj,[(U(!0),Z(Ce,null,Zs(i.listPhotos,function(h){var u=h.data,d=h.index;return U(),Z("div",{key:d,style:"margin: ".concat(4,"px 0px;")},[z("div",{class:"flex flex-row",style:qi("height: ".concat(u.height,"px; margin: 0px ").concat(0,"px;"))},[(U(!0),Z(Ce,null,Zs(u.elements,function(g,p){return U(),vi(o,{key:p,"aria-id":g.child.id,"aria-index":p,height:u.height,width:g.width,thumbUrl:g.child.thumbUrl,margin:4,onSelectedItem:function(m){return i.onAddImage(m,g.child)}},null,8,["aria-id","aria-index","height","width","thumbUrl","onSelectedItem"])}),128))],4)])}),128))])],512)],16)],544)]}),_:1},8,["overflowHidden"])}const Pj=Ht(Cj,[["render",Oj]]),Mj="https://www.fotor.com",Ej=()=>({getBasicShapes:n=>{const t=`${Mj}//api/app/sticker/v2/search`,e=St(50),i=St(0),s=St(1),r=St(!1),o=St([]),l=St(!0),h=St();let u=[];const d=uh(n.query);for(const[p,m]of Object.entries(d))p==="pageSize"&&(e.value=m),p==="pageNo"&&(i.value=m);const g=async()=>{l.value=!0,h.value=void 0,n.query={...n.query,pageSize:`${e.value}`,pageNo:`${i.value}`};const{data:p}=await Dw(t,{beforeFetch:$w(n),afterFetch:Kw(n),onFetchError:qw(n)}).get();l.value=!1;try{const m=JSON.parse(p.value).data;s.value=m.totalPage,u?u=u.concat(m.data):u=m.data,o.value=u,r.value=m.hasNextPage}catch(m){l.value=!1,h.value=m,o.value=[],r.value=!1}};return We(i,()=>{i.value>0&&i.value<=s.value?g():i.value=s.value}),{data:o,isFetching:l,error:h,page:i,hasNextPage:r,isScrollable:Zw}}}),kj=Qt({components:{BasePanel:Xw,BaseItem:Nw},setup(){const{getBasicShapes:n}=Ej(),{assetsGridlayout:t,assetsListLayout:e}=Gw(),i=St(),s=St(!1),r=St(),o=25,l=St(1),{data:h,isFetching:u,error:d,page:g,hasNextPage:p,isScrollable:m}=n({isBearerTokenRequired:!1,query:{category:"2",pageNo:`${l.value}`,pageSize:`${o}`}}),y=yt(()=>h.value.map(P=>({id:P.id,type:"EditorImage",width:P.width,height:P.height,orgWidth:P.width,orgHeight:P.height,resId:P.resId,url:"https://pub-static.fotor.com"+P.url,src:"https://pub-static.fotor.com"+P.url,thumbUrl:"https://pub-static.fotor.com"+P.thumb,folderId:"",fileName:P.fileName,crossOrigin:"anonymous"}))),_=yt(()=>(r.value=t(i.value,y.value),r.value)),{list:b,containerProps:x,wrapperProps:T,scrollTo:O}=Iw(_,{itemHeight:P=>{const F=8+20/_.value.length;return _.value[P].height+F},overscan:10});return Di(()=>{jw(x.ref,()=>{p.value&&(g.value+=1)},{distance:10,throttle:200}),Ih(x.ref,()=>{r.value=t(i.value,y.value),m(x.ref.value)||(g.value=l.value)})}),{overflowHidden:s,shapeEl:i,listShapes:b,containerProps:x,wrapperProps:T,data:h}}});var Aj={ref:"shapeEl",class:"sidebar-panel__photos"},Dj={style:{display:"flex","flex-direction":"column","min-width":"100%","min-height":"100%"}};function jj(n,t,e,i,s,r){var o=ft("BaseItem"),l=ft("BasePanel");return U(),vi(l,{overflowHidden:n.overflowHidden},{wrapper:Mt(function(){return[z("div",{class:"sidebar-panel__scroll",ref:n.containerProps.ref,onScroll:t[0]||(t[0]=function(){for(var h,u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];return n.containerProps.onScroll&&(h=n.containerProps).onScroll.apply(h,u)})},[z("div",hl(n.wrapperProps,{class:"sidebar-panel__inner"}),[z("div",Aj,[z("div",Dj,[(U(!0),Z(Ce,null,Zs(n.listShapes,function(h){var u=h.data,d=h.index;return U(),Z("div",{key:d,style:"margin: ".concat(4,"px 0px;")},[z("div",{class:"flex flex-row",style:qi("height: ".concat(u.height,"px; margin: 0px ").concat(0,"px;"))},[(U(!0),Z(Ce,null,Zs(u.elements,function(g,p){return U(),vi(o,{key:p,"aria-id":g.child.id,"aria-index":p,height:u.height,width:g.width,thumbUrl:g.child.thumbUrl,margin:4,onSelectedItem:function(m){return n.onAddImage(m,g.child)}},null,8,["aria-id","aria-index","height","width","thumbUrl","onSelectedItem"])}),128))],4)])}),128))])],512)],16)],544)]}),_:1},8,["overflowHidden"])}const Ij=Ht(kj,[["render",jj]]),Rj=Qt({setup(){const n=Ww();return{onAddTextHeadline:()=>{n.createElement({type:"EditorTextbox"})}}}});var Lj={class:"w-full px-5"};function Fj(n,t,e,i,s,r){return U(),Z("div",Lj,[t[2]||(t[2]=z("div",{class:"p-selectbutton p-component w-full",role:"group","aria-labelledby":"basic","data-pc-name":"selectbutton","data-pc-section":"root",pc1930:""},[z("button",{type:"button",class:"p-togglebutton p-component p-togglebutton-checked flex-1","aria-pressed":"true","data-pc-name":"pcbutton","data-pc-extend":"togglebutton","data-pc-section":"root","data-p-checked":"true","data-p-disabled":"false"},[z("span",{class:"p-togglebutton-content","data-pc-section":"content"},[z("span",{class:"p-togglebutton-label","data-pc-section":"label"},ms("Text Styles"))])]),z("button",{type:"button",class:"p-togglebutton p-component flex-1","aria-pressed":"false","data-pc-name":"pcbutton","data-pc-extend":"togglebutton","data-pc-section":"root","data-p-checked":"false","data-p-disabled":"false"},[z("span",{class:"p-togglebutton-content","data-pc-section":"content"},[z("span",{class:"p-togglebutton-label","data-pc-section":"label"},ms("My Fonts"))])])],-1)),z("div",null,[z("div",{class:"sidebar-panel__title mt-3",draggable:"true",onClick:t[0]||(t[0]=function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return n.onAddTextHeadline&&n.onAddTextHeadline.apply(n,o)})},t[1]||(t[1]=[z("span",null,ms("Add Text"),-1)]))]),t[3]||(t[3]=z("div",null,null,-1))])}const Bj=Ht(Rj,[["render",Fj],["__scopeId","data-v-7900da01"]]),zj={setup(){const n=Wr(),t=yt(()=>n.getIsToggleSidebar),e=yt(()=>n.getIsEffects||n.getIsFontFamily);return{drawer:t,isShow:e,toggleSidebar:()=>{n.setIsToggleSidebar(!t.value)}}}};var Vj={class:"sizer-wrap"},Hj={key:0,width:"24",height:"24",viewBox:"0 0 24 24",focusable:"false",role:"presentation"},Yj={key:1,width:"24",height:"24",viewBox:"0 0 24 24",focusable:"false",role:"presentation"};function Xj(n,t,e,i,s,r){return U(),Z("div",Vj,[t[4]||(t[4]=z("div",{class:"strip"},null,-1)),t[5]||(t[5]=z("div",{class:"sizer"},[z("div",{class:"line"})],-1)),z("button",{class:"btn",onClick:t[0]||(t[0]=function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return i.toggleSidebar&&i.toggleSidebar.apply(i,o)})},[t[3]||(t[3]=z("div",{class:"overlay"},null,-1)),z("span",null,[i.drawer?(U(),Z("svg",Hj,t[1]||(t[1]=[z("path",{d:"M13.706 9.698a.988.988 0 0 0 0-1.407 1.01 1.01 0 0 0-1.419 0l-2.965 2.94a1.09 1.09 0 0 0 0 1.548l2.955 2.93a1.01 1.01 0 0 0 1.42 0 .988.988 0 0 0 0-1.407l-2.318-2.297 2.327-2.307z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))):Js("",!0),i.drawer?Js("",!0):(U(),Z("svg",Yj,t[2]||(t[2]=[z("path",{d:"M10.294 9.698a.988.988 0 0 1 0-1.407 1.01 1.01 0 0 1 1.419 0l2.965 2.94a1.09 1.09 0 0 1 0 1.548l-2.955 2.93a1.01 1.01 0 0 1-1.42 0 .988.988 0 0 1 0-1.407l2.318-2.297-2.327-2.307z",fill:"currentColor","fill-rule":"evenodd"},null,-1)])))])])])}const Wj=Ht(zj,[["render",Xj]]),Nj={components:{BaseSiderbar:p7,BaseSidebarMenu:S7,BaseSidebarPanel:D7,Photos:Pj,Shapes:Ij,Text:Bj,Resizer:Wj},setup(){const n=Wr(),t=St(),e=yt(()=>h7),i=yt(()=>n.getIsToggleSidebar?78:72),s=yt(()=>n.getIsToggleSidebar?303:0),r=yt(()=>n.getActiveSidebarItem.sidebarItemType);return Di(()=>{n.setWrapperEl(t)}),{wrapperEl:t,menuItems:e,widthMenu:i,widthPanel:s,containerPanel:r}}};function Uj(n,t,e,i,s,r){var o=ft("BaseSidebarMenu"),l=ft("BaseSidebarPanel"),h=ft("Resizer"),u=ft("BaseSiderbar");return U(),vi(u,{widthMenu:i.widthMenu,widthPanel:i.widthPanel},{menu:Mt(function(){return[nt(o,{items:i.menuItems},null,8,["items"])]}),panel:Mt(function(){return[nt(l,null,{content:Mt(function(){return[(U(),vi(UP,null,[(U(),vi(Ka(i.containerPanel),{ref:"wrapperEl"},null,512))],1024))]}),_:1})]}),toggle:Mt(function(){return[nt(h)]}),_:1},8,["widthMenu","widthPanel"])}const Gj=Ht(Nj,[["render",Uj]]),$j=Qt({components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge}});var Kj={class:"flex-[2] flex flex-col mt-1px border-t border-surface"},qj={class:"flex-grow-2 h-0 overflow-hidden relative"},Zj={class:"h-full overflow-x-hidden overflow-y-scroll"},Jj={class:"w-full flex flex-col"},Qj={class:"flex flex-justify-end h-40px mt-4px px-8px py-4px bg-slate-200 border-t border-slate-200"};function tI(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip");return U(),Z("div",Kj,[t[0]||(t[0]=z("div",{class:"h-37px line-height-[37px] text-align-center bg-slate-200"}," Layers ",-1)),t[1]||(t[1]=z("div",{class:"splitter"},null,-1)),z("div",qj,[z("div",Zj,[z("ul",Jj,[(U(),Z(Ce,null,Zs([1,2,3,4,5,6,8,9,10,11,12],function(u,d){return z("li",{class:li(["inline-flex items-center gap-x-2 py-6 px-4 mx-0 text-sm font-medium text-gray-800 -mt-px first:mt-0 dark:text-white",{"bg-white":d%2===0},{"bg-slate-50":d%2!==0}]),key:d},ms(u),3)}),64))])])]),z("div",Qj,[nt(h,{text:"Duplicate",location:"top"},{default:Mt(function(){return[nt(l,null,{default:Mt(function(){return[nt(o,{name:"icon-duplicate"})]}),_:1})]}),_:1}),nt(h,{text:"Delete",location:"top"},{default:Mt(function(){return[nt(l,null,{default:Mt(function(){return[nt(o,{name:"icon-delete"})]}),_:1})]}),_:1})])])}const eI=Ht($j,[["render",tI],["__scopeId","data-v-f3831fab"]]),iI=(n,t)=>{let e=!1;for(let i=0,s=t.length-1;i<t.length;s=i,i+=1){const r=t[i].x,o=t[i].y,l=t[s].x,h=t[s].y;o>n.y!=h>n.y&&n.x<(l-r)*(n.y-o)/(h-o)+r&&(e=!e)}return e},Rh=()=>{const{canvas:n,setCanvas:t}=Dn(),e=St(1080),i=St(1080),s=_=>{const b=e.value,x=i.value,T=_.getBoundingClientRect();n.value.initialize({width:T.width,height:T.height},{width:b,height:x})},r=_=>{Ih(_,b=>{const[x]=b,{width:T,height:O}=x.contentRect,P=l();(!P||T!==P.width||O!==P.height)&&(n.value.updateCanvasSize({width:T,height:O},void 0),Ss.dispatchEvent(Cs.CANVAS_SIZE_CHANGED,n.value))})},o=()=>{var _;let b;const x=n.value,T=document.createElement("img");T.src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjFweCIgaGVpZ2h0PSIxMHB4IiB2aWV3Qm94PSIwIDAgMjEgMTAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUzLjIgKDcyNjQzKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5JY29uIC8gY3Vyc29yIC8gU3BpbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJhcHAtZGVzaWduIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iSWNvbi0vLWN1cnNvci0vLVNwaW4iIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjAwMDAwMCwgLTYuMDAwMDAwKSIgZmlsbD0iIzFCMUUyNCIgc3Ryb2tlPSIjRkZGRkZGIj4KICAgICAgICAgICAgPHBhdGggZD0iTTE5LjY5Njg2OSwxMC41ODIxMDQ1IEwyMi41LDcuNzk4OTgwOTUgTDIyLjUsMTUuNSBMMTQuNzQwNjc4LDE1LjUgTDE3LjcyODA3OSwxMi41MzYwNTYyIEMxNi4yNzAzOSwxMS42OTE3NzU0IDE0LjQ0MTU2NjksMTEuMjE0Mjg1NyAxMi41LDExLjIxNDI4NTcgQzEwLjU1ODQzMzEsMTEuMjE0Mjg1NyA4LjcyOTYxMDA0LDExLjY5MTc3NTQgNy4yNzE5MjA5NiwxMi41MzYwNTYyIEwxMC4yNTkzMjIsMTUuNSBMMi41LDE1LjUgTDIuNSw3Ljc5ODk4MDk1IEw1LjMwMzEzMDE5LDEwLjU4MjEwMzggQzcuMjc5ODExNDUsOS4yNTA2MTMwMyA5LjgxMzk0ODM1LDguNSAxMi41LDguNSBDMTUuMTg2MDUxNyw4LjUgMTcuNzIwMTg4NSw5LjI1MDYxMzAzIDE5LjY5Njg2OSwxMC41ODIxMDQ1IFoiIGlkPSJGaWxsLTEiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==",T.className="cursorImg",(_=x.lowerCanvasEl.parentNode)==null||_.appendChild(T),x.on(Wn.MOUSE_OVER,O=>{O&&O.e&&O.e.fabricObjectCorner&&O.e.fabricObjectCorner.key==="mtr"&&(b=O.target)}),x.on(Wn.MOUSE_MOVE,O=>{O.e.target===x.upperCanvasEl?(Object.assign(T.style,{opacity:x.upperCanvasEl.style.cursor!=="none"||x.copyStyleApplying?0:1}),O&&O.e&&O.target&&O.target===b&&Object.assign(T.style,{transform:`translate(-10px,-4px) rotate(${O.target.angle}deg)`,left:`${O.e.offsetX}px`,top:`${O.e.offsetY}px`})):T.style.opacity!=="0"&&(T.style.opacity="0")})},l=()=>n.value.canvasSize,h=()=>n.value.canvasSize,u=_=>_?n.value.getdesignRectWithZoom():n.value.getdesignRect(),d=_=>{const b=n.value,x=_.e;x.preventDefault(),x.stopPropagation();const T=x.deltaX;let O=x.deltaY;const P=x.ctrlKey,F=x.metaKey;if(P||F){Math.abs(O)>=30&&(O=O>0?4:-4);let X=b.getZoom();X+=-O/100,X=Math.round(100*X),p(X,_)}else b.moveCanvasByOffset(T,-O)},g=_=>{p(_)},p=(_,b)=>{const x=n.value;if(_!="fit"&&_!=="fitWidth"&&_!="original"){_&&(_=parseInt(_)/100);let T=x.centerPoint;const O=x.getArtboard();if(O.setCoords(),b&&O){const{tl:P,tr:F,bl:X,br:R}=O.calcOCoords(),V=[{x:P.x,y:P.y},{x:F.x,y:F.y},{x:R.x,y:R.y},{x:X.x,y:X.y}];iI(b.viewportPoint,V)&&(T=b.viewportPoint)}x.zoomToPoint(T,Number(_),!1)}y(),x.requestRenderAll()},m=_=>{const b=n.value,x=new D(_.x,_.y);b.absolutePan(x),b.clipPath&&b.clipPath.needRefresh(),b.requestRenderAll()},y=()=>{const _=n.value;Ss.dispatchEvent(Cs.CANVAS_ZOOM,{zoomLevel:_.getZoom()})};return{initialize:s,initResizeObserver:r,initRotateIcon:o,getCanvasRealSize:h,getViewportSize:u,changeZoom:g,doCanvasPan:m,onMouseWheel:d}},ze=Kn({zoomValue:100,zoomMin:0,zoomMax:0,percentage:"100%"}),nI=()=>{const n=Rh(),{canvas:t}=Dn(),e=l=>{n.changeZoom(l)},i=l=>{ze.zoomValue=l,ze.percentage=ze.zoomValue.toFixed(0)+"%",e(l)},s=l=>{const h=ze.zoomMin,u=ze.zoomMax,d=t.value.getZoom(),g=J.capValue(h,100*d+l,u);ze.zoomValue=g,ze.percentage=ze.zoomValue.toFixed(0)+"%",e(g)},r=()=>{const l=t.value,h=ze.zoomMin,u=ze.zoomMax,d=100*l.minScaleValue,g=100*l.maxScaleValue;h!==d&&(ze.zoomMin=d),u!==g&&(ze.zoomMax=g);const p=l.getZoom(),m=J.capValue(ze.zoomMin,100*p,ze.zoomMax);ze.zoomValue=m,ze.percentage=ze.zoomValue.toFixed(0)+"%"},o=l=>{const h=l.zoomLevel;l.isInit,l.designSize;const u=Math.round(100*h);ze.zoomValue=u,ze.percentage=ze.zoomValue.toFixed(0)+"%";const d=t.value,{viewportTransform:g=[]}=d,p=mi.clone(g);p[5]=0;const m=mi.clone(g);m[4]=0,d.hRulerCanvas.setViewportTransform(p),d.vRulerCanvas.setViewportTransform(m)};return Ss.addEventListener(Cs.CANVAS_INIT_DONE,r.bind(void 0)),Di(()=>{Ss.addEventListener(Cs.CANVAS_ZOOM,o.bind(void 0))}),{stateZoom:ze,changeZoomByNum:s,changeZoomByRange:i}};var sI={components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge},setup:function(){var n=nI(),t=n.stateZoom,e=n.changeZoomByNum,i=n.changeZoomByRange,s=St(4),r=yt(function(){return t.percentage}),o=yt({get:function(){return t.zoomValue},set:function(p){return i(Number(p))}}),l=yt(function(){return t.zoomMin}),h=yt(function(){return t.zoomMax}),u=function(){e(s.value)},d=function(){e(-s.value)},g=function(){};return{zoomMin:l,zoomMax:h,zoomStep:s,zoomDisplay:r,zoomLevel:o,onZoomIn:u,onZoomOut:d,onFitCanvasToScreen:g}}},rI={id:"zoom-menu",class:"flex h-40px mt-4px p-5px relative bg-slate-200 justify-center items-center"},oI=["min","max","step"],aI=["value"];function lI(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip");return U(),Z("div",rI,[nt(h,{text:"Zoom Out",location:"top",class:"w-32px h-32px"},{default:Mt(function(){return[nt(l,{class:"w-32px h-32px flex justify-center",onClick:i.onZoomOut},{default:Mt(function(){return[nt(o,{name:"icon-zoom-out"})]}),_:1},8,["onClick"])]}),_:1}),jf(z("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=function(u){return i.zoomLevel=u}),min:i.zoomMin,max:i.zoomMax,step:i.zoomStep,id:"zoom-slider",class:"w-full h-4px",value:"500"},null,8,oI),[[Vf,i.zoomLevel]]),nt(h,{text:"Zoom In",location:"top",class:"w-32px h-32px"},{default:Mt(function(){return[nt(l,{class:"w-32px h-32px flex justify-center",onClick:Hf(i.onZoomIn,["stop"])},{default:Mt(function(){return[nt(o,{name:"icon-zoom-in"})]}),_:1},8,["onClick"])]}),_:1}),z("input",{type:"text",value:i.zoomDisplay,id:"zoom-input",class:"text-align-center"},null,8,aI)])}const cI=Ht(sI,[["render",lI]]),hI=Qt({components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge,Layers:eI,ZoomControl:cI}});var uI={class:"flex flex-col w-240px h-full bg-white border-l border-slate-300"},dI={class:"flex-[0_0_auto] flex flex-col"};function fI(n,t,e,i,s,r){var o=ft("ZoomControl"),l=ft("Layers");return U(),Z("div",uI,[z("div",dI,[t[0]||(t[0]=z("div",{class:"w-full h-40px bg-slate-200 border"},[z("div",{class:"p-selectbutton p-component w-full",role:"group","aria-labelledby":"basic","data-pc-name":"selectbutton","data-pc-section":"root",pc1930:""},[z("button",{type:"button",class:"p-togglebutton p-component p-togglebutton-checked flex-1","aria-pressed":"true","data-pc-name":"pcbutton","data-pc-extend":"togglebutton","data-pc-section":"root","data-p-checked":"true","data-p-disabled":"false"},[z("span",{class:"p-togglebutton-content","data-pc-section":"content"},[z("span",{class:"p-togglebutton-label","data-pc-section":"label"},"layers")])]),z("button",{type:"button",class:"p-togglebutton p-component flex-1","aria-pressed":"false","data-pc-name":"pcbutton","data-pc-extend":"togglebutton","data-pc-section":"root","data-p-checked":"false","data-p-disabled":"false"},[z("span",{class:"p-togglebutton-content","data-pc-section":"content"},[z("span",{class:"p-togglebutton-label","data-pc-section":"label"},"Pages")])])])],-1)),t[1]||(t[1]=Eo('<div class="splitter" data-v-43eca5d5></div><div id="nav-sub" class="flex" data-v-43eca5d5><div id="zoom-info" class="flex-grow-2 mt-4px" data-v-43eca5d5><div id="zoom-nav" style="width:122px;height:122px;" class="m-[0_auto] border border-black" data-v-43eca5d5><canvas id="zoom-nav-back" width="120" height="120" data-v-43eca5d5></canvas><div id="zoom-nav-marker" style="width:120px;height:120px;left:0px;top:0px;" data-v-43eca5d5></div></div></div><div id="nav-info" class="w-60px ml-6px mr-16px mt-10px" data-v-43eca5d5><div data-v-43eca5d5>X:<span id="nav-cord-x" class="float-right" data-v-43eca5d5></span></div><div data-v-43eca5d5>Y:<span id="nav-cord-y" class="float-right" data-v-43eca5d5></span></div><div class="mt-10px" data-v-43eca5d5> W:<span id="nav-size-w" class="float-right" data-v-43eca5d5>1080</span></div><div data-v-43eca5d5>H:<span id="nav-size-h" class="float-right" data-v-43eca5d5>1080</span></div></div></div>',2)),nt(o)]),nt(l)])}const gI=Ht(hI,[["render",fI],["__scopeId","data-v-43eca5d5"]]);var pI={},mI={class:"flex flex-[1_0] flex-col w-full h-full overflow-hidden"};function vI(n,t){return U(),Z("div",mI,[Un(n.$slots,"default")])}const yI=Ht(pI,[["render",vI]]),_I=()=>{const{canvas:n}=Dn(),t=Rh();return{bindFabricEvents:()=>{n.value.on("mouse:wheel",t.onMouseWheel.bind(void 0))},unbindFabricEvents:()=>{n.value.off()}}},wI=Qt({setup(){const{canvas:n}=Dn(),{initialize:t,initResizeObserver:e,initRotateIcon:i}=Rh(),{bindFabricEvents:s,unbindFabricEvents:r}=_I(),o=St();return Di(()=>{!o.value||!n.value||(o.value.append(n.value.wrapperEl),t(o.value),e(o),i(),s(),Ss.dispatchEvent(Cs.CANVAS_INIT_DONE,n.value))}),Lr(()=>{r()}),{containerEl:o}}});var bI={ref:"containerEl",class:"editor-canvas"};function xI(n,t,e,i,s,r){return U(),Z("div",bI,null,512)}const CI=Ht(wI,[["render",xI],["__scopeId","data-v-5b85cb7f"]]),Jw="PIXELS",SI="INCHES",TI="CENTIMETERS",OI="METERS",PI={[Jw]:0,[SI]:3,[TI]:2,[OI]:4},MI=function(n,t){const e=PI[n];return t.toFixed(e)},Lv=function(n,t){const e=MI(n,t);return parseFloat(e)},gs=.5,EI=[.001,.002,.005,.01,.02,.05,.1,.2,.5,1,2,5,10,20,50,100,200,500,1e3,2e3],kI=40,AI=60,DI=200,jI=3,II=15,RI='"Roboto", sans-serif',LI=12,FI=1,BI=30,zI=0,VI="editorRuler";class HI{constructor(t){Nt(this,"ruler"),Nt(this,"labelOffsetX",jI),Nt(this,"labelOffsetY",II),Nt(this,"fontFamily",RI),Nt(this,"fontSize",LI),Nt(this,"units",Jw),Nt(this,"pixelsPerUnit",FI),Nt(this,"thickness"),Nt(this,"tickDividerLength"),Nt(this,"tickLargeLength"),Nt(this,"tickSmallLength"),Nt(this,"width"),Nt(this,"height"),Nt(this,"tickColor"),Nt(this,"labelColor"),Nt(this,"pixelZoomRatio"),Nt(this,"startX"),Nt(this,"startY"),Nt(this,"pageWidth"),Nt(this,"pageHeight"),Nt(this,"pagePixelsPerInterval"),Nt(this,"screenPixelsPerInterval"),this.ruler=t}setThickness(t){this.thickness=t,this.tickDividerLength=this.thickness,this.tickLargeLength=Math.floor(this.thickness/3),this.tickSmallLength=Math.floor(this.thickness/5)}setDimensions(t,e){this.width=t,this.height=e}setTheme({tickColor:t,labelColor:e}){this.tickColor=t,this.labelColor=e}chooseIntervalLength(){return EI.find((t,e,i)=>{const s=i[e+1],r=t*this.pixelsPerUnit*this.pixelZoomRatio;return t>=this.pixelZoomRatio&&r>AI||s==null||s*this.pixelsPerUnit*this.pixelZoomRatio>DI})*this.pixelsPerUnit}setPageViewport(t,e){const i=e.br.x-e.tl.x;this.startX=e.tl.x,this.startY=e.tl.y,this.pageWidth=t.width,this.pageHeight=t.height,this.pixelZoomRatio=this.width/i,this.pagePixelsPerInterval=this.chooseIntervalLength(),this.screenPixelsPerInterval=this.pagePixelsPerInterval*this.pixelZoomRatio}draw(t){this.ruler.rulerType==="horizontal"&&(t.save(),t.transform(1,0,0,1,0,this.ruler.topRulerOffset),this._drawHorizontal(t,this.startX,this.pageWidth),t.restore()),this.ruler.rulerType==="vertical"&&(t.save(),t.transform(1,0,0,1,this.thickness,0),t.rotate(90*Math.PI/180),this._drawVertical(t,this.startY,this.pageHeight),t.restore())}drawInside(t){const e=this.ruler.canvas.getZoom(),i=Math.floor(-this.ruler.canvas.vptCoords.tl.x*e)+gs,s=Math.floor(-this.ruler.canvas.vptCoords.tl.y*e)+gs;t.save(),t.transform(1,0,0,1,0,s-this.thickness),this._drawHorizontal(t,this.startX,this.pageWidth),t.restore(),t.save(),t.transform(1,0,0,1,i,0),t.rotate(90*Math.PI/180),this._drawVertical(t,this.startY,this.pageHeight),t.restore()}_drawHorizontal(t,e,i){const{ticks:s,gapSize:r}=this.createTicks();t.fillStyle=this.tickColor,t.strokeStyle=this.tickColor,t.font=`normal normal ${this.fontSize}px ${this.fontFamily}`;for(let o=0;o<=i;o+=this.pagePixelsPerInterval){const l=Math.ceil(this.pixelZoomRatio*(-e+o))+gs;if(t.save(),t.transform(1,0,0,1,l,0),t.beginPath(),o<i)if(i-o>this.pagePixelsPerInterval)for(let g=0;g<s.length;g++)this.drawHorizontalTick(t,g*r,s[g]);else{const g=(i-o)/(this.pagePixelsPerInterval/10);for(let p=0;p<=g;p++)this.drawHorizontalTick(t,p*r,s[p])}else this.drawHorizontalTick(t,0*r,s[0]);t.stroke(),t.restore(),t.fillStyle=this.labelColor;const{labelOffsetX:h,labelOffsetY:u}=this,d=Lv(this.units,o/this.pixelsPerUnit);t.fillText(`${d}`,l+h,u)}}_drawVertical(t,e,i){const{ticks:s,gapSize:r}=this.createTicks();t.fillStyle=this.tickColor,t.strokeStyle=this.tickColor,t.font=`normal normal ${this.fontSize}px ${this.fontFamily}`;for(let o=0;o<=i;o+=this.pagePixelsPerInterval){const l=Math.ceil(this.pixelZoomRatio*(-e+o))+gs;if(t.save(),t.transform(1,0,0,1,l,0),t.beginPath(),o<i)if(i-o>this.pagePixelsPerInterval)for(let m=0;m<s.length;m++)this.drawVerticalTick(t,m*r,s[m]);else{const m=(i-o)/(this.pagePixelsPerInterval/10);for(let y=0;y<=m;y++)this.drawVerticalTick(t,y*r,s[y])}else this.drawVerticalTick(t,0*r,s[0]);t.stroke(),t.restore(),t.fillStyle=this.labelColor;const{labelOffsetX:h,labelOffsetY:u}=this,d=Lv(this.units,o/this.pixelsPerUnit),g=d.toString().length;let p=10;switch(!0){case g===1:p=10;break;case g===2:p=20;break;case g===3:p=25;break;case g===4:p=32;break;default:p=50;break}t.save(),t.scale(-1,-1),t.fillText(`${d}`,-(l+p),-u),t.restore()}}createTicks(){let t,e;this.screenPixelsPerInterval<=kI?(t=this.screenPixelsPerInterval/5,e=4):(t=this.screenPixelsPerInterval/10,e=9);const i=[this.tickDividerLength];for(let s=1;s<=e;s++)Math.ceil(e/2)===s?i.push(this.tickLargeLength):i.push(this.tickSmallLength);return{gapSize:t,ticks:i}}drawHorizontalTick(t,e,i){const s=Math.floor(e);t.moveTo(s,this.thickness-i),t.lineTo(s,this.thickness)}drawVerticalTick(t,e,i){const s=Math.floor(e);t.moveTo(s,i),t.lineTo(s,0)}}class Fv{constructor(t){Nt(this,"type",VI),Nt(this,"thickness",BI),Nt(this,"topRulerOffset",zI),Nt(this,"enabled",!1),Nt(this,"canvas"),Nt(this,"scale"),Nt(this,"rulerColor"),Nt(this,"cornerSquareColor"),Nt(this,"pageSize"),Nt(this,"rulerType"),Nt(this,"render",({ctx:e}={})=>{const i=this.canvas.contextContainer;!e||e!==i||this.enabled&&this.canvas.vptCoords.tl!==null&&(this.pageSize={width:1080,height:1080},this.drawBackground(i),this.scale.setDimensions(this.canvas.width,this.canvas.height),this.scale.setPageViewport(this.pageSize,this.canvas.vptCoords),this.scale.draw(i))}),this.canvas=t,this.scale=new HI(this),this.scale.setThickness(this.thickness),this.canvas.on("after:render",this.render),this.scale.pixelsPerUnit=300,this.scale.units="INCHES"}dispose(){this.canvas.off("after:render",this.render)}enable(){this.enabled||(this.enabled=!0)}setTheme({rulerColor:t,cornerSquareColor:e,tickColor:i,labelColor:s}){this.rulerColor=t,this.cornerSquareColor=e,this.scale.setTheme({tickColor:i,labelColor:s})}setRulerType(t){this.rulerType=t}disable(){this.enabled&&(this.enabled=!1)}drawBackground(t){const{canvas:{width:e,height:i},topRulerOffset:s,thickness:r}=this,o=r+gs,l=s+r+gs;t.fillStyle=this.rulerColor,t.strokeStyle=this.scale.tickColor,t.fillRect(0,s,e,r),t.fillRect(0,0,r,i),t.beginPath(),t.moveTo(o,l),t.lineTo(e,l),t.moveTo(o,l),t.lineTo(o,i),t.stroke()}drawBackgroundInside(t){}drawCornerSquare(t){t.save(),t.transform(1,0,0,1,0,this.topRulerOffset),t.fillStyle=this.cornerSquareColor,t.fillRect(0,0,this.thickness,this.thickness+gs),t.restore()}drawCornerSquareInside(t){const e=this.canvas.getZoom(),i=Math.floor(-this.canvas.vptCoords.tl.x*e)+gs,s=Math.floor(-this.canvas.vptCoords.tl.y*e)+gs;t.save(),t.transform(1,0,0,1,i-this.thickness,s-this.thickness),t.fillStyle=this.cornerSquareColor,t.fillRect(0,0,this.thickness,this.thickness),t.restore()}setUnits(t,e,i){this.scale.pixelsPerUnit=i(1),this.scale.units=t,this.render()}}const Cg=Qt({setup(){const{canvas:n}=Dn(),t=31;let e,i;const s=St(),r=St(),o=yt(()=>`${t}px`),l=yt(()=>({top:"0px",left:"0px"})),h=yt(()=>({top:"0px"})),u=yt(()=>({left:"0px"}));return Di(()=>{if(!n.value)return;const d=n.value,{viewportTransform:g=[]}=d,p=mi.clone(g);p[5]=0;const m=mi.clone(g);m[4]=0,e=new fn(s.value,{width:d.canvasSize.width+12,height:30}),e.setViewportTransform(p),e.ruler=new Fv(e),e.ruler.setTheme({rulerColor:"#f4f4f6",tickColor:"rgb(183 188 195)",labelColor:"rgba(17,23,29,.6)",cornerSquareColor:"rgb(183 188 195)"}),e.ruler.setRulerType("horizontal"),e.ruler.enable();const y=e.getContext();e.ruler.render({ctx:y}),d.hRulerCanvas=e,i=new fn(r.value,{width:30,height:d.canvasSize.height+12}),i.setViewportTransform(m),i.ruler=new Fv(i),i.ruler.setTheme({rulerColor:"#f4f4f6",tickColor:"rgb(183 188 195)",labelColor:"rgba(17,23,29,.6)",cornerSquareColor:"rgb(183 188 195)"}),i.ruler.setRulerType("vertical"),i.ruler.enable();const _=i.getContext();i.ruler.render({ctx:_}),d.vRulerCanvas=i}),{sizeRuler:o,styleBoxRuler:l,styleHorizontalRuler:h,styleVerticalRuler:u,hRuler:s,vRuler:r}}}),Bv=()=>{zf(n=>({"4b3fe447":n.sizeRuler}))},zv=Cg.setup;Cg.setup=zv?(n,t)=>(Bv(),zv(n,t)):Bv;var YI={ref:"horizontalRuler",class:"ruler__wrapper ruler__wrapper--horizontal",style:{position:"relative",width:"100%",height:"100%"}},XI={ref:"hRuler"},WI={ref:"verticalRuler",class:"ruler__wrapper ruler__wrapper--vertical",style:{width:"100%",height:"100%"}},NI={ref:"vRuler"};function UI(n,t,e,i,s,r){return U(),Z(Ce,null,[z("div",{class:"box",style:qi(n.styleBoxRuler)},null,4),z("div",{class:"ruler ruler--horizontal",style:qi(n.styleHorizontalRuler)},[z("div",YI,[z("canvas",XI,null,512)],512)],4),z("div",{class:"ruler ruler--vertical",style:qi(n.styleVerticalRuler)},[z("div",WI,[z("canvas",NI,null,512)],512)],4)],64)}const GI=Ht(Cg,[["render",UI]]),wr=Kn({isShowX:!1,isShowY:!1,x:0,y:0,width:0,height:0}),$I=()=>{const n=Rh(),{canvas:t}=Dn(),e=St(),i=St(void 0),s=St(void 0),r=()=>{o()},o=()=>{const p=n.getCanvasRealSize(),m=p.width,y=p.height,_=n.getViewportSize(!0);let b=_.x,x=_.y,T=_.width,O=_.height;const P=t.value,F=P.scrollPaddingX,X=P.scrollPaddingY,R=-(b-=F)/(T+=2*F),V=-(x-=X)/(O+=2*X),$=m/T,st=y/O;e.value={x:R,y:V,width:$,height:st},l()},l=()=>{var p,m;if(!e.value)return;const y=e.value,_=y.x,b=y.y,x=y.width,T=y.height,O=t.value,P=O.checkCanScroll(),F=x<1&&P.canScrollX,X=T<1&&P.canScrollY;F&&(wr.x=100*(_>0?_:0),wr.width=100*(x<1?x/1:1)),X&&(wr.y=100*(b>0?b:0),wr.height=100*(T<1?T/1:1)),wr.isShowX=F,wr.isShowY=X;const{viewportTransform:R=[]}=O,V=mi.clone(R);V[5]=0;const $=mi.clone(R);$[4]=0,(p=O.hRulerCanvas)==null||p.setViewportTransform(V),(m=O.vRulerCanvas)==null||m.setViewportTransform($)},h=()=>{t.value&&r()},u=(p,m)=>{p.stopPropagation(),p.preventDefault();const y=p.target.getBoundingClientRect(),_=y.x||y.left,b=y.y||y.top,x=p.clientX,T=p.clientY;i.value={x:x-_,y:T-b},s.value=m},d=p=>{if(s.value&&i.value&&e.value){const m=t.value,y=document.querySelector("#editor-wrapper");if(!y)return;const _=n.getViewportSize(!0),b=y.getBoundingClientRect(),x=b.x||b.left,T=b.y||b.top,O=b.width,P=b.height,F=p.clientX,X=p.clientY,R=O-e.value.width*O,V=P-e.value.height*P;let $=F-x-(i.value.x||0),st=X-T-(i.value.y||0);$=J.capValue(0,$,R),st=J.capValue(0,st,V);const ht=m.scrollPaddingX,ut=m.scrollPaddingY;let ct=_.x,bt=_.y;s.value==="x"?(e.value.x=$/O,ct=-(e.value.x*(_.width+2*ht)-ht)):s.value==="y"&&(e.value.y=st/P,bt=-(e.value.y*(_.height+2*ut)-ut)),l(),n.doCanvasPan({x:-ct,y:-bt})}},g=()=>{s.value&&(s.value=void 0)};return Ss.addEventListener(Cs.MINIMAP_VIEWPORT_CHANGED,()=>{r()}),Ss.addEventListener(Cs.CANVAS_ZOOM,h.bind(void 0)),Di(()=>{document.body.addEventListener("mousemove",d),document.body.addEventListener("mouseup",g)}),Lr(()=>{document.body.removeEventListener("mousemove",d),document.body.removeEventListener("mouseup",g)}),{stateScroll:wr,_onMouseDown:u}},Sg=Qt({props:{scrollStyle:{type:Object}},setup(){const{stateScroll:n,_onMouseDown:t}=$I(),e=yt(()=>n.isShowX),i=yt(()=>n.isShowY),s=yt(()=>"#fff"),r=yt(()=>"#fff"),o=yt(()=>"#fff"),l=yt(()=>({left:"".concat(n.x.toFixed(2),"%"),width:"".concat(n.width.toFixed(2),"%")})),h=yt(()=>({top:"".concat(n.y.toFixed(2),"%"),height:"".concat(n.height.toFixed(2),"%")}));return{isShowX:e,isShowY:i,h_scrollbar:l,v_scrollbar:h,h_background:s,v_background:r,b_background:o,onMouseDown:(u,d)=>{t(u,d)}}}}),Vv=()=>{zf(n=>({e9af6650:n.b_background,"8d5ba5dc":n.h_background,25093844:n.v_background}))},Hv=Sg.setup;Sg.setup=Hv?(n,t)=>(Vv(),Hv(n,t)):Vv;function KI(n,t,e,i,s,r){return U(),Z(Ce,null,[z("div",{class:li(["canvasSrollbar_h","canvasSrollbar_h--border-top"])},[n.isShowX?(U(),Z("div",{key:0,class:"canvasSrollbar_h_scrollbar",style:qi(n.h_scrollbar),onMousedown:t[0]||(t[0]=function(o){return n.onMouseDown(o,"x")})},t[2]||(t[2]=[z("div",{class:"canvasSrollbar_h_scrollbar_thumb"},null,-1)]),36)):Js("",!0)]),z("div",{class:li(["canvasSrollbar_v","canvasSrollbar_v--border-left"])},[n.isShowY?(U(),Z("div",{key:0,class:"canvasSrollbar_v_scrollbar",style:qi(n.v_scrollbar),onMousedown:t[1]||(t[1]=function(o){return n.onMouseDown(o,"y")})},t[3]||(t[3]=[z("div",{class:"canvasSrollbar_v_scrollbar_thumb"},null,-1)]),36)):Js("",!0)]),t[4]||(t[4]=z("div",{class:"canvasSrollbar_cornerSquare"},null,-1))],64)}const qI=Ht(Sg,[["render",KI],["__scopeId","data-v-8294beed"]]),ZI=Qt({components:{FabricCanvas:CI,RulerCanvas:GI,ScrollCanvas:qI}});function JI(n,t,e,i,s,r){var o=ft("FabricCanvas"),l=ft("RulerCanvas"),h=ft("ScrollCanvas");return U(),Z("div",{id:"editor-wrapper",class:"editor-wrapper",onDragover:t[0]||(t[0]=Hf(function(){},["prevent"]))},[nt(o),nt(l),nt(h)],32)}const QI=Ht(ZI,[["render",JI],["__scopeId","data-v-bae98841"]]),tR=Qt({name:"Copy",elementTypes:["All"],index:10,components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge},setup(){const{copyElement:n}=Hi();return{onCopy:()=>{n()}}}});var eR={class:"toolbar-top-control__item"};function iR(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip");return U(),Z("div",eR,[nt(h,{text:"Copy",location:"bottom"},{default:Mt(function(){return[nt(l,{onClick:n.onCopy},{default:Mt(function(){return[nt(o,{name:"icon-copy"})]}),_:1},8,["onClick"])]}),_:1})])}const nR=Ht(tR,[["render",iR]]),sR=Qt({name:"Delete",elementTypes:["All"],index:1,components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge},setup(){const{deleteElement:n}=Hi();return{onDelete:()=>{n()}}}});var rR={class:"toolbar-top-control__item"};function oR(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip");return U(),Z("div",rR,[nt(h,{text:"Delete"},{default:Mt(function(){return[nt(l,{onClick:n.onDelete},{default:Mt(function(){return[nt(o,{name:"icon-delete"})]}),_:1},8,["onClick"])]}),_:1})])}const aR=Ht(sR,[["render",oR]]),lR=Qt({name:"Duplicate",elementTypes:["All"],index:30,emits:["element-update"],components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge},setup(){const n=Fo();return{onDuplicate:()=>{n==null||n.emit("element-update")}}}});var cR={class:"toolbar-top-control__item"};function hR(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip");return U(),Z("div",cR,[nt(h,{text:"Duplicate"},{default:Mt(function(){return[nt(l,{onClick:n.onDuplicate},{default:Mt(function(){return[nt(o,{name:"icon-duplicate"})]}),_:1},8,["onClick"])]}),_:1})])}const uR=Ht(lR,[["render",hR]]),dR=Qt({name:"Lock",elementTypes:["All"],index:40,components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge},setup(){const{lockElement:n}=Hi();return{onLock:()=>{n()}}}});var fR={class:"toolbar-top-control__item"};function gR(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip");return U(),Z("div",fR,[nt(h,{text:"Lock",location:"bottom"},{default:Mt(function(){return[nt(l,{onClick:n.onLock},{default:Mt(function(){return[nt(o,{name:"icon-unlock"})]}),_:1},8,["onClick"])]}),_:1})])}const pR=Ht(dR,[["render",gR]]),mR=Qt({name:"Paste",elementTypes:["All"],index:20,emits:["element-update"],components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge},setup(){const{pasteElement:n}=Hi();return{onPaste:()=>{n()}}}});var vR={class:"toolbar-top-control__item"};function yR(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip");return U(),Z("div",vR,[nt(h,{text:"Paste"},{default:Mt(function(){return[nt(l,{onClick:n.onPaste},{default:Mt(function(){return[nt(o,{name:"icon-paste"})]}),_:1},8,["onClick"])]}),_:1})])}const _R=Ht(mR,[["render",yR]]),wR=Qt({name:"Unlock",elementTypes:["All"],index:40,components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge},setup(){const{unLockElement:n}=Hi();return{onUnlock:()=>{n()}}}});var bR={class:"toolbar-top-control__item"};function xR(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip");return U(),Z("div",bR,[nt(h,{text:"Unlock"},{default:Mt(function(){return[nt(l,{onClick:n.onUnlock},{default:Mt(function(){return[nt(o,{name:"icon-lock"})]}),_:1},8,["onClick"])]}),_:1})])}const CR=Ht(wR,[["render",xR]]),Qw=[],Yv=Object.assign({"./Copy.vue":nR,"./Delete.vue":aR,"./Duplicate.vue":uR,"./Lock.vue":pR,"./Paste.vue":_R,"./Unlock.vue":CR});for(const n in Yv)Qw.push(Yv[n]);const SR=Qt({name:"Bold",elementTypes:["EditorTextbox"],width:32,index:30,components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge},setup(){const{elementUpdate:n}=Hi(),{activeObject:t}=Jn(),e=yt({get:()=>t.value&&t.value.fontWeight||"normal",set:()=>{}});return{fontWeight:e,onUpdateBold:()=>{n("fontWeight",e.value==="bold"?"normal":"bold")}}}});var TR={class:"toolbar-top-control__item"};function OR(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip");return U(),Z("div",TR,[nt(h,{text:"Bold"},{default:Mt(function(){return[nt(l,{active:n.fontWeight==="bold",onClick:n.onUpdateBold},{default:Mt(function(){return[nt(o,{name:"icon-bold"})]}),_:1},8,["active","onClick"])]}),_:1})])}const PR=Ht(SR,[["render",OR]]),MR=Qt({setup(){const n=St(null),t=St(!1),e=()=>{t.value=!t.value},i=s=>{n.value&&!n.value.contains(s.target)&&(t.value=!1)};return Di(()=>{document.addEventListener("click",i)}),Lr(()=>{document.removeEventListener("click",i)}),{showMenu:t,menuButtonRef:n,toggleMenu:e,handleClickOutside:i}}});var ER={class:"absolute w-full max-w-[224px] rounded-lg bg-white shadow lg:static lg:block lg:w-full lg:max-w-full lg:shadow-none dark:bg-dark-2 lg:dark:bg-transparent"},kR={class:"relative",ref:"menuButtonRef"};function AR(n,t,e,i,s,r){return U(),Z("nav",ER,[z("div",kR,[z("div",{onClick:t[0]||(t[0]=function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return n.toggleMenu&&n.toggleMenu.apply(n,o)})},[Un(n.$slots,"activator",{props:{active:n.showMenu}})]),z("div",{class:li([n.showMenu?"block":"hidden","w-[224px] bg-white absolute p-6 mt-4px shadow rounded border border-slate-100 dark:bg-dark"])},[Un(n.$slots,"default")],2)],512)])}const tb=Ht(MR,[["render",AR]]),DR=Qt({name:"CurvedText",elementTypes:["EditorTextbox","EditorClippingText"],width:32,index:400,components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge,BaseMenu:tb},setup(){const{canvas:n}=Dn(),{activeObject:t}=Jn();return{curveAmount:St(0),mergeProps:hl,onUpdateCurved:e=>{const i=n.value;t.value&&(t.value.set("curved",{enabled:!0,type:"arc",degrees:e}),t.value.isType("EditorClippingText")&&(t.value._updateClipSize(!0,!0),t.value._updateImageViewportPositionScale()),i.renderAll())}}}});var jR={class:"toolbar-top-control__item"},IR={class:"flex justify-between mb-6 text-sm font-semibold text-dark dark:text-white"};function RR(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip"),u=ft("base-menu");return U(),Z("div",jR,[nt(u,null,{activator:Mt(function(d){var g=d.props;return[nt(h,{text:"Curved text"},{default:Mt(function(){return[nt(l,f1(Ff(g)),{default:Mt(function(){return[nt(o,{name:"icon-curved"})]}),_:2},1040)]}),_:2},1024)]}),default:Mt(function(){return[z("div",null,[z("div",IR,[t[2]||(t[2]=z("span",null,"Curved Text",-1)),z("span",null,ms(n.curveAmount),1)]),z("div",null,[jf(z("input",{"onUpdate:modelValue":[t[0]||(t[0]=function(d){return n.curveAmount=d}),t[1]||(t[1]=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];return n.onUpdateCurved&&n.onUpdateCurved.apply(n,d)})],type:"range",class:"w-full h-4px",min:"-100",max:"100",step:"1"},null,512),[[Vf,n.curveAmount]])])])]}),_:1})])}const LR=Ht(DR,[["render",RR],["__scopeId","data-v-2e54215f"]]),FR=Qt({name:"FontAlign",elementTypes:["EditorTextbox"],width:32,index:80,components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge},setup(){const{elementUpdate:n}=Hi(),{activeObject:t}=Jn(),e=yt({get:()=>t.value&&t.value.textAlign||"center",set:()=>{}}),i=yt(()=>`icon-align-${e.value}`),s=()=>e.value==="left"?"center":e.value==="center"?"right":e.value==="right"?"justify":e.value==="justify"?"left":"center";return{iconTextAlign:i,onUpdateTextAlign:()=>{const r=s();n("textAlign",r)}}}});var BR={class:"toolbar-top-control__item"};function zR(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip");return U(),Z("div",BR,[nt(h,{text:"Font Align"},{default:Mt(function(){return[nt(l,{onClick:n.onUpdateTextAlign},{default:Mt(function(){return[nt(o,{name:n.iconTextAlign},null,8,["name"])]}),_:1},8,["onClick"])]}),_:1})])}const VR=Ht(FR,[["render",zR]]),HR=Qt({name:"Group",elementTypes:["ActiveSelection"],width:32,components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge},setup(){const{groupElements:n}=Hi();return{onGroup:()=>{n()}}}});var YR={class:"toolbar-top-control__item"};function XR(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip");return U(),Z("div",YR,[nt(h,{text:"Group"},{default:Mt(function(){return[nt(l,{onClick:n.onGroup},{default:Mt(function(){return[nt(o,{name:"icon-group"})]}),_:1},8,["onClick"])]}),_:1})])}const WR=Ht(HR,[["render",XR]]),NR=Qt({name:"Italic",elementTypes:["EditorTextbox"],width:32,index:40,components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge},setup(){const{elementUpdate:n}=Hi(),{activeObject:t}=Jn(),e=yt({get:()=>t.value&&t.value.fontStyle||"normal",set:()=>{}});return{fontStyle:e,onUpdateItalic:()=>{n("fontStyle",e.value==="italic"?"normal":"italic")}}}});var UR={class:"toolbar-top-control__item"};function GR(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip");return U(),Z("div",UR,[nt(h,{text:"Italic"},{default:Mt(function(){return[nt(l,{active:n.fontStyle==="italic",onClick:n.onUpdateItalic},{default:Mt(function(){return[nt(o,{name:"icon-italic"})]}),_:1},8,["active","onClick"])]}),_:1})])}const $R=Ht(NR,[["render",GR]]),KR=Qt({name:"Linethrough",elementTypes:["EditorTextbox"],width:32,index:60,components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge},setup(){const{elementUpdate:n}=Hi(),{activeObject:t}=Jn(),e=yt({get:()=>t.value?t.value.linethrough:!1,set:()=>{}});return{linethrough:e,onUpdateLinethrough:()=>{n("linethrough",!e.value)}}}});var qR={class:"toolbar-top-control__item"};function ZR(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip");return U(),Z("div",qR,[nt(h,{text:"Linethrough"},{default:Mt(function(){return[nt(l,{active:n.linethrough,onClick:n.onUpdateLinethrough},{default:Mt(function(){return[nt(o,{name:"icon-linethrough"})]}),_:1},8,["active","onClick"])]}),_:1})])}const JR=Ht(KR,[["render",ZR]]),QR=Qt({name:"Opacity",elementTypes:["EditorTextbox"],width:32,index:500,components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge,BaseMenu:tb},setup(){const{elementUpdate:n}=Hi(),{activeObject:t}=Jn();return{opacity:yt({get:()=>(t.value?t.value.opacity:1)*100,set:()=>{}}),mergeProps:hl,onUpdateOpacity:e=>{n("opacity",e/100)}}}});var tL={class:"toolbar-top-control__item"},eL={class:"flex justify-between mb-6 text-sm font-semibold text-dark dark:text-white"};function iL(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip"),u=ft("base-menu");return U(),Z("div",tL,[nt(u,null,{activator:Mt(function(d){var g=d.props;return[nt(h,{text:"Transparency"},{default:Mt(function(){return[nt(l,f1(Ff(g)),{default:Mt(function(){return[nt(o,{name:"icon-opacity"})]}),_:2},1040)]}),_:2},1024)]}),default:Mt(function(){return[z("div",null,[z("div",eL,[t[2]||(t[2]=z("span",null,"Transparency",-1)),z("span",null,ms(n.opacity.toFixed(0)),1)]),z("div",null,[jf(z("input",{"onUpdate:modelValue":[t[0]||(t[0]=function(d){return n.opacity=d}),t[1]||(t[1]=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];return n.onUpdateOpacity&&n.onUpdateOpacity.apply(n,d)})],type:"range",class:"w-full h-4px",min:"0",max:"100",step:"1"},null,512),[[Vf,n.opacity]])])])]}),_:1})])}const nL=Ht(QR,[["render",iL],["__scopeId","data-v-e776c73d"]]),sL=Qt({name:"Underline",elementTypes:["EditorTextbox"],width:32,index:50,components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge},setup(){const{elementUpdate:n}=Hi(),{activeObject:t}=Jn(),e=yt({get:()=>t.value?t.value.underline:!1,set:()=>{}});return{underline:e,onUpdateUnderline:()=>{n("underline",!e.value)}}}});var rL={class:"toolbar-top-control__item"};function oL(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip");return U(),Z("div",rL,[nt(h,{text:"Underline"},{default:Mt(function(){return[nt(l,{active:n.underline,onClick:n.onUpdateUnderline},{default:Mt(function(){return[nt(o,{name:"icon-underline"})]}),_:1},8,["active","onClick"])]}),_:1})])}const aL=Ht(sL,[["render",oL]]),lL=Qt({name:"Uppercase",elementTypes:["EditorTextbox"],width:32,index:70,components:{BaseIcon:Ue,BaseButton:Je,BaseTooltip:Ge},setup(){const{elementUpdate:n}=Hi(),{activeObject:t}=Jn(),e=yt({get:()=>t.value&&t.value.isUpperCase||!1,set:()=>{}});return{isUpperCase:e,onUpdateUppercase:()=>{n("isUpperCase",!e.value)}}}});var cL={class:"toolbar-top-control__item"};function hL(n,t,e,i,s,r){var o=ft("base-icon"),l=ft("BaseButton"),h=ft("BaseTooltip");return U(),Z("div",cL,[nt(h,{text:"Uppercase"},{default:Mt(function(){return[nt(l,{active:n.isUpperCase,onClick:n.onUpdateUppercase},{default:Mt(function(){return[nt(o,{name:"icon-uppercase"})]}),_:1},8,["active","onClick"])]}),_:1})])}const uL=Ht(lL,[["render",hL]]),eb=[],Xv=Object.assign({"./Bold.vue":PR,"./CurvedText.vue":LR,"./FontAlign.vue":VR,"./Group.vue":WR,"./Italic.vue":$R,"./Linethrough.vue":JR,"./Opacity.vue":nL,"./Underline.vue":aL,"./Uppercase.vue":uL});for(const n in Xv)eb.push(Xv[n]);const dL=Qt({setup(){const n=Fo(),{activeObject:t}=Jn(),e=St(),i=St(),s=St(),r=gf(e),o=gf(s),l=St([]),h=yt(()=>t.value?t.value.locked:!1),u=yt(()=>l.value),d=yt(()=>{const p=t.value;if(!p)return[];const m=[];l.value=[];const y=Object.keys((n==null?void 0:n.appContext.components)??{}),_=eb.sort((x,T)=>(x.index??0)<(T.index??0)?-1:1);let b=0;return _.forEach(x=>{y.includes(x.name)||n==null||n.appContext.app.component(x.name,x),p.isType(...x.elementTypes)&&(r.width.value-(b+8)-(o.width.value+8)>80?(b+=x.width+8,m.push(x)):l.value.push(x))}),m}),g=yt(()=>{const p=Object.keys((n==null?void 0:n.appContext.components)??{});if(!t.value)return[];const m=[];return Qw.sort((y,_)=>(y.index??0)<(_.index??0)?-1:1).forEach(y=>{p.includes(y.name)||n==null||n.appContext.app.component(y.name,y),y.elementTypes.includes("All")&&m.push(y)}),m});return We(t,()=>{l.value=[]}),{toolbarEl:e,toolbarLeftEl:i,toolbarRightEl:s,isLocked:h,propsComponent:d,defaultComponent:g,moreItems:u}}});var fL={class:"w-full h-40px z-10"},gL={ref:"toolbarEl",class:"editor-toolbar-top py-8px pl-3"},pL={class:"editor-toolbar-top__wrapper"},mL={ref:"toolbarLeftEl",class:"editor-toolbar-top__left"},vL={ref:"toolbarRightEl",class:"editor-toolbar-top__right"};function yL(n,t,e,i,s,r){return U(),Z("div",fL,[z("div",gL,[z("div",pL,[z("div",mL,[(U(!0),Z(Ce,null,Zs(n.propsComponent,function(o){return U(),Z(Ce,{key:o},[n.isLocked?Js("",!0):(U(),vi(Ka(o.name),{key:0,id:"".concat(o.name)},null,8,["id"]))],64)}),128))],512),z("div",vL,[(U(!0),Z(Ce,null,Zs(n.defaultComponent,function(o){return U(),Z(Ce,{key:o},[o.name!=="Unlock"&&!n.isLocked||o.name==="Unlock"&&n.isLocked?(U(),vi(Ka(o.name),{key:0})):Js("",!0)],64)}),128))],512)])],512)])}const _L=Ht(dL,[["render",yL],["__scopeId","data-v-81171385"]]),wL=Qt({components:{EditorTopbar:c7,EditorSidebarLeft:Gj,EditorSidebarRight:gI,EditorWorkspace:yI,Workspace:QI,EditorToolbarTop:_L},setup(){Wr().setActiveSidebarItem({sidebarItemId:"photos",sidebarItemTitle:"Photos",sidebarItemType:"Photos",previousSidebarItemId:"",previousSidebarItemTitle:"",previousSidebarItemType:"",selectedCurrent:0})}});var bL={class:"nava-editor"},xL={class:"nava-editor__layout"},CL={class:"nava-editor__container"};function SL(n,t,e,i,s,r){var o=ft("EditorTopbar"),l=ft("EditorSidebarLeft"),h=ft("EditorToolbarTop"),u=ft("Workspace"),d=ft("EditorWorkspace"),g=ft("EditorSidebarRight");return U(),Z("div",bL,[z("div",xL,[nt(o),z("section",CL,[nt(l),nt(d,null,{default:Mt(function(){return[nt(h),nt(u)]}),_:1}),nt(g)])])])}const TL=Ht(wL,[["render",SL],["__scopeId","data-v-ad615118"]]),OL={install:function(n,t){Z6(),n.use(CM),n.component("Editor",TL)}};/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const mo=typeof document<"u";function ib(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function PL(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&ib(n.default)}const de=Object.assign;function Od(n,t){const e={};for(const i in t){const s=t[i];e[i]=An(s)?s.map(n):n(s)}return e}const Xa=()=>{},An=Array.isArray,nb=/#/g,ML=/&/g,EL=/\//g,kL=/=/g,AL=/\?/g,sb=/\+/g,DL=/%5B/g,jL=/%5D/g,rb=/%5E/g,IL=/%60/g,ob=/%7B/g,RL=/%7C/g,ab=/%7D/g,LL=/%20/g;function Tg(n){return encodeURI(""+n).replace(RL,"|").replace(DL,"[").replace(jL,"]")}function FL(n){return Tg(n).replace(ob,"{").replace(ab,"}").replace(rb,"^")}function pf(n){return Tg(n).replace(sb,"%2B").replace(LL,"+").replace(nb,"%23").replace(ML,"%26").replace(IL,"`").replace(ob,"{").replace(ab,"}").replace(rb,"^")}function BL(n){return pf(n).replace(kL,"%3D")}function zL(n){return Tg(n).replace(nb,"%23").replace(AL,"%3F")}function VL(n){return n==null?"":zL(n).replace(EL,"%2F")}function ol(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const HL=/\/$/,YL=n=>n.replace(HL,"");function Pd(n,t,e="/"){let i,s={},r="",o="";const l=t.indexOf("#");let h=t.indexOf("?");return l<h&&l>=0&&(h=-1),h>-1&&(i=t.slice(0,h),r=t.slice(h+1,l>-1?l:t.length),s=n(r)),l>-1&&(i=i||t.slice(0,l),o=t.slice(l,t.length)),i=UL(i??t,e),{fullPath:i+(r&&"?")+r+o,path:i,query:s,hash:ol(o)}}function XL(n,t){const e=t.query?n(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function Wv(n,t){return!t||!n.toLowerCase().startsWith(t.toLowerCase())?n:n.slice(t.length)||"/"}function WL(n,t,e){const i=t.matched.length-1,s=e.matched.length-1;return i>-1&&i===s&&Ro(t.matched[i],e.matched[s])&&lb(t.params,e.params)&&n(t.query)===n(e.query)&&t.hash===e.hash}function Ro(n,t){return(n.aliasOf||n)===(t.aliasOf||t)}function lb(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const e in n)if(!NL(n[e],t[e]))return!1;return!0}function NL(n,t){return An(n)?Nv(n,t):An(t)?Nv(t,n):n===t}function Nv(n,t){return An(t)?n.length===t.length&&n.every((e,i)=>e===t[i]):n.length===1&&n[0]===t}function UL(n,t){if(n.startsWith("/"))return n;if(!n)return t;const e=t.split("/"),i=n.split("/"),s=i[i.length-1];(s===".."||s===".")&&i.push("");let r=e.length-1,o,l;for(o=0;o<i.length;o++)if(l=i[o],l!==".")if(l==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+i.slice(o).join("/")}const zs={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var al;(function(n){n.pop="pop",n.push="push"})(al||(al={}));var Wa;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Wa||(Wa={}));function GL(n){if(!n)if(mo){const t=document.querySelector("base");n=t&&t.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),YL(n)}const $L=/^[^#]+#/;function KL(n,t){return n.replace($L,"#")+t}function qL(n,t){const e=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:t.behavior,left:i.left-e.left-(t.left||0),top:i.top-e.top-(t.top||0)}}const Lh=()=>({left:window.scrollX,top:window.scrollY});function ZL(n){let t;if("el"in n){const e=n.el,i=typeof e=="string"&&e.startsWith("#"),s=typeof e=="string"?i?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!s)return;t=qL(s,n)}else t=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Uv(n,t){return(history.state?history.state.position-t:-1)+n}const mf=new Map;function JL(n,t){mf.set(n,t)}function QL(n){const t=mf.get(n);return mf.delete(n),t}let t8=()=>location.protocol+"//"+location.host;function cb(n,t){const{pathname:e,search:i,hash:s}=t,r=n.indexOf("#");if(r>-1){let l=s.includes(n.slice(r))?n.slice(r).length:1,h=s.slice(l);return h[0]!=="/"&&(h="/"+h),Wv(h,"")}return Wv(e,n)+i+s}function e8(n,t,e,i){let s=[],r=[],o=null;const l=({state:p})=>{const m=cb(n,location),y=e.value,_=t.value;let b=0;if(p){if(e.value=m,t.value=p,o&&o===y){o=null;return}b=_?p.position-_.position:0}else i(m);s.forEach(x=>{x(e.value,y,{delta:b,type:al.pop,direction:b?b>0?Wa.forward:Wa.back:Wa.unknown})})};function h(){o=e.value}function u(p){s.push(p);const m=()=>{const y=s.indexOf(p);y>-1&&s.splice(y,1)};return r.push(m),m}function d(){const{history:p}=window;p.state&&p.replaceState(de({},p.state,{scroll:Lh()}),"")}function g(){for(const p of r)p();r=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:h,listen:u,destroy:g}}function Gv(n,t,e,i=!1,s=!1){return{back:n,current:t,forward:e,replaced:i,position:window.history.length,scroll:s?Lh():null}}function i8(n){const{history:t,location:e}=window,i={value:cb(n,e)},s={value:t.state};s.value||r(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(h,u,d){const g=n.indexOf("#"),p=g>-1?(e.host&&document.querySelector("base")?n:n.slice(g))+h:t8()+n+h;try{t[d?"replaceState":"pushState"](u,"",p),s.value=u}catch(m){console.error(m),e[d?"replace":"assign"](p)}}function o(h,u){const d=de({},t.state,Gv(s.value.back,h,s.value.forward,!0),u,{position:s.value.position});r(h,d,!0),i.value=h}function l(h,u){const d=de({},s.value,t.state,{forward:h,scroll:Lh()});r(d.current,d,!0);const g=de({},Gv(i.value,h,null),{position:d.position+1},u);r(h,g,!1),i.value=h}return{location:i,state:s,push:l,replace:o}}function n8(n){n=GL(n);const t=i8(n),e=e8(n,t.state,t.location,t.replace);function i(r,o=!0){o||e.pauseListeners(),history.go(r)}const s=de({location:"",base:n,go:i,createHref:KL.bind(null,n)},t,e);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function s8(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),n8(n)}function r8(n){return typeof n=="string"||n&&typeof n=="object"}function hb(n){return typeof n=="string"||typeof n=="symbol"}const ub=Symbol("");var $v;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})($v||($v={}));function Lo(n,t){return de(new Error,{type:n,[ub]:!0},t)}function hs(n,t){return n instanceof Error&&ub in n&&(t==null||!!(n.type&t))}const Kv="[^/]+?",o8={sensitive:!1,strict:!1,start:!0,end:!0},a8=/[.+*?^${}()[\]/\\]/g;function l8(n,t){const e=de({},o8,t),i=[];let s=e.start?"^":"";const r=[];for(const u of n){const d=u.length?[]:[90];e.strict&&!u.length&&(s+="/");for(let g=0;g<u.length;g++){const p=u[g];let m=40+(e.sensitive?.25:0);if(p.type===0)g||(s+="/"),s+=p.value.replace(a8,"\\$&"),m+=40;else if(p.type===1){const{value:y,repeatable:_,optional:b,regexp:x}=p;r.push({name:y,repeatable:_,optional:b});const T=x||Kv;if(T!==Kv){m+=10;try{new RegExp(`(${T})`)}catch(P){throw new Error(`Invalid custom RegExp for param "${y}" (${T}): `+P.message)}}let O=_?`((?:${T})(?:/(?:${T}))*)`:`(${T})`;g||(O=b&&u.length<2?`(?:/${O})`:"/"+O),b&&(O+="?"),s+=O,m+=20,b&&(m+=-8),_&&(m+=-20),T===".*"&&(m+=-50)}d.push(m)}i.push(d)}if(e.strict&&e.end){const u=i.length-1;i[u][i[u].length-1]+=.7000000000000001}e.strict||(s+="/?"),e.end?s+="$":e.strict&&(s+="(?:/|$)");const o=new RegExp(s,e.sensitive?"":"i");function l(u){const d=u.match(o),g={};if(!d)return null;for(let p=1;p<d.length;p++){const m=d[p]||"",y=r[p-1];g[y.name]=m&&y.repeatable?m.split("/"):m}return g}function h(u){let d="",g=!1;for(const p of n){(!g||!d.endsWith("/"))&&(d+="/"),g=!1;for(const m of p)if(m.type===0)d+=m.value;else if(m.type===1){const{value:y,repeatable:_,optional:b}=m,x=y in u?u[y]:"";if(An(x)&&!_)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const T=An(x)?x.join("/"):x;if(!T)if(b)p.length<2&&(d.endsWith("/")?d=d.slice(0,-1):g=!0);else throw new Error(`Missing required param "${y}"`);d+=T}}return d||"/"}return{re:o,score:i,keys:r,parse:l,stringify:h}}function c8(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=t[e]-n[e];if(i)return i;e++}return n.length<t.length?n.length===1&&n[0]===80?-1:1:n.length>t.length?t.length===1&&t[0]===80?1:-1:0}function db(n,t){let e=0;const i=n.score,s=t.score;for(;e<i.length&&e<s.length;){const r=c8(i[e],s[e]);if(r)return r;e++}if(Math.abs(s.length-i.length)===1){if(qv(i))return 1;if(qv(s))return-1}return s.length-i.length}function qv(n){const t=n[n.length-1];return n.length>0&&t[t.length-1]<0}const h8={type:0,value:""},u8=/[a-zA-Z0-9_]/;function d8(n){if(!n)return[[]];if(n==="/")return[[h8]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function t(m){throw new Error(`ERR (${e})/"${u}": ${m}`)}let e=0,i=e;const s=[];let r;function o(){r&&s.push(r),r=[]}let l=0,h,u="",d="";function g(){u&&(e===0?r.push({type:0,value:u}):e===1||e===2||e===3?(r.length>1&&(h==="*"||h==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:u,regexp:d,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=h}for(;l<n.length;){if(h=n[l++],h==="\\"&&e!==2){i=e,e=4;continue}switch(e){case 0:h==="/"?(u&&g(),o()):h===":"?(g(),e=1):p();break;case 4:p(),e=i;break;case 1:h==="("?e=2:u8.test(h)?p():(g(),e=0,h!=="*"&&h!=="?"&&h!=="+"&&l--);break;case 2:h===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+h:e=3:d+=h;break;case 3:g(),e=0,h!=="*"&&h!=="?"&&h!=="+"&&l--,d="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${u}"`),g(),o(),s}function f8(n,t,e){const i=l8(d8(n.path),e),s=de(i,{record:n,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function g8(n,t){const e=[],i=new Map;t=t1({strict:!1,end:!0,sensitive:!1},t);function s(g){return i.get(g)}function r(g,p,m){const y=!m,_=Jv(g);_.aliasOf=m&&m.record;const b=t1(t,g),x=[_];if("alias"in g){const P=typeof g.alias=="string"?[g.alias]:g.alias;for(const F of P)x.push(Jv(de({},_,{components:m?m.record.components:_.components,path:F,aliasOf:m?m.record:_})))}let T,O;for(const P of x){const{path:F}=P;if(p&&F[0]!=="/"){const X=p.record.path,R=X[X.length-1]==="/"?"":"/";P.path=p.record.path+(F&&R+F)}if(T=f8(P,p,b),m?m.alias.push(T):(O=O||T,O!==T&&O.alias.push(T),y&&g.name&&!Qv(T)&&o(g.name)),fb(T)&&h(T),_.children){const X=_.children;for(let R=0;R<X.length;R++)r(X[R],T,m&&m.children[R])}m=m||T}return O?()=>{o(O)}:Xa}function o(g){if(hb(g)){const p=i.get(g);p&&(i.delete(g),e.splice(e.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=e.indexOf(g);p>-1&&(e.splice(p,1),g.record.name&&i.delete(g.record.name),g.children.forEach(o),g.alias.forEach(o))}}function l(){return e}function h(g){const p=v8(g,e);e.splice(p,0,g),g.record.name&&!Qv(g)&&i.set(g.record.name,g)}function u(g,p){let m,y={},_,b;if("name"in g&&g.name){if(m=i.get(g.name),!m)throw Lo(1,{location:g});b=m.record.name,y=de(Zv(p.params,m.keys.filter(O=>!O.optional).concat(m.parent?m.parent.keys.filter(O=>O.optional):[]).map(O=>O.name)),g.params&&Zv(g.params,m.keys.map(O=>O.name))),_=m.stringify(y)}else if(g.path!=null)_=g.path,m=e.find(O=>O.re.test(_)),m&&(y=m.parse(_),b=m.record.name);else{if(m=p.name?i.get(p.name):e.find(O=>O.re.test(p.path)),!m)throw Lo(1,{location:g,currentLocation:p});b=m.record.name,y=de({},p.params,g.params),_=m.stringify(y)}const x=[];let T=m;for(;T;)x.unshift(T.record),T=T.parent;return{name:b,path:_,params:y,matched:x,meta:m8(x)}}n.forEach(g=>r(g));function d(){e.length=0,i.clear()}return{addRoute:r,resolve:u,removeRoute:o,clearRoutes:d,getRoutes:l,getRecordMatcher:s}}function Zv(n,t){const e={};for(const i of t)i in n&&(e[i]=n[i]);return e}function Jv(n){const t={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:p8(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function p8(n){const t={},e=n.props||!1;if("component"in n)t.default=e;else for(const i in n.components)t[i]=typeof e=="object"?e[i]:e;return t}function Qv(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function m8(n){return n.reduce((t,e)=>de(t,e.meta),{})}function t1(n,t){const e={};for(const i in n)e[i]=i in t?t[i]:n[i];return e}function v8(n,t){let e=0,i=t.length;for(;e!==i;){const r=e+i>>1;db(n,t[r])<0?i=r:e=r+1}const s=y8(n);return s&&(i=t.lastIndexOf(s,i-1)),i}function y8(n){let t=n;for(;t=t.parent;)if(fb(t)&&db(n,t)===0)return t}function fb({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function _8(n){const t={};if(n===""||n==="?")return t;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let s=0;s<i.length;++s){const r=i[s].replace(sb," "),o=r.indexOf("="),l=ol(o<0?r:r.slice(0,o)),h=o<0?null:ol(r.slice(o+1));if(l in t){let u=t[l];An(u)||(u=t[l]=[u]),u.push(h)}else t[l]=h}return t}function e1(n){let t="";for(let e in n){const i=n[e];if(e=BL(e),i==null){i!==void 0&&(t+=(t.length?"&":"")+e);continue}(An(i)?i.map(r=>r&&pf(r)):[i&&pf(i)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+e,r!=null&&(t+="="+r))})}return t}function w8(n){const t={};for(const e in n){const i=n[e];i!==void 0&&(t[e]=An(i)?i.map(s=>s==null?null:""+s):i==null?i:""+i)}return t}const b8=Symbol(""),i1=Symbol(""),Og=Symbol(""),gb=Symbol(""),vf=Symbol("");function ca(){let n=[];function t(i){return n.push(i),()=>{const s=n.indexOf(i);s>-1&&n.splice(s,1)}}function e(){n=[]}return{add:t,list:()=>n.slice(),reset:e}}function Xs(n,t,e,i,s,r=o=>o()){const o=i&&(i.enterCallbacks[s]=i.enterCallbacks[s]||[]);return()=>new Promise((l,h)=>{const u=p=>{p===!1?h(Lo(4,{from:e,to:t})):p instanceof Error?h(p):r8(p)?h(Lo(2,{from:t,to:p})):(o&&i.enterCallbacks[s]===o&&typeof p=="function"&&o.push(p),l())},d=r(()=>n.call(i&&i.instances[s],t,e,u));let g=Promise.resolve(d);n.length<3&&(g=g.then(u)),g.catch(p=>h(p))})}function Md(n,t,e,i,s=r=>r()){const r=[];for(const o of n)for(const l in o.components){let h=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(ib(h)){const d=(h.__vccOpts||h)[t];d&&r.push(Xs(d,e,i,o,l,s))}else{let u=h();r.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const g=PL(d)?d.default:d;o.mods[l]=d,o.components[l]=g;const m=(g.__vccOpts||g)[t];return m&&Xs(m,e,i,o,l,s)()}))}}return r}function n1(n){const t=Gn(Og),e=Gn(gb),i=yt(()=>{const h=$s(n.to);return t.resolve(h)}),s=yt(()=>{const{matched:h}=i.value,{length:u}=h,d=h[u-1],g=e.matched;if(!d||!g.length)return-1;const p=g.findIndex(Ro.bind(null,d));if(p>-1)return p;const m=s1(h[u-2]);return u>1&&s1(d)===m&&g[g.length-1].path!==m?g.findIndex(Ro.bind(null,h[u-2])):p}),r=yt(()=>s.value>-1&&T8(e.params,i.value.params)),o=yt(()=>s.value>-1&&s.value===e.matched.length-1&&lb(e.params,i.value.params));function l(h={}){return S8(h)?t[$s(n.replace)?"replace":"push"]($s(n.to)).catch(Xa):Promise.resolve()}return{route:i,href:yt(()=>i.value.href),isActive:r,isExactActive:o,navigate:l}}const x8=Qt({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:n1,setup(n,{slots:t}){const e=Kn(n1(n)),{options:i}=Gn(Og),s=yt(()=>({[r1(n.activeClass,i.linkActiveClass,"router-link-active")]:e.isActive,[r1(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=t.default&&t.default(e);return n.custom?r:by("a",{"aria-current":e.isExactActive?n.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:s.value},r)}}}),C8=x8;function S8(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const t=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return n.preventDefault&&n.preventDefault(),!0}}function T8(n,t){for(const e in t){const i=t[e],s=n[e];if(typeof i=="string"){if(i!==s)return!1}else if(!An(s)||s.length!==i.length||i.some((r,o)=>r!==s[o]))return!1}return!0}function s1(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const r1=(n,t,e)=>n??t??e,O8=Qt({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:t,slots:e}){const i=Gn(vf),s=yt(()=>n.route||i.value),r=Gn(i1,0),o=yt(()=>{let u=$s(r);const{matched:d}=s.value;let g;for(;(g=d[u])&&!g.components;)u++;return u}),l=yt(()=>s.value.matched[o.value]);Tc(i1,yt(()=>o.value+1)),Tc(b8,l),Tc(vf,s);const h=St();return We(()=>[h.value,l.value,n.name],([u,d,g],[p,m,y])=>{d&&(d.instances[g]=u,m&&m!==d&&u&&u===p&&(d.leaveGuards.size||(d.leaveGuards=m.leaveGuards),d.updateGuards.size||(d.updateGuards=m.updateGuards))),u&&d&&(!m||!Ro(d,m)||!p)&&(d.enterCallbacks[g]||[]).forEach(_=>_(u))},{flush:"post"}),()=>{const u=s.value,d=n.name,g=l.value,p=g&&g.components[d];if(!p)return o1(e.default,{Component:p,route:u});const m=g.props[d],y=m?m===!0?u.params:typeof m=="function"?m(u):m:null,b=by(p,de({},y,t,{onVnodeUnmounted:x=>{x.component.isUnmounted&&(g.instances[d]=null)},ref:h}));return o1(e.default,{Component:b,route:u})||b}}});function o1(n,t){if(!n)return null;const e=n(t);return e.length===1?e[0]:e}const P8=O8;function M8(n){const t=g8(n.routes,n),e=n.parseQuery||_8,i=n.stringifyQuery||e1,s=n.history,r=ca(),o=ca(),l=ca(),h=ja(zs);let u=zs;mo&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Od.bind(null,G=>""+G),g=Od.bind(null,VL),p=Od.bind(null,ol);function m(G,pt){let ot,xt;return hb(G)?(ot=t.getRecordMatcher(G),xt=pt):xt=G,t.addRoute(xt,ot)}function y(G){const pt=t.getRecordMatcher(G);pt&&t.removeRoute(pt)}function _(){return t.getRoutes().map(G=>G.record)}function b(G){return!!t.getRecordMatcher(G)}function x(G,pt){if(pt=de({},pt||h.value),typeof G=="string"){const k=Pd(e,G,pt.path),H=t.resolve({path:k.path},pt),tt=s.createHref(k.fullPath);return de(k,H,{params:p(H.params),hash:ol(k.hash),redirectedFrom:void 0,href:tt})}let ot;if(G.path!=null)ot=de({},G,{path:Pd(e,G.path,pt.path).path});else{const k=de({},G.params);for(const H in k)k[H]==null&&delete k[H];ot=de({},G,{params:g(k)}),pt.params=g(pt.params)}const xt=t.resolve(ot,pt),te=G.hash||"";xt.params=d(p(xt.params));const fe=XL(i,de({},G,{hash:FL(te),path:xt.path})),M=s.createHref(fe);return de({fullPath:fe,hash:te,query:i===e1?w8(G.query):G.query||{}},xt,{redirectedFrom:void 0,href:M})}function T(G){return typeof G=="string"?Pd(e,G,h.value.path):de({},G)}function O(G,pt){if(u!==G)return Lo(8,{from:pt,to:G})}function P(G){return R(G)}function F(G){return P(de(T(G),{replace:!0}))}function X(G){const pt=G.matched[G.matched.length-1];if(pt&&pt.redirect){const{redirect:ot}=pt;let xt=typeof ot=="function"?ot(G):ot;return typeof xt=="string"&&(xt=xt.includes("?")||xt.includes("#")?xt=T(xt):{path:xt},xt.params={}),de({query:G.query,hash:G.hash,params:xt.path!=null?{}:G.params},xt)}}function R(G,pt){const ot=u=x(G),xt=h.value,te=G.state,fe=G.force,M=G.replace===!0,k=X(ot);if(k)return R(de(T(k),{state:typeof k=="object"?de({},te,k.state):te,force:fe,replace:M}),pt||ot);const H=ot;H.redirectedFrom=pt;let tt;return!fe&&WL(i,xt,ot)&&(tt=Lo(16,{to:H,from:xt}),Ut(xt,xt,!0,!1)),(tt?Promise.resolve(tt):st(H,xt)).catch(W=>hs(W)?hs(W,2)?W:zt(W):gt(W,H,xt)).then(W=>{if(W){if(hs(W,2))return R(de({replace:M},T(W.to),{state:typeof W.to=="object"?de({},te,W.to.state):te,force:fe}),pt||H)}else W=ut(H,xt,!0,M,te);return ht(H,xt,W),W})}function V(G,pt){const ot=O(G,pt);return ot?Promise.reject(ot):Promise.resolve()}function $(G){const pt=qt.values().next().value;return pt&&typeof pt.runWithContext=="function"?pt.runWithContext(G):G()}function st(G,pt){let ot;const[xt,te,fe]=E8(G,pt);ot=Md(xt.reverse(),"beforeRouteLeave",G,pt);for(const k of xt)k.leaveGuards.forEach(H=>{ot.push(Xs(H,G,pt))});const M=V.bind(null,G,pt);return ot.push(M),we(ot).then(()=>{ot=[];for(const k of r.list())ot.push(Xs(k,G,pt));return ot.push(M),we(ot)}).then(()=>{ot=Md(te,"beforeRouteUpdate",G,pt);for(const k of te)k.updateGuards.forEach(H=>{ot.push(Xs(H,G,pt))});return ot.push(M),we(ot)}).then(()=>{ot=[];for(const k of fe)if(k.beforeEnter)if(An(k.beforeEnter))for(const H of k.beforeEnter)ot.push(Xs(H,G,pt));else ot.push(Xs(k.beforeEnter,G,pt));return ot.push(M),we(ot)}).then(()=>(G.matched.forEach(k=>k.enterCallbacks={}),ot=Md(fe,"beforeRouteEnter",G,pt,$),ot.push(M),we(ot))).then(()=>{ot=[];for(const k of o.list())ot.push(Xs(k,G,pt));return ot.push(M),we(ot)}).catch(k=>hs(k,8)?k:Promise.reject(k))}function ht(G,pt,ot){l.list().forEach(xt=>$(()=>xt(G,pt,ot)))}function ut(G,pt,ot,xt,te){const fe=O(G,pt);if(fe)return fe;const M=pt===zs,k=mo?history.state:{};ot&&(xt||M?s.replace(G.fullPath,de({scroll:M&&k&&k.scroll},te)):s.push(G.fullPath,te)),h.value=G,Ut(G,pt,ot,M),zt()}let ct;function bt(){ct||(ct=s.listen((G,pt,ot)=>{if(!oe.listening)return;const xt=x(G),te=X(xt);if(te){R(de(te,{replace:!0}),xt).catch(Xa);return}u=xt;const fe=h.value;mo&&JL(Uv(fe.fullPath,ot.delta),Lh()),st(xt,fe).catch(M=>hs(M,12)?M:hs(M,2)?(R(M.to,xt).then(k=>{hs(k,20)&&!ot.delta&&ot.type===al.pop&&s.go(-1,!1)}).catch(Xa),Promise.reject()):(ot.delta&&s.go(-ot.delta,!1),gt(M,xt,fe))).then(M=>{M=M||ut(xt,fe,!1),M&&(ot.delta&&!hs(M,8)?s.go(-ot.delta,!1):ot.type===al.pop&&hs(M,20)&&s.go(-1,!1)),ht(xt,fe,M)}).catch(Xa)}))}let Et=ca(),dt=ca(),_t;function gt(G,pt,ot){zt(G);const xt=dt.list();return xt.length?xt.forEach(te=>te(G,pt,ot)):console.error(G),Promise.reject(G)}function Kt(){return _t&&h.value!==zs?Promise.resolve():new Promise((G,pt)=>{Et.add([G,pt])})}function zt(G){return _t||(_t=!G,bt(),Et.list().forEach(([pt,ot])=>G?ot(G):pt()),Et.reset()),G}function Ut(G,pt,ot,xt){const{scrollBehavior:te}=n;if(!mo||!te)return Promise.resolve();const fe=!ot&&QL(Uv(G.fullPath,0))||(xt||!ot)&&history.state&&history.state.scroll||null;return _s().then(()=>te(G,pt,fe)).then(M=>M&&ZL(M)).catch(M=>gt(M,G,pt))}const ne=G=>s.go(G);let pe;const qt=new Set,oe={currentRoute:h,listening:!0,addRoute:m,removeRoute:y,clearRoutes:t.clearRoutes,hasRoute:b,getRoutes:_,resolve:x,options:n,push:P,replace:F,go:ne,back:()=>ne(-1),forward:()=>ne(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:dt.add,isReady:Kt,install(G){const pt=this;G.component("RouterLink",C8),G.component("RouterView",P8),G.config.globalProperties.$router=pt,Object.defineProperty(G.config.globalProperties,"$route",{enumerable:!0,get:()=>$s(h)}),mo&&!pe&&h.value===zs&&(pe=!0,P(s.location).catch(te=>{}));const ot={};for(const te in zs)Object.defineProperty(ot,te,{get:()=>h.value[te],enumerable:!0});G.provide(Og,pt),G.provide(gb,I1(ot)),G.provide(vf,h);const xt=G.unmount;qt.add(G),G.unmount=function(){qt.delete(G),qt.size<1&&(u=zs,ct&&ct(),ct=null,h.value=zs,pe=!1,_t=!1),xt()}}};function we(G){return G.reduce((pt,ot)=>pt.then(()=>$(ot)),Promise.resolve())}return oe}function E8(n,t){const e=[],i=[],s=[],r=Math.max(t.matched.length,n.matched.length);for(let o=0;o<r;o++){const l=t.matched[o];l&&(n.matched.find(u=>Ro(u,l))?i.push(l):e.push(l));const h=n.matched[o];h&&(t.matched.find(u=>Ro(u,h))||s.push(h))}return[e,i,s]}const k8=Qt({setup(){console.log("build v1.0.8")}}),pb=(n,t)=>{const e=n.__vccOpts||n;for(const[i,s]of t)e[i]=s;return e};function A8(n,t,e,i,s,r){const o=ft("Editor");return U(),vi(o)}const D8=pb(k8,[["render",A8]]),j8=[{path:"/",name:"app",component:D8}],I8=M8({history:s8("/vue-fabric-design-editor/"),routes:j8}),R8={};function L8(n,t){const e=ft("router-view");return U(),vi(e)}const F8=pb(R8,[["render",L8]]),Pg=hM(F8);Pg.use(OL,{name:"Editor"});Pg.use(I8);Pg.mount("#app");
