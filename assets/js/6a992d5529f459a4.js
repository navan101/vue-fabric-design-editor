(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=e(r);fetch(r.href,s)}})();/**
* @vue/shared v3.5.6
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function kf(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const _e={},To=[],$n=()=>{},dO=()=>!1,mh=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),jf=n=>n.startsWith("onUpdate:"),di=Object.assign,Df=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},fO=Object.prototype.hasOwnProperty,ce=(n,t)=>fO.call(n,t),Bt=Array.isArray,Po=n=>pl(n)==="[object Map]",b1=n=>pl(n)==="[object Set]",gO=n=>pl(n)==="[object RegExp]",Ft=n=>typeof n=="function",De=n=>typeof n=="string",is=n=>typeof n=="symbol",Pe=n=>n!==null&&typeof n=="object",w1=n=>(Pe(n)||Ft(n))&&Ft(n.then)&&Ft(n.catch),x1=Object.prototype.toString,pl=n=>x1.call(n),pO=n=>pl(n).slice(8,-1),C1=n=>pl(n)==="[object Object]",If=n=>De(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,La=kf(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),vh=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},mO=/-(\w)/g,kn=vh(n=>n.replace(mO,(t,e)=>e?e.toUpperCase():"")),vO=/\B([A-Z])/g,Vs=vh(n=>n.replace(vO,"-$1").toLowerCase()),yh=vh(n=>n.charAt(0).toUpperCase()+n.slice(1)),cd=vh(n=>n?`on${yh(n)}`:""),Kr=(n,t)=>!Object.is(n,t),Oo=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},S1=(n,t,e,i=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:i,value:e})},Yd=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let mm;const T1=()=>mm||(mm=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Ji(n){if(Bt(n)){const t={};for(let e=0;e<n.length;e++){const i=n[e],r=De(i)?wO(i):Ji(i);if(r)for(const s in r)t[s]=r[s]}return t}else if(De(n)||Pe(n))return n}const yO=/;(?![^(]*\))/g,_O=/:([^]+)/,bO=/\/\*[^]*?\*\//g;function wO(n){const t={};return n.replace(bO,"").split(yO).forEach(e=>{if(e){const i=e.split(_O);i.length>1&&(t[i[0].trim()]=i[1].trim())}}),t}function Ye(n){let t="";if(De(n))t=n;else if(Bt(n))for(let e=0;e<n.length;e++){const i=Ye(n[e]);i&&(t+=i+" ")}else if(Pe(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}function P1(n){if(!n)return null;let{class:t,style:e}=n;return t&&!De(t)&&(n.class=Ye(t)),e&&(n.style=Ji(e)),n}const xO="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",CO=kf(xO);function O1(n){return!!n||n===""}const E1=n=>!!(n&&n.__v_isRef===!0),Kn=n=>De(n)?n:n==null?"":Bt(n)||Pe(n)&&(n.toString===x1||!Ft(n.toString))?E1(n)?Kn(n.value):JSON.stringify(n,M1,2):String(n),M1=(n,t)=>E1(t)?M1(n,t.value):Po(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[i,r],s)=>(e[hd(i,s)+" =>"]=r,e),{})}:b1(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>hd(e))}:is(t)?hd(t):Pe(t)&&!Bt(t)&&!C1(t)?String(t):t,hd=(n,t="")=>{var e;return is(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.5.6
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Oi;class A1{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Oi,!t&&Oi&&(this.index=(Oi.scopes||(Oi.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=Oi;try{return Oi=this,t()}finally{Oi=e}}}on(){Oi=this}off(){Oi=this.parent}stop(t){if(this._active){let e,i;for(e=0,i=this.effects.length;e<i;e++)this.effects[e].stop();for(e=0,i=this.cleanups.length;e<i;e++)this.cleanups[e]();if(this.scopes)for(e=0,i=this.scopes.length;e<i;e++)this.scopes[e].stop(!0);if(!this.detached&&this.parent&&!t){const r=this.parent.scopes.pop();r&&r!==this&&(this.parent.scopes[this.index]=r,r.index=this.index)}this.parent=void 0,this._active=!1}}}function k1(n){return new A1(n)}function _h(){return Oi}function j1(n,t=!1){Oi&&Oi.cleanups.push(n)}let ye;const ud=new WeakSet;class D1{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Oi&&Oi.active&&Oi.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,ud.has(this)&&(ud.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||R1(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,vm(this),L1(this);const t=ye,e=En;ye=this,En=!0;try{return this.fn()}finally{B1(this),ye=t,En=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Bf(t);this.deps=this.depsTail=void 0,vm(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?ud.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Nd(this)&&this.run()}get dirty(){return Nd(this)}}let I1=0,Ba;function R1(n){n.flags|=8,n.next=Ba,Ba=n}function Rf(){I1++}function Lf(){if(--I1>0)return;let n;for(;Ba;){let t=Ba;for(Ba=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(i){n||(n=i)}t=e}}if(n)throw n}function L1(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function B1(n){let t,e=n.depsTail,i=e;for(;i;){const r=i.prevDep;i.version===-1?(i===e&&(e=r),Bf(i),SO(i)):t=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=r}n.deps=t,n.depsTail=e}function Nd(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(F1(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function F1(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===$a))return;n.globalVersion=$a;const t=n.dep;if(n.flags|=2,t.version>0&&!n.isSSR&&n.deps&&!Nd(n)){n.flags&=-3;return}const e=ye,i=En;ye=n,En=!0;try{L1(n);const r=n.fn(n._value);(t.version===0||Kr(r,n._value))&&(n._value=r,t.version++)}catch(r){throw t.version++,r}finally{ye=e,En=i,B1(n),n.flags&=-3}}function Bf(n){const{dep:t,prevSub:e,nextSub:i}=n;if(e&&(e.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=e,n.nextSub=void 0),t.subs===n&&(t.subs=e),!t.subs&&t.computed){t.computed.flags&=-5;for(let r=t.computed.deps;r;r=r.nextDep)Bf(r)}}function SO(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}let En=!0;const z1=[];function ns(){z1.push(En),En=!1}function rs(){const n=z1.pop();En=n===void 0?!0:n}function vm(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=ye;ye=void 0;try{t()}finally{ye=e}}}let $a=0;class TO{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class bh{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0}track(t){if(!ye||!En||ye===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==ye)e=this.activeLink=new TO(ye,this),ye.deps?(e.prevDep=ye.depsTail,ye.depsTail.nextDep=e,ye.depsTail=e):ye.deps=ye.depsTail=e,ye.flags&4&&V1(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const i=e.nextDep;i.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=i),e.prevDep=ye.depsTail,e.nextDep=void 0,ye.depsTail.nextDep=e,ye.depsTail=e,ye.deps===e&&(ye.deps=i)}return e}trigger(t){this.version++,$a++,this.notify(t)}notify(t){Rf();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{Lf()}}}function V1(n){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let i=t.deps;i;i=i.nextDep)V1(i)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}const Wc=new WeakMap,ks=Symbol(""),Wd=Symbol(""),Ka=Symbol("");function bi(n,t,e){if(En&&ye){let i=Wc.get(n);i||Wc.set(n,i=new Map);let r=i.get(e);r||i.set(e,r=new bh),r.track()}}function _r(n,t,e,i,r,s){const o=Wc.get(n);if(!o){$a++;return}const l=h=>{h&&h.trigger()};if(Rf(),t==="clear")o.forEach(l);else{const h=Bt(n),u=h&&If(e);if(h&&e==="length"){const d=Number(i);o.forEach((g,p)=>{(p==="length"||p===Ka||!is(p)&&p>=d)&&l(g)})}else switch(e!==void 0&&l(o.get(e)),u&&l(o.get(Ka)),t){case"add":h?u&&l(o.get("length")):(l(o.get(ks)),Po(n)&&l(o.get(Wd)));break;case"delete":h||(l(o.get(ks)),Po(n)&&l(o.get(Wd)));break;case"set":Po(n)&&l(o.get(ks));break}}Lf()}function PO(n,t){var e;return(e=Wc.get(n))==null?void 0:e.get(t)}function ho(n){const t=oe(n);return t===n?t:(bi(t,"iterate",Ka),mn(n)?t:t.map(vi))}function wh(n){return bi(n=oe(n),"iterate",Ka),n}const OO={__proto__:null,[Symbol.iterator](){return dd(this,Symbol.iterator,vi)},concat(...n){return ho(this).concat(...n.map(t=>Bt(t)?ho(t):t))},entries(){return dd(this,"entries",n=>(n[1]=vi(n[1]),n))},every(n,t){return fr(this,"every",n,t,void 0,arguments)},filter(n,t){return fr(this,"filter",n,t,e=>e.map(vi),arguments)},find(n,t){return fr(this,"find",n,t,vi,arguments)},findIndex(n,t){return fr(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return fr(this,"findLast",n,t,vi,arguments)},findLastIndex(n,t){return fr(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return fr(this,"forEach",n,t,void 0,arguments)},includes(...n){return fd(this,"includes",n)},indexOf(...n){return fd(this,"indexOf",n)},join(n){return ho(this).join(n)},lastIndexOf(...n){return fd(this,"lastIndexOf",n)},map(n,t){return fr(this,"map",n,t,void 0,arguments)},pop(){return la(this,"pop")},push(...n){return la(this,"push",n)},reduce(n,...t){return ym(this,"reduce",n,t)},reduceRight(n,...t){return ym(this,"reduceRight",n,t)},shift(){return la(this,"shift")},some(n,t){return fr(this,"some",n,t,void 0,arguments)},splice(...n){return la(this,"splice",n)},toReversed(){return ho(this).toReversed()},toSorted(n){return ho(this).toSorted(n)},toSpliced(...n){return ho(this).toSpliced(...n)},unshift(...n){return la(this,"unshift",n)},values(){return dd(this,"values",vi)}};function dd(n,t,e){const i=wh(n),r=i[t]();return i!==n&&!mn(n)&&(r._next=r.next,r.next=()=>{const s=r._next();return s.value&&(s.value=e(s.value)),s}),r}const EO=Array.prototype;function fr(n,t,e,i,r,s){const o=wh(n),l=o!==n&&!mn(n),h=o[t];if(h!==EO[t]){const g=h.apply(n,s);return l?vi(g):g}let u=e;o!==n&&(l?u=function(g,p){return e.call(this,vi(g),p,n)}:e.length>2&&(u=function(g,p){return e.call(this,g,p,n)}));const d=h.call(o,u,i);return l&&r?r(d):d}function ym(n,t,e,i){const r=wh(n);let s=e;return r!==n&&(mn(n)?e.length>3&&(s=function(o,l,h){return e.call(this,o,l,h,n)}):s=function(o,l,h){return e.call(this,o,vi(l),h,n)}),r[t](s,...i)}function fd(n,t,e){const i=oe(n);bi(i,"iterate",Ka);const r=i[t](...e);return(r===-1||r===!1)&&Xf(e[0])?(e[0]=oe(e[0]),i[t](...e)):r}function la(n,t,e=[]){ns(),Rf();const i=oe(n)[t].apply(n,e);return Lf(),rs(),i}const MO=kf("__proto__,__v_isRef,__isVue"),X1=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(is));function AO(n){is(n)||(n=String(n));const t=oe(this);return bi(t,"has",n),t.hasOwnProperty(n)}class H1{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,i){const r=this._isReadonly,s=this._isShallow;if(e==="__v_isReactive")return!r;if(e==="__v_isReadonly")return r;if(e==="__v_isShallow")return s;if(e==="__v_raw")return i===(r?s?YO:U1:s?W1:N1).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(i)?t:void 0;const o=Bt(t);if(!r){let h;if(o&&(h=OO[e]))return h;if(e==="hasOwnProperty")return AO}const l=Reflect.get(t,e,Te(t)?t:i);return(is(e)?X1.has(e):MO(e))||(r||bi(t,"get",e),s)?l:Te(l)?o&&If(e)?l:l.value:Pe(l)?r?jo(l):jn(l):l}}class Y1 extends H1{constructor(t=!1){super(!1,t)}set(t,e,i,r){let s=t[e];if(!this._isShallow){const h=Ls(s);if(!mn(i)&&!Ls(i)&&(s=oe(s),i=oe(i)),!Bt(t)&&Te(s)&&!Te(i))return h?!1:(s.value=i,!0)}const o=Bt(t)&&If(e)?Number(e)<t.length:ce(t,e),l=Reflect.set(t,e,i,Te(t)?t:r);return t===oe(r)&&(o?Kr(i,s)&&_r(t,"set",e,i):_r(t,"add",e,i)),l}deleteProperty(t,e){const i=ce(t,e);t[e];const r=Reflect.deleteProperty(t,e);return r&&i&&_r(t,"delete",e,void 0),r}has(t,e){const i=Reflect.has(t,e);return(!is(e)||!X1.has(e))&&bi(t,"has",e),i}ownKeys(t){return bi(t,"iterate",Bt(t)?"length":ks),Reflect.ownKeys(t)}}class kO extends H1{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const jO=new Y1,DO=new kO,IO=new Y1(!0);const Ff=n=>n,xh=n=>Reflect.getPrototypeOf(n);function vc(n,t,e=!1,i=!1){n=n.__v_raw;const r=oe(n),s=oe(t);e||(Kr(t,s)&&bi(r,"get",t),bi(r,"get",s));const{has:o}=xh(r),l=i?Ff:e?Hf:vi;if(o.call(r,t))return l(n.get(t));if(o.call(r,s))return l(n.get(s));n!==r&&n.get(t)}function yc(n,t=!1){const e=this.__v_raw,i=oe(e),r=oe(n);return t||(Kr(n,r)&&bi(i,"has",n),bi(i,"has",r)),n===r?e.has(n):e.has(n)||e.has(r)}function _c(n,t=!1){return n=n.__v_raw,!t&&bi(oe(n),"iterate",ks),Reflect.get(n,"size",n)}function _m(n,t=!1){!t&&!mn(n)&&!Ls(n)&&(n=oe(n));const e=oe(this);return xh(e).has.call(e,n)||(e.add(n),_r(e,"add",n,n)),this}function bm(n,t,e=!1){!e&&!mn(t)&&!Ls(t)&&(t=oe(t));const i=oe(this),{has:r,get:s}=xh(i);let o=r.call(i,n);o||(n=oe(n),o=r.call(i,n));const l=s.call(i,n);return i.set(n,t),o?Kr(t,l)&&_r(i,"set",n,t):_r(i,"add",n,t),this}function wm(n){const t=oe(this),{has:e,get:i}=xh(t);let r=e.call(t,n);r||(n=oe(n),r=e.call(t,n)),i&&i.call(t,n);const s=t.delete(n);return r&&_r(t,"delete",n,void 0),s}function xm(){const n=oe(this),t=n.size!==0,e=n.clear();return t&&_r(n,"clear",void 0,void 0),e}function bc(n,t){return function(i,r){const s=this,o=s.__v_raw,l=oe(o),h=t?Ff:n?Hf:vi;return!n&&bi(l,"iterate",ks),o.forEach((u,d)=>i.call(r,h(u),h(d),s))}}function wc(n,t,e){return function(...i){const r=this.__v_raw,s=oe(r),o=Po(s),l=n==="entries"||n===Symbol.iterator&&o,h=n==="keys"&&o,u=r[n](...i),d=e?Ff:t?Hf:vi;return!t&&bi(s,"iterate",h?Wd:ks),{next(){const{value:g,done:p}=u.next();return p?{value:g,done:p}:{value:l?[d(g[0]),d(g[1])]:d(g),done:p}},[Symbol.iterator](){return this}}}}function Br(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function RO(){const n={get(s){return vc(this,s)},get size(){return _c(this)},has:yc,add:_m,set:bm,delete:wm,clear:xm,forEach:bc(!1,!1)},t={get(s){return vc(this,s,!1,!0)},get size(){return _c(this)},has:yc,add(s){return _m.call(this,s,!0)},set(s,o){return bm.call(this,s,o,!0)},delete:wm,clear:xm,forEach:bc(!1,!0)},e={get(s){return vc(this,s,!0)},get size(){return _c(this,!0)},has(s){return yc.call(this,s,!0)},add:Br("add"),set:Br("set"),delete:Br("delete"),clear:Br("clear"),forEach:bc(!0,!1)},i={get(s){return vc(this,s,!0,!0)},get size(){return _c(this,!0)},has(s){return yc.call(this,s,!0)},add:Br("add"),set:Br("set"),delete:Br("delete"),clear:Br("clear"),forEach:bc(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=wc(s,!1,!1),e[s]=wc(s,!0,!1),t[s]=wc(s,!1,!0),i[s]=wc(s,!0,!0)}),[n,e,t,i]}const[LO,BO,FO,zO]=RO();function zf(n,t){const e=t?n?zO:FO:n?BO:LO;return(i,r,s)=>r==="__v_isReactive"?!n:r==="__v_isReadonly"?n:r==="__v_raw"?i:Reflect.get(ce(e,r)&&r in i?e:i,r,s)}const VO={get:zf(!1,!1)},XO={get:zf(!1,!0)},HO={get:zf(!0,!1)};const N1=new WeakMap,W1=new WeakMap,U1=new WeakMap,YO=new WeakMap;function NO(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function WO(n){return n.__v_skip||!Object.isExtensible(n)?0:NO(pO(n))}function jn(n){return Ls(n)?n:Vf(n,!1,jO,VO,N1)}function G1(n){return Vf(n,!1,IO,XO,W1)}function jo(n){return Vf(n,!0,DO,HO,U1)}function Vf(n,t,e,i,r){if(!Pe(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const s=r.get(n);if(s)return s;const o=WO(n);if(o===0)return n;const l=new Proxy(n,o===2?i:e);return r.set(n,l),l}function qr(n){return Ls(n)?qr(n.__v_raw):!!(n&&n.__v_isReactive)}function Ls(n){return!!(n&&n.__v_isReadonly)}function mn(n){return!!(n&&n.__v_isShallow)}function Xf(n){return n?!!n.__v_raw:!1}function oe(n){const t=n&&n.__v_raw;return t?oe(t):n}function Ch(n){return!ce(n,"__v_skip")&&Object.isExtensible(n)&&S1(n,"__v_skip",!0),n}const vi=n=>Pe(n)?jn(n):n,Hf=n=>Pe(n)?jo(n):n;function Te(n){return n?n.__v_isRef===!0:!1}function vt(n){return q1(n,!1)}function Fa(n){return q1(n,!0)}function q1(n,t){return Te(n)?n:new UO(n,t)}class UO{constructor(t,e){this.dep=new bh,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:oe(t),this._value=e?t:vi(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,i=this.__v_isShallow||mn(t)||Ls(t);t=i?t:oe(t),Kr(t,e)&&(this._rawValue=t,this._value=i?t:vi(t),this.dep.trigger())}}function Zr(n){return Te(n)?n.value:n}function Sh(n){return Ft(n)?n():Zr(n)}const GO={get:(n,t,e)=>t==="__v_raw"?n:Zr(Reflect.get(n,t,e)),set:(n,t,e,i)=>{const r=n[t];return Te(r)&&!Te(e)?(r.value=e,!0):Reflect.set(n,t,e,i)}};function Z1(n){return qr(n)?n:new Proxy(n,GO)}class qO{constructor(t){this.__v_isRef=!0,this._value=void 0;const e=this.dep=new bh,{get:i,set:r}=t(e.track.bind(e),e.trigger.bind(e));this._get=i,this._set=r}get value(){return this._value=this._get()}set value(t){this._set(t)}}function ZO(n){return new qO(n)}function $O(n){const t=Bt(n)?new Array(n.length):{};for(const e in n)t[e]=$1(n,e);return t}class KO{constructor(t,e,i){this._object=t,this._key=e,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return PO(oe(this._object),this._key)}}class JO{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function QO(n,t,e){return Te(n)?n:Ft(n)?new JO(n):Pe(n)&&arguments.length>1?$1(n,t,e):vt(n)}function $1(n,t,e){const i=n[t];return Te(i)?i:new KO(n,t,e)}class tE{constructor(t,e,i){this.fn=t,this.setter=e,this._value=void 0,this.dep=new bh(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$a-1,this.effect=this,this.__v_isReadonly=!e,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&ye!==this)return R1(this),!0}get value(){const t=this.dep.track();return F1(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function eE(n,t,e=!1){let i,r;return Ft(n)?i=n:(i=n.get,r=n.set),new tE(i,r,e)}const xc={},Uc=new WeakMap;let Ts;function iE(n,t=!1,e=Ts){if(e){let i=Uc.get(e);i||Uc.set(e,i=[]),i.push(n)}}function nE(n,t,e=_e){const{immediate:i,deep:r,once:s,scheduler:o,augmentJob:l,call:h}=e,u=O=>r?O:mn(O)||r===!1||r===0?mr(O,1):mr(O);let d,g,p,m,y=!1,_=!1;if(Te(n)?(g=()=>n.value,y=mn(n)):qr(n)?(g=()=>u(n),y=!0):Bt(n)?(_=!0,y=n.some(O=>qr(O)||mn(O)),g=()=>n.map(O=>{if(Te(O))return O.value;if(qr(O))return u(O);if(Ft(O))return h?h(O,2):O()})):Ft(n)?t?g=h?()=>h(n,2):n:g=()=>{if(p){ns();try{p()}finally{rs()}}const O=Ts;Ts=d;try{return h?h(n,3,[m]):n(m)}finally{Ts=O}}:g=$n,t&&r){const O=g,E=r===!0?1/0:r;g=()=>mr(O(),E)}const C=_h(),b=()=>{d.stop(),C&&Df(C.effects,d)};if(s&&t){const O=t;t=(...E)=>{O(...E),b()}}let x=_?new Array(n.length).fill(xc):xc;const T=O=>{if(!(!(d.flags&1)||!d.dirty&&!O))if(t){const E=d.run();if(r||y||(_?E.some((V,A)=>Kr(V,x[A])):Kr(E,x))){p&&p();const V=Ts;Ts=d;try{const A=[E,x===xc?void 0:_&&x[0]===xc?[]:x,m];h?h(t,3,A):t(...A),x=E}finally{Ts=V}}}else d.run()};return l&&l(T),d=new D1(g),d.scheduler=o?()=>o(T,!1):T,m=O=>iE(O,!1,d),p=d.onStop=()=>{const O=Uc.get(d);if(O){if(h)h(O,4);else for(const E of O)E();Uc.delete(d)}},t?i?T(!0):x=d.run():o?o(T.bind(null,!0),!0):d.run(),b.pause=d.pause.bind(d),b.resume=d.resume.bind(d),b.stop=b,b}function mr(n,t=1/0,e){if(t<=0||!Pe(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),t--,Te(n))mr(n.value,t,e);else if(Bt(n))for(let i=0;i<n.length;i++)mr(n[i],t,e);else if(b1(n)||Po(n))n.forEach(i=>{mr(i,t,e)});else if(C1(n)){for(const i in n)mr(n[i],t,e);for(const i of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,i)&&mr(n[i],t,e)}return n}/**
* @vue/runtime-core v3.5.6
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ml(n,t,e,i){try{return i?n(...i):n()}catch(r){Th(r,t,e)}}function er(n,t,e,i){if(Ft(n)){const r=ml(n,t,e,i);return r&&w1(r)&&r.catch(s=>{Th(s,t,e)}),r}if(Bt(n)){const r=[];for(let s=0;s<n.length;s++)r.push(er(n[s],t,e,i));return r}}function Th(n,t,e,i=!0){const r=t?t.vnode:null,{errorHandler:s,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||_e;if(t){let l=t.parent;const h=t.proxy,u=`https://vuejs.org/error-reference/#runtime-${e}`;for(;l;){const d=l.ec;if(d){for(let g=0;g<d.length;g++)if(d[g](n,h,u)===!1)return}l=l.parent}if(s){ns(),ml(s,null,10,[n,h,u]),rs();return}}rE(n,e,r,i,o)}function rE(n,t,e,i=!0,r=!1){if(r)throw n;console.error(n)}let Ja=!1,Ud=!1;const Mi=[];let Xn=0;const Eo=[];let Hr=null,mo=0;const K1=Promise.resolve();let Yf=null;function wr(n){const t=Yf||K1;return n?t.then(this?n.bind(this):n):t}function sE(n){let t=Ja?Xn+1:0,e=Mi.length;for(;t<e;){const i=t+e>>>1,r=Mi[i],s=Qa(r);s<n||s===n&&r.flags&2?t=i+1:e=i}return t}function Nf(n){if(!(n.flags&1)){const t=Qa(n),e=Mi[Mi.length-1];!e||!(n.flags&2)&&t>=Qa(e)?Mi.push(n):Mi.splice(sE(t),0,n),n.flags|=1,J1()}}function J1(){!Ja&&!Ud&&(Ud=!0,Yf=K1.then(ty))}function oE(n){Bt(n)?Eo.push(...n):Hr&&n.id===-1?Hr.splice(mo+1,0,n):n.flags&1||(Eo.push(n),n.flags|=1),J1()}function Cm(n,t,e=Ja?Xn+1:0){for(;e<Mi.length;e++){const i=Mi[e];if(i&&i.flags&2){if(n&&i.id!==n.uid)continue;Mi.splice(e,1),e--,i.flags&4&&(i.flags&=-2),i(),i.flags&=-2}}}function Q1(n){if(Eo.length){const t=[...new Set(Eo)].sort((e,i)=>Qa(e)-Qa(i));if(Eo.length=0,Hr){Hr.push(...t);return}for(Hr=t,mo=0;mo<Hr.length;mo++){const e=Hr[mo];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Hr=null,mo=0}}const Qa=n=>n.id==null?n.flags&2?-1:1/0:n.id;function ty(n){Ud=!1,Ja=!0;try{for(Xn=0;Xn<Mi.length;Xn++){const t=Mi[Xn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ml(t,t.i,t.i?15:14),t.flags&=-2)}}finally{for(;Xn<Mi.length;Xn++){const t=Mi[Xn];t&&(t.flags&=-2)}Xn=0,Mi.length=0,Q1(),Ja=!1,Yf=null,(Mi.length||Eo.length)&&ty()}}let ti=null,ey=null;function Gc(n){const t=ti;return ti=n,ey=n&&n.type.__scopeId||null,t}function Et(n,t=ti,e){if(!t||n._n)return n;const i=(...r)=>{i._d&&km(-1);const s=Gc(t);let o;try{o=n(...r)}finally{Gc(s),i._d&&km(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function Wf(n,t){if(ti===null)return n;const e=kh(ti),i=n.dirs||(n.dirs=[]);for(let r=0;r<t.length;r++){let[s,o,l,h=_e]=t[r];s&&(Ft(s)&&(s={mounted:s,updated:s}),s.deep&&mr(o),i.push({dir:s,instance:e,value:o,oldValue:void 0,arg:l,modifiers:h}))}return n}function bs(n,t,e,i){const r=n.dirs,s=t&&t.dirs;for(let o=0;o<r.length;o++){const l=r[o];s&&(l.oldValue=s[o].value);let h=l.dir[i];h&&(ns(),er(h,e,8,[n.el,l,n,t]),rs())}}const aE=Symbol("_vte"),lE=n=>n.__isTeleport;function Ph(n,t){n.shapeFlag&6&&n.component?(n.transition=t,Ph(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}/*! #__NO_SIDE_EFFECTS__ */function te(n,t){return Ft(n)?di({name:n.name},t,{setup:n}):n}function iy(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function Gd(n,t,e,i,r=!1){if(Bt(n)){n.forEach((y,_)=>Gd(y,t&&(Bt(t)?t[_]:t),e,i,r));return}if(js(i)&&!r)return;const s=i.shapeFlag&4?kh(i.component):i.el,o=r?null:s,{i:l,r:h}=n,u=t&&t.r,d=l.refs===_e?l.refs={}:l.refs,g=l.setupState,p=oe(g),m=g===_e?()=>!1:y=>ce(p,y);if(u!=null&&u!==h&&(De(u)?(d[u]=null,m(u)&&(g[u]=null)):Te(u)&&(u.value=null)),Ft(h))ml(h,l,12,[o,d]);else{const y=De(h),_=Te(h);if(y||_){const C=()=>{if(n.f){const b=y?m(h)?g[h]:d[h]:h.value;r?Bt(b)&&Df(b,s):Bt(b)?b.includes(s)||b.push(s):y?(d[h]=[s],m(h)&&(g[h]=d[h])):(h.value=[s],n.k&&(d[n.k]=h.value))}else y?(d[h]=o,m(h)&&(g[h]=o)):_&&(h.value=o,n.k&&(d[n.k]=o))};o?(C.id=-1,ci(C,e)):C()}}}const js=n=>!!n.type.__asyncLoader,ny=n=>n.type.__isKeepAlive,cE={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:t}){const e=Vo(),i=e.ctx;if(!i.renderer)return()=>{const x=t.default&&t.default();return x&&x.length===1?x[0]:x};const r=new Map,s=new Set;let o=null;const l=e.suspense,{renderer:{p:h,m:u,um:d,o:{createElement:g}}}=i,p=g("div");i.activate=(x,T,O,E,V)=>{const A=x.component;u(x,T,O,0,l),h(A.vnode,x,T,O,A,l,E,x.slotScopeIds,V),ci(()=>{A.isDeactivated=!1,A.a&&Oo(A.a);const B=x.props&&x.props.onVnodeMounted;B&&fn(B,A.parent,x)},l)},i.deactivate=x=>{const T=x.component;Zc(T.m),Zc(T.a),u(x,p,null,1,l),ci(()=>{T.da&&Oo(T.da);const O=x.props&&x.props.onVnodeUnmounted;O&&fn(O,T.parent,x),T.isDeactivated=!0},l)};function m(x){gd(x),d(x,e,l,!0)}function y(x){r.forEach((T,O)=>{const E=Qd(T.type);E&&!x(E)&&_(O)})}function _(x){const T=r.get(x);T&&(!o||!vo(T,o))?m(T):o&&gd(o),r.delete(x),s.delete(x)}qe(()=>[n.include,n.exclude],([x,T])=>{x&&y(O=>pa(x,O)),T&&y(O=>!pa(T,O))},{flush:"post",deep:!0});let C=null;const b=()=>{C!=null&&($c(e.subTree.type)?ci(()=>{r.set(C,Cc(e.subTree))},e.subTree.suspense):r.set(C,Cc(e.subTree)))};return wi(b),ly(b),cy(()=>{r.forEach(x=>{const{subTree:T,suspense:O}=e,E=Cc(T);if(x.type===E.type&&x.key===E.key){gd(E);const V=E.component.da;V&&ci(V,O);return}m(x)})}),()=>{if(C=null,!t.default)return o=null;const x=t.default(),T=x[0];if(x.length>1)return o=null,x;if(!il(T)||!(T.shapeFlag&4)&&!(T.shapeFlag&128))return o=null,T;let O=Cc(T);if(O.type===xr)return o=null,O;const E=O.type,V=Qd(js(O)?O.type.__asyncResolved||{}:E),{include:A,exclude:B,max:Y}=n;if(A&&(!V||!pa(A,V))||B&&V&&pa(B,V))return O.shapeFlag&=-257,o=O,T;const J=O.key==null?E:O.key,st=r.get(J);return O.el&&(O=Bs(O),T.shapeFlag&128&&(T.ssContent=O)),C=J,st?(O.el=st.el,O.component=st.component,O.transition&&Ph(O,O.transition),O.shapeFlag|=512,s.delete(J),s.add(J)):(s.add(J),Y&&s.size>parseInt(Y,10)&&_(s.values().next().value)),O.shapeFlag|=256,o=O,$c(T.type)?T:O}}},hE=cE;function pa(n,t){return Bt(n)?n.some(e=>pa(e,t)):De(n)?n.split(",").includes(t):gO(n)?(n.lastIndex=0,n.test(t)):!1}function ry(n,t){oy(n,"a",t)}function sy(n,t){oy(n,"da",t)}function oy(n,t,e=ii){const i=n.__wdc||(n.__wdc=()=>{let r=e;for(;r;){if(r.isDeactivated)return;r=r.parent}return n()});if(Oh(t,i,e),e){let r=e.parent;for(;r&&r.parent;)ny(r.parent.vnode)&&uE(i,t,e,r),r=r.parent}}function uE(n,t,e,i){const r=Oh(t,n,i,!0);ss(()=>{Df(i[t],r)},e)}function gd(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function Cc(n){return n.shapeFlag&128?n.ssContent:n}function Oh(n,t,e=ii,i=!1){if(e){const r=e[n]||(e[n]=[]),s=t.__weh||(t.__weh=(...o)=>{ns();const l=_l(e),h=er(t,e,n,o);return l(),rs(),h});return i?r.unshift(s):r.push(s),s}}const Pr=n=>(t,e=ii)=>{(!Ah||n==="sp")&&Oh(n,(...i)=>t(...i),e)},ay=Pr("bm"),wi=Pr("m"),dE=Pr("bu"),ly=Pr("u"),cy=Pr("bum"),ss=Pr("um"),fE=Pr("sp"),gE=Pr("rtg"),pE=Pr("rtc");function mE(n,t=ii){Oh("ec",n,t)}const hy="components";function gt(n,t){return dy(hy,n,!0,t)||n}const uy=Symbol.for("v-ndc");function tl(n){return De(n)?dy(hy,n,!1)||n:n||uy}function dy(n,t,e=!0,i=!1){const r=ti||ii;if(r){const s=r.type;{const l=Qd(s,!1);if(l&&(l===t||l===kn(t)||l===yh(kn(t))))return s}const o=Sm(r[n]||s[n],t)||Sm(r.appContext[n],t);return!o&&i?s:o}}function Sm(n,t){return n&&(n[t]||n[kn(t)]||n[yh(kn(t))])}function Jr(n,t,e,i){let r;const s=e,o=Bt(n);if(o||De(n)){const l=o&&qr(n);let h=!1;l&&(h=!mn(n),n=wh(n)),r=new Array(n.length);for(let u=0,d=n.length;u<d;u++)r[u]=t(h?vi(n[u]):n[u],u,void 0,s)}else if(typeof n=="number"){r=new Array(n);for(let l=0;l<n;l++)r[l]=t(l+1,l,void 0,s)}else if(Pe(n))if(n[Symbol.iterator])r=Array.from(n,(l,h)=>t(l,h,void 0,s));else{const l=Object.keys(n);r=new Array(l.length);for(let h=0,u=l.length;h<u;h++){const d=l[h];r[h]=t(n[d],d,h,s)}}else r=[];return r}function Jn(n,t,e={},i,r){if(ti.ce||ti.parent&&js(ti.parent)&&ti.parent.ce)return t!=="default"&&(e.name=t),W(),_i(Se,null,[et("slot",e,i)],64);let s=n[t];s&&s._c&&(s._d=!1),W();const o=s&&fy(s(e)),l=_i(Se,{key:(e.key||o&&o.key||`_${t}`)+(!o&&i?"_fb":"")},o||[],o&&n._===1?64:-2);return!r&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),s&&s._c&&(s._d=!0),l}function fy(n){return n.some(t=>il(t)?!(t.type===xr||t.type===Se&&!fy(t.children)):!0)?n:null}const qd=n=>n?jy(n)?kh(n):qd(n.parent):null,za=di(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>qd(n.parent),$root:n=>qd(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Uf(n),$forceUpdate:n=>n.f||(n.f=()=>{Nf(n.update)}),$nextTick:n=>n.n||(n.n=wr.bind(n.proxy)),$watch:n=>zE.bind(n)}),pd=(n,t)=>n!==_e&&!n.__isScriptSetup&&ce(n,t),vE={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:i,data:r,props:s,accessCache:o,type:l,appContext:h}=n;let u;if(t[0]!=="$"){const m=o[t];if(m!==void 0)switch(m){case 1:return i[t];case 2:return r[t];case 4:return e[t];case 3:return s[t]}else{if(pd(i,t))return o[t]=1,i[t];if(r!==_e&&ce(r,t))return o[t]=2,r[t];if((u=n.propsOptions[0])&&ce(u,t))return o[t]=3,s[t];if(e!==_e&&ce(e,t))return o[t]=4,e[t];Zd&&(o[t]=0)}}const d=za[t];let g,p;if(d)return t==="$attrs"&&bi(n.attrs,"get",""),d(n);if((g=l.__cssModules)&&(g=g[t]))return g;if(e!==_e&&ce(e,t))return o[t]=4,e[t];if(p=h.config.globalProperties,ce(p,t))return p[t]},set({_:n},t,e){const{data:i,setupState:r,ctx:s}=n;return pd(r,t)?(r[t]=e,!0):i!==_e&&ce(i,t)?(i[t]=e,!0):ce(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(s[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:i,appContext:r,propsOptions:s}},o){let l;return!!e[o]||n!==_e&&ce(n,o)||pd(t,o)||(l=s[0])&&ce(l,o)||ce(i,o)||ce(za,o)||ce(r.config.globalProperties,o)},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:ce(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function Tm(n){return Bt(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let Zd=!0;function yE(n){const t=Uf(n),e=n.proxy,i=n.ctx;Zd=!1,t.beforeCreate&&Pm(t.beforeCreate,n,"bc");const{data:r,computed:s,methods:o,watch:l,provide:h,inject:u,created:d,beforeMount:g,mounted:p,beforeUpdate:m,updated:y,activated:_,deactivated:C,beforeDestroy:b,beforeUnmount:x,destroyed:T,unmounted:O,render:E,renderTracked:V,renderTriggered:A,errorCaptured:B,serverPrefetch:Y,expose:J,inheritAttrs:st,components:ct,directives:ot,filters:yt}=t;if(u&&_E(u,i,null),o)for(const pt in o){const ft=o[pt];Ft(ft)&&(i[pt]=ft.bind(e))}if(r){const pt=r.call(e,e);Pe(pt)&&(n.data=jn(pt))}if(Zd=!0,s)for(const pt in s){const ft=s[pt],Xt=Ft(ft)?ft.bind(e,e):Ft(ft.get)?ft.get.bind(e,e):$n,It=!Ft(ft)&&Ft(ft.set)?ft.set.bind(e):$n,zt=mt({get:Xt,set:It});Object.defineProperty(i,pt,{enumerable:!0,configurable:!0,get:()=>zt.value,set:qt=>zt.value=qt})}if(l)for(const pt in l)gy(l[pt],i,e,pt);if(h){const pt=Ft(h)?h.call(e):h;Reflect.ownKeys(pt).forEach(ft=>{Ic(ft,pt[ft])})}d&&Pm(d,n,"c");function at(pt,ft){Bt(ft)?ft.forEach(Xt=>pt(Xt.bind(e))):ft&&pt(ft.bind(e))}if(at(ay,g),at(wi,p),at(dE,m),at(ly,y),at(ry,_),at(sy,C),at(mE,B),at(pE,V),at(gE,A),at(cy,x),at(ss,O),at(fE,Y),Bt(J))if(J.length){const pt=n.exposed||(n.exposed={});J.forEach(ft=>{Object.defineProperty(pt,ft,{get:()=>e[ft],set:Xt=>e[ft]=Xt})})}else n.exposed||(n.exposed={});E&&n.render===$n&&(n.render=E),st!=null&&(n.inheritAttrs=st),ct&&(n.components=ct),ot&&(n.directives=ot),Y&&iy(n)}function _E(n,t,e=$n){Bt(n)&&(n=$d(n));for(const i in n){const r=n[i];let s;Pe(r)?"default"in r?s=Qn(r.from||i,r.default,!0):s=Qn(r.from||i):s=Qn(r),Te(s)?Object.defineProperty(t,i,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):t[i]=s}}function Pm(n,t,e){er(Bt(n)?n.map(i=>i.bind(t.proxy)):n.bind(t.proxy),t,e)}function gy(n,t,e,i){let r=i.includes(".")?Oy(e,i):()=>e[i];if(De(n)){const s=t[n];Ft(s)&&qe(r,s)}else if(Ft(n))qe(r,n.bind(e));else if(Pe(n))if(Bt(n))n.forEach(s=>gy(s,t,e,i));else{const s=Ft(n.handler)?n.handler.bind(e):t[n.handler];Ft(s)&&qe(r,s,n)}}function Uf(n){const t=n.type,{mixins:e,extends:i}=t,{mixins:r,optionsCache:s,config:{optionMergeStrategies:o}}=n.appContext,l=s.get(t);let h;return l?h=l:!r.length&&!e&&!i?h=t:(h={},r.length&&r.forEach(u=>qc(h,u,o,!0)),qc(h,t,o)),Pe(t)&&s.set(t,h),h}function qc(n,t,e,i=!1){const{mixins:r,extends:s}=t;s&&qc(n,s,e,!0),r&&r.forEach(o=>qc(n,o,e,!0));for(const o in t)if(!(i&&o==="expose")){const l=bE[o]||e&&e[o];n[o]=l?l(n[o],t[o]):t[o]}return n}const bE={data:Om,props:Em,emits:Em,methods:ma,computed:ma,beforeCreate:Pi,created:Pi,beforeMount:Pi,mounted:Pi,beforeUpdate:Pi,updated:Pi,beforeDestroy:Pi,beforeUnmount:Pi,destroyed:Pi,unmounted:Pi,activated:Pi,deactivated:Pi,errorCaptured:Pi,serverPrefetch:Pi,components:ma,directives:ma,watch:xE,provide:Om,inject:wE};function Om(n,t){return t?n?function(){return di(Ft(n)?n.call(this,this):n,Ft(t)?t.call(this,this):t)}:t:n}function wE(n,t){return ma($d(n),$d(t))}function $d(n){if(Bt(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function Pi(n,t){return n?[...new Set([].concat(n,t))]:t}function ma(n,t){return n?di(Object.create(null),n,t):t}function Em(n,t){return n?Bt(n)&&Bt(t)?[...new Set([...n,...t])]:di(Object.create(null),Tm(n),Tm(t??{})):t}function xE(n,t){if(!n)return t;if(!t)return n;const e=di(Object.create(null),n);for(const i in t)e[i]=Pi(n[i],t[i]);return e}function py(){return{app:null,config:{isNativeTag:dO,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let CE=0;function SE(n,t){return function(i,r=null){Ft(i)||(i=di({},i)),r!=null&&!Pe(r)&&(r=null);const s=py(),o=new WeakSet,l=[];let h=!1;const u=s.app={_uid:CE++,_component:i,_props:r,_container:null,_context:s,_instance:null,version:nM,get config(){return s.config},set config(d){},use(d,...g){return o.has(d)||(d&&Ft(d.install)?(o.add(d),d.install(u,...g)):Ft(d)&&(o.add(d),d(u,...g))),u},mixin(d){return s.mixins.includes(d)||s.mixins.push(d),u},component(d,g){return g?(s.components[d]=g,u):s.components[d]},directive(d,g){return g?(s.directives[d]=g,u):s.directives[d]},mount(d,g,p){if(!h){const m=u._ceVNode||et(i,r);return m.appContext=s,p===!0?p="svg":p===!1&&(p=void 0),g&&t?t(m,d):n(m,d,p),h=!0,u._container=d,d.__vue_app__=u,kh(m.component)}},onUnmount(d){l.push(d)},unmount(){h&&(er(l,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(d,g){return s.provides[d]=g,u},runWithContext(d){const g=Ds;Ds=u;try{return d()}finally{Ds=g}}};return u}}let Ds=null;function Ic(n,t){if(ii){let e=ii.provides;const i=ii.parent&&ii.parent.provides;i===e&&(e=ii.provides=Object.create(i)),e[n]=t}}function Qn(n,t,e=!1){const i=ii||ti;if(i||Ds){const r=Ds?Ds._context.provides:i?i.parent==null?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(r&&n in r)return r[n];if(arguments.length>1)return e&&Ft(t)?t.call(i&&i.proxy):t}}function TE(){return!!(ii||ti||Ds)}const my={},vy=()=>Object.create(my),yy=n=>Object.getPrototypeOf(n)===my;function PE(n,t,e,i=!1){const r={},s=vy();n.propsDefaults=Object.create(null),_y(n,t,r,s);for(const o in n.propsOptions[0])o in r||(r[o]=void 0);e?n.props=i?r:G1(r):n.type.props?n.props=r:n.props=s,n.attrs=s}function OE(n,t,e,i){const{props:r,attrs:s,vnode:{patchFlag:o}}=n,l=oe(r),[h]=n.propsOptions;let u=!1;if((i||o>0)&&!(o&16)){if(o&8){const d=n.vnode.dynamicProps;for(let g=0;g<d.length;g++){let p=d[g];if(Eh(n.emitsOptions,p))continue;const m=t[p];if(h)if(ce(s,p))m!==s[p]&&(s[p]=m,u=!0);else{const y=kn(p);r[y]=Kd(h,l,y,m,n,!1)}else m!==s[p]&&(s[p]=m,u=!0)}}}else{_y(n,t,r,s)&&(u=!0);let d;for(const g in l)(!t||!ce(t,g)&&((d=Vs(g))===g||!ce(t,d)))&&(h?e&&(e[g]!==void 0||e[d]!==void 0)&&(r[g]=Kd(h,l,g,void 0,n,!0)):delete r[g]);if(s!==l)for(const g in s)(!t||!ce(t,g))&&(delete s[g],u=!0)}u&&_r(n.attrs,"set","")}function _y(n,t,e,i){const[r,s]=n.propsOptions;let o=!1,l;if(t)for(let h in t){if(La(h))continue;const u=t[h];let d;r&&ce(r,d=kn(h))?!s||!s.includes(d)?e[d]=u:(l||(l={}))[d]=u:Eh(n.emitsOptions,h)||(!(h in i)||u!==i[h])&&(i[h]=u,o=!0)}if(s){const h=oe(e),u=l||_e;for(let d=0;d<s.length;d++){const g=s[d];e[g]=Kd(r,h,g,u[g],n,!ce(u,g))}}return o}function Kd(n,t,e,i,r,s){const o=n[e];if(o!=null){const l=ce(o,"default");if(l&&i===void 0){const h=o.default;if(o.type!==Function&&!o.skipFactory&&Ft(h)){const{propsDefaults:u}=r;if(e in u)i=u[e];else{const d=_l(r);i=u[e]=h.call(null,t),d()}}else i=h;r.ce&&r.ce._setProp(e,i)}o[0]&&(s&&!l?i=!1:o[1]&&(i===""||i===Vs(e))&&(i=!0))}return i}const EE=new WeakMap;function by(n,t,e=!1){const i=e?EE:t.propsCache,r=i.get(n);if(r)return r;const s=n.props,o={},l=[];let h=!1;if(!Ft(n)){const d=g=>{h=!0;const[p,m]=by(g,t,!0);di(o,p),m&&l.push(...m)};!e&&t.mixins.length&&t.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!s&&!h)return Pe(n)&&i.set(n,To),To;if(Bt(s))for(let d=0;d<s.length;d++){const g=kn(s[d]);Mm(g)&&(o[g]=_e)}else if(s)for(const d in s){const g=kn(d);if(Mm(g)){const p=s[d],m=o[g]=Bt(p)||Ft(p)?{type:p}:di({},p),y=m.type;let _=!1,C=!0;if(Bt(y))for(let b=0;b<y.length;++b){const x=y[b],T=Ft(x)&&x.name;if(T==="Boolean"){_=!0;break}else T==="String"&&(C=!1)}else _=Ft(y)&&y.name==="Boolean";m[0]=_,m[1]=C,(_||ce(m,"default"))&&l.push(g)}}const u=[o,l];return Pe(n)&&i.set(n,u),u}function Mm(n){return n[0]!=="$"&&!La(n)}const wy=n=>n[0]==="_"||n==="$stable",Gf=n=>Bt(n)?n.map(Yn):[Yn(n)],ME=(n,t,e)=>{if(t._n)return t;const i=Et((...r)=>Gf(t(...r)),e);return i._c=!1,i},xy=(n,t,e)=>{const i=n._ctx;for(const r in n){if(wy(r))continue;const s=n[r];if(Ft(s))t[r]=ME(r,s,i);else if(s!=null){const o=Gf(s);t[r]=()=>o}}},Cy=(n,t)=>{const e=Gf(t);n.slots.default=()=>e},Sy=(n,t,e)=>{for(const i in t)(e||i!=="_")&&(n[i]=t[i])},AE=(n,t,e)=>{const i=n.slots=vy();if(n.vnode.shapeFlag&32){const r=t._;r?(Sy(i,t,e),e&&S1(i,"_",r,!0)):xy(t,i)}else t&&Cy(n,t)},kE=(n,t,e)=>{const{vnode:i,slots:r}=n;let s=!0,o=_e;if(i.shapeFlag&32){const l=t._;l?e&&l===1?s=!1:Sy(r,t,e):(s=!t.$stable,xy(t,r)),o=t}else t&&(Cy(n,t),o={default:1});if(s)for(const l in r)!wy(l)&&o[l]==null&&delete r[l]},ci=UE;function jE(n){return DE(n)}function DE(n,t){const e=T1();e.__VUE__=!0;const{insert:i,remove:r,patchProp:s,createElement:o,createText:l,createComment:h,setText:u,setElementText:d,parentNode:g,nextSibling:p,setScopeId:m=$n,insertStaticContent:y}=n,_=(M,j,H,it=null,U=null,rt=null,bt=void 0,dt=null,lt=!!j.dynamicChildren)=>{if(M===j)return;M&&!vo(M,j)&&(it=q(M),qt(M,U,rt,!0),M=null),j.patchFlag===-2&&(lt=!1,j.dynamicChildren=null);const{type:nt,ref:Mt,shapeFlag:xt}=j;switch(nt){case Mh:C(M,j,H,it);break;case xr:b(M,j,H,it);break;case Va:M==null&&x(j,H,it,bt);break;case Se:ct(M,j,H,it,U,rt,bt,dt,lt);break;default:xt&1?E(M,j,H,it,U,rt,bt,dt,lt):xt&6?ot(M,j,H,it,U,rt,bt,dt,lt):(xt&64||xt&128)&&nt.process(M,j,H,it,U,rt,bt,dt,lt,Ct)}Mt!=null&&U&&Gd(Mt,M&&M.ref,rt,j||M,!j)},C=(M,j,H,it)=>{if(M==null)i(j.el=l(j.children),H,it);else{const U=j.el=M.el;j.children!==M.children&&u(U,j.children)}},b=(M,j,H,it)=>{M==null?i(j.el=h(j.children||""),H,it):j.el=M.el},x=(M,j,H,it)=>{[M.el,M.anchor]=y(M.children,j,H,it,M.el,M.anchor)},T=({el:M,anchor:j},H,it)=>{let U;for(;M&&M!==j;)U=p(M),i(M,H,it),M=U;i(j,H,it)},O=({el:M,anchor:j})=>{let H;for(;M&&M!==j;)H=p(M),r(M),M=H;r(j)},E=(M,j,H,it,U,rt,bt,dt,lt)=>{j.type==="svg"?bt="svg":j.type==="math"&&(bt="mathml"),M==null?V(j,H,it,U,rt,bt,dt,lt):Y(M,j,U,rt,bt,dt,lt)},V=(M,j,H,it,U,rt,bt,dt)=>{let lt,nt;const{props:Mt,shapeFlag:xt,transition:Pt,dirs:Rt}=M;if(lt=M.el=o(M.type,rt,Mt&&Mt.is,Mt),xt&8?d(lt,M.children):xt&16&&B(M.children,lt,null,it,U,md(M,rt),bt,dt),Rt&&bs(M,null,it,"created"),A(lt,M,M.scopeId,bt,it),Mt){for(const ne in Mt)ne!=="value"&&!La(ne)&&s(lt,ne,null,Mt[ne],rt,it);"value"in Mt&&s(lt,"value",null,Mt.value,rt),(nt=Mt.onVnodeBeforeMount)&&fn(nt,it,M)}Rt&&bs(M,null,it,"beforeMount");const Wt=IE(U,Pt);Wt&&Pt.beforeEnter(lt),i(lt,j,H),((nt=Mt&&Mt.onVnodeMounted)||Wt||Rt)&&ci(()=>{nt&&fn(nt,it,M),Wt&&Pt.enter(lt),Rt&&bs(M,null,it,"mounted")},U)},A=(M,j,H,it,U)=>{if(H&&m(M,H),it)for(let rt=0;rt<it.length;rt++)m(M,it[rt]);if(U){let rt=U.subTree;if(j===rt||$c(rt.type)&&(rt.ssContent===j||rt.ssFallback===j)){const bt=U.vnode;A(M,bt,bt.scopeId,bt.slotScopeIds,U.parent)}}},B=(M,j,H,it,U,rt,bt,dt,lt=0)=>{for(let nt=lt;nt<M.length;nt++){const Mt=M[nt]=dt?Yr(M[nt]):Yn(M[nt]);_(null,Mt,j,H,it,U,rt,bt,dt)}},Y=(M,j,H,it,U,rt,bt)=>{const dt=j.el=M.el;let{patchFlag:lt,dynamicChildren:nt,dirs:Mt}=j;lt|=M.patchFlag&16;const xt=M.props||_e,Pt=j.props||_e;let Rt;if(H&&ws(H,!1),(Rt=Pt.onVnodeBeforeUpdate)&&fn(Rt,H,j,M),Mt&&bs(j,M,H,"beforeUpdate"),H&&ws(H,!0),(xt.innerHTML&&Pt.innerHTML==null||xt.textContent&&Pt.textContent==null)&&d(dt,""),nt?J(M.dynamicChildren,nt,dt,H,it,md(j,U),rt):bt||ft(M,j,dt,null,H,it,md(j,U),rt,!1),lt>0){if(lt&16)st(dt,xt,Pt,H,U);else if(lt&2&&xt.class!==Pt.class&&s(dt,"class",null,Pt.class,U),lt&4&&s(dt,"style",xt.style,Pt.style,U),lt&8){const Wt=j.dynamicProps;for(let ne=0;ne<Wt.length;ne++){const re=Wt[ne],ri=xt[re],Ue=Pt[re];(Ue!==ri||re==="value")&&s(dt,re,ri,Ue,U,H)}}lt&1&&M.children!==j.children&&d(dt,j.children)}else!bt&&nt==null&&st(dt,xt,Pt,H,U);((Rt=Pt.onVnodeUpdated)||Mt)&&ci(()=>{Rt&&fn(Rt,H,j,M),Mt&&bs(j,M,H,"updated")},it)},J=(M,j,H,it,U,rt,bt)=>{for(let dt=0;dt<j.length;dt++){const lt=M[dt],nt=j[dt],Mt=lt.el&&(lt.type===Se||!vo(lt,nt)||lt.shapeFlag&70)?g(lt.el):H;_(lt,nt,Mt,null,it,U,rt,bt,!0)}},st=(M,j,H,it,U)=>{if(j!==H){if(j!==_e)for(const rt in j)!La(rt)&&!(rt in H)&&s(M,rt,j[rt],null,U,it);for(const rt in H){if(La(rt))continue;const bt=H[rt],dt=j[rt];bt!==dt&&rt!=="value"&&s(M,rt,dt,bt,U,it)}"value"in H&&s(M,"value",j.value,H.value,U)}},ct=(M,j,H,it,U,rt,bt,dt,lt)=>{const nt=j.el=M?M.el:l(""),Mt=j.anchor=M?M.anchor:l("");let{patchFlag:xt,dynamicChildren:Pt,slotScopeIds:Rt}=j;Rt&&(dt=dt?dt.concat(Rt):Rt),M==null?(i(nt,H,it),i(Mt,H,it),B(j.children||[],H,Mt,U,rt,bt,dt,lt)):xt>0&&xt&64&&Pt&&M.dynamicChildren?(J(M.dynamicChildren,Pt,H,U,rt,bt,dt),(j.key!=null||U&&j===U.subTree)&&Ty(M,j,!0)):ft(M,j,H,Mt,U,rt,bt,dt,lt)},ot=(M,j,H,it,U,rt,bt,dt,lt)=>{j.slotScopeIds=dt,M==null?j.shapeFlag&512?U.ctx.activate(j,H,it,bt,lt):yt(j,H,it,U,rt,bt,lt):Tt(M,j,lt)},yt=(M,j,H,it,U,rt,bt)=>{const dt=M.component=KE(M,it,U);if(ny(M)&&(dt.ctx.renderer=Ct),JE(dt,!1,bt),dt.asyncDep){if(U&&U.registerDep(dt,at,bt),!M.el){const lt=dt.subTree=et(xr);b(null,lt,j,H)}}else at(dt,M,j,H,U,rt,bt)},Tt=(M,j,H)=>{const it=j.component=M.component;if(NE(M,j,H))if(it.asyncDep&&!it.asyncResolved){pt(it,j,H);return}else it.next=j,it.update();else j.el=M.el,it.vnode=j},at=(M,j,H,it,U,rt,bt)=>{const dt=()=>{if(M.isMounted){let{next:xt,bu:Pt,u:Rt,parent:Wt,vnode:ne}=M;{const si=Py(M);if(si){xt&&(xt.el=ne.el,pt(M,xt,bt)),si.asyncDep.then(()=>{M.isUnmounted||dt()});return}}let re=xt,ri;ws(M,!1),xt?(xt.el=ne.el,pt(M,xt,bt)):xt=ne,Pt&&Oo(Pt),(ri=xt.props&&xt.props.onVnodeBeforeUpdate)&&fn(ri,Wt,xt,ne),ws(M,!0);const Ue=vd(M),xi=M.subTree;M.subTree=Ue,_(xi,Ue,g(xi.el),q(xi),M,U,rt),xt.el=Ue.el,re===null&&WE(M,Ue.el),Rt&&ci(Rt,U),(ri=xt.props&&xt.props.onVnodeUpdated)&&ci(()=>fn(ri,Wt,xt,ne),U)}else{let xt;const{el:Pt,props:Rt}=j,{bm:Wt,m:ne,parent:re,root:ri,type:Ue}=M,xi=js(j);if(ws(M,!1),Wt&&Oo(Wt),!xi&&(xt=Rt&&Rt.onVnodeBeforeMount)&&fn(xt,re,j),ws(M,!0),Pt&&ge){const si=()=>{M.subTree=vd(M),ge(Pt,M.subTree,M,U,null)};xi&&Ue.__asyncHydrate?Ue.__asyncHydrate(Pt,M,si):si()}else{ri.ce&&ri.ce._injectChildStyle(Ue);const si=M.subTree=vd(M);_(null,si,H,it,M,U,rt),j.el=si.el}if(ne&&ci(ne,U),!xi&&(xt=Rt&&Rt.onVnodeMounted)){const si=j;ci(()=>fn(xt,re,si),U)}(j.shapeFlag&256||re&&js(re.vnode)&&re.vnode.shapeFlag&256)&&M.a&&ci(M.a,U),M.isMounted=!0,j=H=it=null}};M.scope.on();const lt=M.effect=new D1(dt);M.scope.off();const nt=M.update=lt.run.bind(lt),Mt=M.job=lt.runIfDirty.bind(lt);Mt.i=M,Mt.id=M.uid,lt.scheduler=()=>Nf(Mt),ws(M,!0),nt()},pt=(M,j,H)=>{j.component=M;const it=M.vnode.props;M.vnode=j,M.next=null,OE(M,j.props,it,H),kE(M,j.children,H),ns(),Cm(M),rs()},ft=(M,j,H,it,U,rt,bt,dt,lt=!1)=>{const nt=M&&M.children,Mt=M?M.shapeFlag:0,xt=j.children,{patchFlag:Pt,shapeFlag:Rt}=j;if(Pt>0){if(Pt&128){It(nt,xt,H,it,U,rt,bt,dt,lt);return}else if(Pt&256){Xt(nt,xt,H,it,U,rt,bt,dt,lt);return}}Rt&8?(Mt&16&&me(nt,U,rt),xt!==nt&&d(H,xt)):Mt&16?Rt&16?It(nt,xt,H,it,U,rt,bt,dt,lt):me(nt,U,rt,!0):(Mt&8&&d(H,""),Rt&16&&B(xt,H,it,U,rt,bt,dt,lt))},Xt=(M,j,H,it,U,rt,bt,dt,lt)=>{M=M||To,j=j||To;const nt=M.length,Mt=j.length,xt=Math.min(nt,Mt);let Pt;for(Pt=0;Pt<xt;Pt++){const Rt=j[Pt]=lt?Yr(j[Pt]):Yn(j[Pt]);_(M[Pt],Rt,H,null,U,rt,bt,dt,lt)}nt>Mt?me(M,U,rt,!0,!1,xt):B(j,H,it,U,rt,bt,dt,lt,xt)},It=(M,j,H,it,U,rt,bt,dt,lt)=>{let nt=0;const Mt=j.length;let xt=M.length-1,Pt=Mt-1;for(;nt<=xt&&nt<=Pt;){const Rt=M[nt],Wt=j[nt]=lt?Yr(j[nt]):Yn(j[nt]);if(vo(Rt,Wt))_(Rt,Wt,H,null,U,rt,bt,dt,lt);else break;nt++}for(;nt<=xt&&nt<=Pt;){const Rt=M[xt],Wt=j[Pt]=lt?Yr(j[Pt]):Yn(j[Pt]);if(vo(Rt,Wt))_(Rt,Wt,H,null,U,rt,bt,dt,lt);else break;xt--,Pt--}if(nt>xt){if(nt<=Pt){const Rt=Pt+1,Wt=Rt<Mt?j[Rt].el:it;for(;nt<=Pt;)_(null,j[nt]=lt?Yr(j[nt]):Yn(j[nt]),H,Wt,U,rt,bt,dt,lt),nt++}}else if(nt>Pt)for(;nt<=xt;)qt(M[nt],U,rt,!0),nt++;else{const Rt=nt,Wt=nt,ne=new Map;for(nt=Wt;nt<=Pt;nt++){const oi=j[nt]=lt?Yr(j[nt]):Yn(j[nt]);oi.key!=null&&ne.set(oi.key,nt)}let re,ri=0;const Ue=Pt-Wt+1;let xi=!1,si=0;const nr=new Array(Ue);for(nt=0;nt<Ue;nt++)nr[nt]=0;for(nt=Rt;nt<=xt;nt++){const oi=M[nt];if(ri>=Ue){qt(oi,U,rt,!0);continue}let Ri;if(oi.key!=null)Ri=ne.get(oi.key);else for(re=Wt;re<=Pt;re++)if(nr[re-Wt]===0&&vo(oi,j[re])){Ri=re;break}Ri===void 0?qt(oi,U,rt,!0):(nr[Ri-Wt]=nt+1,Ri>=si?si=Ri:xi=!0,_(oi,j[Ri],H,null,U,rt,bt,dt,lt),ri++)}const Zs=xi?RE(nr):To;for(re=Zs.length-1,nt=Ue-1;nt>=0;nt--){const oi=Wt+nt,Ri=j[oi],El=oi+1<Mt?j[oi+1].el:it;nr[nt]===0?_(null,Ri,H,El,U,rt,bt,dt,lt):xi&&(re<0||nt!==Zs[re]?zt(Ri,H,El,2):re--)}}},zt=(M,j,H,it,U=null)=>{const{el:rt,type:bt,transition:dt,children:lt,shapeFlag:nt}=M;if(nt&6){zt(M.component.subTree,j,H,it);return}if(nt&128){M.suspense.move(j,H,it);return}if(nt&64){bt.move(M,j,H,Ct);return}if(bt===Se){i(rt,j,H);for(let xt=0;xt<lt.length;xt++)zt(lt[xt],j,H,it);i(M.anchor,j,H);return}if(bt===Va){T(M,j,H);return}if(it!==2&&nt&1&&dt)if(it===0)dt.beforeEnter(rt),i(rt,j,H),ci(()=>dt.enter(rt),U);else{const{leave:xt,delayLeave:Pt,afterLeave:Rt}=dt,Wt=()=>i(rt,j,H),ne=()=>{xt(rt,()=>{Wt(),Rt&&Rt()})};Pt?Pt(rt,Wt,ne):ne()}else i(rt,j,H)},qt=(M,j,H,it=!1,U=!1)=>{const{type:rt,props:bt,ref:dt,children:lt,dynamicChildren:nt,shapeFlag:Mt,patchFlag:xt,dirs:Pt,cacheIndex:Rt}=M;if(xt===-2&&(U=!1),dt!=null&&Gd(dt,null,H,M,!0),Rt!=null&&(j.renderCache[Rt]=void 0),Mt&256){j.ctx.deactivate(M);return}const Wt=Mt&1&&Pt,ne=!js(M);let re;if(ne&&(re=bt&&bt.onVnodeBeforeUnmount)&&fn(re,j,M),Mt&6)ie(M.component,H,it);else{if(Mt&128){M.suspense.unmount(H,it);return}Wt&&bs(M,null,j,"beforeUnmount"),Mt&64?M.type.remove(M,j,H,Ct,it):nt&&!nt.hasOnce&&(rt!==Se||xt>0&&xt&64)?me(nt,j,H,!1,!0):(rt===Se&&xt&384||!U&&Mt&16)&&me(lt,j,H),it&&ue(M)}(ne&&(re=bt&&bt.onVnodeUnmounted)||Wt)&&ci(()=>{re&&fn(re,j,M),Wt&&bs(M,null,j,"unmounted")},H)},ue=M=>{const{type:j,el:H,anchor:it,transition:U}=M;if(j===Se){Zt(H,it);return}if(j===Va){O(M);return}const rt=()=>{r(H),U&&!U.persisted&&U.afterLeave&&U.afterLeave()};if(M.shapeFlag&1&&U&&!U.persisted){const{leave:bt,delayLeave:dt}=U,lt=()=>bt(H,rt);dt?dt(M.el,rt,lt):lt()}else rt()},Zt=(M,j)=>{let H;for(;M!==j;)H=p(M),r(M),M=H;r(j)},ie=(M,j,H)=>{const{bum:it,scope:U,job:rt,subTree:bt,um:dt,m:lt,a:nt}=M;Zc(lt),Zc(nt),it&&Oo(it),U.stop(),rt&&(rt.flags|=8,qt(bt,M,j,H)),dt&&ci(dt,j),ci(()=>{M.isUnmounted=!0},j),j&&j.pendingBranch&&!j.isUnmounted&&M.asyncDep&&!M.asyncResolved&&M.suspenseId===j.pendingId&&(j.deps--,j.deps===0&&j.resolve())},me=(M,j,H,it=!1,U=!1,rt=0)=>{for(let bt=rt;bt<M.length;bt++)qt(M[bt],j,H,it,U)},q=M=>{if(M.shapeFlag&6)return q(M.component.subTree);if(M.shapeFlag&128)return M.suspense.next();const j=p(M.anchor||M.el),H=j&&j[aE];return H?p(H):j};let _t=!1;const ut=(M,j,H)=>{M==null?j._vnode&&qt(j._vnode,null,null,!0):_(j._vnode||null,M,j,null,null,null,H),j._vnode=M,_t||(_t=!0,Cm(),Q1(),_t=!1)},Ct={p:_,um:qt,m:zt,r:ue,mt:yt,mc:B,pc:ft,pbc:J,n:q,o:n};let ee,ge;return{render:ut,hydrate:ee,createApp:SE(ut,ee)}}function md({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function ws({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function IE(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function Ty(n,t,e=!1){const i=n.children,r=t.children;if(Bt(i)&&Bt(r))for(let s=0;s<i.length;s++){const o=i[s];let l=r[s];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=r[s]=Yr(r[s]),l.el=o.el),!e&&l.patchFlag!==-2&&Ty(o,l)),l.type===Mh&&(l.el=o.el)}}function RE(n){const t=n.slice(),e=[0];let i,r,s,o,l;const h=n.length;for(i=0;i<h;i++){const u=n[i];if(u!==0){if(r=e[e.length-1],n[r]<u){t[i]=r,e.push(i);continue}for(s=0,o=e.length-1;s<o;)l=s+o>>1,n[e[l]]<u?s=l+1:o=l;u<n[e[s]]&&(s>0&&(t[i]=e[s-1]),e[s]=i)}}for(s=e.length,o=e[s-1];s-- >0;)e[s]=o,o=t[o];return e}function Py(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:Py(t)}function Zc(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}const LE=Symbol.for("v-scx"),BE=()=>Qn(LE);function FE(n,t){return qf(n,null,{flush:"post"})}function qe(n,t,e){return qf(n,t,e)}function qf(n,t,e=_e){const{immediate:i,deep:r,flush:s,once:o}=e,l=di({},e);let h;if(Ah)if(s==="sync"){const p=BE();h=p.__watcherHandles||(p.__watcherHandles=[])}else if(!t||i)l.once=!0;else{const p=()=>{};return p.stop=$n,p.resume=$n,p.pause=$n,p}const u=ii;l.call=(p,m,y)=>er(p,u,m,y);let d=!1;s==="post"?l.scheduler=p=>{ci(p,u&&u.suspense)}:s!=="sync"&&(d=!0,l.scheduler=(p,m)=>{m?p():Nf(p)}),l.augmentJob=p=>{t&&(p.flags|=4),d&&(p.flags|=2,u&&(p.id=u.uid,p.i=u))};const g=nE(n,t,l);return h&&h.push(g),g}function zE(n,t,e){const i=this.proxy,r=De(n)?n.includes(".")?Oy(i,n):()=>i[n]:n.bind(i,i);let s;Ft(t)?s=t:(s=t.handler,e=t);const o=_l(this),l=qf(r,s.bind(i),e);return o(),l}function Oy(n,t){const e=t.split(".");return()=>{let i=n;for(let r=0;r<e.length&&i;r++)i=i[e[r]];return i}}const VE=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${kn(t)}Modifiers`]||n[`${Vs(t)}Modifiers`];function XE(n,t,...e){if(n.isUnmounted)return;const i=n.vnode.props||_e;let r=e;const s=t.startsWith("update:"),o=s&&VE(i,t.slice(7));o&&(o.trim&&(r=e.map(d=>De(d)?d.trim():d)),o.number&&(r=e.map(Yd)));let l,h=i[l=cd(t)]||i[l=cd(kn(t))];!h&&s&&(h=i[l=cd(Vs(t))]),h&&er(h,n,6,r);const u=i[l+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[l])return;n.emitted[l]=!0,er(u,n,6,r)}}function Ey(n,t,e=!1){const i=t.emitsCache,r=i.get(n);if(r!==void 0)return r;const s=n.emits;let o={},l=!1;if(!Ft(n)){const h=u=>{const d=Ey(u,t,!0);d&&(l=!0,di(o,d))};!e&&t.mixins.length&&t.mixins.forEach(h),n.extends&&h(n.extends),n.mixins&&n.mixins.forEach(h)}return!s&&!l?(Pe(n)&&i.set(n,null),null):(Bt(s)?s.forEach(h=>o[h]=null):di(o,s),Pe(n)&&i.set(n,o),o)}function Eh(n,t){return!n||!mh(t)?!1:(t=t.slice(2).replace(/Once$/,""),ce(n,t[0].toLowerCase()+t.slice(1))||ce(n,Vs(t))||ce(n,t))}function vd(n){const{type:t,vnode:e,proxy:i,withProxy:r,propsOptions:[s],slots:o,attrs:l,emit:h,render:u,renderCache:d,props:g,data:p,setupState:m,ctx:y,inheritAttrs:_}=n,C=Gc(n);let b,x;try{if(e.shapeFlag&4){const O=r||i,E=O;b=Yn(u.call(E,O,d,g,m,p,y)),x=l}else{const O=t;b=Yn(O.length>1?O(g,{attrs:l,slots:o,emit:h}):O(g,null)),x=t.props?l:HE(l)}}catch(O){Xa.length=0,Th(O,n,1),b=et(xr)}let T=b;if(x&&_!==!1){const O=Object.keys(x),{shapeFlag:E}=T;O.length&&E&7&&(s&&O.some(jf)&&(x=YE(x,s)),T=Bs(T,x,!1,!0))}return e.dirs&&(T=Bs(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(e.dirs):e.dirs),e.transition&&Ph(T,e.transition),b=T,Gc(C),b}const HE=n=>{let t;for(const e in n)(e==="class"||e==="style"||mh(e))&&((t||(t={}))[e]=n[e]);return t},YE=(n,t)=>{const e={};for(const i in n)(!jf(i)||!(i.slice(9)in t))&&(e[i]=n[i]);return e};function NE(n,t,e){const{props:i,children:r,component:s}=n,{props:o,children:l,patchFlag:h}=t,u=s.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&h>=0){if(h&1024)return!0;if(h&16)return i?Am(i,o,u):!!o;if(h&8){const d=t.dynamicProps;for(let g=0;g<d.length;g++){const p=d[g];if(o[p]!==i[p]&&!Eh(u,p))return!0}}}else return(r||l)&&(!l||!l.$stable)?!0:i===o?!1:i?o?Am(i,o,u):!0:!!o;return!1}function Am(n,t,e){const i=Object.keys(t);if(i.length!==Object.keys(n).length)return!0;for(let r=0;r<i.length;r++){const s=i[r];if(t[s]!==n[s]&&!Eh(e,s))return!0}return!1}function WE({vnode:n,parent:t},e){for(;t;){const i=t.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=t.vnode).el=e,t=t.parent;else break}}const $c=n=>n.__isSuspense;function UE(n,t){t&&t.pendingBranch?Bt(n)?t.effects.push(...n):t.effects.push(n):oE(n)}const Se=Symbol.for("v-fgt"),Mh=Symbol.for("v-txt"),xr=Symbol.for("v-cmt"),Va=Symbol.for("v-stc"),Xa=[];let Ki=null;function W(n=!1){Xa.push(Ki=n?null:[])}function GE(){Xa.pop(),Ki=Xa[Xa.length-1]||null}let el=1;function km(n){el+=n,n<0&&Ki&&(Ki.hasOnce=!0)}function My(n){return n.dynamicChildren=el>0?Ki||To:null,GE(),el>0&&Ki&&Ki.push(n),n}function Q(n,t,e,i,r,s){return My(F(n,t,e,i,r,s,!0))}function _i(n,t,e,i,r){return My(et(n,t,e,i,r,!0))}function il(n){return n?n.__v_isVNode===!0:!1}function vo(n,t){return n.type===t.type&&n.key===t.key}const Ay=({key:n})=>n??null,Rc=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?De(n)||Te(n)||Ft(n)?{i:ti,r:n,k:t,f:!!e}:n:null);function F(n,t=null,e=null,i=0,r=null,s=n===Se?0:1,o=!1,l=!1){const h={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&Ay(t),ref:t&&Rc(t),scopeId:ey,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:s,patchFlag:i,dynamicProps:r,dynamicChildren:null,appContext:null,ctx:ti};return l?($f(h,e),s&128&&n.normalize(h)):e&&(h.shapeFlag|=De(e)?8:16),el>0&&!o&&Ki&&(h.patchFlag>0||s&6)&&h.patchFlag!==32&&Ki.push(h),h}const et=qE;function qE(n,t=null,e=null,i=0,r=null,s=!1){if((!n||n===uy)&&(n=xr),il(n)){const l=Bs(n,t,!0);return e&&$f(l,e),el>0&&!s&&Ki&&(l.shapeFlag&6?Ki[Ki.indexOf(n)]=l:Ki.push(l)),l.patchFlag=-2,l}if(iM(n)&&(n=n.__vccOpts),t){t=Zf(t);let{class:l,style:h}=t;l&&!De(l)&&(t.class=Ye(l)),Pe(h)&&(Xf(h)&&!Bt(h)&&(h=di({},h)),t.style=Ji(h))}const o=De(n)?1:$c(n)?128:lE(n)?64:Pe(n)?4:Ft(n)?2:0;return F(n,t,e,i,r,o,s,!0)}function Zf(n){return n?Xf(n)||yy(n)?di({},n):n:null}function Bs(n,t,e=!1,i=!1){const{props:r,ref:s,patchFlag:o,children:l,transition:h}=n,u=t?yl(r||{},t):r,d={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&Ay(u),ref:t&&t.ref?e&&s?Bt(s)?s.concat(Rc(t)):[s,Rc(t)]:Rc(t):s,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:l,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==Se?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:h,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&Bs(n.ssContent),ssFallback:n.ssFallback&&Bs(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return h&&i&&Ph(d,h.clone(d)),d}function ky(n=" ",t=0){return et(Mh,null,n,t)}function vl(n,t){const e=et(Va,null,n);return e.staticCount=t,e}function Cr(n="",t=!1){return t?(W(),_i(xr,null,n)):et(xr,null,n)}function Yn(n){return n==null||typeof n=="boolean"?et(xr):Bt(n)?et(Se,null,n.slice()):typeof n=="object"?Yr(n):et(Mh,null,String(n))}function Yr(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:Bs(n)}function $f(n,t){let e=0;const{shapeFlag:i}=n;if(t==null)t=null;else if(Bt(t))e=16;else if(typeof t=="object")if(i&65){const r=t.default;r&&(r._c&&(r._d=!1),$f(n,r()),r._c&&(r._d=!0));return}else{e=32;const r=t._;!r&&!yy(t)?t._ctx=ti:r===3&&ti&&(ti.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else Ft(t)?(t={default:t,_ctx:ti},e=32):(t=String(t),i&64?(e=16,t=[ky(t)]):e=8);n.children=t,n.shapeFlag|=e}function yl(...n){const t={};for(let e=0;e<n.length;e++){const i=n[e];for(const r in i)if(r==="class")t.class!==i.class&&(t.class=Ye([t.class,i.class]));else if(r==="style")t.style=Ji([t.style,i.style]);else if(mh(r)){const s=t[r],o=i[r];o&&s!==o&&!(Bt(s)&&s.includes(o))&&(t[r]=s?[].concat(s,o):o)}else r!==""&&(t[r]=i[r])}return t}function fn(n,t,e,i=null){er(n,t,7,[e,i])}const ZE=py();let $E=0;function KE(n,t,e){const i=n.type,r=(t?t.appContext:n.appContext)||ZE,s={uid:$E++,vnode:n,type:i,parent:t,appContext:r,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new A1(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(r.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:by(i,r),emitsOptions:Ey(i,r),emit:null,emitted:null,propsDefaults:_e,inheritAttrs:i.inheritAttrs,ctx:_e,data:_e,props:_e,attrs:_e,slots:_e,refs:_e,setupState:_e,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return s.ctx={_:s},s.root=t?t.root:s,s.emit=XE.bind(null,s),n.ce&&n.ce(s),s}let ii=null;const Vo=()=>ii||ti;let Kc,Jd;{const n=T1(),t=(e,i)=>{let r;return(r=n[e])||(r=n[e]=[]),r.push(i),s=>{r.length>1?r.forEach(o=>o(s)):r[0](s)}};Kc=t("__VUE_INSTANCE_SETTERS__",e=>ii=e),Jd=t("__VUE_SSR_SETTERS__",e=>Ah=e)}const _l=n=>{const t=ii;return Kc(n),n.scope.on(),()=>{n.scope.off(),Kc(t)}},jm=()=>{ii&&ii.scope.off(),Kc(null)};function jy(n){return n.vnode.shapeFlag&4}let Ah=!1;function JE(n,t=!1,e=!1){t&&Jd(t);const{props:i,children:r}=n.vnode,s=jy(n);PE(n,i,s,t),AE(n,r,e);const o=s?QE(n,t):void 0;return t&&Jd(!1),o}function QE(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,vE);const{setup:i}=e;if(i){const r=n.setupContext=i.length>1?eM(n):null,s=_l(n);ns();const o=ml(i,n,0,[n.props,r]);if(rs(),s(),w1(o)){if(js(n)||iy(n),o.then(jm,jm),t)return o.then(l=>{Dm(n,l,t)}).catch(l=>{Th(l,n,0)});n.asyncDep=o}else Dm(n,o,t)}else Dy(n,t)}function Dm(n,t,e){Ft(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:Pe(t)&&(n.setupState=Z1(t)),Dy(n,e)}let Im;function Dy(n,t,e){const i=n.type;if(!n.render){if(!t&&Im&&!i.render){const r=i.template||Uf(n).template;if(r){const{isCustomElement:s,compilerOptions:o}=n.appContext.config,{delimiters:l,compilerOptions:h}=i,u=di(di({isCustomElement:s,delimiters:l},o),h);i.render=Im(r,u)}}n.render=i.render||$n}{const r=_l(n);ns();try{yE(n)}finally{rs(),r()}}}const tM={get(n,t){return bi(n,"get",""),n[t]}};function eM(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,tM),slots:n.slots,emit:n.emit,expose:t}}function kh(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Z1(Ch(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in za)return za[e](n)},has(t,e){return e in t||e in za}})):n.proxy}function Qd(n,t=!0){return Ft(n)?n.displayName||n.name:n.name||t&&n.__name}function iM(n){return Ft(n)&&"__vccOpts"in n}const mt=(n,t)=>eE(n,t,Ah);function Iy(n,t,e){const i=arguments.length;return i===2?Pe(t)&&!Bt(t)?il(t)?et(n,null,[t]):et(n,t):et(n,null,t):(i>3?e=Array.prototype.slice.call(arguments,2):i===3&&il(e)&&(e=[e]),et(n,t,e))}const nM="3.5.6";/**
* @vue/runtime-dom v3.5.6
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let tf;const Rm=typeof window<"u"&&window.trustedTypes;if(Rm)try{tf=Rm.createPolicy("vue",{createHTML:n=>n})}catch{}const Ry=tf?n=>tf.createHTML(n):n=>n,rM="http://www.w3.org/2000/svg",sM="http://www.w3.org/1998/Math/MathML",pr=typeof document<"u"?document:null,Lm=pr&&pr.createElement("template"),oM={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,i)=>{const r=t==="svg"?pr.createElementNS(rM,n):t==="mathml"?pr.createElementNS(sM,n):e?pr.createElement(n,{is:e}):pr.createElement(n);return n==="select"&&i&&i.multiple!=null&&r.setAttribute("multiple",i.multiple),r},createText:n=>pr.createTextNode(n),createComment:n=>pr.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>pr.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,i,r,s){const o=e?e.previousSibling:t.lastChild;if(r&&(r===s||r.nextSibling))for(;t.insertBefore(r.cloneNode(!0),e),!(r===s||!(r=r.nextSibling)););else{Lm.innerHTML=Ry(i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n);const l=Lm.content;if(i==="svg"||i==="mathml"){const h=l.firstChild;for(;h.firstChild;)l.appendChild(h.firstChild);l.removeChild(h)}t.insertBefore(l,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},aM=Symbol("_vtc");function lM(n,t,e){const i=n[aM];i&&(t=(t?[t,...i]:[...i]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const Bm=Symbol("_vod"),cM=Symbol("_vsh"),Ly=Symbol("");function Kf(n){const t=Vo();if(!t)return;const e=t.ut=(r=n(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(s=>Jc(s,r))},i=()=>{const r=n(t.proxy);t.ce?Jc(t.ce,r):ef(t.subTree,r),e(r)};ay(()=>{FE(i)}),wi(()=>{const r=new MutationObserver(i);r.observe(t.subTree.el.parentNode,{childList:!0}),ss(()=>r.disconnect())})}function ef(n,t){if(n.shapeFlag&128){const e=n.suspense;n=e.activeBranch,e.pendingBranch&&!e.isHydrating&&e.effects.push(()=>{ef(e.activeBranch,t)})}for(;n.component;)n=n.component.subTree;if(n.shapeFlag&1&&n.el)Jc(n.el,t);else if(n.type===Se)n.children.forEach(e=>ef(e,t));else if(n.type===Va){let{el:e,anchor:i}=n;for(;e&&(Jc(e,t),e!==i);)e=e.nextSibling}}function Jc(n,t){if(n.nodeType===1){const e=n.style;let i="";for(const r in t)e.setProperty(`--${r}`,t[r]),i+=`--${r}: ${t[r]};`;e[Ly]=i}}const hM=/(^|;)\s*display\s*:/;function uM(n,t,e){const i=n.style,r=De(e);let s=!1;if(e&&!r){if(t)if(De(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();e[l]==null&&Lc(i,l,"")}else for(const o in t)e[o]==null&&Lc(i,o,"");for(const o in e)o==="display"&&(s=!0),Lc(i,o,e[o])}else if(r){if(t!==e){const o=i[Ly];o&&(e+=";"+o),i.cssText=e,s=hM.test(e)}}else t&&n.removeAttribute("style");Bm in n&&(n[Bm]=s?i.display:"",n[cM]&&(i.display="none"))}const Fm=/\s*!important$/;function Lc(n,t,e){if(Bt(e))e.forEach(i=>Lc(n,t,i));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const i=dM(n,t);Fm.test(e)?n.setProperty(Vs(i),e.replace(Fm,""),"important"):n[i]=e}}const zm=["Webkit","Moz","ms"],yd={};function dM(n,t){const e=yd[t];if(e)return e;let i=kn(t);if(i!=="filter"&&i in n)return yd[t]=i;i=yh(i);for(let r=0;r<zm.length;r++){const s=zm[r]+i;if(s in n)return yd[t]=s}return t}const Vm="http://www.w3.org/1999/xlink";function Xm(n,t,e,i,r,s=CO(t)){i&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(Vm,t.slice(6,t.length)):n.setAttributeNS(Vm,t,e):e==null||s&&!O1(e)?n.removeAttribute(t):n.setAttribute(t,s?"":is(e)?String(e):e)}function fM(n,t,e,i){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?Ry(e):e);return}const r=n.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const o=r==="OPTION"?n.getAttribute("value")||"":n.value,l=e==null?n.type==="checkbox"?"on":"":String(e);(o!==l||!("_value"in n))&&(n.value=l),e==null&&n.removeAttribute(t),n._value=e;return}let s=!1;if(e===""||e==null){const o=typeof n[t];o==="boolean"?e=O1(e):e==null&&o==="string"?(e="",s=!0):o==="number"&&(e=0,s=!0)}try{n[t]=e}catch{}s&&n.removeAttribute(t)}function yo(n,t,e,i){n.addEventListener(t,e,i)}function gM(n,t,e,i){n.removeEventListener(t,e,i)}const Hm=Symbol("_vei");function pM(n,t,e,i,r=null){const s=n[Hm]||(n[Hm]={}),o=s[t];if(i&&o)o.value=i;else{const[l,h]=mM(t);if(i){const u=s[t]=_M(i,r);yo(n,l,u,h)}else o&&(gM(n,l,o,h),s[t]=void 0)}}const Ym=/(?:Once|Passive|Capture)$/;function mM(n){let t;if(Ym.test(n)){t={};let i;for(;i=n.match(Ym);)n=n.slice(0,n.length-i[0].length),t[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):Vs(n.slice(2)),t]}let _d=0;const vM=Promise.resolve(),yM=()=>_d||(vM.then(()=>_d=0),_d=Date.now());function _M(n,t){const e=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=e.attached)return;er(bM(i,e.value),t,5,[i])};return e.value=n,e.attached=yM(),e}function bM(n,t){if(Bt(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(i=>r=>!r._stopped&&i&&i(r))}else return t}const Nm=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,wM=(n,t,e,i,r,s)=>{const o=r==="svg";t==="class"?lM(n,i,o):t==="style"?uM(n,e,i):mh(t)?jf(t)||pM(n,t,e,i,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):xM(n,t,i,o))?(fM(n,t,i),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Xm(n,t,i,o,s,t!=="value")):(t==="true-value"?n._trueValue=i:t==="false-value"&&(n._falseValue=i),Xm(n,t,i,o))};function xM(n,t,e,i){if(i)return!!(t==="innerHTML"||t==="textContent"||t in n&&Nm(t)&&Ft(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const r=n.tagName;if(r==="IMG"||r==="VIDEO"||r==="CANVAS"||r==="SOURCE")return!1}return Nm(t)&&De(e)?!1:!!(t in n||n._isVueCE&&(/[A-Z]/.test(t)||!De(e)))}const Wm=n=>{const t=n.props["onUpdate:modelValue"]||!1;return Bt(t)?e=>Oo(t,e):t};function CM(n){n.target.composing=!0}function Um(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const bd=Symbol("_assign"),Jf={created(n,{modifiers:{lazy:t,trim:e,number:i}},r){n[bd]=Wm(r);const s=i||r.props&&r.props.type==="number";yo(n,t?"change":"input",o=>{if(o.target.composing)return;let l=n.value;e&&(l=l.trim()),s&&(l=Yd(l)),n[bd](l)}),e&&yo(n,"change",()=>{n.value=n.value.trim()}),t||(yo(n,"compositionstart",CM),yo(n,"compositionend",Um),yo(n,"change",Um))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,oldValue:e,modifiers:{lazy:i,trim:r,number:s}},o){if(n[bd]=Wm(o),n.composing)return;const l=(s||n.type==="number")&&!/^0\d/.test(n.value)?Yd(n.value):n.value,h=t??"";l!==h&&(document.activeElement===n&&n.type!=="range"&&(i&&t===e||r&&n.value.trim()===h)||(n.value=h))}},SM=["ctrl","shift","alt","meta"],TM={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,t)=>SM.some(e=>n[`${e}Key`]&&!t.includes(e))},nl=(n,t)=>{const e=n._withMods||(n._withMods={}),i=t.join(".");return e[i]||(e[i]=(r,...s)=>{for(let o=0;o<t.length;o++){const l=TM[t[o]];if(l&&l(r,t))return}return n(r,...s)})},PM=di({patchProp:wM},oM);let Gm;function OM(){return Gm||(Gm=jE(PM))}const EM=(...n)=>{const t=OM().createApp(...n),{mount:e}=t;return t.mount=i=>{const r=AM(i);if(!r)return;const s=t._component;!Ft(s)&&!s.render&&!s.template&&(s.template=r.innerHTML),r.nodeType===1&&(r.textContent="");const o=e(r,!1,MM(r));return r instanceof Element&&(r.removeAttribute("v-cloak"),r.setAttribute("data-v-app","")),o},t};function MM(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function AM(n){return De(n)?document.querySelector(n):n}var kM=Object.defineProperty,jM=(n,t,e)=>t in n?kM(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,At=(n,t,e)=>jM(n,typeof t!="symbol"?t+"":t,e),DM=!1;/*!
 * pinia v2.2.2
 * (c) 2024 Eduardo San Martin Morote
 * @license MIT
 */let By;const jh=n=>By=n,Fy=Symbol();function nf(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var Ha;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(Ha||(Ha={}));const wd=typeof navigator=="object"?navigator:{userAgent:""};/Macintosh/.test(wd.userAgent)&&/AppleWebKit/.test(wd.userAgent)&&/Safari/.test(wd.userAgent);function IM(){const n=k1(!0),t=n.run(()=>vt({}));let e=[],i=[];const r=Ch({install(s){jh(r),r._a=s,s.provide(Fy,r),s.config.globalProperties.$pinia=r,i.forEach(o=>e.push(o)),i=[]},use(s){return!this._a&&!DM?i.push(s):e.push(s),this},_p:e,_a:null,_e:n,_s:new Map,state:t});return r}const zy=()=>{};function qm(n,t,e,i=zy){n.push(t);const r=()=>{const s=n.indexOf(t);s>-1&&(n.splice(s,1),i())};return!e&&_h()&&j1(r),r}function uo(n,...t){n.slice().forEach(e=>{e(...t)})}const RM=n=>n(),Zm=Symbol(),xd=Symbol();function rf(n,t){n instanceof Map&&t instanceof Map?t.forEach((e,i)=>n.set(i,e)):n instanceof Set&&t instanceof Set&&t.forEach(n.add,n);for(const e in t){if(!t.hasOwnProperty(e))continue;const i=t[e],r=n[e];nf(r)&&nf(i)&&n.hasOwnProperty(e)&&!Te(i)&&!qr(i)?n[e]=rf(r,i):n[e]=i}return n}const LM=Symbol();function BM(n){return!nf(n)||!n.hasOwnProperty(LM)}const{assign:Xr}=Object;function FM(n){return!!(Te(n)&&n.effect)}function zM(n,t,e,i){const{state:r,actions:s,getters:o}=t,l=e.state.value[n];let h;function u(){!l&&(e.state.value[n]=r?r():{});const d=$O(e.state.value[n]);return Xr(d,s,Object.keys(o||{}).reduce((g,p)=>(g[p]=Ch(mt(()=>{jh(e);const m=e._s.get(n);return o[p].call(m,m)})),g),{}))}return h=Vy(n,u,t,e,i,!0),h}function Vy(n,t,e={},i,r,s){let o;const l=Xr({actions:{}},e),h={deep:!0};let u,d,g=[],p=[],m;const y=i.state.value[n];!s&&!y&&(i.state.value[n]={}),vt({});let _;function C(A){let B;u=d=!1,typeof A=="function"?(A(i.state.value[n]),B={type:Ha.patchFunction,storeId:n,events:m}):(rf(i.state.value[n],A),B={type:Ha.patchObject,payload:A,storeId:n,events:m});const Y=_=Symbol();wr().then(()=>{_===Y&&(u=!0)}),d=!0,uo(g,B,i.state.value[n])}const b=s?function(){const{state:A}=e,B=A?A():{};this.$patch(Y=>{Xr(Y,B)})}:zy;function x(){o.stop(),g=[],p=[],i._s.delete(n)}const T=(A,B="")=>{if(Zm in A)return A[xd]=B,A;const Y=function(){jh(i);const J=Array.from(arguments),st=[],ct=[];function ot(at){st.push(at)}function yt(at){ct.push(at)}uo(p,{args:J,name:Y[xd],store:E,after:ot,onError:yt});let Tt;try{Tt=A.apply(this&&this.$id===n?this:E,J)}catch(at){throw uo(ct,at),at}return Tt instanceof Promise?Tt.then(at=>(uo(st,at),at)).catch(at=>(uo(ct,at),Promise.reject(at))):(uo(st,Tt),Tt)};return Y[Zm]=!0,Y[xd]=B,Y},O={_p:i,$id:n,$onAction:qm.bind(null,p),$patch:C,$reset:b,$subscribe(A,B={}){const Y=qm(g,A,B.detached,()=>J()),J=o.run(()=>qe(()=>i.state.value[n],st=>{(B.flush==="sync"?d:u)&&A({storeId:n,type:Ha.direct,events:m},st)},Xr({},h,B)));return Y},$dispose:x},E=jn(O);i._s.set(n,E);const V=(i._a&&i._a.runWithContext||RM)(()=>i._e.run(()=>(o=k1()).run(()=>t({action:T}))));for(const A in V){const B=V[A];if(Te(B)&&!FM(B)||qr(B))s||(y&&BM(B)&&(Te(B)?B.value=y[A]:rf(B,y[A])),i.state.value[n][A]=B);else if(typeof B=="function"){const Y=T(B,A);V[A]=Y,l.actions[A]=B}}return Xr(E,V),Xr(oe(E),V),Object.defineProperty(E,"$state",{get:()=>i.state.value[n],set:A=>{C(B=>{Xr(B,A)})}}),i._p.forEach(A=>{Xr(E,o.run(()=>A({store:E,app:i._a,pinia:i,options:l})))}),y&&s&&e.hydrate&&e.hydrate(E.$state,y),u=!0,d=!0,E}function Xy(n,t,e){let i,r;const s=typeof t=="function";typeof n=="string"?(i=n,r=s?e:t):(r=n,i=n.id);function o(l,h){const u=TE();return l=l||(u?Qn(Fy,null):null),l&&jh(l),l=By,l._s.has(i)||(s?Vy(i,t,r,l):zM(i,r,l)),l._s.get(i)}return o.$id=i,o}const VM=IM();function D(n,t,e){return(t=function(i){var r=function(s,o){if(typeof s!="object"||!s)return s;var l=s[Symbol.toPrimitive];if(l!==void 0){var h=l.call(s,o||"default");if(typeof h!="object")return h;throw new TypeError("@@toPrimitive must return a primitive value.")}return(o==="string"?String:Number)(s)}(i,"string");return typeof r=="symbol"?r:r+""}(t))in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function $m(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),e.push.apply(e,i)}return e}function L(n){for(var t=1;t<arguments.length;t++){var e=arguments[t]!=null?arguments[t]:{};t%2?$m(Object(e),!0).forEach(function(i){D(n,i,e[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):$m(Object(e)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(e,i))})}return n}function Ae(n,t){if(n==null)return{};var e,i,r=function(o,l){if(o==null)return{};var h={};for(var u in o)if({}.hasOwnProperty.call(o,u)){if(l.indexOf(u)>=0)continue;h[u]=o[u]}return h}(n,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(i=0;i<s.length;i++)e=s[i],t.indexOf(e)>=0||{}.propertyIsEnumerable.call(n,e)&&(r[e]=n[e])}return r}function os(n,t){return t||(t=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(t)}}))}class Km{constructor(){D(this,"browserShadowBlurConstant",1),D(this,"DPI",96),D(this,"devicePixelRatio",typeof window<"u"?window.devicePixelRatio:1),D(this,"perfLimitSizeTotal",2097152),D(this,"maxCacheSideLimit",4096),D(this,"minCacheSideLimit",256),D(this,"disableStyleCopyPaste",!1),D(this,"enableGLFiltering",!0),D(this,"textureSize",4096),D(this,"forceGLPutImageData",!1),D(this,"cachesBoundsOfCurve",!1),D(this,"fontPaths",{}),D(this,"NUM_FRACTION_DIGITS",4)}}const Kt=new class extends Km{constructor(n){super(),this.configure(n)}configure(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.assign(this,n)}addFonts(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.fontPaths=L(L({},this.fontPaths),n)}removeFonts(){(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).forEach(n=>{delete this.fontPaths[n]})}clearFonts(){this.fontPaths={}}restoreDefaults(n){const t=new Km,e=(n==null?void 0:n.reduce((i,r)=>(i[r]=t[r],i),{}))||t;this.configure(e)}},Sr=function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return console[n]("fabric",...e)};class Gn extends Error{constructor(t,e){super("fabric: ".concat(t),e)}}class Qf extends Gn{constructor(t){super("".concat(t," 'options.signal' is in 'aborted' state"))}}class XM{}class HM extends XM{testPrecision(t,e){const i="precision ".concat(e,` float;
void main(){}`),r=t.createShader(t.FRAGMENT_SHADER);return!!r&&(t.shaderSource(r,i),t.compileShader(r),!!t.getShaderParameter(r,t.COMPILE_STATUS))}queryWebGL(t){const e=t.getContext("webgl");e&&(this.maxTextureSize=e.getParameter(e.MAX_TEXTURE_SIZE),this.GLPrecision=["highp","mediump","lowp"].find(i=>this.testPrecision(e,i)),e.getExtension("WEBGL_lose_context").loseContext(),Sr("log","WebGL: max texture size ".concat(this.maxTextureSize)))}isSupported(t){return!!this.maxTextureSize&&this.maxTextureSize>=t}}const YM={};let sf;const NM=n=>{sf=n},Dn=()=>sf||(sf={document,window,isTouchSupported:"ontouchstart"in window||"ontouchstart"in document||window&&window.navigator&&window.navigator.maxTouchPoints>0,WebGLProbe:new HM,dispose(){},copyPasteData:YM}),Xs=()=>Dn().document,qn=()=>Dn().window,Hy=()=>{var n;return Math.max((n=Kt.devicePixelRatio)!==null&&n!==void 0?n:qn().devicePixelRatio,1)},Mo=new class{constructor(){D(this,"charWidthsCache",{}),D(this,"boundsOfCurveCache",{})}getFontCache(n){let{fontFamily:t,fontStyle:e,fontWeight:i}=n;t=t.toLowerCase(),this.charWidthsCache[t]||(this.charWidthsCache[t]={});const r=this.charWidthsCache[t],s="".concat(e.toLowerCase(),"_").concat((i+"").toLowerCase());return r[s]||(r[s]={}),r[s]}clearFontCache(n){(n=(n||"").toLowerCase())?this.charWidthsCache[n]&&delete this.charWidthsCache[n]:this.charWidthsCache={}}limitDimsByArea(n){const{perfLimitSizeTotal:t}=Kt,e=Math.sqrt(t*n);return[Math.floor(e),Math.floor(t/e)]}},Qc="6.4.2";function Is(){}const Qr=Math.PI/2,Tr=2*Math.PI,tg=Math.PI/180,fi=Object.freeze([1,0,0,1,0,0]),eg=16,Fr=.4477152502,Lt="center",he="left",Hi="top",of="bottom",Xe="right",ki="none",ig=/\r?\n/,Yy="moving",Dh="scaling",Ny="rotating",ng="rotate",Wy="skewing",rl="resizing",Uy="modifyPoly",WM="modifyPath",th="changed",Ih="scale",Ii="scaleX",tn="scaleY",Xo="skewX",Ho="skewY",He="fill",ji="stroke",eh="modified",fo="json",Cd="svg",ht=new class{constructor(){this[fo]=new Map,this[Cd]=new Map}has(n){return this[fo].has(n)}getClass(n){const t=this[fo].get(n);if(!t)throw new Gn("No class registered for ".concat(n));return t}setClass(n,t){t?this[fo].set(t,n):(this[fo].set(n.type,n),this[fo].set(n.type.toLowerCase(),n))}getSVGClass(n){return this[Cd].get(n)}setSVGClass(n,t){this[Cd].set(t??n.type.toLowerCase(),n)}},sl=new class extends Array{remove(n){const t=this.indexOf(n);t>-1&&this.splice(t,1)}cancelAll(){const n=this.splice(0);return n.forEach(t=>t.abort()),n}cancelByCanvas(n){if(!n)return[];const t=this.filter(e=>{var i;return e.target===n||typeof e.target=="object"&&((i=e.target)===null||i===void 0?void 0:i.canvas)===n});return t.forEach(e=>e.abort()),t}cancelByTarget(n){if(!n)return[];const t=this.filter(e=>e.target===n);return t.forEach(e=>e.abort()),t}};class Gy{constructor(){D(this,"__eventListeners",{})}on(t,e){if(this.__eventListeners||(this.__eventListeners={}),typeof t=="object")return Object.entries(t).forEach(i=>{let[r,s]=i;this.on(r,s)}),()=>this.off(t);if(e){const i=t;return this.__eventListeners[i]||(this.__eventListeners[i]=[]),this.__eventListeners[i].push(e),()=>this.off(i,e)}return()=>!1}once(t,e){if(typeof t=="object"){const i=[];return Object.entries(t).forEach(r=>{let[s,o]=r;i.push(this.once(s,o))}),()=>i.forEach(r=>r())}if(e){const i=this.on(t,function(){for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];e.call(this,...s),i()});return i}return()=>!1}_removeEventListener(t,e){if(this.__eventListeners[t])if(e){const i=this.__eventListeners[t],r=i.indexOf(e);r>-1&&i.splice(r,1)}else this.__eventListeners[t]=[]}off(t,e){if(this.__eventListeners)if(t===void 0)for(const i in this.__eventListeners)this._removeEventListener(i);else typeof t=="object"?Object.entries(t).forEach(i=>{let[r,s]=i;this._removeEventListener(r,s)}):this._removeEventListener(t,e)}fire(t,e){var i;if(!this.__eventListeners)return;const r=(i=this.__eventListeners[t])===null||i===void 0?void 0:i.concat();if(r)for(let s=0;s<r.length;s++)r[s].call(this,e||{})}}const Ps=(n,t)=>{const e=n.indexOf(t);return e!==-1&&n.splice(e,1),n},In=n=>{if(n===0)return 1;switch(Math.abs(n)/Qr){case 1:case 3:return 0;case 2:return-1}return Math.cos(n)},Rn=n=>{if(n===0)return 0;const t=n/Qr,e=Math.sign(n);switch(t){case 1:return e;case 2:return 0;case 3:return-e}return Math.sin(n)};class I{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;typeof t=="object"?(this.x=t.x,this.y=t.y):(this.x=t,this.y=e)}add(t){return new I(this.x+t.x,this.y+t.y)}addEquals(t){return this.x+=t.x,this.y+=t.y,this}scalarAdd(t){return new I(this.x+t,this.y+t)}scalarAddEquals(t){return this.x+=t,this.y+=t,this}subtract(t){return new I(this.x-t.x,this.y-t.y)}subtractEquals(t){return this.x-=t.x,this.y-=t.y,this}scalarSubtract(t){return new I(this.x-t,this.y-t)}scalarSubtractEquals(t){return this.x-=t,this.y-=t,this}multiply(t){return new I(this.x*t.x,this.y*t.y)}scalarMultiply(t){return new I(this.x*t,this.y*t)}scalarMultiplyEquals(t){return this.x*=t,this.y*=t,this}divide(t){return new I(this.x/t.x,this.y/t.y)}scalarDivide(t){return new I(this.x/t,this.y/t)}scalarDivideEquals(t){return this.x/=t,this.y/=t,this}eq(t){return this.x===t.x&&this.y===t.y}lt(t){return this.x<t.x&&this.y<t.y}lte(t){return this.x<=t.x&&this.y<=t.y}gt(t){return this.x>t.x&&this.y>t.y}gte(t){return this.x>=t.x&&this.y>=t.y}lerp(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5;return e=Math.max(Math.min(1,e),0),new I(this.x+(t.x-this.x)*e,this.y+(t.y-this.y)*e)}distanceFrom(t){const e=this.x-t.x,i=this.y-t.y;return Math.sqrt(e*e+i*i)}midPointFrom(t){return this.lerp(t)}min(t){return new I(Math.min(this.x,t.x),Math.min(this.y,t.y))}max(t){return new I(Math.max(this.x,t.x),Math.max(this.y,t.y))}toString(){return"".concat(this.x,",").concat(this.y)}setXY(t,e){return this.x=t,this.y=e,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setFromPoint(t){return this.x=t.x,this.y=t.y,this}swap(t){const e=this.x,i=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=i}clone(){return new I(this.x,this.y)}rotate(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:rg;const i=Rn(t),r=In(t),s=this.subtract(e);return new I(s.x*r-s.y*i,s.x*i+s.y*r).add(e)}transform(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return new I(t[0]*this.x+t[2]*this.y+(e?0:t[4]),t[1]*this.x+t[3]*this.y+(e?0:t[5]))}}const rg=new I(0,0),Bc=n=>!!n&&Array.isArray(n._objects);function as(n){class t extends n{constructor(){super(...arguments),D(this,"_objects",[])}_onObjectAdded(i){}_onObjectRemoved(i){}_onStackOrderChanged(i){}add(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];const o=this._objects.push(...r);return r.forEach(l=>this._onObjectAdded(l)),o}insertAt(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return this._objects.splice(i,0,...s),s.forEach(l=>this._onObjectAdded(l)),this._objects.length}remove(){const i=this._objects,r=[];for(var s=arguments.length,o=new Array(s),l=0;l<s;l++)o[l]=arguments[l];return o.forEach(h=>{const u=i.indexOf(h);u!==-1&&(i.splice(u,1),r.push(h),this._onObjectRemoved(h))}),r}forEachObject(i){this.getObjects().forEach((r,s,o)=>i(r,s,o))}getObjects(){for(var i=arguments.length,r=new Array(i),s=0;s<i;s++)r[s]=arguments[s];return r.length===0?[...this._objects]:this._objects.filter(o=>o.isType(...r))}item(i){return this._objects[i]}isEmpty(){return this._objects.length===0}size(){return this._objects.length}contains(i,r){return!!this._objects.includes(i)||!!r&&this._objects.some(s=>s instanceof t&&s.contains(i,!0))}complexity(){return this._objects.reduce((i,r)=>i+=r.complexity?r.complexity():0,0)}sendObjectToBack(i){return!(!i||i===this._objects[0])&&(Ps(this._objects,i),this._objects.unshift(i),this._onStackOrderChanged(i),!0)}bringObjectToFront(i){return!(!i||i===this._objects[this._objects.length-1])&&(Ps(this._objects,i),this._objects.push(i),this._onStackOrderChanged(i),!0)}sendObjectBackwards(i,r){if(!i)return!1;const s=this._objects.indexOf(i);if(s!==0){const o=this.findNewLowerIndex(i,s,r);return Ps(this._objects,i),this._objects.splice(o,0,i),this._onStackOrderChanged(i),!0}return!1}bringObjectForward(i,r){if(!i)return!1;const s=this._objects.indexOf(i);if(s!==this._objects.length-1){const o=this.findNewUpperIndex(i,s,r);return Ps(this._objects,i),this._objects.splice(o,0,i),this._onStackOrderChanged(i),!0}return!1}moveObjectTo(i,r){return i!==this._objects[r]&&(Ps(this._objects,i),this._objects.splice(r,0,i),this._onStackOrderChanged(i),!0)}findNewLowerIndex(i,r,s){let o;if(s){o=r;for(let l=r-1;l>=0;--l)if(i.isOverlapping(this._objects[l])){o=l;break}}else o=r-1;return o}findNewUpperIndex(i,r,s){let o;if(s){o=r;for(let l=r+1;l<this._objects.length;++l)if(i.isOverlapping(this._objects[l])){o=l;break}}else o=r+1;return o}collectObjects(i){let{left:r,top:s,width:o,height:l}=i,{includeIntersecting:h=!0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const u=[],d=new I(r,s),g=d.add(new I(o,l));for(let p=this._objects.length-1;p>=0;p--){const m=this._objects[p];m.selectable&&m.visible&&(h&&m.intersectsWithRect(d,g)||m.isContainedWithinRect(d,g)||h&&m.containsPoint(d)||h&&m.containsPoint(g))&&u.push(m)}return u}}return t}class qy extends Gy{_setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};for(const e in t)this.set(e,t[e])}_setObject(t){for(const e in t)this._set(e,t[e])}set(t,e){return typeof t=="object"?this._setObject(t):this._set(t,e),this}_set(t,e){this[t]=e}toggle(t){const e=this.get(t);return typeof e=="boolean"&&this.set(t,!e),this}get(t){return this[t]}}function Ya(n){return qn().requestAnimationFrame(n)}function Zy(n){return qn().cancelAnimationFrame(n)}let UM=0;const ts=()=>UM++,Me=()=>{const n=Xs().createElement("canvas");if(!n||n.getContext===void 0)throw new Gn("Failed to create `canvas` element");return n},$y=()=>Xs().createElement("img"),sg=(n,t,e)=>n.toDataURL("image/".concat(t),e),Be=n=>n*tg,es=n=>n/tg,Ky=n=>n.every((t,e)=>t===fi[e]),mi=(n,t,e)=>new I(n).transform(t,e),Xi=n=>{const t=1/(n[0]*n[3]-n[1]*n[2]),e=[t*n[3],-t*n[1],-t*n[2],t*n[0],0,0],{x:i,y:r}=new I(n[4],n[5]).transform(e,!0);return e[4]=-i,e[5]=-r,e},je=(n,t,e)=>[n[0]*t[0]+n[2]*t[1],n[1]*t[0]+n[3]*t[1],n[0]*t[2]+n[2]*t[3],n[1]*t[2]+n[3]*t[3],e?0:n[0]*t[4]+n[2]*t[5]+n[4],e?0:n[1]*t[4]+n[3]*t[5]+n[5]],Rh=(n,t)=>n.reduceRight((e,i)=>i&&e?je(i,e,t):i||e,void 0)||fi.concat(),Jy=n=>{let[t,e]=n;return Math.atan2(e,t)},Fs=n=>{const t=Jy(n),e=Math.pow(n[0],2)+Math.pow(n[1],2),i=Math.sqrt(e),r=(n[0]*n[3]-n[2]*n[1])/i,s=Math.atan2(n[0]*n[2]+n[1]*n[3],e);return{angle:es(t),scaleX:i,scaleY:r,skewX:es(s),skewY:0,translateX:n[4]||0,translateY:n[5]||0}},Yo=function(n){return[1,0,0,1,n,arguments.length>1&&arguments[1]!==void 0?arguments[1]:0]};function No(){let{angle:n=0}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{x:t=0,y:e=0}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=Be(n),r=In(i),s=Rn(i);return[r,s,-s,r,t?t-(r*t-s*e):0,e?e-(s*t+r*e):0]}const Lh=function(n){return[n,0,0,arguments.length>1&&arguments[1]!==void 0?arguments[1]:n,0,0]},Qy=n=>Math.tan(Be(n)),og=n=>[1,0,Qy(n),1,0,0],ag=n=>[1,Qy(n),0,1,0,0],bl=n=>{let{scaleX:t=1,scaleY:e=1,flipX:i=!1,flipY:r=!1,skewX:s=0,skewY:o=0}=n,l=Lh(i?-t:t,r?-e:e);return s&&(l=je(l,og(s),!0)),o&&(l=je(l,ag(o),!0)),l},t_=n=>{const{translateX:t=0,translateY:e=0,angle:i=0}=n;let r=Yo(t,e);i&&(r=je(r,No({angle:i})));const s=bl(n);return Ky(s)||(r=je(r,s)),r},Na=function(n){let{signal:t,crossOrigin:e=null}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise(function(i,r){if(t&&t.aborted)return r(new Qf("loadImage"));const s=$y();let o;t&&(o=function(h){s.src="",r(h)},t.addEventListener("abort",o,{once:!0}));const l=function(){s.onload=s.onerror=null,o&&(t==null||t.removeEventListener("abort",o)),i(s)};n?(s.onload=l,s.onerror=function(){o&&(t==null||t.removeEventListener("abort",o)),r(new Gn("Error loading ".concat(s.src)))},e&&(s.crossOrigin=e),s.src=n):l()})},Do=function(n){let{signal:t,reviver:e=Is}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((i,r)=>{const s=[];t&&t.addEventListener("abort",r,{once:!0}),Promise.all(n.map(o=>ht.getClass(o.type).fromObject(o,{signal:t}).then(l=>(e(o,l),s.push(l),l)))).then(i).catch(o=>{s.forEach(l=>{l.dispose&&l.dispose()}),r(o)}).finally(()=>{t&&t.removeEventListener("abort",r)})})},wl=function(n){let{signal:t}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return new Promise((e,i)=>{const r=[];t&&t.addEventListener("abort",i,{once:!0});const s=Object.values(n).map(l=>l&&l.type&&ht.has(l.type)?Do([l],{signal:t}).then(h=>{let[u]=h;return r.push(u),u}):l),o=Object.keys(n);Promise.all(s).then(l=>l.reduce((h,u,d)=>(h[o[d]]=u,h),{})).then(e).catch(l=>{r.forEach(h=>{h.dispose&&h.dispose()}),i(l)}).finally(()=>{t&&t.removeEventListener("abort",i)})})},Hs=function(n){return(arguments.length>1&&arguments[1]!==void 0?arguments[1]:[]).reduce((t,e)=>(e in n&&(t[e]=n[e]),t),{})},lg=(n,t)=>Object.keys(n).reduce((e,i)=>(t(n[i],i,n)&&(e[i]=n[i]),e),{}),Jm={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#0FF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000",blanchedalmond:"#FFEBCD",blue:"#00F",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#0FF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgrey:"#A9A9A9",darkgreen:"#006400",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#F0F",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgrey:"#D3D3D3",lightgreen:"#90EE90",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#0F0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#F0F",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#639",red:"#F00",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFF",whitesmoke:"#F5F5F5",yellow:"#FF0",yellowgreen:"#9ACD32"},Sd=(n,t,e)=>(e<0&&(e+=1),e>1&&(e-=1),e<1/6?n+6*(t-n)*e:e<.5?t:e<2/3?n+(t-n)*(2/3-e)*6:n),Qm=(n,t,e,i)=>{n/=255,t/=255,e/=255;const r=Math.max(n,t,e),s=Math.min(n,t,e);let o,l;const h=(r+s)/2;if(r===s)o=l=0;else{const u=r-s;switch(l=h>.5?u/(2-r-s):u/(r+s),r){case n:o=(t-e)/u+(t<e?6:0);break;case t:o=(e-n)/u+2;break;case e:o=(n-t)/u+4}o/=6}return[Math.round(360*o),Math.round(100*l),Math.round(100*h),i]},tv=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"1";return parseFloat(n)/(n.endsWith("%")?100:1)},Sc=n=>Math.min(Math.round(n),255).toString(16).toUpperCase().padStart(2,"0"),ev=n=>{let[t,e,i,r=1]=n;const s=Math.round(.3*t+.59*e+.11*i);return[s,s,s,r]};class se{constructor(t){if(D(this,"isUnrecognised",!1),t)if(t instanceof se)this.setSource([...t._source]);else if(Array.isArray(t)){const[e,i,r,s=1]=t;this.setSource([e,i,r,s])}else this.setSource(this._tryParsingColor(t));else this.setSource([0,0,0,1])}_tryParsingColor(t){return t in Jm&&(t=Jm[t]),t==="transparent"?[255,255,255,0]:se.sourceFromHex(t)||se.sourceFromRgb(t)||se.sourceFromHsl(t)||(this.isUnrecognised=!0)&&[0,0,0,1]}getSource(){return this._source}setSource(t){this._source=t}toRgb(){const[t,e,i]=this.getSource();return"rgb(".concat(t,",").concat(e,",").concat(i,")")}toRgba(){return"rgba(".concat(this.getSource().join(","),")")}toHsl(){const[t,e,i]=Qm(...this.getSource());return"hsl(".concat(t,",").concat(e,"%,").concat(i,"%)")}toHsla(){const[t,e,i,r]=Qm(...this.getSource());return"hsla(".concat(t,",").concat(e,"%,").concat(i,"%,").concat(r,")")}toHex(){return this.toHexa().slice(0,6)}toHexa(){const[t,e,i,r]=this.getSource();return"".concat(Sc(t)).concat(Sc(e)).concat(Sc(i)).concat(Sc(Math.round(255*r)))}getAlpha(){return this.getSource()[3]}setAlpha(t){return this._source[3]=t,this}toGrayscale(){return this.setSource(ev(this.getSource())),this}toBlackWhite(t){const[e,,,i]=ev(this.getSource()),r=e<(t||127)?0:255;return this.setSource([r,r,r,i]),this}overlayWith(t){t instanceof se||(t=new se(t));const e=this.getSource(),i=t.getSource(),[r,s,o]=e.map((l,h)=>Math.round(.5*l+.5*i[h]));return this.setSource([r,s,o,e[3]]),this}static fromRgb(t){return se.fromRgba(t)}static fromRgba(t){return new se(se.sourceFromRgb(t))}static sourceFromRgb(t){const e=t.match(/^rgba?\(\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d{0,3}(?:\.\d+)?%?)\s*)?\)$/i);if(e){const[i,r,s]=e.slice(1,4).map(o=>{const l=parseFloat(o);return o.endsWith("%")?Math.round(2.55*l):l});return[i,r,s,tv(e[4])]}}static fromHsl(t){return se.fromHsla(t)}static fromHsla(t){return new se(se.sourceFromHsl(t))}static sourceFromHsl(t){const e=t.match(/^hsla?\(\s*([+-]?\d{0,3}(?:\.\d+)?(?:deg|turn|rad)?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*[\s|,]\s*(\d{0,3}(?:\.\d+)?%?)\s*(?:\s*[,/]\s*(\d*(?:\.\d+)?%?)\s*)?\)$/i);if(!e)return;const i=(se.parseAngletoDegrees(e[1])%360+360)%360/360,r=parseFloat(e[2])/100,s=parseFloat(e[3])/100;let o,l,h;if(r===0)o=l=h=s;else{const u=s<=.5?s*(r+1):s+r-s*r,d=2*s-u;o=Sd(d,u,i+1/3),l=Sd(d,u,i),h=Sd(d,u,i-1/3)}return[Math.round(255*o),Math.round(255*l),Math.round(255*h),tv(e[4])]}static fromHex(t){return new se(se.sourceFromHex(t))}static sourceFromHex(t){if(t.match(/^#?(([0-9a-f]){3,4}|([0-9a-f]{2}){3,4})$/i)){const e=t.slice(t.indexOf("#")+1);let i;i=e.length<=4?e.split("").map(h=>h+h):e.match(/.{2}/g);const[r,s,o,l=255]=i.map(h=>parseInt(h,16));return[r,s,o,l/255]}}static parseAngletoDegrees(t){const e=t.toLowerCase(),i=parseFloat(e);return e.includes("rad")?es(i):e.includes("turn")?360*i:i}}const Ee=(n,t)=>parseFloat(Number(n).toFixed(t)),Ei=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:eg;const e=/\D{0,2}$/.exec(n),i=parseFloat(n),r=Kt.DPI;switch(e==null?void 0:e[0]){case"mm":return i*r/25.4;case"cm":return i*r/2.54;case"in":return i*r;case"pt":return i*r/72;case"pc":return i*r/72*12;case"em":return i*t;default:return i}},cg=n=>{const[t,e]=n.trim().split(" "),[i,r]=(s=t)&&s!==ki?[s.slice(1,4),s.slice(5,8)]:s===ki?[s,s]:["Mid","Mid"];var s;return{meetOrSlice:e||"meet",alignX:i,alignY:r}},ol=n=>"matrix("+n.map(t=>Ee(t,Kt.NUM_FRACTION_DIGITS)).join(" ")+")",al=function(n,t){let e,i,r=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2];if(t)if(t.toLive)e="url(#SVGID_".concat(t.id,")");else{const s=new se(t),o=s.getAlpha();e=s.toRgb(),o!==1&&(i=o.toString())}else e="none";return r?"".concat(n,": ").concat(e,"; ").concat(i?"".concat(n,"-opacity: ").concat(i,"; "):""):"".concat(n,'="').concat(e,'" ').concat(i?"".concat(n,'-opacity="').concat(i,'" '):"")},pn=n=>!!n&&n.toLive!==void 0,iv=n=>!!n&&typeof n.toObject=="function",nv=n=>!!n&&n.offsetX!==void 0&&"source"in n,e_=n=>!!n&&typeof n._renderText=="function",Os=n=>!!n&&"multiSelectionStacking"in n;function i_(n){const t=n&&Tn(n);let e=0,i=0;if(!n||!t)return{left:e,top:i};let r=n;const s=t.documentElement,o=t.body||{scrollLeft:0,scrollTop:0};for(;r&&(r.parentNode||r.host)&&(r=r.parentNode||r.host,r===t?(e=o.scrollLeft||s.scrollLeft||0,i=o.scrollTop||s.scrollTop||0):(e+=r.scrollLeft||0,i+=r.scrollTop||0),r.nodeType!==1||r.style.position!=="fixed"););return{left:e,top:i}}const Tn=n=>n.ownerDocument||null,n_=n=>{var t;return((t=n.ownerDocument)===null||t===void 0?void 0:t.defaultView)||null},r_=function(n,t,e){let{width:i,height:r}=e,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1;n.width=i,n.height=r,s>1&&(n.setAttribute("width",(i*s).toString()),n.setAttribute("height",(r*s).toString()),t.scale(s,s))},af=(n,t)=>{let{width:e,height:i}=t;e&&(n.style.width=typeof e=="number"?"".concat(e,"px"):e),i&&(n.style.height=typeof i=="number"?"".concat(i,"px"):i)};function rv(n){return n.onselectstart!==void 0&&(n.onselectstart=()=>!1),n.style.userSelect=ki,n}class hg{constructor(t){D(this,"_originalCanvasStyle",void 0),D(this,"lower",void 0);const e=this.createLowerCanvas(t);this.lower={el:e,ctx:e.getContext("2d")}}createLowerCanvas(t){const e=(i=t)&&i.getContext!==void 0?t:t&&Xs().getElementById(t)||Me();var i;if(e.hasAttribute("data-fabric"))throw new Gn("Trying to initialize a canvas that has already been initialized. Did you forget to dispose the canvas?");return this._originalCanvasStyle=e.style.cssText,e.setAttribute("data-fabric","main"),e.classList.add("lower-canvas"),e}cleanupDOM(t){let{width:e,height:i}=t;const{el:r}=this.lower;r.classList.remove("lower-canvas"),r.removeAttribute("data-fabric"),r.setAttribute("width","".concat(e)),r.setAttribute("height","".concat(i)),r.style.cssText=this._originalCanvasStyle||"",this._originalCanvasStyle=void 0}setDimensions(t,e){const{el:i,ctx:r}=this.lower;r_(i,r,t,e)}setCSSDimensions(t){af(this.lower.el,t)}calcOffset(){return function(t){var e;const i=t&&Tn(t),r={left:0,top:0};if(!i)return r;const s=((e=n_(t))===null||e===void 0?void 0:e.getComputedStyle(t,null))||{};r.left+=parseInt(s.borderLeftWidth,10)||0,r.top+=parseInt(s.borderTopWidth,10)||0,r.left+=parseInt(s.paddingLeft,10)||0,r.top+=parseInt(s.paddingTop,10)||0;let o={left:0,top:0};const l=i.documentElement;t.getBoundingClientRect!==void 0&&(o=t.getBoundingClientRect());const h=i_(t);return{left:o.left+h.left-(l.clientLeft||0)+r.left,top:o.top+h.top-(l.clientTop||0)+r.top}}(this.lower.el)}dispose(){Dn().dispose(this.lower.el),delete this.lower}}const GM={backgroundVpt:!0,backgroundColor:"",overlayVpt:!0,overlayColor:"",includeDefaultValues:!0,svgViewportTransformation:!0,renderOnAddRemove:!0,skipOffscreen:!0,enableRetinaScaling:!0,imageSmoothingEnabled:!0,controlsAboveOverlay:!1,allowTouchScrolling:!1,viewportTransform:[...fi]};class vn extends as(qy){get lowerCanvasEl(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.el}get contextContainer(){var t;return(t=this.elements.lower)===null||t===void 0?void 0:t.ctx}static getDefaults(){return vn.ownDefaults}constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,this.constructor.getDefaults()),this.set(e),this.initElements(t),this._setDimensionsImpl({width:this.width||this.elements.lower.el.width||0,height:this.height||this.elements.lower.el.height||0}),this.skipControlsDrawing=!1,this.viewportTransform=[...this.viewportTransform],this.calcViewportBoundaries()}initElements(t){this.elements=new hg(t)}add(){const t=super.add(...arguments);return arguments.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}insertAt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];const s=super.insertAt(t,...i);return i.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),s}remove(){const t=super.remove(...arguments);return t.length>0&&this.renderOnAddRemove&&this.requestRenderAll(),t}_onObjectAdded(t){t.canvas&&t.canvas!==this&&(Sr("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t){t._set("canvas",void 0),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onStackOrderChanged(){this.renderOnAddRemove&&this.requestRenderAll()}getRetinaScaling(){return this.enableRetinaScaling?Hy():1}calcOffset(){return this._offset=this.elements.calcOffset()}getWidth(){return this.width}getHeight(){return this.height}setWidth(t,e){return this.setDimensions({width:t},e)}setHeight(t,e){return this.setDimensions({height:t},e)}_setDimensionsImpl(t){let{cssOnly:e=!1,backstoreOnly:i=!1}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!e){const r=L({width:this.width,height:this.height},t);this.elements.setDimensions(r,this.getRetinaScaling()),this.hasLostContext=!0,this.width=r.width,this.height=r.height}i||this.elements.setCSSDimensions(t),this.calcOffset()}setDimensions(t,e){this._setDimensionsImpl(t,e),e&&e.cssOnly||this.requestRenderAll()}getZoom(){return this.viewportTransform[0]}setViewportTransform(t){this.viewportTransform=t,this.calcViewportBoundaries(),this.renderOnAddRemove&&this.requestRenderAll()}zoomToPoint(t,e){const i=t,r=[...this.viewportTransform],s=mi(t,Xi(r));r[0]=e,r[3]=e;const o=mi(s,r);r[4]+=i.x-o.x,r[5]+=i.y-o.y,this.setViewportTransform(r)}setZoom(t){this.zoomToPoint(new I(0,0),t)}absolutePan(t){const e=[...this.viewportTransform];return e[4]=-t.x,e[5]=-t.y,this.setViewportTransform(e)}relativePan(t){return this.absolutePan(new I(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))}getElement(){return this.elements.lower.el}clearContext(t){t.clearRect(0,0,this.width,this.height)}getContext(){return this.elements.lower.ctx}clear(){this.remove(...this.getObjects()),this.backgroundImage=void 0,this.overlayImage=void 0,this.backgroundColor="",this.overlayColor="",this.clearContext(this.getContext()),this.fire("canvas:cleared"),this.renderOnAddRemove&&this.requestRenderAll()}renderAll(){this.cancelRequestedRender(),this.destroyed||this.renderCanvas(this.getContext(),this._objects)}renderAndReset(){this.nextRenderHandle=0,this.renderAll()}requestRenderAll(){this.nextRenderHandle||this.disposed||this.destroyed||(this.nextRenderHandle=Ya(()=>this.renderAndReset()))}calcViewportBoundaries(){const t=this.width,e=this.height,i=Xi(this.viewportTransform),r=mi({x:0,y:0},i),s=mi({x:t,y:e},i),o=r.min(s),l=r.max(s);return this.vptCoords={tl:o,tr:new I(l.x,o.y),bl:new I(o.x,l.y),br:l}}cancelRequestedRender(){this.nextRenderHandle&&(Zy(this.nextRenderHandle),this.nextRenderHandle=0)}drawControls(t){}renderCanvas(t,e){if(this.destroyed)return;const i=this.viewportTransform,r=this.clipPath;this.calcViewportBoundaries(),this.clearContext(t),t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.patternQuality="best",this.fire("before:render",{ctx:t}),this._renderBackground(t),t.save(),t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this._renderObjects(t,e),t.restore(),this.controlsAboveOverlay||this.skipControlsDrawing||this.drawControls(t),r&&(r._set("canvas",this),r.shouldCache(),r._transformDone=!0,r.renderCache({forClipping:!0}),this.drawClipPathOnCanvas(t,r)),this._renderOverlay(t),this.controlsAboveOverlay&&!this.skipControlsDrawing&&this.drawControls(t),this.fire("after:render",{ctx:t}),this.__cleanupTask&&(this.__cleanupTask(),this.__cleanupTask=void 0)}drawClipPathOnCanvas(t,e){const i=this.viewportTransform;t.save(),t.transform(...i),t.globalCompositeOperation="destination-in",e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}_renderObjects(t,e){for(let i=0,r=e.length;i<r;++i)e[i]&&e[i].render(t)}_renderBackgroundOrOverlay(t,e){const i=this["".concat(e,"Color")],r=this["".concat(e,"Image")],s=this.viewportTransform,o=this["".concat(e,"Vpt")];if(!i&&!r)return;const l=pn(i);if(i){if(t.save(),t.beginPath(),t.moveTo(0,0),t.lineTo(this.width,0),t.lineTo(this.width,this.height),t.lineTo(0,this.height),t.closePath(),t.fillStyle=l?i.toLive(t):i,o&&t.transform(...s),l){t.transform(1,0,0,1,i.offsetX||0,i.offsetY||0);const h=i.gradientTransform||i.patternTransform;h&&t.transform(...h)}t.fill(),t.restore()}if(r){t.save();const{skipOffscreen:h}=this;this.skipOffscreen=o,o&&t.transform(...s),r.render(t),this.skipOffscreen=h,t.restore()}}_renderBackground(t){this._renderBackgroundOrOverlay(t,"background")}_renderOverlay(t){this._renderBackgroundOrOverlay(t,"overlay")}getCenter(){return{top:this.height/2,left:this.width/2}}getCenterPoint(){return new I(this.width/2,this.height/2)}centerObjectH(t){return this._centerObject(t,new I(this.getCenterPoint().x,t.getCenterPoint().y))}centerObjectV(t){return this._centerObject(t,new I(t.getCenterPoint().x,this.getCenterPoint().y))}centerObject(t){return this._centerObject(t,this.getCenterPoint())}viewportCenterObject(t){return this._centerObject(t,this.getVpCenter())}viewportCenterObjectH(t){return this._centerObject(t,new I(this.getVpCenter().x,t.getCenterPoint().y))}viewportCenterObjectV(t){return this._centerObject(t,new I(t.getCenterPoint().x,this.getVpCenter().y))}getVpCenter(){return mi(this.getCenterPoint(),Xi(this.viewportTransform))}_centerObject(t,e){t.setXY(e,Lt,Lt),t.setCoords(),this.renderOnAddRemove&&this.requestRenderAll()}toDatalessJSON(t){return this.toDatalessObject(t)}toObject(t){return this._toObjectMethod("toObject",t)}toJSON(){return this.toObject()}toDatalessObject(t){return this._toObjectMethod("toDatalessObject",t)}_toObjectMethod(t,e){const i=this.clipPath,r=i&&!i.excludeFromExport?this._toObject(i,t,e):null;return L(L(L({version:Qc},Hs(this,e)),{},{objects:this._objects.filter(s=>!s.excludeFromExport).map(s=>this._toObject(s,t,e))},this.__serializeBgOverlay(t,e)),r?{clipPath:r}:null)}_toObject(t,e,i){let r;this.includeDefaultValues||(r=t.includeDefaultValues,t.includeDefaultValues=!1);const s=t[e](i);return this.includeDefaultValues||(t.includeDefaultValues=!!r),s}__serializeBgOverlay(t,e){const i={},r=this.backgroundImage,s=this.overlayImage,o=this.backgroundColor,l=this.overlayColor;return pn(o)?o.excludeFromExport||(i.background=o.toObject(e)):o&&(i.background=o),pn(l)?l.excludeFromExport||(i.overlay=l.toObject(e)):l&&(i.overlay=l),r&&!r.excludeFromExport&&(i.backgroundImage=this._toObject(r,t,e)),s&&!s.excludeFromExport&&(i.overlayImage=this._toObject(s,t,e)),i}toSVG(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;t.reviver=e;const i=[];return this._setSVGPreamble(i,t),this._setSVGHeader(i,t),this.clipPath&&i.push('<g clip-path="url(#'.concat(this.clipPath.clipPathId,`)" >
`)),this._setSVGBgOverlayColor(i,"background"),this._setSVGBgOverlayImage(i,"backgroundImage",e),this._setSVGObjects(i,e),this.clipPath&&i.push(`</g>
`),this._setSVGBgOverlayColor(i,"overlay"),this._setSVGBgOverlayImage(i,"overlayImage",e),i.push("</svg>"),i.join("")}_setSVGPreamble(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",`" standalone="no" ?>
`,'<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ',`"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
`)}_setSVGHeader(t,e){const i=e.width||"".concat(this.width),r=e.height||"".concat(this.height),s=Kt.NUM_FRACTION_DIGITS,o=e.viewBox;let l;if(o)l='viewBox="'.concat(o.x," ").concat(o.y," ").concat(o.width," ").concat(o.height,'" ');else if(this.svgViewportTransformation){const h=this.viewportTransform;l='viewBox="'.concat(Ee(-h[4]/h[0],s)," ").concat(Ee(-h[5]/h[3],s)," ").concat(Ee(this.width/h[0],s)," ").concat(Ee(this.height/h[3],s),'" ')}else l='viewBox="0 0 '.concat(this.width," ").concat(this.height,'" ');t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',i,'" ','height="',r,'" ',l,`xml:space="preserve">
`,"<desc>Created with Fabric.js ",Qc,`</desc>
`,`<defs>
`,this.createSVGFontFacesMarkup(),this.createSVGRefElementsMarkup(),this.createSVGClipPathMarkup(e),`</defs>
`)}createSVGClipPathMarkup(t){const e=this.clipPath;return e?(e.clipPathId="CLIPPATH_".concat(ts()),'<clipPath id="'.concat(e.clipPathId,`" >
`).concat(e.toClipPathSVG(t.reviver),`</clipPath>
`)):""}createSVGRefElementsMarkup(){return["background","overlay"].map(t=>{const e=this["".concat(t,"Color")];if(pn(e)){const i=this["".concat(t,"Vpt")],r=this.viewportTransform,s={isType:()=>!1,width:this.width/(i?r[0]:1),height:this.height/(i?r[3]:1)};return e.toSVG(s,{additionalTransform:i?ol(r):""})}}).join("")}createSVGFontFacesMarkup(){const t=[],e={},i=Kt.fontPaths;this._objects.forEach(function s(o){t.push(o),Bc(o)&&o._objects.forEach(s)}),t.forEach(s=>{if(!e_(s))return;const{styles:o,fontFamily:l}=s;!e[l]&&i[l]&&(e[l]=!0,o&&Object.values(o).forEach(h=>{Object.values(h).forEach(u=>{let{fontFamily:d=""}=u;!e[d]&&i[d]&&(e[d]=!0)})}))});const r=Object.keys(e).map(s=>`		@font-face {
			font-family: '`.concat(s,`';
			src: url('`).concat(i[s],`');
		}
`)).join("");return r?`	<style type="text/css"><![CDATA[
`.concat(r,`]]></style>
`):""}_setSVGObjects(t,e){this.forEachObject(i=>{i.excludeFromExport||this._setSVGObject(t,i,e)})}_setSVGObject(t,e,i){t.push(e.toSVG(i))}_setSVGBgOverlayImage(t,e,i){const r=this[e];r&&!r.excludeFromExport&&r.toSVG&&t.push(r.toSVG(i))}_setSVGBgOverlayColor(t,e){const i=this["".concat(e,"Color")];if(i)if(pn(i)){const r=i.repeat||"",s=this.width,o=this.height,l=this["".concat(e,"Vpt")]?ol(Xi(this.viewportTransform)):"";t.push('<rect transform="'.concat(l," translate(").concat(s/2,",").concat(o/2,')" x="').concat(i.offsetX-s/2,'" y="').concat(i.offsetY-o/2,'" width="').concat(r!=="repeat-y"&&r!=="no-repeat"||!nv(i)?s:i.source.width,'" height="').concat(r!=="repeat-x"&&r!=="no-repeat"||!nv(i)?o:i.source.height,'" fill="url(#SVGID_').concat(i.id,`)"></rect>
`))}else t.push('<rect x="0" y="0" width="100%" height="100%" ','fill="',i,'"',`></rect>
`)}loadFromJSON(t,e){let{signal:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!t)return Promise.reject(new Gn("`json` is undefined"));const r=typeof t=="string"?JSON.parse(t):t,{objects:s=[],backgroundImage:o,background:l,overlayImage:h,overlay:u,clipPath:d}=r,g=this.renderOnAddRemove;return this.renderOnAddRemove=!1,Promise.all([Do(s,{reviver:e,signal:i}),wl({backgroundImage:o,backgroundColor:l,overlayImage:h,overlayColor:u,clipPath:d},{signal:i})]).then(p=>{let[m,y]=p;return this.clear(),this.add(...m),this.set(r),this.set(y),this.renderOnAddRemove=g,this})}clone(t){const e=this.toObject(t);return this.cloneWithoutData().loadFromJSON(e)}cloneWithoutData(){const t=Me();return t.width=this.width,t.height=this.height,new this.constructor(t)}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const{format:e="png",quality:i=1,multiplier:r=1,enableRetinaScaling:s=!1}=t,o=r*(s?this.getRetinaScaling():1);return sg(this.toCanvasElement(o,t),e,i)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,{width:e,height:i,left:r,top:s,filter:o}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const l=(e||this.width)*t,h=(i||this.height)*t,u=this.getZoom(),d=this.width,g=this.height,p=this.skipControlsDrawing,m=u*t,y=this.viewportTransform,_=[m,0,0,m,(y[4]-(r||0))*t,(y[5]-(s||0))*t],C=this.enableRetinaScaling,b=Me(),x=o?this._objects.filter(T=>o(T)):this._objects;return b.width=l,b.height=h,this.enableRetinaScaling=!1,this.viewportTransform=_,this.width=l,this.height=h,this.skipControlsDrawing=!0,this.calcViewportBoundaries(),this.renderCanvas(b.getContext("2d"),x),this.viewportTransform=y,this.width=d,this.height=g,this.calcViewportBoundaries(),this.enableRetinaScaling=C,this.skipControlsDrawing=p,b}dispose(){return!this.disposed&&this.elements.cleanupDOM({width:this.width,height:this.height}),sl.cancelByCanvas(this),this.disposed=!0,new Promise((t,e)=>{const i=()=>{this.destroy(),t(!0)};i.kill=e,this.__cleanupTask&&this.__cleanupTask.kill("aborted"),this.destroyed?t(!1):this.nextRenderHandle?this.__cleanupTask=i:i()})}destroy(){this.destroyed=!0,this.cancelRequestedRender(),this.forEachObject(t=>t.dispose()),this._objects=[],this.backgroundImage&&this.backgroundImage.dispose(),this.backgroundImage=void 0,this.overlayImage&&this.overlayImage.dispose(),this.overlayImage=void 0,this.elements.dispose()}toString(){return"#<Canvas (".concat(this.complexity(),"): { objects: ").concat(this._objects.length," }>")}}D(vn,"ownDefaults",GM);const qM=["touchstart","touchmove","touchend"],s_=n=>{const t=i_(n.target),e=function(i){const r=i.changedTouches;return r&&r[0]?r[0]:i}(n);return new I(e.clientX+t.left,e.clientY+t.top)},ih=n=>qM.includes(n.type)||n.pointerType==="touch",lf=n=>{n.preventDefault(),n.stopPropagation()},tr=n=>{let t=0,e=0,i=0,r=0;for(let s=0,o=n.length;s<o;s++){const{x:l,y:h}=n[s];(l>i||!s)&&(i=l),(l<t||!s)&&(t=l),(h>r||!s)&&(r=h),(h<e||!s)&&(e=h)}return{left:t,top:e,width:i-t,height:r-e}},ZM=["translateX","translateY","scaleX","scaleY"],o_=(n,t)=>Io(n,je(t,n.calcOwnMatrix())),Io=(n,t)=>{const e=Fs(t),{translateX:i,translateY:r,scaleX:s,scaleY:o}=e,l=Ae(e,ZM),h=new I(i,r);n.flipX=!1,n.flipY=!1,Object.assign(n,l),n.set({scaleX:s,scaleY:o}),n.setPositionByOrigin(h,Lt,Lt)},a_=n=>{n.scaleX=1,n.scaleY=1,n.skewX=0,n.skewY=0,n.flipX=!1,n.flipY=!1,n.rotate(0)},ug=n=>({scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top}),Bh=(n,t,e)=>{const i=n/2,r=t/2,s=[new I(-i,-r),new I(i,-r),new I(-i,r),new I(i,r)].map(l=>l.transform(e)),o=tr(s);return new I(o.width,o.height)},xl=function(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fi;return je(Xi(arguments.length>1&&arguments[1]!==void 0?arguments[1]:fi),n)},br=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fi,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fi;return n.transform(xl(t,e))},l_=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:fi,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:fi;return n.transform(xl(t,e),!0)},cf=(n,t,e)=>{const i=xl(t,e);return Io(n,je(i,n.calcOwnMatrix())),i},dg=(n,t)=>{var e;const{transform:{target:i}}=t;(e=i.canvas)===null||e===void 0||e.fire("object:".concat(n),L(L({},t),{},{target:i})),i.fire(n,t)},$M={left:-.5,top:-.5,center:0,bottom:.5,right:.5},Ge=n=>typeof n=="string"?$M[n]:n-.5,fg="not-allowed";function c_(n){return Ge(n.originX)===Ge(Lt)&&Ge(n.originY)===Ge(Lt)}function sv(n){return .5-Ge(n)}const Mn=(n,t)=>n[t],gg=(n,t,e,i)=>({e:n,transform:t,pointer:new I(e,i)});function h_(n,t){const e=n.getTotalAngle()+es(Math.atan2(t.y,t.x))+360;return Math.round(e%360/45)}function Fh(n,t,e,i,r){var s;let{target:o,corner:l}=n;const h=o.controls[l],u=((s=o.canvas)===null||s===void 0?void 0:s.getZoom())||1,d=o.padding/u,g=function(p,m,y,_){const C=p.getRelativeCenterPoint(),b=y!==void 0&&_!==void 0?p.translateToGivenOrigin(C,Lt,Lt,y,_):new I(p.left,p.top);return(p.angle?m.rotate(-Be(p.angle),C):m).subtract(b)}(o,new I(i,r),t,e);return g.x>=d&&(g.x-=d),g.x<=-d&&(g.x+=d),g.y>=d&&(g.y-=d),g.y<=d&&(g.y+=d),g.x-=h.offsetX,g.y-=h.offsetY,g}const u_=(n,t,e,i)=>{const{target:r,offsetX:s,offsetY:o}=t,l=e-s,h=i-o,u=!Mn(r,"lockMovementX")&&r.left!==l,d=!Mn(r,"lockMovementY")&&r.top!==h;return u&&r.set(he,l),d&&r.set(Hi,h),(u||d)&&dg(Yy,gg(n,t,e,i)),u||d};class d_{getSvgStyles(t){const e=this.fillRule?this.fillRule:"nonzero",i=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):ki,s=this.strokeDashOffset?this.strokeDashOffset:"0",o=this.strokeLineCap?this.strokeLineCap:"butt",l=this.strokeLineJoin?this.strokeLineJoin:"miter",h=this.strokeMiterLimit?this.strokeMiterLimit:"4",u=this.opacity!==void 0?this.opacity:"1",d=this.visible?"":" visibility: hidden;",g=t?"":this.getSvgFilter(),p=al(He,this.fill);return[al(ji,this.stroke),"stroke-width: ",i,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",o,"; ","stroke-dashoffset: ",s,"; ","stroke-linejoin: ",l,"; ","stroke-miterlimit: ",h,"; ",p,"fill-rule: ",e,"; ","opacity: ",u,";",g,d].join("")}getSvgFilter(){return this.shadow?"filter: url(#SVGID_".concat(this.shadow.id,");"):""}getSvgCommons(){return[this.id?'id="'.concat(this.id,'" '):"",this.clipPath?'clip-path="url(#'.concat(this.clipPath.clipPathId,')" '):""].join("")}getSvgTransform(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const i=t?this.calcTransformMatrix():this.calcOwnMatrix(),r='transform="'.concat(ol(i));return"".concat(r).concat(e,'" ')}_toSVG(t){return[""]}toSVG(t){return this._createBaseSVGMarkup(this._toSVG(t),{reviver:t})}toClipPathSVG(t){return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(t),{reviver:t})}_createBaseClipPathSVGMarkup(t){let{reviver:e,additionalTransform:i=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=[this.getSvgTransform(!0,i),this.getSvgCommons()].join(""),s=t.indexOf("COMMON_PARTS");return t[s]=r,e?e(t.join("")):t.join("")}_createBaseSVGMarkup(t){let{noStyle:e,reviver:i,withShadow:r,additionalTransform:s}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const o=e?"":'style="'.concat(this.getSvgStyles(),'" '),l=r?'style="'.concat(this.getSvgFilter(),'" '):"",h=this.clipPath,u=this.strokeUniform?'vector-effect="non-scaling-stroke" ':"",d=h&&h.absolutePositioned,g=this.stroke,p=this.fill,m=this.shadow,y=[],_=t.indexOf("COMMON_PARTS");let C;h&&(h.clipPathId="CLIPPATH_".concat(ts()),C='<clipPath id="'.concat(h.clipPathId,`" >
`).concat(h.toClipPathSVG(i),`</clipPath>
`)),d&&y.push("<g ",l,this.getSvgCommons(),` >
`),y.push("<g ",this.getSvgTransform(!1),d?"":l+this.getSvgCommons(),` >
`);const b=[o,u,e?"":this.addPaintOrder()," ",s?'transform="'.concat(s,'" '):""].join("");return t[_]=b,pn(p)&&y.push(p.toSVG(this)),pn(g)&&y.push(g.toSVG(this)),m&&y.push(m.toSVG(this)),h&&y.push(C),y.push(t.join("")),y.push(`</g>
`),d&&y.push(`</g>
`),i?i(y.join("")):y.join("")}addPaintOrder(){return this.paintFirst!==He?' paint-order="'.concat(this.paintFirst,'" '):""}}function zh(n){return new RegExp("^("+n.join("|")+")\\b","i")}var ov;const Pn=String.raw(ov||(ov=os(["(?:[-+]?(?:d*.d+|d+.?)(?:[eE][-+]?d+)?)"],["(?:[-+]?(?:\\d*\\.\\d+|\\d+\\.?)(?:[eE][-+]?\\d+)?)"]))),hf="http://www.w3.org/2000/svg",KM=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+Pn+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+Pn+"))?\\s+(.*)"),JM={cx:he,x:he,r:"radius",cy:Hi,y:Hi,display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","letter-spacing":"charSpacing","paint-order":"paintFirst","stroke-dasharray":"strokeDashArray","stroke-dashoffset":"strokeDashOffset","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"textAnchor",opacity:"opacity","clip-path":"clipPath","clip-rule":"clipRule","vector-effect":"strokeUniform","image-rendering":"imageSmoothing"},Td="font-size",Pd="clip-path",QM=zh(["path","circle","polygon","polyline","ellipse","rect","line","image","text"]),t3=zh(["symbol","image","marker","pattern","view","svg"]),av=zh(["symbol","g","a","svg","clipPath","defs"]),lv=new RegExp("^\\s*("+Pn+"+)\\s*,?\\s*("+Pn+"+)\\s*,?\\s*("+Pn+"+)\\s*,?\\s*("+Pn+"+)\\s*$"),e3=new I(1,0),f_=new I,pg=(n,t)=>n.rotate(t),nh=(n,t)=>new I(t).subtract(n),rh=n=>n.distanceFrom(f_),sh=(n,t)=>Math.atan2(Ao(n,t),p_(n,t)),g_=n=>sh(e3,n),Vh=n=>n.eq(f_)?n:n.scalarDivide(rh(n)),mg=function(n){let t=!(arguments.length>1&&arguments[1]!==void 0)||arguments[1];return Vh(new I(-n.y,n.x).scalarMultiply(t?1:-1))},Ao=(n,t)=>n.x*t.y-n.y*t.x,p_=(n,t)=>n.x*t.x+n.y*t.y,uf=(n,t,e)=>{if(n.eq(t)||n.eq(e))return!0;const i=Ao(t,e),r=Ao(t,n),s=Ao(e,n);return i>=0?r>=0&&s<=0:!(r<=0&&s>=0)},cv="(-?\\d+(?:\\.\\d*)?(?:px)?(?:\\s?|$))?",hv=new RegExp("(?:\\s|^)"+cv+cv+"("+Pn+"?(?:px)?)?(?:\\s?|$)(?:$|\\s)");class Qi{constructor(t){const e=typeof t=="string"?Qi.parseShadow(t):t;Object.assign(this,Qi.ownDefaults,e),this.id=ts()}static parseShadow(t){const e=t.trim(),[,i=0,r=0,s=0]=(hv.exec(e)||[]).map(o=>parseFloat(o)||0);return{color:(e.replace(hv,"")||"rgb(0,0,0)").trim(),offsetX:i,offsetY:r,blur:s}}toString(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")}toSVG(t){const e=pg(new I(this.offsetX,this.offsetY),Be(-t.angle)),i=new se(this.color);let r=40,s=40;return t.width&&t.height&&(r=100*Ee((Math.abs(e.x)+this.blur)/t.width,Kt.NUM_FRACTION_DIGITS)+20,s=100*Ee((Math.abs(e.y)+this.blur)/t.height,Kt.NUM_FRACTION_DIGITS)+20),t.flipX&&(e.x*=-1),t.flipY&&(e.y*=-1),'<filter id="SVGID_'.concat(this.id,'" y="-').concat(s,'%" height="').concat(100+2*s,'%" x="-').concat(r,'%" width="').concat(100+2*r,`%" >
	<feGaussianBlur in="SourceAlpha" stdDeviation="`).concat(Ee(this.blur?this.blur/2:0,Kt.NUM_FRACTION_DIGITS),`"></feGaussianBlur>
	<feOffset dx="`).concat(Ee(e.x,Kt.NUM_FRACTION_DIGITS),'" dy="').concat(Ee(e.y,Kt.NUM_FRACTION_DIGITS),`" result="oBlur" ></feOffset>
	<feFlood flood-color="`).concat(i.toRgb(),'" flood-opacity="').concat(i.getAlpha(),`"/>
	<feComposite in2="oBlur" operator="in" />
	<feMerge>
		<feMergeNode></feMergeNode>
		<feMergeNode in="SourceGraphic"></feMergeNode>
	</feMerge>
</filter>
`)}toObject(){const t={color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY,affectStroke:this.affectStroke,nonScaling:this.nonScaling,type:this.constructor.type},e=Qi.ownDefaults;return this.includeDefaultValues?t:lg(t,(i,r)=>i!==e[r])}static async fromObject(t){return new this(t)}}D(Qi,"ownDefaults",{color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,nonScaling:!1}),D(Qi,"type","shadow"),ht.setClass(Qi,"shadow");const zs=(n,t,e)=>Math.max(n,Math.min(t,e)),i3=[Hi,he,Ii,tn,"flipX","flipY","originX","originY","angle","opacity","globalCompositeOperation","shadow","visible",Xo,Ho],Or=[He,ji,"strokeWidth","strokeDashArray","width","height","paintFirst","strokeUniform","strokeLineCap","strokeDashOffset","strokeLineJoin","strokeMiterLimit","backgroundColor","clipPath"],n3={top:0,left:0,width:0,height:0,angle:0,flipX:!1,flipY:!1,scaleX:1,scaleY:1,minScaleLimit:0,skewX:0,skewY:0,originX:he,originY:Hi,strokeWidth:1,strokeUniform:!1,padding:0,opacity:1,paintFirst:He,fill:"rgb(0,0,0)",fillRule:"nonzero",stroke:null,strokeDashArray:null,strokeDashOffset:0,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:4,globalCompositeOperation:"source-over",backgroundColor:"",shadow:null,visible:!0,includeDefaultValues:!0,excludeFromExport:!1,objectCaching:!0,clipPath:void 0,inverted:!1,absolutePositioned:!1,centeredRotation:!0,centeredScaling:!1,dirty:!0},Od=(n,t,e,i)=>(n<Math.abs(t)?(n=t,i=e/4):i=t===0&&n===0?e/Tr*Math.asin(1):e/Tr*Math.asin(t/n),{a:n,c:t,p:e,s:i}),uv=(n,t,e,i,r)=>n*Math.pow(2,10*(i-=1))*Math.sin((i*r-t)*Tr/e),m_=(n,t,e,i)=>-e*Math.cos(n/i*Qr)+e+t,df=(n,t,e,i)=>(n/=i)<1/2.75?e*(7.5625*n*n)+t:n<2/2.75?e*(7.5625*(n-=1.5/2.75)*n+.75)+t:n<2.5/2.75?e*(7.5625*(n-=2.25/2.75)*n+.9375)+t:e*(7.5625*(n-=2.625/2.75)*n+.984375)+t,dv=(n,t,e,i)=>e-df(i-n,0,e,i)+t;var r3=Object.freeze({__proto__:null,defaultEasing:m_,easeInBack:function(n,t,e,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return e*(n/=i)*n*((r+1)*n-r)+t},easeInBounce:dv,easeInCirc:(n,t,e,i)=>-e*(Math.sqrt(1-(n/=i)*n)-1)+t,easeInCubic:(n,t,e,i)=>e*(n/i)**3+t,easeInElastic:(n,t,e,i)=>{const r=e;let s=0;if(n===0)return t;if((n/=i)===1)return t+e;s||(s=.3*i);const{a:o,s:l,p:h}=Od(r,e,s,1.70158);return-uv(o,l,h,n,i)+t},easeInExpo:(n,t,e,i)=>n===0?t:e*2**(10*(n/i-1))+t,easeInOutBack:function(n,t,e,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return(n/=i/2)<1?e/2*(n*n*((1+(r*=1.525))*n-r))+t:e/2*((n-=2)*n*((1+(r*=1.525))*n+r)+2)+t},easeInOutBounce:(n,t,e,i)=>n<i/2?.5*dv(2*n,0,e,i)+t:.5*df(2*n-i,0,e,i)+.5*e+t,easeInOutCirc:(n,t,e,i)=>(n/=i/2)<1?-e/2*(Math.sqrt(1-n**2)-1)+t:e/2*(Math.sqrt(1-(n-=2)*n)+1)+t,easeInOutCubic:(n,t,e,i)=>(n/=i/2)<1?e/2*n**3+t:e/2*((n-2)**3+2)+t,easeInOutElastic:(n,t,e,i)=>{const r=e;let s=0;if(n===0)return t;if((n/=i/2)===2)return t+e;s||(s=i*(.3*1.5));const{a:o,s:l,p:h,c:u}=Od(r,e,s,1.70158);return n<1?-.5*uv(o,l,h,n,i)+t:o*Math.pow(2,-10*(n-=1))*Math.sin((n*i-l)*Tr/h)*.5+u+t},easeInOutExpo:(n,t,e,i)=>n===0?t:n===i?t+e:(n/=i/2)<1?e/2*2**(10*(n-1))+t:e/2*-(2**(-10*--n)+2)+t,easeInOutQuad:(n,t,e,i)=>(n/=i/2)<1?e/2*n**2+t:-e/2*(--n*(n-2)-1)+t,easeInOutQuart:(n,t,e,i)=>(n/=i/2)<1?e/2*n**4+t:-e/2*((n-=2)*n**3-2)+t,easeInOutQuint:(n,t,e,i)=>(n/=i/2)<1?e/2*n**5+t:e/2*((n-2)**5+2)+t,easeInOutSine:(n,t,e,i)=>-e/2*(Math.cos(Math.PI*n/i)-1)+t,easeInQuad:(n,t,e,i)=>e*(n/=i)*n+t,easeInQuart:(n,t,e,i)=>e*(n/=i)*n**3+t,easeInQuint:(n,t,e,i)=>e*(n/i)**5+t,easeInSine:(n,t,e,i)=>-e*Math.cos(n/i*Qr)+e+t,easeOutBack:function(n,t,e,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:1.70158;return e*((n=n/i-1)*n*((r+1)*n+r)+1)+t},easeOutBounce:df,easeOutCirc:(n,t,e,i)=>e*Math.sqrt(1-(n=n/i-1)*n)+t,easeOutCubic:(n,t,e,i)=>e*((n/i-1)**3+1)+t,easeOutElastic:(n,t,e,i)=>{const r=e;let s=0;if(n===0)return t;if((n/=i)===1)return t+e;s||(s=.3*i);const{a:o,s:l,p:h,c:u}=Od(r,e,s,1.70158);return o*2**(-10*n)*Math.sin((n*i-l)*Tr/h)+u+t},easeOutExpo:(n,t,e,i)=>n===i?t+e:e*-(2**(-10*n/i)+1)+t,easeOutQuad:(n,t,e,i)=>-e*(n/=i)*(n-2)+t,easeOutQuart:(n,t,e,i)=>-e*((n=n/i-1)*n**3-1)+t,easeOutQuint:(n,t,e,i)=>e*((n/i-1)**5+1)+t,easeOutSine:(n,t,e,i)=>e*Math.sin(n/i*Qr)+t});const s3=()=>!1;class vg{constructor(t){let{startValue:e,byValue:i,duration:r=500,delay:s=0,easing:o=m_,onStart:l=Is,onChange:h=Is,onComplete:u=Is,abort:d=s3,target:g}=t;D(this,"_state","pending"),D(this,"durationProgress",0),D(this,"valueProgress",0),this.tick=this.tick.bind(this),this.duration=r,this.delay=s,this.easing=o,this._onStart=l,this._onChange=h,this._onComplete=u,this._abort=d,this.target=g,this.startValue=e,this.byValue=i,this.value=this.startValue,this.endValue=Object.freeze(this.calculate(this.duration).value)}get state(){return this._state}isDone(){return this._state==="aborted"||this._state==="completed"}start(){const t=e=>{this._state==="pending"&&(this.startTime=e||+new Date,this._state="running",this._onStart(),this.tick(this.startTime))};this.register(),this.delay>0?setTimeout(()=>Ya(t),this.delay):Ya(t)}tick(t){const e=(t||+new Date)-this.startTime,i=Math.min(e,this.duration);this.durationProgress=i/this.duration;const{value:r,valueProgress:s}=this.calculate(i);this.value=Object.freeze(r),this.valueProgress=s,this._state!=="aborted"&&(this._abort(this.value,this.valueProgress,this.durationProgress)?(this._state="aborted",this.unregister()):e>=this.duration?(this.durationProgress=this.valueProgress=1,this._onChange(this.endValue,this.valueProgress,this.durationProgress),this._state="completed",this._onComplete(this.endValue,this.valueProgress,this.durationProgress),this.unregister()):(this._onChange(this.value,this.valueProgress,this.durationProgress),Ya(this.tick)))}register(){sl.push(this)}unregister(){sl.remove(this)}abort(){this._state="aborted",this.unregister()}}const o3=["startValue","endValue"];class a3 extends vg{constructor(t){let{startValue:e=0,endValue:i=100}=t;super(L(L({},Ae(t,o3)),{},{startValue:e,byValue:i-e}))}calculate(t){const e=this.easing(t,this.startValue,this.byValue,this.duration);return{value:e,valueProgress:Math.abs((e-this.startValue)/this.byValue)}}}const l3=["startValue","endValue"];class c3 extends vg{constructor(t){let{startValue:e=[0],endValue:i=[100]}=t;super(L(L({},Ae(t,l3)),{},{startValue:e,byValue:i.map((r,s)=>r-e[s])}))}calculate(t){const e=this.startValue.map((i,r)=>this.easing(t,i,this.byValue[r],this.duration,r));return{value:e,valueProgress:Math.abs((e[0]-this.startValue[0])/this.byValue[0])}}}const h3=["startValue","endValue","easing","onChange","onComplete","abort"],u3=(n,t,e,i)=>t+e*(1-Math.cos(n/i*Qr)),Ed=n=>n&&((t,e,i)=>n(new se(t).toRgba(),e,i));class d3 extends vg{constructor(t){let{startValue:e,endValue:i,easing:r=u3,onChange:s,onComplete:o,abort:l}=t,h=Ae(t,h3);const u=new se(e).getSource(),d=new se(i).getSource();super(L(L({},h),{},{startValue:u,byValue:d.map((g,p)=>g-u[p]),easing:r,onChange:Ed(s),onComplete:Ed(o),abort:Ed(l)}))}calculate(t){const[e,i,r,s]=this.startValue.map((l,h)=>this.easing(t,l,this.byValue[h],this.duration,h)),o=[...[e,i,r].map(Math.round),zs(0,s,1)];return{value:o,valueProgress:o.map((l,h)=>this.byValue[h]!==0?Math.abs((l-this.startValue[h])/this.byValue[h]):0).find(l=>l!==0)||0}}}function yg(n){const t=(e=>Array.isArray(e.startValue)||Array.isArray(e.endValue))(n)?new c3(n):new a3(n);return t.start(),t}function v_(n){const t=new d3(n);return t.start(),t}class Ce{constructor(t){this.status=t,this.points=[]}includes(t){return this.points.some(e=>e.eq(t))}append(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return this.points=this.points.concat(e.filter(r=>!this.includes(r))),this}static isPointContained(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0&&arguments[3];if(e.eq(i))return t.eq(e);if(e.x===i.x)return t.x===e.x&&(r||t.y>=Math.min(e.y,i.y)&&t.y<=Math.max(e.y,i.y));if(e.y===i.y)return t.y===e.y&&(r||t.x>=Math.min(e.x,i.x)&&t.x<=Math.max(e.x,i.x));{const s=nh(e,i),o=nh(e,t).divide(s);return r?Math.abs(o.x)===Math.abs(o.y):o.x===o.y&&o.x>=0&&o.x<=1}}static isPointInPolygon(t,e){const i=new I(t).setX(Math.min(t.x-1,...e.map(s=>s.x)));let r=0;for(let s=0;s<e.length;s++){const o=this.intersectSegmentSegment(e[s],e[(s+1)%e.length],t,i);if(o.includes(t))return!0;r+=+(o.status==="Intersection")}return r%2==1}static intersectLineLine(t,e,i,r){let s=!(arguments.length>4&&arguments[4]!==void 0)||arguments[4],o=!(arguments.length>5&&arguments[5]!==void 0)||arguments[5];const l=e.x-t.x,h=e.y-t.y,u=r.x-i.x,d=r.y-i.y,g=t.x-i.x,p=t.y-i.y,m=u*p-d*g,y=l*p-h*g,_=d*l-u*h;if(_!==0){const C=m/_,b=y/_;return(s||0<=C&&C<=1)&&(o||0<=b&&b<=1)?new Ce("Intersection").append(new I(t.x+C*l,t.y+C*h)):new Ce}if(m===0||y===0){const C=s||o||Ce.isPointContained(t,i,r)||Ce.isPointContained(e,i,r)||Ce.isPointContained(i,t,e)||Ce.isPointContained(r,t,e);return new Ce(C?"Coincident":void 0)}return new Ce("Parallel")}static intersectSegmentLine(t,e,i,r){return Ce.intersectLineLine(t,e,i,r,!1,!0)}static intersectSegmentSegment(t,e,i,r){return Ce.intersectLineLine(t,e,i,r,!1,!1)}static intersectLinePolygon(t,e,i){let r=!(arguments.length>3&&arguments[3]!==void 0)||arguments[3];const s=new Ce,o=i.length;for(let l,h,u,d=0;d<o;d++){if(l=i[d],h=i[(d+1)%o],u=Ce.intersectLineLine(t,e,l,h,r,!1),u.status==="Coincident")return u;s.append(...u.points)}return s.points.length>0&&(s.status="Intersection"),s}static intersectSegmentPolygon(t,e,i){return Ce.intersectLinePolygon(t,e,i,!1)}static intersectPolygonPolygon(t,e){const i=new Ce,r=t.length,s=[];for(let o=0;o<r;o++){const l=t[o],h=t[(o+1)%r],u=Ce.intersectSegmentPolygon(l,h,e);u.status==="Coincident"?(s.push(u),i.append(l,h)):i.append(...u.points)}return s.length>0&&s.length===t.length?new Ce("Coincident"):(i.points.length>0&&(i.status="Intersection"),i)}static intersectPolygonRectangle(t,e,i){const r=e.min(i),s=e.max(i),o=new I(s.x,r.y),l=new I(r.x,s.y);return Ce.intersectPolygonPolygon(t,[r,o,s,l])}}class f3 extends qy{getX(){return this.getXY().x}setX(t){this.setXY(this.getXY().setX(t))}getY(){return this.getXY().y}setY(t){this.setXY(this.getXY().setY(t))}getRelativeX(){return this.left}setRelativeX(t){this.left=t}getRelativeY(){return this.top}setRelativeY(t){this.top=t}getXY(){const t=this.getRelativeXY();return this.group?mi(t,this.group.calcTransformMatrix()):t}setXY(t,e,i){this.group&&(t=mi(t,Xi(this.group.calcTransformMatrix()))),this.setRelativeXY(t,e,i)}getRelativeXY(){return new I(this.left,this.top)}setRelativeXY(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.originX,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.originY;this.setPositionByOrigin(t,e,i)}isStrokeAccountedForInDimensions(){return!1}getCoords(){const{tl:t,tr:e,br:i,bl:r}=this.aCoords||(this.aCoords=this.calcACoords()),s=[t,e,i,r];if(this.group){const o=this.group.calcTransformMatrix();return s.map(l=>mi(l,o))}return s}intersectsWithRect(t,e){return Ce.intersectPolygonRectangle(this.getCoords(),t,e).status==="Intersection"}intersectsWithObject(t){const e=Ce.intersectPolygonPolygon(this.getCoords(),t.getCoords());return e.status==="Intersection"||e.status==="Coincident"||t.isContainedWithinObject(this)||this.isContainedWithinObject(t)}isContainedWithinObject(t){return this.getCoords().every(e=>t.containsPoint(e))}isContainedWithinRect(t,e){const{left:i,top:r,width:s,height:o}=this.getBoundingRect();return i>=t.x&&i+s<=e.x&&r>=t.y&&r+o<=e.y}isOverlapping(t){return this.intersectsWithObject(t)||this.isContainedWithinObject(t)||t.isContainedWithinObject(this)}containsPoint(t){return Ce.isPointInPolygon(t,this.getCoords())}isOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return!!this.getCoords().some(i=>i.x<=e.x&&i.x>=t.x&&i.y<=e.y&&i.y>=t.y)||!!this.intersectsWithRect(t,e)||this.containsPoint(t.midPointFrom(e))}isPartiallyOnScreen(){if(!this.canvas)return!1;const{tl:t,br:e}=this.canvas.vptCoords;return this.intersectsWithRect(t,e)?!0:this.getCoords().every(i=>(i.x>=e.x||i.x<=t.x)&&(i.y>=e.y||i.y<=t.y))&&this.containsPoint(t.midPointFrom(e))}getBoundingRect(){return tr(this.getCoords())}getScaledWidth(){return this._getTransformedDimensions().x}getScaledHeight(){return this._getTransformedDimensions().y}scale(t){this._set(Ii,t),this._set(tn,t),this.setCoords()}scaleToWidth(t){const e=this.getBoundingRect().width/this.getScaledWidth();return this.scale(t/this.width/e)}scaleToHeight(t){const e=this.getBoundingRect().height/this.getScaledHeight();return this.scale(t/this.height/e)}getCanvasRetinaScaling(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.getRetinaScaling())||1}getTotalAngle(){return this.group?es(Jy(this.calcTransformMatrix())):this.angle}getViewportTransform(){var t;return((t=this.canvas)===null||t===void 0?void 0:t.viewportTransform)||fi.concat()}calcACoords(){const t=No({angle:this.angle}),{x:e,y:i}=this.getRelativeCenterPoint(),r=Yo(e,i),s=je(r,t),o=this._getTransformedDimensions(),l=o.x/2,h=o.y/2;return{tl:mi({x:-l,y:-h},s),tr:mi({x:l,y:-h},s),bl:mi({x:-l,y:h},s),br:mi({x:l,y:h},s)}}setCoords(){this.aCoords=this.calcACoords()}transformMatrixKey(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=[];return!t&&this.group&&(e=this.group.transformMatrixKey(t)),e.push(this.top,this.left,this.width,this.height,this.scaleX,this.scaleY,this.angle,this.strokeWidth,this.skewX,this.skewY,+this.flipX,+this.flipY,Ge(this.originX),Ge(this.originY)),e}calcTransformMatrix(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0],e=this.calcOwnMatrix();if(t||!this.group)return e;const i=this.transformMatrixKey(t),r=this.matrixCache;return r&&r.key.every((s,o)=>s===i[o])?r.value:(this.group&&(e=je(this.group.calcTransformMatrix(!1),e)),this.matrixCache={key:i,value:e},e)}calcOwnMatrix(){const t=this.transformMatrixKey(!0),e=this.ownMatrixCache;if(e&&e.key===t)return e.value;const i=this.getRelativeCenterPoint(),r={angle:this.angle,translateX:i.x,translateY:i.y,scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,flipX:this.flipX,flipY:this.flipY},s=t_(r);return this.ownMatrixCache={key:t,value:s},s}_getNonTransformedDimensions(){return new I(this.width,this.height).scalarAdd(this.strokeWidth)}_calculateCurrentDimensions(t){return this._getTransformedDimensions(t).transform(this.getViewportTransform(),!0).scalarAdd(2*this.padding)}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=L({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth},t),i=e.strokeWidth;let r=i,s=0;this.strokeUniform&&(r=0,s=i);const o=e.width+r,l=e.height+r;let h;return h=e.skewX===0&&e.skewY===0?new I(o*e.scaleX,l*e.scaleY):Bh(o,l,bl(e)),h.scalarAdd(s)}translateToGivenOrigin(t,e,i,r,s){let o=t.x,l=t.y;const h=Ge(r)-Ge(e),u=Ge(s)-Ge(i);if(h||u){const d=this._getTransformedDimensions();o+=h*d.x,l+=u*d.y}return new I(o,l)}translateToCenterPoint(t,e,i){if(e===Lt&&i===Lt)return t;const r=this.translateToGivenOrigin(t,e,i,Lt,Lt);return this.angle?r.rotate(Be(this.angle),t):r}translateToOriginPoint(t,e,i){const r=this.translateToGivenOrigin(t,Lt,Lt,e,i);return this.angle?r.rotate(Be(this.angle),t):r}getCenterPoint(){const t=this.getRelativeCenterPoint();return this.group?mi(t,this.group.calcTransformMatrix()):t}getRelativeCenterPoint(){return this.translateToCenterPoint(new I(this.left,this.top),this.originX,this.originY)}getPointByOrigin(t,e){return this.translateToOriginPoint(this.getRelativeCenterPoint(),t,e)}setPositionByOrigin(t,e,i){const r=this.translateToCenterPoint(t,e,i),s=this.translateToOriginPoint(r,this.originX,this.originY);this.set({left:s.x,top:s.y})}_getLeftTopCoords(){return this.translateToOriginPoint(this.getRelativeCenterPoint(),he,Hi)}}const g3=["type"],p3=["extraParam"];let Hn=class Fc extends f3{static getDefaults(){return Fc.ownDefaults}get type(){const t=this.constructor.type;return t==="FabricObject"?"object":t.toLowerCase()}set type(t){Sr("warn","Setting type has no effect",t)}constructor(t){super(),D(this,"_cacheContext",null),Object.assign(this,Fc.ownDefaults),this.setOptions(t)}_createCacheCanvas(){this._cacheCanvas=Me(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._updateCacheCanvas(),this.dirty=!0}_limitCacheSize(t){const e=t.width,i=t.height,r=Kt.maxCacheSideLimit,s=Kt.minCacheSideLimit;if(e<=r&&i<=r&&e*i<=Kt.perfLimitSizeTotal)return e<s&&(t.width=s),i<s&&(t.height=s),t;const o=e/i,[l,h]=Mo.limitDimsByArea(o),u=zs(s,l,r),d=zs(s,h,r);return e>u&&(t.zoomX/=e/u,t.width=u,t.capped=!0),i>d&&(t.zoomY/=i/d,t.height=d,t.capped=!0),t}_getCacheCanvasDimensions(){const t=this.getTotalObjectScaling(),e=this._getTransformedDimensions({skewX:0,skewY:0}),i=e.x*t.x/this.scaleX,r=e.y*t.y/this.scaleY;return{width:i+2,height:r+2,zoomX:t.x,zoomY:t.y,x:i,y:r}}_updateCacheCanvas(){const t=this._cacheCanvas,e=this._cacheContext,i=this._limitCacheSize(this._getCacheCanvasDimensions()),r=Kt.minCacheSideLimit,s=i.width,o=i.height,l=i.zoomX,h=i.zoomY,u=s!==t.width||o!==t.height,d=this.zoomX!==l||this.zoomY!==h;if(!t||!e)return!1;let g,p,m=u||d,y=0,_=0,C=!1;if(u){const b=this._cacheCanvas.width,x=this._cacheCanvas.height,T=s>b||o>x;C=T||(s<.9*b||o<.9*x)&&b>r&&x>r,T&&!i.capped&&(s>r||o>r)&&(y=.1*s,_=.1*o)}return e_(this)&&this.path&&(m=!0,C=!0,y+=this.getHeightOfLine(0)*this.zoomX,_+=this.getHeightOfLine(0)*this.zoomY),!!m&&(C?(t.width=Math.ceil(s+y),t.height=Math.ceil(o+_)):(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,t.width,t.height)),g=i.x/2,p=i.y/2,this.cacheTranslationX=Math.round(t.width/2-g)+g,this.cacheTranslationY=Math.round(t.height/2-p)+p,e.translate(this.cacheTranslationX,this.cacheTranslationY),e.scale(l,h),this.zoomX=l,this.zoomY=h,!0)}setOptions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this._setOptions(t)}transform(t){const e=this.group&&!this.group._transformDone||this.group&&this.canvas&&t===this.canvas.contextTop,i=this.calcTransformMatrix(!e);t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}getObjectScaling(){if(!this.group)return new I(Math.abs(this.scaleX),Math.abs(this.scaleY));const t=Fs(this.calcTransformMatrix());return new I(Math.abs(t.scaleX),Math.abs(t.scaleY))}getTotalObjectScaling(){const t=this.getObjectScaling();if(this.canvas){const e=this.canvas.getZoom(),i=this.getCanvasRetinaScaling();return t.scalarMultiply(e*i)}return t}getObjectOpacity(){let t=this.opacity;return this.group&&(t*=this.group.getObjectOpacity()),t}_constrainScale(t){return Math.abs(t)<this.minScaleLimit?t<0?-this.minScaleLimit:this.minScaleLimit:t===0?1e-4:t}_set(t,e){t!==Ii&&t!==tn||(e=this._constrainScale(e)),t===Ii&&e<0?(this.flipX=!this.flipX,e*=-1):t==="scaleY"&&e<0?(this.flipY=!this.flipY,e*=-1):t!=="shadow"||!e||e instanceof Qi||(e=new Qi(e));const i=this[t]!==e;return this[t]=e,i&&this.constructor.cacheProperties.includes(t)&&(this.dirty=!0),this.parent&&(this.dirty||i&&this.constructor.stateProperties.includes(t))&&this.parent._set("dirty",!0),this}isNotVisible(){return this.opacity===0||!this.width&&!this.height&&this.strokeWidth===0||!this.visible}render(t){this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(t.save(),this._setupCompositeOperation(t),this.drawSelectionBackground(t),this.transform(t),this._setOpacity(t),this._setShadow(t),this.shouldCache()?(this.renderCache(),this.drawCacheOnCanvas(t)):(this._removeCacheCanvas(),this.drawObject(t),this.dirty=!1),t.restore())}drawSelectionBackground(t){}renderCache(t){t=t||{},this._cacheCanvas&&this._cacheContext||this._createCacheCanvas(),this.isCacheDirty()&&this._cacheContext&&(this.drawObject(this._cacheContext,t.forClipping),this.dirty=!1)}_removeCacheCanvas(){this._cacheCanvas=void 0,this._cacheContext=null}hasStroke(){return this.stroke&&this.stroke!=="transparent"&&this.strokeWidth!==0}hasFill(){return this.fill&&this.fill!=="transparent"}needsItsOwnCache(){return!!(this.paintFirst===ji&&this.hasFill()&&this.hasStroke()&&this.shadow)||!!this.clipPath}shouldCache(){return this.ownCaching=this.needsItsOwnCache()||this.objectCaching&&(!this.parent||!this.parent.isOnACache()),this.ownCaching}willDrawShadow(){return!!this.shadow&&(this.shadow.offsetX!==0||this.shadow.offsetY!==0)}drawClipPathOnCache(t,e){if(t.save(),e.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",e.absolutePositioned){const i=Xi(this.calcTransformMatrix());t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}drawObject(t,e){const i=this.fill,r=this.stroke;e?(this.fill="black",this.stroke="",this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this._drawClipPath(t,this.clipPath),this.fill=i,this.stroke=r}_drawClipPath(t,e){e&&(e._set("canvas",this.canvas),e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),this.drawClipPathOnCache(t,e))}drawCacheOnCanvas(t){t.scale(1/this.zoomX,1/this.zoomY),t.drawImage(this._cacheCanvas,-this.cacheTranslationX,-this.cacheTranslationY)}isCacheDirty(){let t=arguments.length>0&&arguments[0]!==void 0&&arguments[0];if(this.isNotVisible())return!1;const e=this._cacheCanvas,i=this._cacheContext;return!(!e||!i||t||!this._updateCacheCanvas())||!!(this.dirty||this.clipPath&&this.clipPath.absolutePositioned)&&(e&&i&&!t&&(i.save(),i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,e.width,e.height),i.restore()),!0)}_renderBackground(t){if(!this.backgroundColor)return;const e=this._getNonTransformedDimensions();t.fillStyle=this.backgroundColor,t.fillRect(-e.x/2,-e.y/2,e.x,e.y),this._removeShadow(t)}_setOpacity(t){this.group&&!this.group._transformDone?t.globalAlpha=this.getObjectOpacity():t.globalAlpha*=this.opacity}_setStrokeStyles(t,e){const i=e.stroke;i&&(t.lineWidth=e.strokeWidth,t.lineCap=e.strokeLineCap,t.lineDashOffset=e.strokeDashOffset,t.lineJoin=e.strokeLineJoin,t.miterLimit=e.strokeMiterLimit,pn(i)?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?this._applyPatternForTransformedGradient(t,i):(t.strokeStyle=i.toLive(t),this._applyPatternGradientTransform(t,i)):t.strokeStyle=e.stroke)}_setFillStyles(t,e){let{fill:i}=e;i&&(pn(i)?(t.fillStyle=i.toLive(t),this._applyPatternGradientTransform(t,i)):t.fillStyle=i)}_setClippingProperties(t){t.globalAlpha=1,t.strokeStyle="transparent",t.fillStyle="#000000"}_setLineDash(t,e){e&&e.length!==0&&(1&e.length&&e.push(...e),t.setLineDash(e))}_setShadow(t){if(!this.shadow)return;const e=this.shadow,i=this.canvas,r=this.getCanvasRetinaScaling(),[s,,,o]=(i==null?void 0:i.viewportTransform)||fi,l=s*r,h=o*r,u=e.nonScaling?new I(1,1):this.getObjectScaling();t.shadowColor=e.color,t.shadowBlur=e.blur*Kt.browserShadowBlurConstant*(l+h)*(u.x+u.y)/4,t.shadowOffsetX=e.offsetX*l*u.x,t.shadowOffsetY=e.offsetY*h*u.y}_removeShadow(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)}_applyPatternGradientTransform(t,e){if(!pn(e))return{offsetX:0,offsetY:0};const i=e.gradientTransform||e.patternTransform,r=-this.width/2+e.offsetX||0,s=-this.height/2+e.offsetY||0;return e.gradientUnits==="percentage"?t.transform(this.width,0,0,this.height,r,s):t.transform(1,0,0,1,r,s),i&&t.transform(i[0],i[1],i[2],i[3],i[4],i[5]),{offsetX:r,offsetY:s}}_renderPaintInOrder(t){this.paintFirst===ji?(this._renderStroke(t),this._renderFill(t)):(this._renderFill(t),this._renderStroke(t))}_render(t){}_renderFill(t){this.fill&&(t.save(),this._setFillStyles(t,this),this.fillRule==="evenodd"?t.fill("evenodd"):t.fill(),t.restore())}_renderStroke(t){if(this.stroke&&this.strokeWidth!==0){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeUniform){const e=this.getObjectScaling();t.scale(1/e.x,1/e.y)}this._setLineDash(t,this.strokeDashArray),this._setStrokeStyles(t,this),t.stroke(),t.restore()}}_applyPatternForTransformedGradient(t,e){var i;const r=this._limitCacheSize(this._getCacheCanvasDimensions()),s=Me(),o=this.getCanvasRetinaScaling(),l=r.x/this.scaleX/o,h=r.y/this.scaleY/o;s.width=Math.ceil(l),s.height=Math.ceil(h);const u=s.getContext("2d");u&&(u.beginPath(),u.moveTo(0,0),u.lineTo(l,0),u.lineTo(l,h),u.lineTo(0,h),u.closePath(),u.translate(l/2,h/2),u.scale(r.zoomX/this.scaleX/o,r.zoomY/this.scaleY/o),this._applyPatternGradientTransform(u,e),u.fillStyle=e.toLive(t),u.fill(),t.translate(-this.width/2-this.strokeWidth/2,-this.height/2-this.strokeWidth/2),t.scale(o*this.scaleX/r.zoomX,o*this.scaleY/r.zoomY),t.strokeStyle=(i=u.createPattern(s,"no-repeat"))!==null&&i!==void 0?i:"")}_findCenterFromElement(){return new I(this.left+this.width/2,this.top+this.height/2)}clone(t){const e=this.toObject(t);return this.constructor.fromObject(e)}cloneAsImage(t){const e=this.toCanvasElement(t);return new(ht.getClass("image"))(e)}toCanvasElement(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const e=ug(this),i=this.group,r=this.shadow,s=Math.abs,o=t.enableRetinaScaling?Hy():1,l=(t.multiplier||1)*o,h=t.canvasProvider||(x=>new vn(x,{enableRetinaScaling:!1,renderOnAddRemove:!1,skipOffscreen:!1}));delete this.group,t.withoutTransform&&a_(this),t.withoutShadow&&(this.shadow=null),t.viewportTransform&&cf(this,this.getViewportTransform()),this.setCoords();const u=Me(),d=this.getBoundingRect(),g=this.shadow,p=new I;if(g){const x=g.blur,T=g.nonScaling?new I(1,1):this.getObjectScaling();p.x=2*Math.round(s(g.offsetX)+x)*s(T.x),p.y=2*Math.round(s(g.offsetY)+x)*s(T.y)}const m=d.width+p.x,y=d.height+p.y;u.width=Math.ceil(m),u.height=Math.ceil(y);const _=h(u);t.format==="jpeg"&&(_.backgroundColor="#fff"),this.setPositionByOrigin(new I(_.width/2,_.height/2),Lt,Lt);const C=this.canvas;_._objects=[this],this.set("canvas",_),this.setCoords();const b=_.toCanvasElement(l||1,t);return this.set("canvas",C),this.shadow=r,i&&(this.group=i),this.set(e),this.setCoords(),_._objects=[],_.destroy(),b}toDataURL(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return sg(this.toCanvasElement(t),t.format||"png",t.quality||1)}isType(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.includes(this.constructor.type)||e.includes(this.type)}complexity(){return 1}toJSON(){return this.toObject()}rotate(t){const{centeredRotation:e,originX:i,originY:r}=this;if(e){const{x:s,y:o}=this.getRelativeCenterPoint();this.originX=Lt,this.originY=Lt,this.left=s,this.top=o}if(this.set("angle",t),e){const{x:s,y:o}=this.translateToOriginPoint(this.getRelativeCenterPoint(),i,r);this.left=s,this.top=o,this.originX=i,this.originY=r}}setOnGroup(){}_setupCompositeOperation(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}dispose(){sl.cancelByTarget(this),this.off(),this._set("canvas",void 0),this._cacheCanvas&&Dn().dispose(this._cacheCanvas),this._cacheCanvas=void 0,this._cacheContext=null}animate(t,e){return Object.entries(t).reduce((i,r)=>{let[s,o]=r;return i[s]=this._animate(s,o,e),i},{})}_animate(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=t.split("."),s=this.constructor.colorProperties.includes(r[r.length-1]),{abort:o,startValue:l,onChange:h,onComplete:u}=i,d=L(L({},i),{},{target:this,startValue:l??r.reduce((g,p)=>g[p],this),endValue:e,abort:o==null?void 0:o.bind(this),onChange:(g,p,m)=>{r.reduce((y,_,C)=>(C===r.length-1&&(y[_]=g),y[_]),this),h&&h(g,p,m)},onComplete:(g,p,m)=>{this.setCoords(),u&&u(g,p,m)}});return s?v_(d):yg(d)}isDescendantOf(t){const{parent:e,group:i}=this;return e===t||i===t||!!e&&e.isDescendantOf(t)||!!i&&i!==e&&i.isDescendantOf(t)}getAncestors(){const t=[];let e=this;do e=e.parent,e&&t.push(e);while(e);return t}findCommonAncestors(t){if(this===t)return{fork:[],otherFork:[],common:[this,...this.getAncestors()]};const e=this.getAncestors(),i=t.getAncestors();if(e.length===0&&i.length>0&&this===i[i.length-1])return{fork:[],otherFork:[t,...i.slice(0,i.length-1)],common:[this]};for(let r,s=0;s<e.length;s++){if(r=e[s],r===t)return{fork:[this,...e.slice(0,s)],otherFork:[],common:e.slice(s)};for(let o=0;o<i.length;o++){if(this===i[o])return{fork:[],otherFork:[t,...i.slice(0,o)],common:[this,...e]};if(r===i[o])return{fork:[this,...e.slice(0,s)],otherFork:[t,...i.slice(0,o)],common:e.slice(s)}}}return{fork:[this,...e],otherFork:[t,...i],common:[]}}hasCommonAncestors(t){const e=this.findCommonAncestors(t);return e&&!!e.common.length}isInFrontOf(t){if(this===t)return;const e=this.findCommonAncestors(t);if(e.fork.includes(t))return!0;if(e.otherFork.includes(this))return!1;const i=e.common[0]||this.canvas;if(!i)return;const r=e.fork.pop(),s=e.otherFork.pop(),o=i._objects.indexOf(r),l=i._objects.indexOf(s);return o>-1&&o>l}toObject(){const t=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:[]).concat(Fc.customProperties,this.constructor.customProperties||[]);let e;const i=Kt.NUM_FRACTION_DIGITS,{clipPath:r,fill:s,stroke:o,shadow:l,strokeDashArray:h,left:u,top:d,originX:g,originY:p,width:m,height:y,strokeWidth:_,strokeLineCap:C,strokeDashOffset:b,strokeLineJoin:x,strokeUniform:T,strokeMiterLimit:O,scaleX:E,scaleY:V,angle:A,flipX:B,flipY:Y,opacity:J,visible:st,backgroundColor:ct,fillRule:ot,paintFirst:yt,globalCompositeOperation:Tt,skewX:at,skewY:pt}=this;r&&!r.excludeFromExport&&(e=r.toObject(t.concat("inverted","absolutePositioned")));const ft=It=>Ee(It,i),Xt=L(L({},Hs(this,t)),{},{type:this.constructor.type,version:Qc,originX:g,originY:p,left:ft(u),top:ft(d),width:ft(m),height:ft(y),fill:iv(s)?s.toObject():s,stroke:iv(o)?o.toObject():o,strokeWidth:ft(_),strokeDashArray:h&&h.concat(),strokeLineCap:C,strokeDashOffset:b,strokeLineJoin:x,strokeUniform:T,strokeMiterLimit:ft(O),scaleX:ft(E),scaleY:ft(V),angle:ft(A),flipX:B,flipY:Y,opacity:ft(J),shadow:l&&l.toObject(),visible:st,backgroundColor:ct,fillRule:ot,paintFirst:yt,globalCompositeOperation:Tt,skewX:ft(at),skewY:ft(pt)},e?{clipPath:e}:null);return this.includeDefaultValues?Xt:this._removeDefaultValues(Xt)}toDatalessObject(t){return this.toObject(t)}_removeDefaultValues(t){const e=this.constructor.getDefaults(),i=Object.keys(e).length>0?e:Object.getPrototypeOf(this);return lg(t,(r,s)=>{if(s===he||s===Hi||s==="type")return!0;const o=i[s];return r!==o&&!(Array.isArray(r)&&Array.isArray(o)&&r.length===0&&o.length===0)})}toString(){return"#<".concat(this.constructor.type,">")}static _fromObject(t){let e=Ae(t,g3),i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{extraParam:r}=i,s=Ae(i,p3);return wl(e,s).then(o=>r?(delete o[r],new this(e[r],o)):new this(o))}static fromObject(t,e){return this._fromObject(t,e)}};D(Hn,"stateProperties",i3),D(Hn,"cacheProperties",Or),D(Hn,"ownDefaults",n3),D(Hn,"type","FabricObject"),D(Hn,"colorProperties",[He,ji,"backgroundColor"]),D(Hn,"customProperties",[]),ht.setClass(Hn),ht.setClass(Hn,"object");const ls=(n,t,e)=>(i,r,s,o)=>{const l=t(i,r,s,o);return l&&dg(n,L(L({},gg(i,r,s,o)),e)),l};function Ys(n){return(t,e,i,r)=>{const{target:s,originX:o,originY:l}=e,h=s.getRelativeCenterPoint(),u=s.translateToOriginPoint(h,o,l),d=n(t,e,i,r);return s.setPositionByOrigin(u,e.originX,e.originY),d}}const ff=ls(rl,Ys((n,t,e,i)=>{const r=Fh(t,t.originX,t.originY,e,i);if(Ge(t.originX)===Ge(Lt)||Ge(t.originX)===Ge(Xe)&&r.x<0||Ge(t.originX)===Ge(he)&&r.x>0){const{target:s}=t,o=s.strokeWidth/(s.strokeUniform?s.scaleX:1),l=c_(t)?2:1,h=s.width,u=Math.ceil(Math.abs(r.x*l/s.scaleX)-o);return s.set("width",Math.max(u,0)),h!==s.width}return!1}));function y_(n,t,e,i,r){i=i||{};const s=this.sizeX||i.cornerSize||r.cornerSize,o=this.sizeY||i.cornerSize||r.cornerSize,l=i.transparentCorners!==void 0?i.transparentCorners:r.transparentCorners,h=l?ji:He,u=!l&&(i.cornerStrokeColor||r.cornerStrokeColor);let d,g=t,p=e;n.save(),n.fillStyle=i.cornerColor||r.cornerColor||"",n.strokeStyle=i.cornerStrokeColor||r.cornerStrokeColor||"",s>o?(d=s,n.scale(1,o/s),p=e*s/o):o>s?(d=o,n.scale(s/o,1),g=t*o/s):d=s,n.lineWidth=1,n.beginPath(),n.arc(g,p,d/2,0,Tr,!1),n[h](),u&&n.stroke(),n.restore()}function __(n,t,e,i,r){i=i||{};const s=this.sizeX||i.cornerSize||r.cornerSize,o=this.sizeY||i.cornerSize||r.cornerSize,l=i.transparentCorners!==void 0?i.transparentCorners:r.transparentCorners,h=l?ji:He,u=!l&&(i.cornerStrokeColor||r.cornerStrokeColor),d=s/2,g=o/2;n.save(),n.fillStyle=i.cornerColor||r.cornerColor||"",n.strokeStyle=i.cornerStrokeColor||r.cornerStrokeColor||"",n.lineWidth=1,n.translate(t,e);const p=r.getTotalAngle();n.rotate(Be(p)),n["".concat(h,"Rect")](-d,-g,s,o),u&&n.strokeRect(-d,-g,s,o),n.restore()}class hi{constructor(t){D(this,"visible",!0),D(this,"actionName",Ih),D(this,"angle",0),D(this,"x",0),D(this,"y",0),D(this,"offsetX",0),D(this,"offsetY",0),D(this,"sizeX",0),D(this,"sizeY",0),D(this,"touchSizeX",0),D(this,"touchSizeY",0),D(this,"cursorStyle","crosshair"),D(this,"withConnection",!1),Object.assign(this,t)}shouldActivate(t,e,i,r){var s;let{tl:o,tr:l,br:h,bl:u}=r;return((s=e.canvas)===null||s===void 0?void 0:s.getActiveObject())===e&&e.isControlVisible(t)&&Ce.isPointInPolygon(i,[o,l,h,u])}getActionHandler(t,e,i){return this.actionHandler}getMouseDownHandler(t,e,i){return this.mouseDownHandler}getMouseUpHandler(t,e,i){return this.mouseUpHandler}cursorStyleHandler(t,e,i){return e.cursorStyle}getActionName(t,e,i){return e.actionName}getVisibility(t,e){var i,r;return(i=(r=t._controlsVisibility)===null||r===void 0?void 0:r[e])!==null&&i!==void 0?i:this.visible}setVisibility(t,e,i){this.visible=t}positionHandler(t,e,i,r){return new I(this.x*t.x+this.offsetX,this.y*t.y+this.offsetY).transform(e)}calcCornerCoords(t,e,i,r,s,o){const l=Rh([Yo(i,r),No({angle:t}),Lh((s?this.touchSizeX:this.sizeX)||e,(s?this.touchSizeY:this.sizeY)||e)]);return{tl:new I(-.5,-.5).transform(l),tr:new I(.5,-.5).transform(l),br:new I(.5,.5).transform(l),bl:new I(-.5,.5).transform(l)}}render(t,e,i,r,s){((r=r||{}).cornerStyle||s.cornerStyle)==="circle"?y_.call(this,t,e,i,r,s):__.call(this,t,e,i,r,s)}}const b_=(n,t,e)=>e.lockRotation?fg:t.cursorStyle,w_=ls(Ny,Ys((n,t,e,i)=>{let{target:r,ex:s,ey:o,theta:l,originX:h,originY:u}=t;const d=r.translateToOriginPoint(r.getRelativeCenterPoint(),h,u);if(Mn(r,"lockRotation"))return!1;const g=Math.atan2(o-d.y,s-d.x),p=Math.atan2(i-d.y,e-d.x);let m=es(p-g+l);if(r.snapAngle&&r.snapAngle>0){const _=r.snapAngle,C=r.snapThreshold||_,b=Math.ceil(m/_)*_,x=Math.floor(m/_)*_;Math.abs(m-x)<C?m=x:Math.abs(m-b)<C&&(m=b)}m<0&&(m=360+m),m%=360;const y=r.angle!==m;return r.angle=m,y}));function x_(n,t){const e=t.canvas,i=n[e.uniScaleKey];return e.uniformScaling&&!i||!e.uniformScaling&&i}function C_(n,t,e){const i=Mn(n,"lockScalingX"),r=Mn(n,"lockScalingY");if(i&&r||!t&&(i||r)&&e||i&&t==="x"||r&&t==="y")return!0;const{width:s,height:o,strokeWidth:l}=n;return s===0&&l===0&&t!=="y"||o===0&&l===0&&t!=="x"}const m3=["e","se","s","sw","w","nw","n","ne","e"],wo=(n,t,e)=>{const i=x_(n,e);if(C_(e,t.x!==0&&t.y===0?"x":t.x===0&&t.y!==0?"y":"",i))return fg;const r=h_(e,t);return"".concat(m3[r],"-resize")};function _g(n,t,e,i){let r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{};const s=t.target,o=r.by,l=x_(n,s);let h,u,d,g,p,m;if(C_(s,o,l))return!1;if(t.gestureScale)u=t.scaleX*t.gestureScale,d=t.scaleY*t.gestureScale;else{if(h=Fh(t,t.originX,t.originY,e,i),p=o!=="y"?Math.sign(h.x||t.signX||1):1,m=o!=="x"?Math.sign(h.y||t.signY||1):1,t.signX||(t.signX=p),t.signY||(t.signY=m),Mn(s,"lockScalingFlip")&&(t.signX!==p||t.signY!==m))return!1;if(g=s._getTransformedDimensions(),l&&!o){const C=Math.abs(h.x)+Math.abs(h.y),{original:b}=t,x=C/(Math.abs(g.x*b.scaleX/s.scaleX)+Math.abs(g.y*b.scaleY/s.scaleY));u=b.scaleX*x,d=b.scaleY*x}else u=Math.abs(h.x*s.scaleX/g.x),d=Math.abs(h.y*s.scaleY/g.y);c_(t)&&(u*=2,d*=2),t.signX!==p&&o!=="y"&&(t.originX=sv(t.originX),u*=-1,t.signX=p),t.signY!==m&&o!=="x"&&(t.originY=sv(t.originY),d*=-1,t.signY=m)}const y=s.scaleX,_=s.scaleY;return o?(o==="x"&&s.set(Ii,u),o==="y"&&s.set(tn,d)):(!Mn(s,"lockScalingX")&&s.set(Ii,u),!Mn(s,"lockScalingY")&&s.set(tn,d)),y!==s.scaleX||_!==s.scaleY}const va=ls(Dh,Ys((n,t,e,i)=>_g(n,t,e,i))),S_=ls(Dh,Ys((n,t,e,i)=>_g(n,t,e,i,{by:"x"}))),T_=ls(Dh,Ys((n,t,e,i)=>_g(n,t,e,i,{by:"y"}))),v3=["target","ex","ey","skewingSide"],Md={x:{counterAxis:"y",scale:Ii,skew:Xo,lockSkewing:"lockSkewingX",origin:"originX",flip:"flipX"},y:{counterAxis:"x",scale:tn,skew:Ho,lockSkewing:"lockSkewingY",origin:"originY",flip:"flipY"}},y3=["ns","nesw","ew","nwse"],P_=(n,t,e)=>{if(t.x!==0&&Mn(e,"lockSkewingY")||t.y!==0&&Mn(e,"lockSkewingX"))return fg;const i=h_(e,t)%4;return"".concat(y3[i],"-resize")};function O_(n,t,e,i,r){const{target:s}=e,{counterAxis:o,origin:l,lockSkewing:h,skew:u,flip:d}=Md[n];if(Mn(s,h))return!1;const{origin:g,flip:p}=Md[o],m=Ge(e[g])*(s[p]?-1:1),y=-Math.sign(m)*(s[d]?-1:1),_=.5*-((s[u]===0&&Fh(e,Lt,Lt,i,r)[n]>0||s[u]>0?1:-1)*y)+.5;return ls(Wy,Ys((C,b,x,T)=>function(O,E,V){let{target:A,ex:B,ey:Y,skewingSide:J}=E,st=Ae(E,v3);const{skew:ct}=Md[O],ot=V.subtract(new I(B,Y)).divide(new I(A.scaleX,A.scaleY))[O],yt=A[ct],Tt=st[ct],at=Math.tan(Be(Tt)),pt=O==="y"?A._getTransformedDimensions({scaleX:1,scaleY:1,skewX:0}).x:A._getTransformedDimensions({scaleX:1,scaleY:1}).y,ft=2*ot*J/Math.max(pt,1)+at,Xt=es(Math.atan(ft));A.set(ct,Xt);const It=yt!==A[ct];if(It&&O==="y"){const{skewX:zt,scaleX:qt}=A,ue=A._getTransformedDimensions({skewY:yt}),Zt=A._getTransformedDimensions(),ie=zt!==0?ue.x/Zt.x:1;ie!==1&&A.set(Ii,ie*qt)}return It}(n,b,new I(x,T))))(t,L(L({},e),{},{[l]:_,skewingSide:y}),i,r)}const E_=(n,t,e,i)=>O_("x",n,t,e,i),M_=(n,t,e,i)=>O_("y",n,t,e,i);function Xh(n,t){return n[t.canvas.altActionKey]}const ya=(n,t,e)=>{const i=Xh(n,e);return t.x===0?i?Xo:tn:t.y===0?i?Ho:Ii:""},Es=(n,t,e)=>Xh(n,e)?P_(0,t,e):wo(n,t,e),gf=(n,t,e,i)=>Xh(n,t.target)?M_(n,t,e,i):S_(n,t,e,i),pf=(n,t,e,i)=>Xh(n,t.target)?E_(n,t,e,i):T_(n,t,e,i),bg=()=>({ml:new hi({x:-.5,y:0,cursorStyleHandler:Es,actionHandler:gf,getActionName:ya}),mr:new hi({x:.5,y:0,cursorStyleHandler:Es,actionHandler:gf,getActionName:ya}),mb:new hi({x:0,y:.5,cursorStyleHandler:Es,actionHandler:pf,getActionName:ya}),mt:new hi({x:0,y:-.5,cursorStyleHandler:Es,actionHandler:pf,getActionName:ya}),tl:new hi({x:-.5,y:-.5,cursorStyleHandler:wo,actionHandler:va}),tr:new hi({x:.5,y:-.5,cursorStyleHandler:wo,actionHandler:va}),bl:new hi({x:-.5,y:.5,cursorStyleHandler:wo,actionHandler:va}),br:new hi({x:.5,y:.5,cursorStyleHandler:wo,actionHandler:va}),mtr:new hi({x:0,y:-.5,actionHandler:w_,cursorStyleHandler:b_,offsetY:-40,withConnection:!0,actionName:ng})}),A_=()=>({mr:new hi({x:.5,y:0,actionHandler:ff,cursorStyleHandler:Es,actionName:rl}),ml:new hi({x:-.5,y:0,actionHandler:ff,cursorStyleHandler:Es,actionName:rl})}),k_=()=>L(L({},bg()),A_());class Ro extends Hn{static getDefaults(){return L(L({},super.getDefaults()),Ro.ownDefaults)}constructor(t){super(),Object.assign(this,this.constructor.createControls(),Ro.ownDefaults),this.setOptions(t)}static createControls(){return{controls:bg()}}_updateCacheCanvas(){const t=this.canvas;if(this.noScaleCache&&t&&t._currentTransform){const e=t._currentTransform,i=e.target,r=e.action;if(this===i&&r&&r.startsWith(Ih))return!1}return super._updateCacheCanvas()}getActiveControl(){const t=this.__corner;return t?{key:t,control:this.controls[t],coord:this.oCoords[t]}:void 0}findControl(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];if(!this.hasControls||!this.canvas)return;this.__corner=void 0;const i=Object.entries(this.oCoords);for(let r=i.length-1;r>=0;r--){const[s,o]=i[r],l=this.controls[s];if(l.shouldActivate(s,this,t,e?o.touchCorner:o.corner))return this.__corner=s,{key:s,control:l,coord:this.oCoords[s]}}}calcOCoords(){const t=this.getViewportTransform(),e=this.getCenterPoint(),i=Yo(e.x,e.y),r=No({angle:this.getTotalAngle()-(this.group&&this.flipX?180:0)}),s=je(i,r),o=je(t,s),l=je(o,[1/t[0],0,0,1/t[3],0,0]),h=this.group?Fs(this.calcTransformMatrix()):void 0;h&&(h.scaleX=Math.abs(h.scaleX),h.scaleY=Math.abs(h.scaleY));const u=this._calculateCurrentDimensions(h),d={};return this.forEachControl((g,p)=>{const m=g.positionHandler(u,l,this,g);d[p]=Object.assign(m,this._calcCornerCoords(g,m))}),d}_calcCornerCoords(t,e){const i=this.getTotalAngle();return{corner:t.calcCornerCoords(i,this.cornerSize,e.x,e.y,!1,this),touchCorner:t.calcCornerCoords(i,this.touchCornerSize,e.x,e.y,!0,this)}}setCoords(){super.setCoords(),this.canvas&&(this.oCoords=this.calcOCoords())}forEachControl(t){for(const e in this.controls)t(this.controls[e],e,this)}drawSelectionBackground(t){if(!this.selectionBackgroundColor||this.canvas&&this.canvas._activeObject!==this)return;t.save();const e=this.getRelativeCenterPoint(),i=this._calculateCurrentDimensions(),r=this.getViewportTransform();t.translate(e.x,e.y),t.scale(1/r[0],1/r[3]),t.rotate(Be(this.angle)),t.fillStyle=this.selectionBackgroundColor,t.fillRect(-i.x/2,-i.y/2,i.x,i.y),t.restore()}strokeBorders(t,e){t.strokeRect(-e.x/2,-e.y/2,e.x,e.y)}_drawBorders(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=L({hasControls:this.hasControls,borderColor:this.borderColor,borderDashArray:this.borderDashArray},i);t.save(),t.strokeStyle=r.borderColor,this._setLineDash(t,r.borderDashArray),this.strokeBorders(t,e),r.hasControls&&this.drawControlsConnectingLines(t,e),t.restore()}_renderControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{hasBorders:i,hasControls:r}=this,s=L({hasBorders:i,hasControls:r},e),o=this.getViewportTransform(),l=s.hasBorders,h=s.hasControls,u=je(o,this.calcTransformMatrix()),d=Fs(u);t.save(),t.translate(d.translateX,d.translateY),t.lineWidth=1*this.borderScaleFactor,this.group===this.parent&&(t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1),this.flipX&&(d.angle-=180),t.rotate(Be(this.group?d.angle:this.angle)),l&&this.drawBorders(t,d,e),h&&this.drawControls(t,e),t.restore()}drawBorders(t,e,i){let r;if(i&&i.forActiveSelection||this.group){const s=Bh(this.width,this.height,bl(e)),o=this.isStrokeAccountedForInDimensions()?rg:(this.strokeUniform?new I().scalarAdd(this.canvas?this.canvas.getZoom():1):new I(e.scaleX,e.scaleY)).scalarMultiply(this.strokeWidth);r=s.add(o).scalarAdd(this.borderScaleFactor).scalarAdd(2*this.padding)}else r=this._calculateCurrentDimensions().scalarAdd(this.borderScaleFactor);this._drawBorders(t,r,i)}drawControlsConnectingLines(t,e){let i=!1;t.beginPath(),this.forEachControl((r,s)=>{r.withConnection&&r.getVisibility(this,s)&&(i=!0,t.moveTo(r.x*e.x,r.y*e.y),t.lineTo(r.x*e.x+r.offsetX,r.y*e.y+r.offsetY))}),i&&t.stroke()}drawControls(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};t.save();const i=this.getCanvasRetinaScaling(),{cornerStrokeColor:r,cornerDashArray:s,cornerColor:o}=this,l=L({cornerStrokeColor:r,cornerDashArray:s,cornerColor:o},e);t.setTransform(i,0,0,i,0,0),t.strokeStyle=t.fillStyle=l.cornerColor,this.transparentCorners||(t.strokeStyle=l.cornerStrokeColor),this._setLineDash(t,l.cornerDashArray),this.forEachControl((h,u)=>{if(h.getVisibility(this,u)){const d=this.oCoords[u];h.render(t,d.x,d.y,l,this)}}),t.restore()}isControlVisible(t){return this.controls[t]&&this.controls[t].getVisibility(this,t)}setControlVisible(t,e){this._controlsVisibility||(this._controlsVisibility={}),this._controlsVisibility[t]=e}setControlsVisibility(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Object.entries(t).forEach(e=>{let[i,r]=e;return this.setControlVisible(i,r)})}clearContextTop(t){if(!this.canvas)return;const e=this.canvas.contextTop;if(!e)return;const i=this.canvas.viewportTransform;e.save(),e.transform(i[0],i[1],i[2],i[3],i[4],i[5]),this.transform(e);const r=this.width+4,s=this.height+4;return e.clearRect(-r/2,-s/2,r,s),t||e.restore(),e}onDeselect(t){return!1}onSelect(t){return!1}shouldStartDragging(t){return!1}onDragStart(t){return!1}canDrop(t){return!1}renderDragSourceEffect(t){}renderDropTargetEffect(t){}}function j_(n,t){return t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(i=>{i!=="constructor"&&Object.defineProperty(n.prototype,i,Object.getOwnPropertyDescriptor(e.prototype,i)||Object.create(null))})}),n}D(Ro,"ownDefaults",{noScaleCache:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockSkewingX:!1,lockSkewingY:!1,lockScalingFlip:!1,cornerSize:13,touchCornerSize:24,transparentCorners:!0,cornerColor:"rgb(178,204,255)",cornerStrokeColor:"",cornerStyle:"rect",cornerDashArray:null,hasControls:!0,borderColor:"rgb(178,204,255)",borderDashArray:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,hasBorders:!0,selectionBackgroundColor:"",selectable:!0,evented:!0,perPixelTargetFind:!1,activeOn:"down",hoverCursor:null,moveCursor:null});class pe extends Ro{}j_(pe,[d_]),ht.setClass(pe),ht.setClass(pe,"object");const D_=(n,t,e,i)=>{const r=2*(i=Math.round(i))+1,{data:s}=n.getImageData(t-i,e-i,r,r);for(let o=3;o<s.length;o+=4)if(s[o]>0)return!1;return!0};class I_{constructor(t){this.options=t,this.strokeProjectionMagnitude=this.options.strokeWidth/2,this.scale=new I(this.options.scaleX,this.options.scaleY),this.strokeUniformScalar=this.options.strokeUniform?new I(1/this.options.scaleX,1/this.options.scaleY):new I(1,1)}createSideVector(t,e){const i=nh(t,e);return this.options.strokeUniform?i.multiply(this.scale):i}projectOrthogonally(t,e,i){return this.applySkew(t.add(this.calcOrthogonalProjection(t,e,i)))}isSkewed(){return this.options.skewX!==0||this.options.skewY!==0}applySkew(t){const e=new I(t);return e.y+=e.x*Math.tan(Be(this.options.skewY)),e.x+=e.y*Math.tan(Be(this.options.skewX)),e}scaleUnitVector(t,e){return t.multiply(this.strokeUniformScalar).scalarMultiply(e)}}const _3=new I;class ko extends I_{static getOrthogonalRotationFactor(t,e){const i=e?sh(t,e):g_(t);return Math.abs(i)<Qr?-1:1}constructor(t,e,i,r){super(r),D(this,"AB",void 0),D(this,"AC",void 0),D(this,"alpha",void 0),D(this,"bisector",void 0),this.A=new I(t),this.B=new I(e),this.C=new I(i),this.AB=this.createSideVector(this.A,this.B),this.AC=this.createSideVector(this.A,this.C),this.alpha=sh(this.AB,this.AC),this.bisector=Vh(pg(this.AB.eq(_3)?this.AC:this.AB,this.alpha/2))}calcOrthogonalProjection(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const r=this.createSideVector(t,e),s=mg(r),o=ko.getOrthogonalRotationFactor(s,this.bisector);return this.scaleUnitVector(s,i*o)}projectBevel(){const t=[];return(this.alpha%Tr==0?[this.B]:[this.B,this.C]).forEach(e=>{t.push(this.projectOrthogonally(this.A,e)),t.push(this.projectOrthogonally(this.A,e,-this.strokeProjectionMagnitude))}),t}projectMiter(){const t=[],e=Math.abs(this.alpha),i=1/Math.sin(e/2),r=this.scaleUnitVector(this.bisector,-this.strokeProjectionMagnitude*i),s=this.options.strokeUniform?rh(this.scaleUnitVector(this.bisector,this.options.strokeMiterLimit)):this.options.strokeMiterLimit;return rh(r)/this.strokeProjectionMagnitude<=s&&t.push(this.applySkew(this.A.add(r))),t.push(...this.projectBevel()),t}projectRoundNoSkew(t,e){const i=[],r=new I(ko.getOrthogonalRotationFactor(this.bisector),ko.getOrthogonalRotationFactor(new I(this.bisector.y,this.bisector.x)));return[new I(1,0).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(r),new I(0,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar).multiply(r)].forEach(s=>{uf(s,t,e)&&i.push(this.A.add(s))}),i}projectRoundWithSkew(t,e){const i=[],{skewX:r,skewY:s,scaleX:o,scaleY:l,strokeUniform:h}=this.options,u=new I(Math.tan(Be(r)),Math.tan(Be(s))),d=this.strokeProjectionMagnitude,g=h?d/l/Math.sqrt(1/l**2+1/o**2*u.y**2):d/Math.sqrt(1+u.y**2),p=new I(Math.sqrt(Math.max(d**2-g**2,0)),g),m=h?d/Math.sqrt(1+u.x**2*(1/l)**2/(1/o+1/o*u.x*u.y)**2):d/Math.sqrt(1+u.x**2/(1+u.x*u.y)**2),y=new I(m,Math.sqrt(Math.max(d**2-m**2,0)));return[y,y.scalarMultiply(-1),p,p.scalarMultiply(-1)].map(_=>this.applySkew(h?_.multiply(this.strokeUniformScalar):_)).forEach(_=>{uf(_,t,e)&&i.push(this.applySkew(this.A).add(_))}),i}projectRound(){const t=[];t.push(...this.projectBevel());const e=this.alpha%Tr==0,i=this.applySkew(this.A),r=t[e?0:2].subtract(i),s=t[e?1:0].subtract(i),o=e?this.applySkew(this.AB.scalarMultiply(-1)):this.applySkew(this.bisector.multiply(this.strokeUniformScalar).scalarMultiply(-1)),l=Ao(r,o)>0,h=l?r:s,u=l?s:r;return this.isSkewed()?t.push(...this.projectRoundWithSkew(h,u)):t.push(...this.projectRoundNoSkew(h,u)),t}projectPoints(){switch(this.options.strokeLineJoin){case"miter":return this.projectMiter();case"round":return this.projectRound();default:return this.projectBevel()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t,angle:this.alpha,bisector:this.bisector}))}}class fv extends I_{constructor(t,e,i){super(i),this.A=new I(t),this.T=new I(e)}calcOrthogonalProjection(t,e){let i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.strokeProjectionMagnitude;const r=this.createSideVector(t,e);return this.scaleUnitVector(mg(r),i)}projectButt(){return[this.projectOrthogonally(this.A,this.T,this.strokeProjectionMagnitude),this.projectOrthogonally(this.A,this.T,-this.strokeProjectionMagnitude)]}projectRound(){const t=[];if(!this.isSkewed()&&this.A.eq(this.T)){const e=new I(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.applySkew(this.A.add(e)),this.applySkew(this.A.subtract(e)))}else t.push(...new ko(this.A,this.T,this.T,this.options).projectRound());return t}projectSquare(){const t=[];if(this.A.eq(this.T)){const e=new I(1,1).scalarMultiply(this.strokeProjectionMagnitude).multiply(this.strokeUniformScalar);t.push(this.A.add(e),this.A.subtract(e))}else{const e=this.calcOrthogonalProjection(this.A,this.T,this.strokeProjectionMagnitude),i=this.scaleUnitVector(Vh(this.createSideVector(this.A,this.T)),-this.strokeProjectionMagnitude),r=this.A.add(i);t.push(r.add(e),r.subtract(e))}return t.map(e=>this.applySkew(e))}projectPoints(){switch(this.options.strokeLineCap){case"round":return this.projectRound();case"square":return this.projectSquare();default:return this.projectButt()}}project(){return this.projectPoints().map(t=>({originPoint:this.A,projectedPoint:t}))}}const R_=function(n,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];const i=[];if(n.length===0)return i;const r=n.reduce((s,o)=>(s[s.length-1].eq(o)||s.push(new I(o)),s),[new I(n[0])]);if(r.length===1)e=!0;else if(!e){const s=r[0],o=((l,h)=>{for(let u=l.length-1;u>=0;u--)if(h(l[u],u,l))return u;return-1})(r,l=>!l.eq(s));r.splice(o+1)}return r.forEach((s,o,l)=>{let h,u;o===0?(u=l[1],h=e?s:l[l.length-1]):o===l.length-1?(h=l[o-1],u=e?s:l[0]):(h=l[o-1],u=l[o+1]),e&&l.length===1?i.push(...new fv(s,s,t).project()):!e||o!==0&&o!==l.length-1?i.push(...new ko(s,h,u,t).project()):i.push(...new fv(s,o===0?u:h,t).project())}),i},wg=n=>{const t={};return Object.keys(n).forEach(e=>{t[e]={},Object.keys(n[e]).forEach(i=>{t[e][i]=L({},n[e][i])})}),t},L_=n=>n.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),Hh=n=>{const t=[];for(let e,i=0;i<n.length;i++)(e=b3(n,i))!==!1&&t.push(e);return t},b3=(n,t)=>{const e=n.charCodeAt(t);if(isNaN(e))return"";if(e<55296||e>57343)return n.charAt(t);if(55296<=e&&e<=56319){if(n.length<=t+1)throw"High surrogate without following low surrogate";const r=n.charCodeAt(t+1);if(56320>r||r>57343)throw"High surrogate without following low surrogate";return n.charAt(t)+n.charAt(t+1)}if(t===0)throw"Low surrogate without preceding high surrogate";const i=n.charCodeAt(t-1);if(55296>i||i>56319)throw"Low surrogate without preceding high surrogate";return!1};var w3=Object.freeze({__proto__:null,capitalize:function(n){let t=arguments.length>1&&arguments[1]!==void 0&&arguments[1];return"".concat(n.charAt(0).toUpperCase()).concat(t?n.slice(1):n.slice(1).toLowerCase())},escapeXml:L_,graphemeSplit:Hh});const Yh=function(n,t){let e=arguments.length>2&&arguments[2]!==void 0&&arguments[2];return n.fill!==t.fill||n.stroke!==t.stroke||n.strokeWidth!==t.strokeWidth||n.fontSize!==t.fontSize||n.fontFamily!==t.fontFamily||n.fontWeight!==t.fontWeight||n.fontStyle!==t.fontStyle||n.textBackgroundColor!==t.textBackgroundColor||n.deltaY!==t.deltaY||e&&(n.overline!==t.overline||n.underline!==t.underline||n.linethrough!==t.linethrough)},B_=(n,t)=>{const e=t.split(`
`),i=[];let r=-1,s={};n=wg(n);for(let o=0;o<e.length;o++){const l=Hh(e[o]);if(n[o])for(let h=0;h<l.length;h++){r++;const u=n[o][h];u&&Object.keys(u).length>0&&(Yh(s,u,!0)?i.push({start:r,end:r+1,style:u}):i[i.length-1].end++),s=u||{}}else r+=l.length,s={}}return i},F_=(n,t)=>{if(!Array.isArray(n))return wg(n);const e=t.split(ig),i={};let r=-1,s=0;for(let o=0;o<e.length;o++){const l=Hh(e[o]);for(let h=0;h<l.length;h++)r++,n[s]&&n[s].start<=r&&r<n[s].end&&(i[o]=i[o]||{},i[o][h]=L({},n[s].style),r===n[s].end-1&&s++)}return i},cs=["display","transform",He,"fill-opacity","fill-rule","opacity",ji,"stroke-dasharray","stroke-linecap","stroke-dashoffset","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","id","paint-order","vector-effect","instantiated_by_use","clip-path"];function gv(n,t){const e=n.nodeName,i=n.getAttribute("class"),r=n.getAttribute("id"),s="(?![a-zA-Z\\-]+)";let o;if(o=new RegExp("^"+e,"i"),t=t.replace(o,""),r&&t.length&&(o=new RegExp("#"+r+s,"i"),t=t.replace(o,"")),i&&t.length){const l=i.split(" ");for(let h=l.length;h--;)o=new RegExp("\\."+l[h]+s,"i"),t=t.replace(o,"")}return t.length===0}function x3(n,t){let e=!0;const i=gv(n,t.pop());return i&&t.length&&(e=function(r,s){let o,l=!0;for(;r.parentElement&&r.parentElement.nodeType===1&&s.length;)l&&(o=s.pop()),l=gv(r=r.parentElement,o);return s.length===0}(n,t)),i&&e&&t.length===0}const C3=n=>{var t;return(t=JM[n])!==null&&t!==void 0?t:n},S3=new RegExp("(".concat(Pn,")"),"gi"),T3=n=>n.replace(S3," $1 ").replace(/,/gi," ").replace(/\s+/gi," ");var pv,mv,vv,yv,_v,bv,wv;const Ai="(".concat(Pn,")"),P3=String.raw(pv||(pv=os(["(skewX)(",")"],["(skewX)\\(","\\)"])),Ai),O3=String.raw(mv||(mv=os(["(skewY)(",")"],["(skewY)\\(","\\)"])),Ai),E3=String.raw(vv||(vv=os(["(rotate)(","(?: "," ",")?)"],["(rotate)\\(","(?: "," ",")?\\)"])),Ai,Ai,Ai),M3=String.raw(yv||(yv=os(["(scale)(","(?: ",")?)"],["(scale)\\(","(?: ",")?\\)"])),Ai,Ai),A3=String.raw(_v||(_v=os(["(translate)(","(?: ",")?)"],["(translate)\\(","(?: ",")?\\)"])),Ai,Ai),k3=String.raw(bv||(bv=os(["(matrix)("," "," "," "," "," ",")"],["(matrix)\\("," "," "," "," "," ","\\)"])),Ai,Ai,Ai,Ai,Ai,Ai),xg="(?:".concat(k3,"|").concat(A3,"|").concat(E3,"|").concat(M3,"|").concat(P3,"|").concat(O3,")"),j3="(?:".concat(xg,"*)"),D3=String.raw(wv||(wv=os(["^s*(?:","?)s*$"],["^\\s*(?:","?)\\s*$"])),j3),I3=new RegExp(D3),R3=new RegExp(xg),L3=new RegExp(xg,"g");function ll(n){const t=[];if(!(n=T3(n).replace(/\s*([()])\s*/gi,"$1"))||n&&!I3.test(n))return[...fi];for(const e of n.matchAll(L3)){const i=R3.exec(e[0]);if(!i)continue;let r=fi;const s=i.filter(y=>!!y),[,o,...l]=s,[h,u,d,g,p,m]=l.map(y=>parseFloat(y));switch(o){case"translate":r=Yo(h,u);break;case ng:r=No({angle:h},{x:u,y:d});break;case Ih:r=Lh(h,u);break;case Xo:r=og(h);break;case Ho:r=ag(h);break;case"matrix":r=[h,u,d,g,p,m]}t.push(r)}return Rh(t)}function B3(n,t,e,i){const r=Array.isArray(t);let s,o=t;if(n!==He&&n!==ji||t!==ki){if(n==="strokeUniform")return t==="non-scaling-stroke";if(n==="strokeDashArray")o=t===ki?null:t.replace(/,/g," ").split(/\s+/).map(parseFloat);else if(n==="transformMatrix")o=e&&e.transformMatrix?je(e.transformMatrix,ll(t)):ll(t);else if(n==="visible")o=t!==ki&&t!=="hidden",e&&e.visible===!1&&(o=!1);else if(n==="opacity")o=parseFloat(t),e&&e.opacity!==void 0&&(o*=e.opacity);else if(n==="textAnchor")o=t==="start"?he:t==="end"?Xe:Lt;else if(n==="charSpacing")s=Ei(t,i)/i*1e3;else if(n==="paintFirst"){const l=t.indexOf(He),h=t.indexOf(ji);o=He,(l>-1&&h>-1&&h<l||l===-1&&h>-1)&&(o=ji)}else{if(n==="href"||n==="xlink:href"||n==="font"||n==="id")return t;if(n==="imageSmoothing")return t==="optimizeQuality";s=r?t.map(Ei):Ei(t,i)}}else o="";return!r&&isNaN(s)?o:s}function z_(n,t){const e=n.match(KM);if(!e)return;const i=e[1],r=e[3],s=e[4],o=e[5],l=e[6];i&&(t.fontStyle=i),r&&(t.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),s&&(t.fontSize=Ei(s)),l&&(t.fontFamily=l),o&&(t.lineHeight=o==="normal"?1:o)}function mf(n,t){n.replace(/;\s*$/,"").split(";").forEach(e=>{if(!e)return;const[i,r]=e.split(":");t[i.trim().toLowerCase()]=r.trim()})}function V_(n){const t={},e=n.getAttribute("style");return e&&(typeof e=="string"?mf(e,t):function(i,r){Object.entries(i).forEach(s=>{let[o,l]=s;l!==void 0&&(r[o.toLowerCase()]=l)})}(e,t)),t}const F3={stroke:"strokeOpacity",fill:"fillOpacity"};function ir(n,t,e){if(!n)return{};let i,r={},s=eg;n.parentNode&&av.test(n.parentNode.nodeName)&&(r=ir(n.parentElement,t,e),r.fontSize&&(i=s=Ei(r.fontSize)));const o=L(L(L({},t.reduce((u,d)=>{const g=n.getAttribute(d);return g&&(u[d]=g),u},{})),function(u){let d=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},g={};for(const p in d)x3(u,p.split(" "))&&(g=L(L({},g),d[p]));return g}(n,e)),V_(n));o[Pd]&&n.setAttribute(Pd,o[Pd]),o[Td]&&(i=Ei(o[Td],s),o[Td]="".concat(i));const l={};for(const u in o){const d=C3(u),g=B3(d,o[u],r,i);l[d]=g}l&&l.font&&z_(l.font,l);const h=L(L({},r),l);return av.test(n.nodeName)?h:function(u){const d=pe.getDefaults();return Object.entries(F3).forEach(g=>{let[p,m]=g;if(u[m]===void 0||u[p]==="")return;if(u[p]===void 0){if(!d[p])return;u[p]=d[p]}if(u[p].indexOf("url(")===0)return;const y=new se(u[p]);u[p]=y.setAlpha(Ee(y.getAlpha()*u[m],2)).toRgba()}),u}(h)}const z3=["left","top","width","height","visible"],X_=["rx","ry"];class yi extends pe{static getDefaults(){return L(L({},super.getDefaults()),yi.ownDefaults)}constructor(t){super(),Object.assign(this,yi.ownDefaults),this.setOptions(t),this._initRxRy()}_initRxRy(){const{rx:t,ry:e}=this;t&&!e?this.ry=t:e&&!t&&(this.rx=e)}_render(t){const{width:e,height:i}=this,r=-e/2,s=-i/2,o=this.rx?Math.min(this.rx,e/2):0,l=this.ry?Math.min(this.ry,i/2):0,h=o!==0||l!==0;t.beginPath(),t.moveTo(r+o,s),t.lineTo(r+e-o,s),h&&t.bezierCurveTo(r+e-Fr*o,s,r+e,s+Fr*l,r+e,s+l),t.lineTo(r+e,s+i-l),h&&t.bezierCurveTo(r+e,s+i-Fr*l,r+e-Fr*o,s+i,r+e-o,s+i),t.lineTo(r+o,s+i),h&&t.bezierCurveTo(r+Fr*o,s+i,r,s+i-Fr*l,r,s+i-l),t.lineTo(r,s+l),h&&t.bezierCurveTo(r,s+Fr*l,r+Fr*o,s,r+o,s),t.closePath(),this._renderPaintInOrder(t)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...X_,...t])}_toSVG(){const{width:t,height:e,rx:i,ry:r}=this;return["<rect ","COMMON_PARTS",'x="'.concat(-t/2,'" y="').concat(-e/2,'" rx="').concat(i,'" ry="').concat(r,'" width="').concat(t,'" height="').concat(e,`" />
`)]}static async fromElement(t,e,i){const r=ir(t,this.ATTRIBUTE_NAMES,i),{left:s=0,top:o=0,width:l=0,height:h=0,visible:u=!0}=r,d=Ae(r,z3);return new this(L(L(L({},e),d),{},{left:s,top:o,width:l,height:h,visible:!!(u&&l&&h)}))}}D(yi,"type","Rect"),D(yi,"cacheProperties",[...Or,...X_]),D(yi,"ownDefaults",{rx:0,ry:0}),D(yi,"ATTRIBUTE_NAMES",[...cs,"x","y","rx","ry","width","height"]),ht.setClass(yi),ht.setSVGClass(yi);const yr="initialization",oh="added",Cg="removed",ah="imperative",H_=(n,t)=>{const{strokeUniform:e,strokeWidth:i,width:r,height:s,group:o}=t,l=o&&o!==n?xl(o.calcTransformMatrix(),n.calcTransformMatrix()):null,h=l?t.getRelativeCenterPoint().transform(l):t.getRelativeCenterPoint(),u=!t.isStrokeAccountedForInDimensions(),d=e&&u?l_(new I(i,i),void 0,n.calcTransformMatrix()):rg,g=!e&&u?i:0,p=Bh(r+g,s+g,Rh([l,t.calcOwnMatrix()],!0)).add(d).scalarDivide(2);return[h.subtract(p),h.add(p)]};class Cl{calcLayoutResult(t,e){if(this.shouldPerformLayout(t))return this.calcBoundingBox(e,t)}shouldPerformLayout(t){let{type:e,prevStrategy:i,strategy:r}=t;return e===yr||e===ah||!!i&&r!==i}shouldLayoutClipPath(t){let{type:e,target:{clipPath:i}}=t;return e!==yr&&i&&!i.absolutePositioned}getInitialSize(t,e){return e.size}calcBoundingBox(t,e){const{type:i,target:r}=e;if(i===ah&&e.overrides)return e.overrides;if(t.length===0)return;const{left:s,top:o,width:l,height:h}=tr(t.map(g=>H_(r,g)).reduce((g,p)=>g.concat(p),[])),u=new I(l,h),d=new I(s,o).add(u.scalarDivide(2));if(i===yr){const g=this.getInitialSize(e,{size:u,center:d});return{center:d,relativeCorrection:new I(0,0),size:g}}return{center:d.transform(r.calcOwnMatrix()),size:u}}}D(Cl,"type","strategy");class lh extends Cl{shouldPerformLayout(t){return!0}}D(lh,"type","fit-content"),ht.setClass(lh);const V3=["strategy"],X3=["target","strategy","bubbles","prevStrategy"],Y_="layoutManager";class Lo{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new lh;D(this,"strategy",void 0),this.strategy=t,this._subscriptions=new Map}performLayout(t){const e=L(L({bubbles:!0,strategy:this.strategy},t),{},{prevStrategy:this._prevLayoutStrategy,stopPropagation(){this.bubbles=!1}});this.onBeforeLayout(e);const i=this.getLayoutResult(e);i&&this.commitLayout(e,i),this.onAfterLayout(e,i),this._prevLayoutStrategy=e.strategy}attachHandlers(t,e){const{target:i}=e;return[eh,Yy,rl,Ny,Dh,Wy,th,Uy,WM].map(r=>t.on(r,s=>this.performLayout(r===eh?{type:"object_modified",trigger:r,e:s,target:i}:{type:"object_modifying",trigger:r,e:s,target:i})))}subscribe(t,e){this.unsubscribe(t,e);const i=this.attachHandlers(t,e);this._subscriptions.set(t,i)}unsubscribe(t,e){(this._subscriptions.get(t)||[]).forEach(i=>i()),this._subscriptions.delete(t)}unsubscribeTargets(t){t.targets.forEach(e=>this.unsubscribe(e,t))}subscribeTargets(t){t.targets.forEach(e=>this.subscribe(e,t))}onBeforeLayout(t){const{target:e,type:i}=t,{canvas:r}=e;if(i===yr||i===oh?this.subscribeTargets(t):i===Cg&&this.unsubscribeTargets(t),e.fire("layout:before",{context:t}),r&&r.fire("object:layout:before",{target:e,context:t}),i===ah&&t.deep){const s=Ae(t,V3);e.forEachObject(o=>o.layoutManager&&o.layoutManager.performLayout(L(L({},s),{},{bubbles:!1,target:o})))}}getLayoutResult(t){const{target:e,strategy:i,type:r}=t,s=i.calcLayoutResult(t,e.getObjects());if(!s)return;const o=r===yr?new I:e.getRelativeCenterPoint(),{center:l,correction:h=new I,relativeCorrection:u=new I}=s,d=o.subtract(l).add(h).transform(r===yr?fi:Xi(e.calcOwnMatrix()),!0).add(u);return{result:s,prevCenter:o,nextCenter:l,offset:d}}commitLayout(t,e){const{target:i}=t,{result:{size:r},nextCenter:s}=e;var o,l;i.set({width:r.x,height:r.y}),this.layoutObjects(t,e),t.type===yr?i.set({left:(o=t.x)!==null&&o!==void 0?o:s.x+r.x*Ge(i.originX),top:(l=t.y)!==null&&l!==void 0?l:s.y+r.y*Ge(i.originY)}):(i.setPositionByOrigin(s,Lt,Lt),i.setCoords(),i.set("dirty",!0))}layoutObjects(t,e){const{target:i}=t;i.forEachObject(r=>{r.group===i&&this.layoutObject(t,e,r)}),t.strategy.shouldLayoutClipPath(t)&&this.layoutObject(t,e,i.clipPath)}layoutObject(t,e,i){let{offset:r}=e;i.set({left:i.left+r.x,top:i.top+r.y})}onAfterLayout(t,e){const{target:i,strategy:r,bubbles:s,prevStrategy:o}=t,l=Ae(t,X3),{canvas:h}=i;i.fire("layout:after",{context:t,result:e}),h&&h.fire("object:layout:after",{context:t,result:e,target:i});const u=i.parent;s&&u!=null&&u.layoutManager&&((l.path||(l.path=[])).push(i),u.layoutManager.performLayout(L(L({},l),{},{target:u}))),i.set("dirty",!0)}dispose(){const{_subscriptions:t}=this;t.forEach(e=>e.forEach(i=>i())),t.clear()}toObject(){return{type:Y_,strategy:this.strategy.constructor.type}}toJSON(){return this.toObject()}}ht.setClass(Lo,Y_);const H3=["type","objects","layoutManager"];class Y3 extends Lo{performLayout(){}}class Di extends as(pe){static getDefaults(){return L(L({},super.getDefaults()),Di.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),D(this,"_activeObjects",[]),D(this,"__objectSelectionTracker",void 0),D(this,"__objectSelectionDisposer",void 0),Object.assign(this,Di.ownDefaults),this.setOptions(e),this.groupInit(t,e)}groupInit(t,e){var i;this._objects=[...t],this.__objectSelectionTracker=this.__objectSelectionMonitor.bind(this,!0),this.__objectSelectionDisposer=this.__objectSelectionMonitor.bind(this,!1),this.forEachObject(r=>{this.enterGroup(r,!1)}),this.layoutManager=(i=e.layoutManager)!==null&&i!==void 0?i:new Lo,this.layoutManager.performLayout({type:yr,target:this,targets:[...t],x:e.left,y:e.top})}canEnterGroup(t){return t===this||this.isDescendantOf(t)?(Sr("error","Group: circular object trees are not supported, this call has no effect"),!1):this._objects.indexOf(t)===-1||(Sr("error","Group: duplicate objects are not supported inside group, this call has no effect"),!1)}_filterObjectsBeforeEnteringGroup(t){return t.filter((e,i,r)=>this.canEnterGroup(e)&&r.indexOf(e)===i)}add(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];const r=this._filterObjectsBeforeEnteringGroup(e),s=super.add(...r);return this._onAfterObjectsChange(oh,r),s}insertAt(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),r=1;r<e;r++)i[r-1]=arguments[r];const s=this._filterObjectsBeforeEnteringGroup(i),o=super.insertAt(t,...s);return this._onAfterObjectsChange(oh,s),o}remove(){const t=super.remove(...arguments);return this._onAfterObjectsChange(Cg,t),t}_onObjectAdded(t){this.enterGroup(t,!0),this.fire("object:added",{target:t}),t.fire("added",{target:this})}_onObjectRemoved(t,e){this.exitGroup(t,e),this.fire("object:removed",{target:t}),t.fire("removed",{target:this})}_onAfterObjectsChange(t,e){this.layoutManager.performLayout({type:t,targets:e,target:this})}_onStackOrderChanged(){this._set("dirty",!0)}_set(t,e){const i=this[t];return super._set(t,e),t==="canvas"&&i!==e&&(this._objects||[]).forEach(r=>{r._set(t,e)}),this}_shouldSetNestedCoords(){return this.subTargetCheck}removeAll(){return this._activeObjects=[],this.remove(...this._objects)}__objectSelectionMonitor(t,e){let{target:i}=e;const r=this._activeObjects;if(t)r.push(i),this._set("dirty",!0);else if(r.length>0){const s=r.indexOf(i);s>-1&&(r.splice(s,1),this._set("dirty",!0))}}_watchObject(t,e){t&&this._watchObject(!1,e),t?(e.on("selected",this.__objectSelectionTracker),e.on("deselected",this.__objectSelectionDisposer)):(e.off("selected",this.__objectSelectionTracker),e.off("deselected",this.__objectSelectionDisposer))}enterGroup(t,e){t.group&&t.group.remove(t),t._set("parent",this),this._enterGroup(t,e)}_enterGroup(t,e){e&&Io(t,je(Xi(this.calcTransformMatrix()),t.calcTransformMatrix())),this._shouldSetNestedCoords()&&t.setCoords(),t._set("group",this),t._set("canvas",this.canvas),this._watchObject(!0,t);const i=this.canvas&&this.canvas.getActiveObject&&this.canvas.getActiveObject();i&&(i===t||t.isDescendantOf(i))&&this._activeObjects.push(t)}exitGroup(t,e){this._exitGroup(t,e),t._set("parent",void 0),t._set("canvas",void 0)}_exitGroup(t,e){t._set("group",void 0),e||(Io(t,je(this.calcTransformMatrix(),t.calcTransformMatrix())),t.setCoords()),this._watchObject(!1,t);const i=this._activeObjects.length>0?this._activeObjects.indexOf(t):-1;i>-1&&this._activeObjects.splice(i,1)}shouldCache(){const t=pe.prototype.shouldCache.call(this);if(t){for(let e=0;e<this._objects.length;e++)if(this._objects[e].willDrawShadow())return this.ownCaching=!1,!1}return t}willDrawShadow(){if(super.willDrawShadow())return!0;for(let t=0;t<this._objects.length;t++)if(this._objects[t].willDrawShadow())return!0;return!1}isOnACache(){return this.ownCaching||!!this.parent&&this.parent.isOnACache()}drawObject(t){this._renderBackground(t);for(let i=0;i<this._objects.length;i++){var e;(e=this.canvas)!==null&&e!==void 0&&e.preserveObjectStacking&&this._objects[i].group!==this?(t.save(),t.transform(...Xi(this.calcTransformMatrix())),this._objects[i].render(t),t.restore()):this._objects[i].group===this&&this._objects[i].render(t)}this._drawClipPath(t,this.clipPath)}setCoords(){super.setCoords(),this._shouldSetNestedCoords()&&this.forEachObject(t=>t.setCoords())}triggerLayout(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.layoutManager.performLayout(L({target:this,type:ah},t))}render(t){this._transformDone=!0,super.render(t),this._transformDone=!1}__serializeObjects(t,e){const i=this.includeDefaultValues;return this._objects.filter(function(r){return!r.excludeFromExport}).map(function(r){const s=r.includeDefaultValues;r.includeDefaultValues=i;const o=r[t||"toObject"](e);return r.includeDefaultValues=s,o})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.layoutManager.toObject();return L(L(L({},super.toObject(["subTargetCheck","interactive",...t])),e.strategy!=="fit-content"||this.includeDefaultValues?{layoutManager:e}:{}),{},{objects:this.__serializeObjects("toObject",t)})}toString(){return"#<Group: (".concat(this.complexity(),")>")}dispose(){this.layoutManager.unsubscribeTargets({targets:this.getObjects(),target:this}),this._activeObjects=[],this.forEachObject(t=>{this._watchObject(!1,t),t.dispose()}),super.dispose()}_createSVGBgRect(t){if(!this.backgroundColor)return"";const e=yi.prototype._toSVG.call(this),i=e.indexOf("COMMON_PARTS");e[i]='for="group" ';const r=e.join("");return t?t(r):r}_toSVG(t){const e=["<g ","COMMON_PARTS",` >
`],i=this._createSVGBgRect(t);i&&e.push("		",i);for(let r=0;r<this._objects.length;r++)e.push("		",this._objects[r].toSVG(t));return e.push(`</g>
`),e}getSvgStyles(){const t=this.opacity!==void 0&&this.opacity!==1?"opacity: ".concat(this.opacity,";"):"",e=this.visible?"":" visibility: hidden;";return[t,this.getSvgFilter(),e].join("")}toClipPathSVG(t){const e=[],i=this._createSVGBgRect(t);i&&e.push("	",i);for(let r=0;r<this._objects.length;r++)e.push("	",this._objects[r].toClipPathSVG(t));return this._createBaseClipPathSVGMarkup(e,{reviver:t})}static fromObject(t,e){let{type:i,objects:r=[],layoutManager:s}=t,o=Ae(t,H3);return Promise.all([Do(r,e),wl(o,e)]).then(l=>{let[h,u]=l;const d=new this(h,L(L(L({},o),u),{},{layoutManager:new Y3}));if(s){const g=ht.getClass(s.type),p=ht.getClass(s.strategy);d.layoutManager=new g(new p)}else d.layoutManager=new Lo;return d.layoutManager.subscribeTargets({type:yr,target:d,targets:d.getObjects()}),d.setCoords(),d})}}D(Di,"type","Group"),D(Di,"ownDefaults",{strokeWidth:0,subTargetCheck:!1,interactive:!1}),ht.setClass(Di);const N_=(n,t)=>Math.min(t.width/n.width,t.height/n.height),W_=(n,t)=>Math.max(t.width/n.width,t.height/n.height),vf="\\s*,?\\s*",ca="".concat(vf,"(").concat(Pn,")"),N3="".concat(ca).concat(ca).concat(ca).concat(vf,"([01])").concat(vf,"([01])").concat(ca).concat(ca),W3={m:"l",M:"L"},U3=(n,t,e,i,r,s,o,l,h,u,d)=>{const g=In(n),p=Rn(n),m=In(t),y=Rn(t),_=e*r*m-i*s*y+o,C=i*r*m+e*s*y+l;return["C",u+h*(-e*r*p-i*s*g),d+h*(-i*r*p+e*s*g),_+h*(e*r*y+i*s*m),C+h*(i*r*y-e*s*m),_,C]},xv=(n,t,e,i)=>{const r=Math.atan2(t,n),s=Math.atan2(i,e);return s>=r?s-r:2*Math.PI-(r-s)};function yf(n,t,e,i,r,s,o,l){let h;if(Kt.cachesBoundsOfCurve&&(h=[...arguments].join(),Mo.boundsOfCurveCache[h]))return Mo.boundsOfCurveCache[h];const u=Math.sqrt,d=Math.abs,g=[],p=[[0,0],[0,0]];let m=6*n-12*e+6*r,y=-3*n+9*e-9*r+3*o,_=3*e-3*n;for(let O=0;O<2;++O){if(O>0&&(m=6*t-12*i+6*s,y=-3*t+9*i-9*s+3*l,_=3*i-3*t),d(y)<1e-12){if(d(m)<1e-12)continue;const Y=-_/m;0<Y&&Y<1&&g.push(Y);continue}const E=m*m-4*_*y;if(E<0)continue;const V=u(E),A=(-m+V)/(2*y);0<A&&A<1&&g.push(A);const B=(-m-V)/(2*y);0<B&&B<1&&g.push(B)}let C=g.length;const b=C,x=G_(n,t,e,i,r,s,o,l);for(;C--;){const{x:O,y:E}=x(g[C]);p[0][C]=O,p[1][C]=E}p[0][b]=n,p[1][b]=t,p[0][b+1]=o,p[1][b+1]=l;const T=[new I(Math.min(...p[0]),Math.min(...p[1])),new I(Math.max(...p[0]),Math.max(...p[1]))];return Kt.cachesBoundsOfCurve&&(Mo.boundsOfCurveCache[h]=T),T}const G3=(n,t,e)=>{let[i,r,s,o,l,h,u,d]=e;const g=((p,m,y,_,C,b,x)=>{if(y===0||_===0)return[];let T=0,O=0,E=0;const V=Math.PI,A=x*tg,B=Rn(A),Y=In(A),J=.5*(-Y*p-B*m),st=.5*(-Y*m+B*p),ct=y**2,ot=_**2,yt=st**2,Tt=J**2,at=ct*ot-ct*yt-ot*Tt;let pt=Math.abs(y),ft=Math.abs(_);if(at<0){const Ct=Math.sqrt(1-at/(ct*ot));pt*=Ct,ft*=Ct}else E=(C===b?-1:1)*Math.sqrt(at/(ct*yt+ot*Tt));const Xt=E*pt*st/ft,It=-E*ft*J/pt,zt=Y*Xt-B*It+.5*p,qt=B*Xt+Y*It+.5*m;let ue=xv(1,0,(J-Xt)/pt,(st-It)/ft),Zt=xv((J-Xt)/pt,(st-It)/ft,(-J-Xt)/pt,(-st-It)/ft);b===0&&Zt>0?Zt-=2*V:b===1&&Zt<0&&(Zt+=2*V);const ie=Math.ceil(Math.abs(Zt/V*2)),me=[],q=Zt/ie,_t=8/3*Math.sin(q/4)*Math.sin(q/4)/Math.sin(q/2);let ut=ue+q;for(let Ct=0;Ct<ie;Ct++)me[Ct]=U3(ue,ut,Y,B,pt,ft,zt,qt,_t,T,O),T=me[Ct][5],O=me[Ct][6],ue=ut,ut+=q;return me})(u-n,d-t,r,s,l,h,o);for(let p=0,m=g.length;p<m;p++)g[p][1]+=n,g[p][2]+=t,g[p][3]+=n,g[p][4]+=t,g[p][5]+=n,g[p][6]+=t;return g},U_=n=>{let t=0,e=0,i=0,r=0;const s=[];let o,l=0,h=0;for(const u of n){const d=[...u];let g;switch(d[0]){case"l":d[1]+=t,d[2]+=e;case"L":t=d[1],e=d[2],g=["L",t,e];break;case"h":d[1]+=t;case"H":t=d[1],g=["L",t,e];break;case"v":d[1]+=e;case"V":e=d[1],g=["L",t,e];break;case"m":d[1]+=t,d[2]+=e;case"M":t=d[1],e=d[2],i=d[1],r=d[2],g=["M",t,e];break;case"c":d[1]+=t,d[2]+=e,d[3]+=t,d[4]+=e,d[5]+=t,d[6]+=e;case"C":l=d[3],h=d[4],t=d[5],e=d[6],g=["C",d[1],d[2],l,h,t,e];break;case"s":d[1]+=t,d[2]+=e,d[3]+=t,d[4]+=e;case"S":o==="C"?(l=2*t-l,h=2*e-h):(l=t,h=e),t=d[3],e=d[4],g=["C",l,h,d[1],d[2],t,e],l=g[3],h=g[4];break;case"q":d[1]+=t,d[2]+=e,d[3]+=t,d[4]+=e;case"Q":l=d[1],h=d[2],t=d[3],e=d[4],g=["Q",l,h,t,e];break;case"t":d[1]+=t,d[2]+=e;case"T":o==="Q"?(l=2*t-l,h=2*e-h):(l=t,h=e),t=d[1],e=d[2],g=["Q",l,h,t,e];break;case"a":d[6]+=t,d[7]+=e;case"A":G3(t,e,d).forEach(p=>s.push(p)),t=d[6],e=d[7];break;case"z":case"Z":t=i,e=r,g=["Z"]}g?(s.push(g),o=g[0]):o=""}return s},ch=(n,t,e,i)=>Math.sqrt((e-n)**2+(i-t)**2),G_=(n,t,e,i,r,s,o,l)=>h=>{const u=h**3,d=(m=>3*m**2*(1-m))(h),g=(m=>3*m*(1-m)**2)(h),p=(m=>(1-m)**3)(h);return new I(o*u+r*d+e*g+n*p,l*u+s*d+i*g+t*p)},q_=n=>n**2,Z_=n=>2*n*(1-n),$_=n=>(1-n)**2,q3=(n,t,e,i,r,s,o,l)=>h=>{const u=q_(h),d=Z_(h),g=$_(h),p=3*(g*(e-n)+d*(r-e)+u*(o-r)),m=3*(g*(i-t)+d*(s-i)+u*(l-s));return Math.atan2(m,p)},Z3=(n,t,e,i,r,s)=>o=>{const l=q_(o),h=Z_(o),u=$_(o);return new I(r*l+e*h+n*u,s*l+i*h+t*u)},$3=(n,t,e,i,r,s)=>o=>{const l=1-o,h=2*(l*(e-n)+o*(r-e)),u=2*(l*(i-t)+o*(s-i));return Math.atan2(u,h)},Cv=(n,t,e)=>{let i=new I(t,e),r=0;for(let s=1;s<=100;s+=1){const o=n(s/100);r+=ch(i.x,i.y,o.x,o.y),i=o}return r},K3=(n,t)=>{let e,i=0,r=0,s={x:n.x,y:n.y},o=L({},s),l=.01,h=0;const u=n.iterator,d=n.angleFinder;for(;r<t&&l>1e-4;)o=u(i),h=i,e=ch(s.x,s.y,o.x,o.y),e+r>t?(i-=l,l/=2):(s=o,i+=l,r+=e);return L(L({},o),{},{angle:d(h)})},Sg=n=>{let t,e,i=0,r=0,s=0,o=0,l=0;const h=[];for(const u of n){const d={x:r,y:s,command:u[0],length:0};switch(u[0]){case"M":e=d,e.x=o=r=u[1],e.y=l=s=u[2];break;case"L":e=d,e.length=ch(r,s,u[1],u[2]),r=u[1],s=u[2];break;case"C":t=G_(r,s,u[1],u[2],u[3],u[4],u[5],u[6]),e=d,e.iterator=t,e.angleFinder=q3(r,s,u[1],u[2],u[3],u[4],u[5],u[6]),e.length=Cv(t,r,s),r=u[5],s=u[6];break;case"Q":t=Z3(r,s,u[1],u[2],u[3],u[4]),e=d,e.iterator=t,e.angleFinder=$3(r,s,u[1],u[2],u[3],u[4]),e.length=Cv(t,r,s),r=u[3],s=u[4];break;case"Z":e=d,e.destX=o,e.destY=l,e.length=ch(r,s,o,l),r=o,s=l}i+=e.length,h.push(e)}return h.push({length:i,x:r,y:s}),h},K_=function(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Sg(n),i=0;for(;t-e[i].length>0&&i<e.length-2;)t-=e[i].length,i++;const r=e[i],s=t/r.length,o=n[i];switch(r.command){case"M":return{x:r.x,y:r.y,angle:0};case"Z":return L(L({},new I(r.x,r.y).lerp(new I(r.destX,r.destY),s)),{},{angle:Math.atan2(r.destY-r.y,r.destX-r.x)});case"L":return L(L({},new I(r.x,r.y).lerp(new I(o[1],o[2]),s)),{},{angle:Math.atan2(o[2]-r.y,o[1]-r.x)});case"C":case"Q":return K3(r,t)}},J3=new RegExp("[mzlhvcsqta][^mzlhvcsqta]*","gi"),Sv=new RegExp(N3,"g"),Q3=new RegExp(Pn,"gi"),t6={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},J_=n=>{var t;const e=[],i=(t=n.match(J3))!==null&&t!==void 0?t:[];for(const r of i){const s=r[0];if(s==="z"||s==="Z"){e.push([s]);continue}const o=t6[s.toLowerCase()];let l=[];if(s==="a"||s==="A"){Sv.lastIndex=0;for(let h=null;h=Sv.exec(r);)l.push(...h.slice(1))}else l=r.match(Q3)||[];for(let h=0;h<l.length;h+=o){const u=new Array(o),d=W3[s];u[0]=h>0&&d?d:s;for(let g=0;g<o;g++)u[g+1]=parseFloat(l[h+g]);e.push(u)}}return e},Q_=function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=new I(n[0]),i=new I(n[1]),r=1,s=0;const o=[],l=n.length,h=l>2;let u;for(h&&(r=n[2].x<i.x?-1:n[2].x===i.x?0:1,s=n[2].y<i.y?-1:n[2].y===i.y?0:1),o.push(["M",e.x-r*t,e.y-s*t]),u=1;u<l;u++){if(!e.eq(i)){const d=e.midPointFrom(i);o.push(["Q",e.x,e.y,d.x,d.y])}e=n[u],u+1<n.length&&(i=n[u+1])}return h&&(r=e.x>n[u-2].x?1:e.x===n[u-2].x?0:-1,s=e.y>n[u-2].y?1:e.y===n[u-2].y?0:-1),o.push(["L",e.x+r*t,e.y+s*t]),o},Tg=(n,t)=>n.map(e=>e.map((i,r)=>r===0||t===void 0?i:Ee(i,t)).join(" ")).join(" ");function hh(n,t){const e=n.style;e&&t&&(typeof t=="string"?e.cssText+=";"+t:Object.entries(t).forEach(i=>{let[r,s]=i;return e.setProperty(r,s)}))}const Ms=(n,t)=>Math.floor(Math.random()*(t-n+1))+n;function tb(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e=t.onComplete||Is,i=new(qn()).XMLHttpRequest,r=t.signal,s=function(){i.abort()},o=function(){r&&r.removeEventListener("abort",s),i.onerror=i.ontimeout=Is};if(r&&r.aborted)throw new Qf("request");return r&&r.addEventListener("abort",s,{once:!0}),i.onreadystatechange=function(){i.readyState===4&&(o(),e(i),i.onreadystatechange=Is)},i.onerror=i.ontimeout=o,i.open("get",n,!0),i.send(),i}const zc=(n,t)=>{let e=n._findCenterFromElement();n.transformMatrix&&((i=>{if(i.transformMatrix){const{scaleX:r,scaleY:s,angle:o,skewX:l}=Fs(i.transformMatrix);i.flipX=!1,i.flipY=!1,i.set(Ii,r),i.set(tn,s),i.angle=o,i.skewX=l,i.skewY=0}})(n),e=e.transform(n.transformMatrix)),delete n.transformMatrix,t&&(n.scaleX*=t.scaleX,n.scaleY*=t.scaleY,n.cropX=t.cropX,n.cropY=t.cropY,e.x+=t.offsetLeft,e.y+=t.offsetTop,n.width=t.width,n.height=t.height),n.setPositionByOrigin(e,Lt,Lt)};var $=Object.freeze({__proto__:null,addTransformToObject:o_,animate:yg,animateColor:v_,applyTransformToObject:Io,calcAngleBetweenVectors:sh,calcDimensionsMatrix:bl,calcPlaneChangeMatrix:xl,calcVectorRotation:g_,cancelAnimFrame:Zy,capValue:zs,composeMatrix:t_,copyCanvasElement:n=>{var t;const e=Me();return e.width=n.width,e.height=n.height,(t=e.getContext("2d"))===null||t===void 0||t.drawImage(n,0,0),e},cos:In,createCanvasElement:Me,createImage:$y,createRotateMatrix:No,createScaleMatrix:Lh,createSkewXMatrix:og,createSkewYMatrix:ag,createTranslateMatrix:Yo,createVector:nh,crossProduct:Ao,degreesToRadians:Be,dotProduct:p_,ease:r3,enlivenObjectEnlivables:wl,enlivenObjects:Do,findScaleToCover:W_,findScaleToFit:N_,getBoundsOfCurve:yf,getOrthonormalVector:mg,getPathSegmentsInfo:Sg,getPointOnPath:K_,getPointer:s_,getRandomInt:Ms,getRegularPolygonPath:(n,t)=>{const e=2*Math.PI/n;let i=-Qr;n%2==0&&(i+=e/2);const r=new Array(n+1);for(let s=0;s<n;s++){const o=s*e+i,{x:l,y:h}=new I(In(o),Rn(o)).scalarMultiply(t);r[s]=[s===0?"M":"L",l,h]}return r[n]=["Z"],r},getSmoothPathFromPoints:Q_,getSvgAttributes:n=>{const t=["instantiated_by_use","style","id","class"];switch(n){case"linearGradient":return t.concat(["x1","y1","x2","y2","gradientUnits","gradientTransform"]);case"radialGradient":return t.concat(["gradientUnits","gradientTransform","cx","cy","r","fx","fy","fr"]);case"stop":return t.concat(["offset","stop-color","stop-opacity"])}return t},getUnitVector:Vh,groupSVGElements:(n,t)=>n&&n.length===1?n[0]:new Di(n,t),hasStyleChanged:Yh,invertTransform:Xi,isBetweenVectors:uf,isIdentityMatrix:Ky,isTouchEvent:ih,isTransparent:D_,joinPath:Tg,loadImage:Na,magnitude:rh,makeBoundingBoxFromPoints:tr,makePathSimpler:U_,matrixToSVG:ol,mergeClipPaths:(n,t)=>{var e;let i=n,r=t;i.inverted&&!r.inverted&&(i=t,r=n),cf(r,(e=r.group)===null||e===void 0?void 0:e.calcTransformMatrix(),i.calcTransformMatrix());const s=i.inverted&&r.inverted;return s&&(i.inverted=r.inverted=!1),new Di([i],{clipPath:r,inverted:s})},multiplyTransformMatrices:je,multiplyTransformMatrixArray:Rh,parsePath:J_,parsePreserveAspectRatioAttribute:cg,parseUnit:Ei,pick:Hs,projectStrokeOnPoints:R_,qrDecompose:Fs,radiansToDegrees:es,removeFromArray:Ps,removeTransformFromObject:(n,t)=>{const e=Xi(t),i=je(e,n.calcOwnMatrix());Io(n,i)},removeTransformMatrixForSvgParsing:zc,request:tb,requestAnimFrame:Ya,resetObjectTransform:a_,rotatePoint:(n,t,e)=>n.rotate(e,t),rotateVector:pg,saveObjectTransform:ug,sendObjectToPlane:cf,sendPointToPlane:br,sendVectorToPlane:l_,setStyle:hh,sin:Rn,sizeAfterTransform:Bh,string:w3,stylesFromArray:F_,stylesToArray:B_,toDataURL:sg,toFixed:Ee,transformPath:(n,t,e)=>(e&&(t=je(t,[1,0,0,1,-e.x,-e.y])),n.map(i=>{const r=[...i];for(let s=1;s<i.length-1;s+=2){const{x:o,y:l}=mi({x:i[s],y:i[s+1]},t);r[s]=o,r[s+1]=l}return r})),transformPoint:mi});class eb extends hg{constructor(t){let{allowTouchScrolling:e=!1,containerClass:i=""}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(t),D(this,"upper",void 0),D(this,"container",void 0);const{el:r}=this.lower,s=this.createUpperCanvas();this.upper={el:s,ctx:s.getContext("2d")},this.applyCanvasStyle(r,{allowTouchScrolling:e}),this.applyCanvasStyle(s,{allowTouchScrolling:e,styles:{position:"absolute",left:"0",top:"0"}});const o=this.createContainerElement();o.classList.add(i),r.parentNode&&r.parentNode.replaceChild(o,r),o.append(r,s),this.container=o}createUpperCanvas(){const{el:t}=this.lower,e=Me();return e.className=t.className,e.classList.remove("lower-canvas"),e.classList.add("upper-canvas"),e.setAttribute("data-fabric","top"),e.style.cssText=t.style.cssText,e.setAttribute("draggable","true"),e}createContainerElement(){const t=Xs().createElement("div");return t.setAttribute("data-fabric","wrapper"),hh(t,{position:"relative"}),rv(t),t}applyCanvasStyle(t,e){const{styles:i,allowTouchScrolling:r}=e;hh(t,L(L({},i),{},{"touch-action":r?"manipulation":ki})),rv(t)}setDimensions(t,e){super.setDimensions(t,e);const{el:i,ctx:r}=this.upper;r_(i,r,t,e)}setCSSDimensions(t){super.setCSSDimensions(t),af(this.upper.el,t),af(this.container,t)}cleanupDOM(t){const e=this.container,{el:i}=this.lower,{el:r}=this.upper;super.cleanupDOM(t),e.removeChild(r),e.removeChild(i),e.parentNode&&e.parentNode.replaceChild(i,e)}dispose(){super.dispose(),Dn().dispose(this.upper.el),delete this.upper,delete this.container}}class Nh extends vn{constructor(){super(...arguments),D(this,"targets",[]),D(this,"_hoveredTargets",[]),D(this,"_objectsToRender",void 0),D(this,"_currentTransform",null),D(this,"_groupSelector",null),D(this,"contextTopDirty",!1)}static getDefaults(){return L(L({},super.getDefaults()),Nh.ownDefaults)}get upperCanvasEl(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.el}get contextTop(){var t;return(t=this.elements.upper)===null||t===void 0?void 0:t.ctx}get wrapperEl(){return this.elements.container}initElements(t){this.elements=new eb(t,{allowTouchScrolling:this.allowTouchScrolling,containerClass:this.containerClass}),this._createCacheCanvas()}_onObjectAdded(t){this._objectsToRender=void 0,super._onObjectAdded(t)}_onObjectRemoved(t){this._objectsToRender=void 0,t===this._activeObject&&(this.fire("before:selection:cleared",{deselected:[t]}),this._discardActiveObject(),this.fire("selection:cleared",{deselected:[t]}),t.fire("deselected",{target:t})),t===this._hoveredTarget&&(this._hoveredTarget=void 0,this._hoveredTargets=[]),super._onObjectRemoved(t)}_onStackOrderChanged(){this._objectsToRender=void 0,super._onStackOrderChanged()}_chooseObjectsToRender(){const t=this._activeObject;return!this.preserveObjectStacking&&t?this._objects.filter(e=>!e.group&&e!==t).concat(t):this._objects}renderAll(){this.cancelRequestedRender(),this.destroyed||(!this.contextTopDirty||this._groupSelector||this.isDrawingMode||(this.clearContext(this.contextTop),this.contextTopDirty=!1),this.hasLostContext&&(this.renderTopLayer(this.contextTop),this.hasLostContext=!1),!this._objectsToRender&&(this._objectsToRender=this._chooseObjectsToRender()),this.renderCanvas(this.getContext(),this._objectsToRender))}renderTopLayer(t){t.save(),this.isDrawingMode&&this._isCurrentlyDrawing&&(this.freeDrawingBrush&&this.freeDrawingBrush._render(),this.contextTopDirty=!0),this.selection&&this._groupSelector&&(this._drawSelection(t),this.contextTopDirty=!0),t.restore()}renderTop(){const t=this.contextTop;this.clearContext(t),this.renderTopLayer(t),this.fire("after:render",{ctx:t})}setTargetFindTolerance(t){t=Math.round(t),this.targetFindTolerance=t;const e=this.getRetinaScaling(),i=Math.ceil((2*t+1)*e);this.pixelFindCanvasEl.width=this.pixelFindCanvasEl.height=i,this.pixelFindContext.scale(e,e)}isTargetTransparent(t,e,i){const r=this.targetFindTolerance,s=this.pixelFindContext;this.clearContext(s),s.save(),s.translate(-e+r,-i+r),s.transform(...this.viewportTransform);const o=t.selectionBackgroundColor;t.selectionBackgroundColor="",t.render(s),t.selectionBackgroundColor=o,s.restore();const l=Math.round(r*this.getRetinaScaling());return D_(s,l,l,l)}_isSelectionKeyPressed(t){const e=this.selectionKey;return!!e&&(Array.isArray(e)?!!e.find(i=>!!i&&t[i]===!0):t[e])}_shouldClearSelection(t,e){const i=this.getActiveObjects(),r=this._activeObject;return!!(!e||e&&r&&i.length>1&&i.indexOf(e)===-1&&r!==e&&!this._isSelectionKeyPressed(t)||e&&!e.evented||e&&!e.selectable&&r&&r!==e)}_shouldCenterTransform(t,e,i){if(!t)return;let r;return e===Ih||e===Ii||e===tn||e===rl?r=this.centeredScaling||t.centeredScaling:e===ng&&(r=this.centeredRotation||t.centeredRotation),r?!i:i}_getOriginFromCorner(t,e){const i={x:t.originX,y:t.originY};return e&&(["ml","tl","bl"].includes(e)?i.x=Xe:["mr","tr","br"].includes(e)&&(i.x=he),["tl","mt","tr"].includes(e)?i.y=of:["bl","mb","br"].includes(e)&&(i.y=Hi)),i}_setupCurrentTransform(t,e,i){var r;const s=e.group?br(this.getScenePoint(t),void 0,e.group.calcTransformMatrix()):this.getScenePoint(t),{key:o="",control:l}=e.getActiveControl()||{},h=i&&l?(r=l.getActionHandler(t,e,l))===null||r===void 0?void 0:r.bind(l):u_,u=((m,y,_,C)=>{if(!y||!m)return"drag";const b=C.controls[y];return b.getActionName(_,b,C)})(i,o,t,e),d=t[this.centeredKey],g=this._shouldCenterTransform(e,u,d)?{x:Lt,y:Lt}:this._getOriginFromCorner(e,o),p={target:e,action:u,actionHandler:h,actionPerformed:!1,corner:o,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:s.x-e.left,offsetY:s.y-e.top,originX:g.x,originY:g.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:Be(e.angle),width:e.width,height:e.height,shiftKey:t.shiftKey,altKey:d,original:L(L({},ug(e)),{},{originX:g.x,originY:g.y})};this._currentTransform=p,this.fire("before:transform",{e:t,transform:p})}setCursor(t){this.upperCanvasEl.style.cursor=t}_drawSelection(t){const{x:e,y:i,deltaX:r,deltaY:s}=this._groupSelector,o=new I(e,i).transform(this.viewportTransform),l=new I(e+r,i+s).transform(this.viewportTransform),h=this.selectionLineWidth/2;let u=Math.min(o.x,l.x),d=Math.min(o.y,l.y),g=Math.max(o.x,l.x),p=Math.max(o.y,l.y);this.selectionColor&&(t.fillStyle=this.selectionColor,t.fillRect(u,d,g-u,p-d)),this.selectionLineWidth&&this.selectionBorderColor&&(t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,u+=h,d+=h,g-=h,p-=h,pe.prototype._setLineDash.call(this,t,this.selectionDashArray),t.strokeRect(u,d,g-u,p-d))}findTarget(t){if(this.skipTargetFind)return;const e=this.getViewportPoint(t),i=this._activeObject,r=this.getActiveObjects();if(this.targets=[],i&&r.length>=1){if(i.findControl(e,ih(t))||r.length>1&&this.searchPossibleTargets([i],e))return i;if(i===this.searchPossibleTargets([i],e)){if(this.preserveObjectStacking){const s=this.targets;this.targets=[];const o=this.searchPossibleTargets(this._objects,e);return t[this.altSelectionKey]&&o&&o!==i?(this.targets=s,i):o}return i}}return this.searchPossibleTargets(this._objects,e)}_pointIsInObjectSelectionArea(t,e){let i=t.getCoords();const r=this.getZoom(),s=t.padding/r;if(s){const[o,l,h,u]=i,d=Math.atan2(l.y-o.y,l.x-o.x),g=In(d)*s,p=Rn(d)*s,m=g+p,y=g-p;i=[new I(o.x-y,o.y-m),new I(l.x+m,l.y-y),new I(h.x+y,h.y+m),new I(u.x-m,u.y+y)]}return Ce.isPointInPolygon(e,i)}_checkTarget(t,e){return!!(t&&t.visible&&t.evented&&this._pointIsInObjectSelectionArea(t,br(e,void 0,this.viewportTransform))&&(!this.perPixelTargetFind&&!t.perPixelTargetFind||t.isEditing||!this.isTargetTransparent(t,e.x,e.y)))}_searchPossibleTargets(t,e){let i=t.length;for(;i--;){const r=t[i];if(this._checkTarget(r,e)){if(Bc(r)&&r.subTargetCheck){const s=this._searchPossibleTargets(r._objects,e);s&&this.targets.push(s)}return r}}}searchPossibleTargets(t,e){const i=this._searchPossibleTargets(t,e);if(i&&Bc(i)&&i.interactive&&this.targets[0]){const r=this.targets;for(let s=r.length-1;s>0;s--){const o=r[s];if(!Bc(o)||!o.interactive)return o}return r[0]}return i}getViewportPoint(t){return this._pointer?this._pointer:this.getPointer(t,!0)}getScenePoint(t){return this._absolutePointer?this._absolutePointer:this.getPointer(t)}getPointer(t){let e=arguments.length>1&&arguments[1]!==void 0&&arguments[1];const i=this.upperCanvasEl,r=i.getBoundingClientRect();let s=s_(t),o=r.width||0,l=r.height||0;o&&l||(Hi in r&&of in r&&(l=Math.abs(r.top-r.bottom)),Xe in r&&he in r&&(o=Math.abs(r.right-r.left))),this.calcOffset(),s.x=s.x-this._offset.left,s.y=s.y-this._offset.top,e||(s=br(s,void 0,this.viewportTransform));const h=this.getRetinaScaling();h!==1&&(s.x/=h,s.y/=h);const u=o===0||l===0?new I(1,1):new I(i.width/o,i.height/l);return s.multiply(u)}_setDimensionsImpl(t,e){this._resetTransformEventData(),super._setDimensionsImpl(t,e),this._isCurrentlyDrawing&&this.freeDrawingBrush&&this.freeDrawingBrush._setBrushStyles(this.contextTop)}_createCacheCanvas(){this.pixelFindCanvasEl=Me(),this.pixelFindContext=this.pixelFindCanvasEl.getContext("2d",{willReadFrequently:!0}),this.setTargetFindTolerance(this.targetFindTolerance)}getTopContext(){return this.elements.upper.ctx}getSelectionContext(){return this.elements.upper.ctx}getSelectionElement(){return this.elements.upper.el}getActiveObject(){return this._activeObject}getActiveObjects(){const t=this._activeObject;return Os(t)?t.getObjects():t?[t]:[]}_fireSelectionEvents(t,e){let i=!1,r=!1;const s=this.getActiveObjects(),o=[],l=[];t.forEach(h=>{s.includes(h)||(i=!0,h.fire("deselected",{e,target:h}),l.push(h))}),s.forEach(h=>{t.includes(h)||(i=!0,h.fire("selected",{e,target:h}),o.push(h))}),t.length>0&&s.length>0?(r=!0,i&&this.fire("selection:updated",{e,selected:o,deselected:l})):s.length>0?(r=!0,this.fire("selection:created",{e,selected:o})):t.length>0&&(r=!0,this.fire("selection:cleared",{e,deselected:l})),r&&(this._objectsToRender=void 0)}setActiveObject(t,e){const i=this.getActiveObjects(),r=this._setActiveObject(t,e);return this._fireSelectionEvents(i,e),r}_setActiveObject(t,e){const i=this._activeObject;return i!==t&&!(!this._discardActiveObject(e,t)&&this._activeObject)&&!t.onSelect({e})&&(this._activeObject=t,Os(t)&&i!==t&&t.set("canvas",this),t.setCoords(),!0)}_discardActiveObject(t,e){const i=this._activeObject;return!!i&&!i.onDeselect({e:t,object:e})&&(this._currentTransform&&this._currentTransform.target===i&&this.endCurrentTransform(t),Os(i)&&i===this._hoveredTarget&&(this._hoveredTarget=void 0),this._activeObject=void 0,!0)}discardActiveObject(t){const e=this.getActiveObjects(),i=this.getActiveObject();e.length&&this.fire("before:selection:cleared",{e:t,deselected:[i]});const r=this._discardActiveObject(t);return this._fireSelectionEvents(e,t),r}endCurrentTransform(t){const e=this._currentTransform;this._finalizeCurrentTransform(t),e&&e.target&&(e.target.isMoving=!1),this._currentTransform=null}_finalizeCurrentTransform(t){const e=this._currentTransform,i=e.target,r={e:t,target:i,transform:e,action:e.action};i._scaling&&(i._scaling=!1),i.setCoords(),e.actionPerformed&&(this.fire("object:modified",r),i.fire(eh,r))}setViewportTransform(t){super.setViewportTransform(t);const e=this._activeObject;e&&e.setCoords()}destroy(){const t=this._activeObject;Os(t)&&(t.removeAll(),t.dispose()),delete this._activeObject,super.destroy(),this.pixelFindContext=null,this.pixelFindCanvasEl=void 0}clear(){this.discardActiveObject(),this._activeObject=void 0,this.clearContext(this.contextTop),super.clear()}drawControls(t){const e=this._activeObject;e&&e._renderControls(t)}_toObject(t,e,i){const r=this._realizeGroupTransformOnObject(t),s=super._toObject(t,e,i);return t.set(r),s}_realizeGroupTransformOnObject(t){const{group:e}=t;if(e&&Os(e)&&this._activeObject===e){const i=Hs(t,["angle","flipX","flipY",he,Ii,tn,Xo,Ho,Hi]);return o_(t,e.calcOwnMatrix()),i}return{}}_setSVGObject(t,e,i){const r=this._realizeGroupTransformOnObject(e);super._setSVGObject(t,e,i),e.set(r)}}D(Nh,"ownDefaults",{uniformScaling:!0,uniScaleKey:"shiftKey",centeredScaling:!1,centeredRotation:!1,centeredKey:"altKey",altActionKey:"shiftKey",selection:!0,selectionKey:"shiftKey",selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,selectionFullyContained:!1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",notAllowedCursor:"not-allowed",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,stopContextMenu:!1,fireRightClick:!1,fireMiddleClick:!1,enablePointerEvents:!1,containerClass:"canvas-container",preserveObjectStacking:!1});class e6{constructor(t){D(this,"targets",[]),D(this,"__disposer",void 0);const e=()=>{const{hiddenTextarea:r}=t.getActiveObject()||{};r&&r.focus()},i=t.upperCanvasEl;i.addEventListener("click",e),this.__disposer=()=>i.removeEventListener("click",e)}exitTextEditing(){this.target=void 0,this.targets.forEach(t=>{t.isEditing&&t.exitEditing()})}add(t){this.targets.push(t)}remove(t){this.unregister(t),Ps(this.targets,t)}register(t){this.target=t}unregister(t){t===this.target&&(this.target=void 0)}onMouseMove(t){var e;!((e=this.target)===null||e===void 0)&&e.isEditing&&this.target.updateSelectionOnMouseMove(t)}clear(){this.targets=[],this.target=void 0}dispose(){this.clear(),this.__disposer(),delete this.__disposer}}const i6=["target","oldTarget","fireCanvas","e"],$i={passive:!1},go=(n,t)=>{const e=n.getViewportPoint(t),i=n.getScenePoint(t);return{viewportPoint:e,scenePoint:i,pointer:e,absolutePointer:i}},zr=function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return n.addEventListener(...e)},dn=function(n){for(var t=arguments.length,e=new Array(t>1?t-1:0),i=1;i<t;i++)e[i-1]=arguments[i];return n.removeEventListener(...e)},n6={mouse:{in:"over",out:"out",targetIn:"mouseover",targetOut:"mouseout",canvasIn:"mouse:over",canvasOut:"mouse:out"},drag:{in:"enter",out:"leave",targetIn:"dragenter",targetOut:"dragleave",canvasIn:"drag:enter",canvasOut:"drag:leave"}};class Bo extends Nh{constructor(t){super(t,arguments.length>1&&arguments[1]!==void 0?arguments[1]:{}),D(this,"_isClick",void 0),D(this,"textEditingManager",new e6(this)),["_onMouseDown","_onTouchStart","_onMouseMove","_onMouseUp","_onTouchEnd","_onResize","_onMouseWheel","_onMouseOut","_onMouseEnter","_onContextMenu","_onDoubleClick","_onDragStart","_onDragEnd","_onDragProgress","_onDragOver","_onDragEnter","_onDragLeave","_onDrop"].forEach(e=>{this[e]=this[e].bind(this)}),this.addOrRemove(zr,"add")}_getEventPrefix(){return this.enablePointerEvents?"pointer":"mouse"}addOrRemove(t,e){const i=this.upperCanvasEl,r=this._getEventPrefix();t(n_(i),"resize",this._onResize),t(i,r+"down",this._onMouseDown),t(i,"".concat(r,"move"),this._onMouseMove,$i),t(i,"".concat(r,"out"),this._onMouseOut),t(i,"".concat(r,"enter"),this._onMouseEnter),t(i,"wheel",this._onMouseWheel),t(i,"contextmenu",this._onContextMenu),t(i,"dblclick",this._onDoubleClick),t(i,"dragstart",this._onDragStart),t(i,"dragend",this._onDragEnd),t(i,"dragover",this._onDragOver),t(i,"dragenter",this._onDragEnter),t(i,"dragleave",this._onDragLeave),t(i,"drop",this._onDrop),this.enablePointerEvents||t(i,"touchstart",this._onTouchStart,$i)}removeListeners(){this.addOrRemove(dn,"remove");const t=this._getEventPrefix(),e=Tn(this.upperCanvasEl);dn(e,"".concat(t,"up"),this._onMouseUp),dn(e,"touchend",this._onTouchEnd,$i),dn(e,"".concat(t,"move"),this._onMouseMove,$i),dn(e,"touchmove",this._onMouseMove,$i)}_onMouseWheel(t){this.__onMouseWheel(t)}_onMouseOut(t){const e=this._hoveredTarget,i=L({e:t},go(this,t));this.fire("mouse:out",L(L({},i),{},{target:e})),this._hoveredTarget=void 0,e&&e.fire("mouseout",L({},i)),this._hoveredTargets.forEach(r=>{this.fire("mouse:out",L(L({},i),{},{target:r})),r&&r.fire("mouseout",L({},i))}),this._hoveredTargets=[]}_onMouseEnter(t){this._currentTransform||this.findTarget(t)||(this.fire("mouse:over",L({e:t},go(this,t))),this._hoveredTarget=void 0,this._hoveredTargets=[])}_onDragStart(t){this._isClick=!1;const e=this.getActiveObject();if(e&&e.onDragStart(t)){this._dragSource=e;const i={e:t,target:e};return this.fire("dragstart",i),e.fire("dragstart",i),void zr(this.upperCanvasEl,"drag",this._onDragProgress)}lf(t)}_renderDragEffects(t,e,i){let r=!1;const s=this._dropTarget;s&&s!==e&&s!==i&&(s.clearContextTop(),r=!0),e==null||e.clearContextTop(),i!==e&&(i==null||i.clearContextTop());const o=this.contextTop;o.save(),o.transform(...this.viewportTransform),e&&(o.save(),e.transform(o),e.renderDragSourceEffect(t),o.restore(),r=!0),i&&(o.save(),i.transform(o),i.renderDropTargetEffect(t),o.restore(),r=!0),o.restore(),r&&(this.contextTopDirty=!0)}_onDragEnd(t){const e=!!t.dataTransfer&&t.dataTransfer.dropEffect!==ki,i=e?this._activeObject:void 0,r={e:t,target:this._dragSource,subTargets:this.targets,dragSource:this._dragSource,didDrop:e,dropTarget:i};dn(this.upperCanvasEl,"drag",this._onDragProgress),this.fire("dragend",r),this._dragSource&&this._dragSource.fire("dragend",r),delete this._dragSource,this._onMouseUp(t)}_onDragProgress(t){const e={e:t,target:this._dragSource,dragSource:this._dragSource,dropTarget:this._draggedoverTarget};this.fire("drag",e),this._dragSource&&this._dragSource.fire("drag",e)}findDragTargets(t){return this.targets=[],{target:this._searchPossibleTargets(this._objects,this.getViewportPoint(t)),targets:[...this.targets]}}_onDragOver(t){const e="dragover",{target:i,targets:r}=this.findDragTargets(t),s=this._dragSource,o={e:t,target:i,subTargets:r,dragSource:s,canDrop:!1,dropTarget:void 0};let l;this.fire(e,o),this._fireEnterLeaveEvents(i,o),i&&(i.canDrop(t)&&(l=i),i.fire(e,o));for(let h=0;h<r.length;h++){const u=r[h];u.canDrop(t)&&(l=u),u.fire(e,o)}this._renderDragEffects(t,s,l),this._dropTarget=l}_onDragEnter(t){const{target:e,targets:i}=this.findDragTargets(t),r={e:t,target:e,subTargets:i,dragSource:this._dragSource};this.fire("dragenter",r),this._fireEnterLeaveEvents(e,r)}_onDragLeave(t){const e={e:t,target:this._draggedoverTarget,subTargets:this.targets,dragSource:this._dragSource};this.fire("dragleave",e),this._fireEnterLeaveEvents(void 0,e),this._renderDragEffects(t,this._dragSource),this._dropTarget=void 0,this.targets=[],this._hoveredTargets=[]}_onDrop(t){const{target:e,targets:i}=this.findDragTargets(t),r=this._basicEventHandler("drop:before",L({e:t,target:e,subTargets:i,dragSource:this._dragSource},go(this,t)));r.didDrop=!1,r.dropTarget=void 0,this._basicEventHandler("drop",r),this.fire("drop:after",r)}_onContextMenu(t){const e=this.findTarget(t),i=this.targets||[],r=this._basicEventHandler("contextmenu:before",{e:t,target:e,subTargets:i});return this.stopContextMenu&&lf(t),this._basicEventHandler("contextmenu",r),!1}_onDoubleClick(t){this._cacheTransformEventData(t),this._handleEvent(t,"dblclick"),this._resetTransformEventData()}getPointerId(t){const e=t.changedTouches;return e?e[0]&&e[0].identifier:this.enablePointerEvents?t.pointerId:-1}_isMainEvent(t){return t.isPrimary===!0||t.isPrimary!==!1&&(t.type==="touchend"&&t.touches.length===0||!t.changedTouches||t.changedTouches[0].identifier===this.mainTouchId)}_onTouchStart(t){t.preventDefault(),this.mainTouchId===void 0&&(this.mainTouchId=this.getPointerId(t)),this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,i=this._getEventPrefix(),r=Tn(e);zr(r,"touchend",this._onTouchEnd,$i),zr(r,"touchmove",this._onMouseMove,$i),dn(e,"".concat(i,"down"),this._onMouseDown)}_onMouseDown(t){this.__onMouseDown(t),this._resetTransformEventData();const e=this.upperCanvasEl,i=this._getEventPrefix();dn(e,"".concat(i,"move"),this._onMouseMove,$i);const r=Tn(e);zr(r,"".concat(i,"up"),this._onMouseUp),zr(r,"".concat(i,"move"),this._onMouseMove,$i)}_onTouchEnd(t){if(t.touches.length>0)return;this.__onMouseUp(t),this._resetTransformEventData(),delete this.mainTouchId;const e=this._getEventPrefix(),i=Tn(this.upperCanvasEl);dn(i,"touchend",this._onTouchEnd,$i),dn(i,"touchmove",this._onMouseMove,$i),this._willAddMouseDown&&clearTimeout(this._willAddMouseDown),this._willAddMouseDown=setTimeout(()=>{zr(this.upperCanvasEl,"".concat(e,"down"),this._onMouseDown),this._willAddMouseDown=0},400)}_onMouseUp(t){this.__onMouseUp(t),this._resetTransformEventData();const e=this.upperCanvasEl,i=this._getEventPrefix();if(this._isMainEvent(t)){const r=Tn(this.upperCanvasEl);dn(r,"".concat(i,"up"),this._onMouseUp),dn(r,"".concat(i,"move"),this._onMouseMove,$i),zr(e,"".concat(i,"move"),this._onMouseMove,$i)}}_onMouseMove(t){const e=this.getActiveObject();!this.allowTouchScrolling&&(!e||!e.shouldStartDragging(t))&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)}_onResize(){this.calcOffset(),this._resetTransformEventData()}_shouldRender(t){const e=this.getActiveObject();return!!e!=!!t||e&&t&&e!==t}__onMouseUp(t){var e;this._cacheTransformEventData(t),this._handleEvent(t,"up:before");const i=this._currentTransform,r=this._isClick,s=this._target,{button:o}=t;if(o)return(this.fireMiddleClick&&o===1||this.fireRightClick&&o===2)&&this._handleEvent(t,"up"),void this._resetTransformEventData();if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);if(!this._isMainEvent(t))return;let l,h,u=!1;if(i&&(this._finalizeCurrentTransform(t),u=i.actionPerformed),!r){const d=s===this._activeObject;this.handleSelection(t),u||(u=this._shouldRender(s)||!d&&s===this._activeObject)}if(s){const d=s.findControl(this.getViewportPoint(t),ih(t)),{key:g,control:p}=d||{};if(h=g,s.selectable&&s!==this._activeObject&&s.activeOn==="up")this.setActiveObject(s,t),u=!0;else if(p){const m=p.getMouseUpHandler(t,s,p);m&&(l=this.getScenePoint(t),m.call(p,t,i,l.x,l.y))}s.isMoving=!1}if(i&&(i.target!==s||i.corner!==h)){const d=i.target&&i.target.controls[i.corner],g=d&&d.getMouseUpHandler(t,i.target,d);l=l||this.getScenePoint(t),g&&g.call(d,t,i,l.x,l.y)}this._setCursorFromEvent(t,s),this._handleEvent(t,"up"),this._groupSelector=null,this._currentTransform=null,s&&(s.__corner=void 0),u?this.requestRenderAll():r||(e=this._activeObject)!==null&&e!==void 0&&e.isEditing||this.renderTop()}_basicEventHandler(t,e){const{target:i,subTargets:r=[]}=e;this.fire(t,e),i&&i.fire(t,e);for(let s=0;s<r.length;s++)r[s]!==i&&r[s].fire(t,e);return e}_handleEvent(t,e){const i=this._target,r=this.targets||[],s=L(L({e:t,target:i,subTargets:r},go(this,t)),{},{transform:this._currentTransform},e==="up:before"||e==="up"?{isClick:this._isClick,currentTarget:this.findTarget(t),currentSubTargets:this.targets}:{});this.fire("mouse:".concat(e),s),i&&i.fire("mouse".concat(e),s);for(let o=0;o<r.length;o++)r[o]!==i&&r[o].fire("mouse".concat(e),s)}_onMouseDownInDrawingMode(t){this._isCurrentlyDrawing=!0,this.getActiveObject()&&(this.discardActiveObject(t),this.requestRenderAll());const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseDown(e,{e:t,pointer:e}),this._handleEvent(t,"down")}_onMouseMoveInDrawingMode(t){if(this._isCurrentlyDrawing){const e=this.getScenePoint(t);this.freeDrawingBrush&&this.freeDrawingBrush.onMouseMove(e,{e:t,pointer:e})}this.setCursor(this.freeDrawingCursor),this._handleEvent(t,"move")}_onMouseUpInDrawingMode(t){const e=this.getScenePoint(t);this.freeDrawingBrush?this._isCurrentlyDrawing=!!this.freeDrawingBrush.onMouseUp({e:t,pointer:e}):this._isCurrentlyDrawing=!1,this._handleEvent(t,"up")}__onMouseDown(t){this._isClick=!0,this._cacheTransformEventData(t),this._handleEvent(t,"down:before");let e=this._target;const{button:i}=t;if(i)return(this.fireMiddleClick&&i===1||this.fireRightClick&&i===2)&&this._handleEvent(t,"down"),void this._resetTransformEventData();if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._isMainEvent(t)||this._currentTransform)return;let r=this._shouldRender(e),s=!1;if(this.handleMultiSelection(t,e)?(e=this._activeObject,s=!0,r=!0):this._shouldClearSelection(t,e)&&this.discardActiveObject(t),this.selection&&(!e||!e.selectable&&!e.isEditing&&e!==this._activeObject)){const o=this.getScenePoint(t);this._groupSelector={x:o.x,y:o.y,deltaY:0,deltaX:0}}if(e){const o=e===this._activeObject;e.selectable&&e.activeOn==="down"&&this.setActiveObject(e,t);const l=e.findControl(this.getViewportPoint(t),ih(t));if(e===this._activeObject&&(l||!s)){this._setupCurrentTransform(t,e,o);const h=l?l.control:void 0,u=this.getScenePoint(t),d=h&&h.getMouseDownHandler(t,e,h);d&&d.call(h,t,this._currentTransform,u.x,u.y)}}r&&(this._objectsToRender=void 0),this._handleEvent(t,"down"),r&&this.requestRenderAll()}_resetTransformEventData(){this._target=void 0,this._pointer=void 0,this._absolutePointer=void 0}_cacheTransformEventData(t){this._resetTransformEventData(),this._pointer=this.getViewportPoint(t),this._absolutePointer=br(this._pointer,void 0,this.viewportTransform),this._target=this._currentTransform?this._currentTransform.target:this.findTarget(t)}__onMouseMove(t){if(this._isClick=!1,this._cacheTransformEventData(t),this._handleEvent(t,"move:before"),this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!this._isMainEvent(t))return;const e=this._groupSelector;if(e){const i=this.getScenePoint(t);e.deltaX=i.x-e.x,e.deltaY=i.y-e.y,this.renderTop()}else if(this._currentTransform)this._transformObject(t);else{const i=this.findTarget(t);this._setCursorFromEvent(t,i),this._fireOverOutEvents(t,i)}this.textEditingManager.onMouseMove(t),this._handleEvent(t,"move"),this._resetTransformEventData()}_fireOverOutEvents(t,e){const i=this._hoveredTarget,r=this._hoveredTargets,s=this.targets,o=Math.max(r.length,s.length);this.fireSyntheticInOutEvents("mouse",{e:t,target:e,oldTarget:i,fireCanvas:!0});for(let l=0;l<o;l++)this.fireSyntheticInOutEvents("mouse",{e:t,target:s[l],oldTarget:r[l]});this._hoveredTarget=e,this._hoveredTargets=this.targets.concat()}_fireEnterLeaveEvents(t,e){const i=this._draggedoverTarget,r=this._hoveredTargets,s=this.targets,o=Math.max(r.length,s.length);this.fireSyntheticInOutEvents("drag",L(L({},e),{},{target:t,oldTarget:i,fireCanvas:!0}));for(let l=0;l<o;l++)this.fireSyntheticInOutEvents("drag",L(L({},e),{},{target:s[l],oldTarget:r[l]}));this._draggedoverTarget=t}fireSyntheticInOutEvents(t,e){let{target:i,oldTarget:r,fireCanvas:s,e:o}=e,l=Ae(e,i6);const{targetIn:h,targetOut:u,canvasIn:d,canvasOut:g}=n6[t],p=r!==i;if(r&&p){const m=L(L({},l),{},{e:o,target:r,nextTarget:i},go(this,o));s&&this.fire(g,m),r.fire(u,m)}if(i&&p){const m=L(L({},l),{},{e:o,target:i,previousTarget:r},go(this,o));s&&this.fire(d,m),i.fire(h,m)}}__onMouseWheel(t){this._cacheTransformEventData(t),this._handleEvent(t,"wheel"),this._resetTransformEventData()}_transformObject(t){const e=this.getScenePoint(t),i=this._currentTransform,r=i.target,s=r.group?br(e,void 0,r.group.calcTransformMatrix()):e;i.shiftKey=t.shiftKey,i.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,i,s),i.actionPerformed&&this.requestRenderAll()}_performTransformAction(t,e,i){const{action:r,actionHandler:s,target:o}=e,l=!!s&&s(t,e,i.x,i.y);l&&o.setCoords(),r==="drag"&&l&&(e.target.isMoving=!0,this.setCursor(e.target.moveCursor||this.moveCursor)),e.actionPerformed=e.actionPerformed||l}_setCursorFromEvent(t,e){if(!e)return void this.setCursor(this.defaultCursor);let i=e.hoverCursor||this.hoverCursor;const r=Os(this._activeObject)?this._activeObject:null,s=(!r||e.group!==r)&&e.findControl(this.getViewportPoint(t));if(s){const o=s.control;this.setCursor(o.cursorStyleHandler(t,o,e))}else e.subTargetCheck&&this.targets.concat().reverse().map(o=>{i=o.hoverCursor||i}),this.setCursor(i)}handleMultiSelection(t,e){const i=this._activeObject,r=Os(i);if(i&&this._isSelectionKeyPressed(t)&&this.selection&&e&&e.selectable&&(i!==e||r)&&(r||!e.isDescendantOf(i)&&!i.isDescendantOf(e))&&!e.onSelect({e:t})&&!i.getActiveControl()){if(r){const s=i.getObjects();if(e===i){const o=this.getViewportPoint(t);if(!(e=this.searchPossibleTargets(s,o)||this.searchPossibleTargets(this._objects,o))||!e.selectable)return!1}e.group===i?(i.remove(e),this._hoveredTarget=e,this._hoveredTargets=[...this.targets],i.size()===1&&this._setActiveObject(i.item(0),t)):(i.multiSelectAdd(e),this._hoveredTarget=i,this._hoveredTargets=[...this.targets]),this._fireSelectionEvents(s,t)}else{i.exitEditing&&i.exitEditing();const s=new(ht.getClass("ActiveSelection"))([],{canvas:this});s.multiSelectAdd(i,e),this._hoveredTarget=s,this._setActiveObject(s,t),this._fireSelectionEvents([i],t)}return!0}return!1}handleSelection(t){if(!this.selection||!this._groupSelector)return!1;const{x:e,y:i,deltaX:r,deltaY:s}=this._groupSelector,o=new I(e,i),l=o.add(new I(r,s)),h=o.min(l),u=o.max(l).subtract(h),d=this.collectObjects({left:h.x,top:h.y,width:u.x,height:u.y},{includeIntersecting:!this.selectionFullyContained}),g=o.eq(l)?d[0]?[d[0]]:[]:d.length>1?d.filter(p=>!p.onSelect({e:t})).reverse():d;if(g.length===1)this.setActiveObject(g[0],t);else if(g.length>1){const p=ht.getClass("ActiveSelection");this.setActiveObject(new p(g,{canvas:this}),t)}return this._groupSelector=null,!0}clear(){this.textEditingManager.clear(),super.clear()}destroy(){this.removeListeners(),this.textEditingManager.dispose(),super.destroy()}}const ib={x1:0,y1:0,x2:0,y2:0},r6=L(L({},ib),{},{r1:0,r2:0}),xo=(n,t)=>isNaN(n)&&typeof t=="number"?t:n,s6=/^(\d+\.\d+)%|(\d+)%$/;function nb(n){return n&&s6.test(n)}function rb(n,t){const e=typeof n=="number"?n:typeof n=="string"?parseFloat(n)/(nb(n)?100:1):NaN;return zs(0,xo(e,t),1)}const o6=/\s*;\s*/,a6=/\s*:\s*/;function l6(n,t){let e,i;const r=n.getAttribute("style");if(r){const o=r.split(o6);o[o.length-1]===""&&o.pop();for(let l=o.length;l--;){const[h,u]=o[l].split(a6).map(d=>d.trim());h==="stop-color"?e=u:h==="stop-opacity"&&(i=u)}}const s=new se(e||n.getAttribute("stop-color")||"rgb(0,0,0)");return{offset:rb(n.getAttribute("offset"),0),color:s.toRgb(),opacity:xo(parseFloat(i||n.getAttribute("stop-opacity")||""),1)*s.getAlpha()*t}}function c6(n,t){const e=[],i=n.getElementsByTagName("stop"),r=rb(t,1);for(let s=i.length;s--;)e.push(l6(i[s],r));return e}function sb(n){return n.nodeName==="linearGradient"||n.nodeName==="LINEARGRADIENT"?"linear":"radial"}function ob(n){return n.getAttribute("gradientUnits")==="userSpaceOnUse"?"pixels":"percentage"}function xn(n,t){return n.getAttribute(t)}function h6(n,t){return function(e,i){let r,{width:s,height:o,gradientUnits:l}=i;return Object.keys(e).reduce((h,u)=>{const d=e[u];return d==="Infinity"?r=1:d==="-Infinity"?r=0:(r=typeof d=="string"?parseFloat(d):d,typeof d=="string"&&nb(d)&&(r*=.01,l==="pixels"&&(u!=="x1"&&u!=="x2"&&u!=="r2"||(r*=s),u!=="y1"&&u!=="y2"||(r*=o)))),h[u]=r,h},{})}(sb(n)==="linear"?function(e){return{x1:xn(e,"x1")||0,y1:xn(e,"y1")||0,x2:xn(e,"x2")||"100%",y2:xn(e,"y2")||0}}(n):function(e){return{x1:xn(e,"fx")||xn(e,"cx")||"50%",y1:xn(e,"fy")||xn(e,"cy")||"50%",r1:0,x2:xn(e,"cx")||"50%",y2:xn(e,"cy")||"50%",r2:xn(e,"r")||"50%"}}(n),L(L({},t),{},{gradientUnits:ob(n)}))}class Co{constructor(t){const{type:e="linear",gradientUnits:i="pixels",coords:r={},colorStops:s=[],offsetX:o=0,offsetY:l=0,gradientTransform:h,id:u}=t||{};Object.assign(this,{type:e,gradientUnits:i,coords:L(L({},e==="radial"?r6:ib),r),colorStops:s,offsetX:o,offsetY:l,gradientTransform:h,id:u?"".concat(u,"_").concat(ts()):ts()})}addColorStop(t){for(const e in t){const i=new se(t[e]);this.colorStops.push({offset:parseFloat(e),color:i.toRgb(),opacity:i.getAlpha()})}return this}toObject(t){return L(L({},Hs(this,t)),{},{type:this.type,coords:L({},this.coords),colorStops:this.colorStops.map(e=>L({},e)),offsetX:this.offsetX,offsetY:this.offsetY,gradientUnits:this.gradientUnits,gradientTransform:this.gradientTransform?[...this.gradientTransform]:void 0})}toSVG(t){let{additionalTransform:e}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const i=[],r=this.gradientTransform?this.gradientTransform.concat():fi.concat(),s=this.gradientUnits==="pixels"?"userSpaceOnUse":"objectBoundingBox",o=this.colorStops.map(g=>L({},g)).sort((g,p)=>g.offset-p.offset);let l=-this.offsetX,h=-this.offsetY;var u;s==="objectBoundingBox"?(l/=t.width,h/=t.height):(l+=t.width/2,h+=t.height/2),(u=t)&&typeof u._renderPathCommands=="function"&&this.gradientUnits!=="percentage"&&(l-=t.pathOffset.x,h-=t.pathOffset.y),r[4]-=l,r[5]-=h;const d=['id="SVGID_'.concat(this.id,'"'),'gradientUnits="'.concat(s,'"'),'gradientTransform="'.concat(e?e+" ":"").concat(ol(r),'"'),""].join(" ");if(this.type==="linear"){const{x1:g,y1:p,x2:m,y2:y}=this.coords;i.push("<linearGradient ",d,' x1="',g,'" y1="',p,'" x2="',m,'" y2="',y,`">
`)}else if(this.type==="radial"){const{x1:g,y1:p,x2:m,y2:y,r1:_,r2:C}=this.coords,b=_>C;i.push("<radialGradient ",d,' cx="',b?g:m,'" cy="',b?p:y,'" r="',b?_:C,'" fx="',b?m:g,'" fy="',b?y:p,`">
`),b&&(o.reverse(),o.forEach(T=>{T.offset=1-T.offset}));const x=Math.min(_,C);if(x>0){const T=x/Math.max(_,C);o.forEach(O=>{O.offset+=T*(1-O.offset)})}}return o.forEach(g=>{let{color:p,offset:m,opacity:y}=g;i.push("<stop ",'offset="',100*m+"%",'" style="stop-color:',p,y!==void 0?";stop-opacity: "+y:";",`"/>
`)}),i.push(this.type==="linear"?"</linearGradient>":"</radialGradient>",`
`),i.join("")}toLive(t){const{x1:e,y1:i,x2:r,y2:s,r1:o,r2:l}=this.coords,h=this.type==="linear"?t.createLinearGradient(e,i,r,s):t.createRadialGradient(e,i,o,r,s,l);return this.colorStops.forEach(u=>{let{color:d,opacity:g,offset:p}=u;h.addColorStop(p,g!==void 0?new se(d).setAlpha(g).toRgba():d)}),h}static async fromObject(t){const{colorStops:e,gradientTransform:i}=t;return new this(L(L({},t),{},{colorStops:e?e.map(r=>L({},r)):void 0,gradientTransform:i?[...i]:void 0}))}static fromElement(t,e,i){const r=ob(t),s=e._findCenterFromElement();return new this(L({id:t.getAttribute("id")||void 0,type:sb(t),coords:h6(t,{width:i.viewBoxWidth||i.width,height:i.viewBoxHeight||i.height}),colorStops:c6(t,i.opacity),gradientUnits:r,gradientTransform:ll(t.getAttribute("gradientTransform")||"")},r==="pixels"?{offsetX:e.width/2-s.x,offsetY:e.height/2-s.y}:{offsetX:0,offsetY:0}))}}D(Co,"type","Gradient"),ht.setClass(Co,"gradient"),ht.setClass(Co,"linear"),ht.setClass(Co,"radial");const u6=["type","source","patternTransform"];class Wa{get type(){return"pattern"}set type(t){Sr("warn","Setting type has no effect",t)}constructor(t){D(this,"repeat","repeat"),D(this,"offsetX",0),D(this,"offsetY",0),D(this,"crossOrigin",""),this.id=ts(),Object.assign(this,t)}isImageSource(){return!!this.source&&typeof this.source.src=="string"}isCanvasSource(){return!!this.source&&!!this.source.toDataURL}sourceToString(){return this.isImageSource()?this.source.src:this.isCanvasSource()?this.source.toDataURL():""}toLive(t){return this.source&&(!this.isImageSource()||this.source.complete&&this.source.naturalWidth!==0&&this.source.naturalHeight!==0)?t.createPattern(this.source,this.repeat):null}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const{repeat:e,crossOrigin:i}=this;return L(L({},Hs(this,t)),{},{type:"pattern",source:this.sourceToString(),repeat:e,crossOrigin:i,offsetX:Ee(this.offsetX,Kt.NUM_FRACTION_DIGITS),offsetY:Ee(this.offsetY,Kt.NUM_FRACTION_DIGITS),patternTransform:this.patternTransform?[...this.patternTransform]:null})}toSVG(t){let{width:e,height:i}=t;const{source:r,repeat:s,id:o}=this,l=xo(this.offsetX/e,0),h=xo(this.offsetY/i,0),u=s==="repeat-y"||s==="no-repeat"?1+Math.abs(l||0):xo(r.width/e,0),d=s==="repeat-x"||s==="no-repeat"?1+Math.abs(h||0):xo(r.height/i,0);return['<pattern id="SVGID_'.concat(o,'" x="').concat(l,'" y="').concat(h,'" width="').concat(u,'" height="').concat(d,'">'),'<image x="0" y="0" width="'.concat(r.width,'" height="').concat(r.height,'" xlink:href="').concat(this.sourceToString(),'"></image>'),"</pattern>",""].join(`
`)}static async fromObject(t,e){let{type:i,source:r,patternTransform:s}=t,o=Ae(t,u6);const l=await Na(r,L(L({},e),{},{crossOrigin:o.crossOrigin}));return new this(L(L({},o),{},{patternTransform:s&&s.slice(0),source:l}))}}D(Wa,"type","Pattern"),ht.setClass(Wa),ht.setClass(Wa,"pattern");class Wh{constructor(t){D(this,"color","rgb(0, 0, 0)"),D(this,"width",1),D(this,"shadow",null),D(this,"strokeLineCap","round"),D(this,"strokeLineJoin","round"),D(this,"strokeMiterLimit",10),D(this,"strokeDashArray",null),D(this,"limitedToCanvasSize",!1),this.canvas=t}_setBrushStyles(t){t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.miterLimit=this.strokeMiterLimit,t.lineJoin=this.strokeLineJoin,t.setLineDash(this.strokeDashArray||[])}_saveAndTransform(t){const e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}needsFullRender(){return new se(this.color).getAlpha()<1||!!this.shadow}_setShadow(){if(!this.shadow||!this.canvas)return;const t=this.canvas,e=this.shadow,i=t.contextTop,r=t.getZoom()*t.getRetinaScaling();i.shadowColor=e.color,i.shadowBlur=e.blur*r,i.shadowOffsetX=e.offsetX*r,i.shadowOffsetY=e.offsetY*r}_resetShadow(){const t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}_isOutSideCanvas(t){return t.x<0||t.x>this.canvas.getWidth()||t.y<0||t.y>this.canvas.getHeight()}}const d6=["path","left","top"],f6=["d"];class Wn extends pe{constructor(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},{path:i,left:r,top:s}=e,o=Ae(e,d6);super(),Object.assign(this,Wn.ownDefaults),this.setOptions(o),this._setPath(t||[],!0),typeof r=="number"&&this.set(he,r),typeof s=="number"&&this.set(Hi,s)}_setPath(t,e){this.path=U_(Array.isArray(t)?t:J_(t)),this.setBoundingBox(e)}_findCenterFromElement(){const t=this._calcBoundsFromPath();return new I(t.left+t.width/2,t.top+t.height/2)}_renderPathCommands(t){const e=-this.pathOffset.x,i=-this.pathOffset.y;t.beginPath();for(const r of this.path)switch(r[0]){case"L":t.lineTo(r[1]+e,r[2]+i);break;case"M":t.moveTo(r[1]+e,r[2]+i);break;case"C":t.bezierCurveTo(r[1]+e,r[2]+i,r[3]+e,r[4]+i,r[5]+e,r[6]+i);break;case"Q":t.quadraticCurveTo(r[1]+e,r[2]+i,r[3]+e,r[4]+i);break;case"Z":t.closePath()}}_render(t){this._renderPathCommands(t),this._renderPaintInOrder(t)}toString(){return"#<Path (".concat(this.complexity(),'): { "top": ').concat(this.top,', "left": ').concat(this.left," }>")}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L(L({},super.toObject(t)),{},{path:this.path.map(e=>e.slice())})}toDatalessObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=this.toObject(t);return this.sourcePath&&(delete e.path,e.sourcePath=this.sourcePath),e}_toSVG(){const t=Tg(this.path,Kt.NUM_FRACTION_DIGITS);return["<path ","COMMON_PARTS",'d="'.concat(t,`" stroke-linecap="round" />
`)]}_getOffsetTransform(){const t=Kt.NUM_FRACTION_DIGITS;return" translate(".concat(Ee(-this.pathOffset.x,t),", ").concat(Ee(-this.pathOffset.y,t),")")}toClipPathSVG(t){const e=this._getOffsetTransform();return"	"+this._createBaseClipPathSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}toSVG(t){const e=this._getOffsetTransform();return this._createBaseSVGMarkup(this._toSVG(),{reviver:t,additionalTransform:e})}complexity(){return this.path.length}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{width:e,height:i,pathOffset:r}=this._calcDimensions();this.set({width:e,height:i,pathOffset:r}),t&&this.setPositionByOrigin(r,Lt,Lt)}_calcBoundsFromPath(){const t=[];let e=0,i=0,r=0,s=0;for(const o of this.path)switch(o[0]){case"L":r=o[1],s=o[2],t.push({x:e,y:i},{x:r,y:s});break;case"M":r=o[1],s=o[2],e=r,i=s;break;case"C":t.push(...yf(r,s,o[1],o[2],o[3],o[4],o[5],o[6])),r=o[5],s=o[6];break;case"Q":t.push(...yf(r,s,o[1],o[2],o[1],o[2],o[3],o[4])),r=o[3],s=o[4];break;case"Z":r=e,s=i}return tr(t)}_calcDimensions(){const t=this._calcBoundsFromPath();return L(L({},t),{},{pathOffset:new I(t.left+t.width/2,t.top+t.height/2)})}static fromObject(t){return this._fromObject(t,{extraParam:"path"})}static async fromElement(t,e,i){const r=ir(t,this.ATTRIBUTE_NAMES,i),{d:s}=r;return new this(s,L(L(L({},Ae(r,f6)),e),{},{left:void 0,top:void 0}))}}D(Wn,"type","Path"),D(Wn,"cacheProperties",[...Or,"path","fillRule"]),D(Wn,"ATTRIBUTE_NAMES",[...cs,"d"]),ht.setClass(Wn),ht.setSVGClass(Wn);class cl extends Wh{constructor(t){super(t),D(this,"decimate",.4),D(this,"drawStraightLine",!1),D(this,"straightLineKey","shiftKey"),this._points=[],this._hasStraightLine=!1}needsFullRender(){return super.needsFullRender()||this._hasStraightLine}static drawSegment(t,e,i){const r=e.midPointFrom(i);return t.quadraticCurveTo(e.x,e.y,r.x,r.y),r}onMouseDown(t,e){let{e:i}=e;this.canvas._isMainEvent(i)&&(this.drawStraightLine=!!this.straightLineKey&&i[this.straightLineKey],this._prepareForDrawing(t),this._addPoint(t),this._render())}onMouseMove(t,e){let{e:i}=e;if(this.canvas._isMainEvent(i)&&(this.drawStraightLine=!!this.straightLineKey&&i[this.straightLineKey],(this.limitedToCanvasSize!==!0||!this._isOutSideCanvas(t))&&this._addPoint(t)&&this._points.length>1))if(this.needsFullRender())this.canvas.clearContext(this.canvas.contextTop),this._render();else{const r=this._points,s=r.length,o=this.canvas.contextTop;this._saveAndTransform(o),this.oldEnd&&(o.beginPath(),o.moveTo(this.oldEnd.x,this.oldEnd.y)),this.oldEnd=cl.drawSegment(o,r[s-2],r[s-1]),o.stroke(),o.restore()}}onMouseUp(t){let{e}=t;return!this.canvas._isMainEvent(e)||(this.drawStraightLine=!1,this.oldEnd=void 0,this._finalizeAndAddPath(),!1)}_prepareForDrawing(t){this._reset(),this._addPoint(t),this.canvas.contextTop.moveTo(t.x,t.y)}_addPoint(t){return!(this._points.length>1&&t.eq(this._points[this._points.length-1]))&&(this.drawStraightLine&&this._points.length>1&&(this._hasStraightLine=!0,this._points.pop()),this._points.push(t),!0)}_reset(){this._points=[],this._setBrushStyles(this.canvas.contextTop),this._setShadow(),this._hasStraightLine=!1}_render(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.canvas.contextTop,e=this._points[0],i=this._points[1];if(this._saveAndTransform(t),t.beginPath(),this._points.length===2&&e.x===i.x&&e.y===i.y){const r=this.width/1e3;e.x-=r,i.x+=r}t.moveTo(e.x,e.y);for(let r=1;r<this._points.length;r++)cl.drawSegment(t,e,i),e=this._points[r],i=this._points[r+1];t.lineTo(e.x,e.y),t.stroke(),t.restore()}convertPointsToSVGPath(t){const e=this.width/1e3;return Q_(t,e)}createPath(t){const e=new Wn(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeMiterLimit:this.strokeMiterLimit,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray});return this.shadow&&(this.shadow.affectStroke=!0,e.shadow=new Qi(this.shadow)),e}decimatePoints(t,e){if(t.length<=2)return t;let i,r=t[0];const s=this.canvas.getZoom(),o=Math.pow(e/s,2),l=t.length-1,h=[r];for(let u=1;u<l-1;u++)i=Math.pow(r.x-t[u].x,2)+Math.pow(r.y-t[u].y,2),i>=o&&(r=t[u],h.push(r));return h.push(t[l]),h}_finalizeAndAddPath(){this.canvas.contextTop.closePath(),this.decimate&&(this._points=this.decimatePoints(this._points,this.decimate));const t=this.convertPointsToSVGPath(this._points);if(function(i){return Tg(i)==="M 0 0 Q 0 0 0 0 L 0 0"}(t))return void this.canvas.requestRenderAll();const e=this.createPath(t);this.canvas.clearContext(this.canvas.contextTop),this.canvas.fire("before:path:created",{path:e}),this.canvas.add(e),this.canvas.requestRenderAll(),e.setCoords(),this._resetShadow(),this.canvas.fire("path:created",{path:e})}}const g6=["left","top","radius"],ab=["radius","startAngle","endAngle","counterClockwise"];class Sn extends pe{static getDefaults(){return L(L({},super.getDefaults()),Sn.ownDefaults)}constructor(t){super(),Object.assign(this,Sn.ownDefaults),this.setOptions(t)}_set(t,e){return super._set(t,e),t==="radius"&&this.setRadius(e),this}_render(t){t.beginPath(),t.arc(0,0,this.radius,Be(this.startAngle),Be(this.endAngle),this.counterClockwise),this._renderPaintInOrder(t)}getRadiusX(){return this.get("radius")*this.get(Ii)}getRadiusY(){return this.get("radius")*this.get(tn)}setRadius(t){this.radius=t,this.set({width:2*t,height:2*t})}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...ab,...t])}_toSVG(){const t=(this.endAngle-this.startAngle)%360;if(t===0)return["<circle ","COMMON_PARTS",'cx="0" cy="0" ','r="',"".concat(this.radius),`" />
`];{const{radius:e}=this,i=Be(this.startAngle),r=Be(this.endAngle),s=In(i)*e,o=Rn(i)*e,l=In(r)*e,h=Rn(r)*e,u=t>180?1:0,d=this.counterClockwise?0:1;return['<path d="M '.concat(s," ").concat(o," A ").concat(e," ").concat(e," 0 ").concat(u," ").concat(d," ").concat(l," ").concat(h,'" '),"COMMON_PARTS",` />
`]}}static async fromElement(t,e,i){const r=ir(t,this.ATTRIBUTE_NAMES,i),{left:s=0,top:o=0,radius:l=0}=r;return new this(L(L({},Ae(r,g6)),{},{radius:l,left:s-l,top:o-l}))}static fromObject(t){return super._fromObject(t)}}D(Sn,"type","Circle"),D(Sn,"cacheProperties",[...Or,...ab]),D(Sn,"ownDefaults",{radius:0,startAngle:0,endAngle:360,counterClockwise:!1}),D(Sn,"ATTRIBUTE_NAMES",["cx","cy","r",...cs]),ht.setClass(Sn),ht.setSVGClass(Sn);class p6 extends Wh{constructor(t){super(t),D(this,"width",10),this.points=[]}drawDot(t){const e=this.addPoint(t),i=this.canvas.contextTop;this._saveAndTransform(i),this.dot(i,e),i.restore()}dot(t,e){t.fillStyle=e.fill,t.beginPath(),t.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),t.closePath(),t.fill()}onMouseDown(t){this.points=[],this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)}_render(){const t=this.canvas.contextTop,e=this.points;this._saveAndTransform(t);for(let i=0;i<e.length;i++)this.dot(t,e[i]);t.restore()}onMouseMove(t){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(t)||(this.needsFullRender()?(this.canvas.clearContext(this.canvas.contextTop),this.addPoint(t),this._render()):this.drawDot(t))}onMouseUp(){const t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;const e=[];for(let r=0;r<this.points.length;r++){const s=this.points[r],o=new Sn({radius:s.radius,left:s.x,top:s.y,originX:Lt,originY:Lt,fill:s.fill});this.shadow&&(o.shadow=new Qi(this.shadow)),e.push(o)}const i=new Di(e,{canvas:this.canvas});this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.fire("path:created",{path:i}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()}addPoint(t){let{x:e,y:i}=t;const r={x:e,y:i,radius:Ms(Math.max(0,this.width-20),this.width+20)/2,fill:new se(this.color).setAlpha(Ms(0,100)/100).toRgba()};return this.points.push(r),r}}class m6 extends Wh{constructor(t){super(t),D(this,"width",10),D(this,"density",20),D(this,"dotWidth",1),D(this,"dotWidthVariance",1),D(this,"randomOpacity",!1),D(this,"optimizeOverlapping",!0),this.sprayChunks=[],this.sprayChunk=[]}onMouseDown(t){this.sprayChunks=[],this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.renderChunck(this.sprayChunk)}onMouseMove(t){this.limitedToCanvasSize===!0&&this._isOutSideCanvas(t)||(this.addSprayChunk(t),this.renderChunck(this.sprayChunk))}onMouseUp(){const t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;const e=[];for(let r=0;r<this.sprayChunks.length;r++){const s=this.sprayChunks[r];for(let o=0;o<s.length;o++){const l=s[o],h=new yi({width:l.width,height:l.width,left:l.x+1,top:l.y+1,originX:Lt,originY:Lt,fill:this.color});e.push(h)}}const i=new Di(this.optimizeOverlapping?function(r){const s={},o=[];for(let l,h=0;h<r.length;h++)l="".concat(r[h].left).concat(r[h].top),s[l]||(s[l]=!0,o.push(r[h]));return o}(e):e,{objectCaching:!0,subTargetCheck:!1,interactive:!1});this.shadow&&i.set("shadow",new Qi(this.shadow)),this.canvas.fire("before:path:created",{path:i}),this.canvas.add(i),this.canvas.fire("path:created",{path:i}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.requestRenderAll()}renderChunck(t){const e=this.canvas.contextTop;e.fillStyle=this.color,this._saveAndTransform(e);for(let i=0;i<t.length;i++){const r=t[i];e.globalAlpha=r.opacity,e.fillRect(r.x,r.y,r.width,r.width)}e.restore()}_render(){const t=this.canvas.contextTop;t.fillStyle=this.color,this._saveAndTransform(t);for(let e=0;e<this.sprayChunks.length;e++)this.renderChunck(this.sprayChunks[e]);t.restore()}addSprayChunk(t){this.sprayChunk=[];const e=this.width/2;for(let i=0;i<this.density;i++)this.sprayChunk.push({x:Ms(t.x-e,t.x+e),y:Ms(t.y-e,t.y+e),width:this.dotWidthVariance?Ms(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth,opacity:this.randomOpacity?Ms(0,100)/100:1});this.sprayChunks.push(this.sprayChunk)}}class v6 extends cl{constructor(t){super(t)}getPatternSrc(){const t=Me(),e=t.getContext("2d");return t.width=t.height=25,e&&(e.fillStyle=this.color,e.beginPath(),e.arc(10,10,10,0,2*Math.PI,!1),e.closePath(),e.fill()),t}getPattern(t){return t.createPattern(this.source||this.getPatternSrc(),"repeat")}_setBrushStyles(t){super._setBrushStyles(t);const e=this.getPattern(t);e&&(t.strokeStyle=e)}createPath(t){const e=super.createPath(t),i=e._getLeftTopCoords().scalarAdd(e.strokeWidth/2);return e.stroke=new Wa({source:this.source||this.getPatternSrc(),offsetX:-i.x,offsetY:-i.y}),e}}const y6=["x1","y1","x2","y2"],_6=["x1","y1","x2","y2"],_f=["x1","x2","y1","y2"];class Wr extends pe{constructor(){let[t,e,i,r]=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[0,0,0,0],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Wr.ownDefaults),this.setOptions(s),this.x1=t,this.x2=i,this.y1=e,this.y2=r,this._setWidthHeight();const{left:o,top:l}=s;typeof o=="number"&&this.set(he,o),typeof l=="number"&&this.set(Hi,l)}_setWidthHeight(){const{x1:t,y1:e,x2:i,y2:r}=this;this.width=Math.abs(i-t),this.height=Math.abs(r-e);const{left:s,top:o,width:l,height:h}=tr([{x:t,y:e},{x:i,y:r}]),u=new I(s+l/2,o+h/2);this.setPositionByOrigin(u,Lt,Lt)}_set(t,e){return super._set(t,e),_f.includes(t)&&this._setWidthHeight(),this}_render(t){t.beginPath();const e=this.calcLinePoints();t.moveTo(e.x1,e.y1),t.lineTo(e.x2,e.y2),t.lineWidth=this.strokeWidth;const i=t.strokeStyle;var r;pn(this.stroke)?t.strokeStyle=this.stroke.toLive(t):t.strokeStyle=(r=this.stroke)!==null&&r!==void 0?r:t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=i}_findCenterFromElement(){return new I((this.x1+this.x2)/2,(this.y1+this.y2)/2)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L(L({},super.toObject(t)),this.calcLinePoints())}_getNonTransformedDimensions(){const t=super._getNonTransformedDimensions();return this.strokeLineCap==="butt"&&(this.width===0&&(t.y-=this.strokeWidth),this.height===0&&(t.x-=this.strokeWidth)),t}calcLinePoints(){const{x1:t,x2:e,y1:i,y2:r,width:s,height:o}=this,l=t<=e?-1:1,h=i<=r?-1:1;return{x1:l*s/2,x2:l*-s/2,y1:h*o/2,y2:h*-o/2}}_toSVG(){const{x1:t,x2:e,y1:i,y2:r}=this.calcLinePoints();return["<line ","COMMON_PARTS",'x1="'.concat(t,'" y1="').concat(i,'" x2="').concat(e,'" y2="').concat(r,`" />
`)]}static async fromElement(t,e,i){const r=ir(t,this.ATTRIBUTE_NAMES,i),{x1:s=0,y1:o=0,x2:l=0,y2:h=0}=r;return new this([s,o,l,h],Ae(r,y6))}static fromObject(t){let{x1:e,y1:i,x2:r,y2:s}=t,o=Ae(t,_6);return this._fromObject(L(L({},o),{},{points:[e,i,r,s]}),{extraParam:"points"})}}D(Wr,"type","Line"),D(Wr,"cacheProperties",[...Or,..._f]),D(Wr,"ATTRIBUTE_NAMES",cs.concat(_f)),ht.setClass(Wr),ht.setSVGClass(Wr);class Ur extends pe{static getDefaults(){return L(L({},super.getDefaults()),Ur.ownDefaults)}constructor(t){super(),Object.assign(this,Ur.ownDefaults),this.setOptions(t)}_render(t){const e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,i),t.lineTo(0,-i),t.lineTo(e,i),t.closePath(),this._renderPaintInOrder(t)}_toSVG(){const t=this.width/2,e=this.height/2;return["<polygon ","COMMON_PARTS",'points="',"".concat(-t," ").concat(e,",0 ").concat(-e,",").concat(t," ").concat(e),'" />']}}D(Ur,"type","Triangle"),D(Ur,"ownDefaults",{width:100,height:100}),ht.setClass(Ur),ht.setSVGClass(Ur);const lb=["rx","ry"];class Nn extends pe{static getDefaults(){return L(L({},super.getDefaults()),Nn.ownDefaults)}constructor(t){super(),Object.assign(this,Nn.ownDefaults),this.setOptions(t)}_set(t,e){switch(super._set(t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this}getRx(){return this.get("rx")*this.get(Ii)}getRy(){return this.get("ry")*this.get(tn)}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject([...lb,...t])}_toSVG(){return["<ellipse ","COMMON_PARTS",'cx="0" cy="0" rx="'.concat(this.rx,'" ry="').concat(this.ry,`" />
`)]}_render(t){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(0,0,this.rx,0,Tr,!1),t.restore(),this._renderPaintInOrder(t)}static async fromElement(t,e,i){const r=ir(t,this.ATTRIBUTE_NAMES,i);return r.left=(r.left||0)-r.rx,r.top=(r.top||0)-r.ry,new this(r)}}function cb(n){if(!n)return[];const t=n.replace(/,/g," ").trim().split(/\s+/),e=[];for(let i=0;i<t.length;i+=2)e.push({x:parseFloat(t[i]),y:parseFloat(t[i+1])});return e}D(Nn,"type","Ellipse"),D(Nn,"cacheProperties",[...Or,...lb]),D(Nn,"ownDefaults",{rx:0,ry:0}),D(Nn,"ATTRIBUTE_NAMES",[...cs,"cx","cy","rx","ry"]),ht.setClass(Nn),ht.setSVGClass(Nn);const b6=["left","top"],hb={exactBoundingBox:!1};class gn extends pe{static getDefaults(){return L(L({},super.getDefaults()),gn.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),D(this,"strokeDiff",void 0),Object.assign(this,gn.ownDefaults),this.setOptions(e),this.points=t;const{left:i,top:r}=e;this.initialized=!0,this.setBoundingBox(!0),typeof i=="number"&&this.set(he,i),typeof r=="number"&&this.set(Hi,r)}isOpen(){return!0}_projectStrokeOnPoints(t){return R_(this.points,t,this.isOpen())}_calcDimensions(t){t=L({scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:this.strokeMiterLimit,strokeUniform:this.strokeUniform,strokeWidth:this.strokeWidth},t||{});const e=this.exactBoundingBox?this._projectStrokeOnPoints(t).map(u=>u.projectedPoint):this.points;if(e.length===0)return{left:0,top:0,width:0,height:0,pathOffset:new I,strokeOffset:new I,strokeDiff:new I};const i=tr(e),r=bl(L(L({},t),{},{scaleX:1,scaleY:1})),s=tr(this.points.map(u=>mi(u,r,!0))),o=new I(this.scaleX,this.scaleY);let l=i.left+i.width/2,h=i.top+i.height/2;return this.exactBoundingBox&&(l-=h*Math.tan(Be(this.skewX)),h-=l*Math.tan(Be(this.skewY))),L(L({},i),{},{pathOffset:new I(l,h),strokeOffset:new I(s.left,s.top).subtract(new I(i.left,i.top)).multiply(o),strokeDiff:new I(i.width,i.height).subtract(new I(s.width,s.height)).multiply(o)})}_findCenterFromElement(){const t=tr(this.points);return new I(t.left+t.width/2,t.top+t.height/2)}setDimensions(){this.setBoundingBox()}setBoundingBox(t){const{left:e,top:i,width:r,height:s,pathOffset:o,strokeOffset:l,strokeDiff:h}=this._calcDimensions();this.set({width:r,height:s,pathOffset:o,strokeOffset:l,strokeDiff:h}),t&&this.setPositionByOrigin(new I(e+r/2,i+s/2),Lt,Lt)}isStrokeAccountedForInDimensions(){return this.exactBoundingBox}_getNonTransformedDimensions(){return this.exactBoundingBox?new I(this.width,this.height):super._getNonTransformedDimensions()}_getTransformedDimensions(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(this.exactBoundingBox){let o;if(Object.keys(t).some(l=>this.strokeUniform||this.constructor.layoutProperties.includes(l))){var e,i;const{width:l,height:h}=this._calcDimensions(t);o=new I((e=t.width)!==null&&e!==void 0?e:l,(i=t.height)!==null&&i!==void 0?i:h)}else{var r,s;o=new I((r=t.width)!==null&&r!==void 0?r:this.width,(s=t.height)!==null&&s!==void 0?s:this.height)}return o.multiply(new I(t.scaleX||this.scaleX,t.scaleY||this.scaleY))}return super._getTransformedDimensions(t)}_set(t,e){const i=this.initialized&&this[t]!==e,r=super._set(t,e);return this.exactBoundingBox&&i&&((t===Ii||t===tn)&&this.strokeUniform&&this.constructor.layoutProperties.includes("strokeUniform")||this.constructor.layoutProperties.includes(t))&&this.setDimensions(),r}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L(L({},super.toObject(t)),{},{points:this.points.map(e=>{let{x:i,y:r}=e;return{x:i,y:r}})})}_toSVG(){const t=[],e=this.pathOffset.x,i=this.pathOffset.y,r=Kt.NUM_FRACTION_DIGITS;for(let s=0,o=this.points.length;s<o;s++)t.push(Ee(this.points[s].x-e,r),",",Ee(this.points[s].y-i,r)," ");return["<".concat(this.constructor.type.toLowerCase()," "),"COMMON_PARTS",'points="'.concat(t.join(""),`" />
`)]}_render(t){const e=this.points.length,i=this.pathOffset.x,r=this.pathOffset.y;if(e&&!isNaN(this.points[e-1].y)){t.beginPath(),t.moveTo(this.points[0].x-i,this.points[0].y-r);for(let s=0;s<e;s++){const o=this.points[s];t.lineTo(o.x-i,o.y-r)}!this.isOpen()&&t.closePath(),this._renderPaintInOrder(t)}}complexity(){return this.points.length}static async fromElement(t,e,i){return new this(cb(t.getAttribute("points")),L(L({},Ae(ir(t,this.ATTRIBUTE_NAMES,i),b6)),e))}static fromObject(t){return this._fromObject(t,{extraParam:"points"})}}D(gn,"ownDefaults",hb),D(gn,"type","Polyline"),D(gn,"layoutProperties",[Xo,Ho,"strokeLineCap","strokeLineJoin","strokeMiterLimit","strokeWidth","strokeUniform","points"]),D(gn,"cacheProperties",[...Or,"points"]),D(gn,"ATTRIBUTE_NAMES",[...cs]),ht.setClass(gn),ht.setSVGClass(gn);class _a extends gn{isOpen(){return!1}}D(_a,"ownDefaults",hb),D(_a,"type","Polygon"),ht.setClass(_a),ht.setSVGClass(_a);const ub=["fontSize","fontWeight","fontFamily","fontStyle"],db=["underline","overline","linethrough"],fb=[...ub,"lineHeight","text","charSpacing","textAlign","styles","path","pathStartOffset","pathSide","pathAlign"],gb=[...fb,...db,"textBackgroundColor","direction"],w6=[...ub,...db,ji,"strokeWidth",He,"deltaY","textBackgroundColor"],x6={_reNewline:ig,_reSpacesAndTabs:/[ \t\r]/g,_reSpaceAndTab:/[ \t\r]/,_reWords:/\S+/g,fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",underline:!1,overline:!1,linethrough:!1,textAlign:he,fontStyle:"normal",lineHeight:1.16,superscript:{size:.6,baseline:-.35},subscript:{size:.6,baseline:.11},textBackgroundColor:"",stroke:null,shadow:null,path:void 0,pathStartOffset:0,pathSide:he,pathAlign:"baseline",_fontSizeFraction:.222,offsets:{underline:.1,linethrough:-.315,overline:-.88},_fontSizeMult:1.13,charSpacing:0,deltaY:0,direction:"ltr",CACHE_FONT_SIZE:400,MIN_TEXT_WIDTH:2},Un="justify",uh="justify-left",Ua="justify-right",Ga="justify-center";class pb extends pe{isEmptyStyles(t){if(!this.styles||t!==void 0&&!this.styles[t])return!0;const e=t===void 0?this.styles:{line:this.styles[t]};for(const i in e)for(const r in e[i])for(const s in e[i][r])return!1;return!0}styleHas(t,e){if(!this.styles||e!==void 0&&!this.styles[e])return!1;const i=e===void 0?this.styles:{0:this.styles[e]};for(const r in i)for(const s in i[r])if(i[r][s][t]!==void 0)return!0;return!1}cleanStyle(t){if(!this.styles)return!1;const e=this.styles;let i,r,s=0,o=!0,l=0;for(const h in e){i=0;for(const u in e[h]){const d=e[h][u]||{};s++,d[t]!==void 0?(r?d[t]!==r&&(o=!1):r=d[t],d[t]===this[t]&&delete d[t]):o=!1,Object.keys(d).length!==0?i++:delete e[h][u]}i===0&&delete e[h]}for(let h=0;h<this._textLines.length;h++)l+=this._textLines[h].length;o&&s===l&&(this[t]=r,this.removeStyle(t))}removeStyle(t){if(!this.styles)return;const e=this.styles;let i,r,s;for(r in e){for(s in i=e[r],i)delete i[s][t],Object.keys(i[s]).length===0&&delete i[s];Object.keys(i).length===0&&delete e[r]}}_extendStyles(t,e){const{lineIndex:i,charIndex:r}=this.get2DCursorLocation(t);this._getLineStyle(i)||this._setLineStyle(i);const s=lg(L(L({},this._getStyleDeclaration(i,r)),e),o=>o!==void 0);this._setStyleDeclaration(i,r,s)}getSelectionStyles(t,e,i){const r=[];for(let s=t;s<(e||t);s++)r.push(this.getStyleAtPosition(s,i));return r}getStyleAtPosition(t,e){const{lineIndex:i,charIndex:r}=this.get2DCursorLocation(t);return e?this.getCompleteStyleDeclaration(i,r):this._getStyleDeclaration(i,r)}setSelectionStyles(t,e,i){for(let r=e;r<(i||e);r++)this._extendStyles(r,t);this._forceClearCache=!0}_getStyleDeclaration(t,e){var i;const r=this.styles&&this.styles[t];return r&&(i=r[e])!==null&&i!==void 0?i:{}}getCompleteStyleDeclaration(t,e){return L(L({},Hs(this,this.constructor._styleProperties)),this._getStyleDeclaration(t,e))}_setStyleDeclaration(t,e,i){this.styles[t][e]=i}_deleteStyleDeclaration(t,e){delete this.styles[t][e]}_getLineStyle(t){return!!this.styles[t]}_setLineStyle(t){this.styles[t]={}}_deleteLineStyle(t){delete this.styles[t]}}D(pb,"_styleProperties",w6);const C6=/  +/g,S6=/"/g;function Ad(n,t,e,i,r){return"		".concat(function(s,o){let{left:l,top:h,width:u,height:d}=o,g=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Kt.NUM_FRACTION_DIGITS;const p=al(He,s,!1),[m,y,_,C]=[l,h,u,d].map(b=>Ee(b,g));return"<rect ".concat(p,' x="').concat(m,'" y="').concat(y,'" width="').concat(_,'" height="').concat(C,'"></rect>')}(n,{left:t,top:e,width:i,height:r}),`
`)}const T6=["textAnchor","textDecoration","dx","dy","top","left","fontSize","strokeWidth"];let kd;class Qe extends pb{static getDefaults(){return L(L({},super.getDefaults()),Qe.ownDefaults)}constructor(t,e){super(),D(this,"__charBounds",[]),Object.assign(this,Qe.ownDefaults),this.setOptions(e),this.styles||(this.styles={}),this.text=t,this.initialized=!0,this.path&&this.setPathInfo(),this.initDimensions(),this.setCoords()}setPathInfo(){const t=this.path;t&&(t.segmentsInfo=Sg(t.path))}_splitText(){const t=this._splitTextIntoLines(this.text);return this.textLines=t.lines,this._textLines=t.graphemeLines,this._unwrappedTextLines=t._unwrappedLines,this._text=t.graphemeText,t}initDimensions(){this._splitText(),this._clearCache(),this.dirty=!0,this.path?(this.width=this.path.width,this.height=this.path.height):(this.width=this.calcTextWidth()||this.cursorWidth||this.MIN_TEXT_WIDTH,this.height=this.calcTextHeight()),this.textAlign.includes(Un)&&this.enlargeSpaces()}enlargeSpaces(){let t,e,i,r,s,o,l;for(let h=0,u=this._textLines.length;h<u;h++)if((this.textAlign===Un||h!==u-1&&!this.isEndOfWrapping(h))&&(r=0,s=this._textLines[h],e=this.getLineWidth(h),e<this.width&&(l=this.textLines[h].match(this._reSpacesAndTabs)))){i=l.length,t=(this.width-e)/i;for(let d=0;d<=s.length;d++)o=this.__charBounds[h][d],this._reSpaceAndTab.test(s[d])?(o.width+=t,o.kernedWidth+=t,o.left+=r,r+=t):o.left+=r}}isEndOfWrapping(t){return t===this._textLines.length-1}missingNewlineOffset(t){return 1}get2DCursorLocation(t,e){const i=e?this._unwrappedTextLines:this._textLines;let r;for(r=0;r<i.length;r++){if(t<=i[r].length)return{lineIndex:r,charIndex:t};t-=i[r].length+this.missingNewlineOffset(r,e)}return{lineIndex:r-1,charIndex:i[r-1].length<t?i[r-1].length:t}}toString(){return"#<Text (".concat(this.complexity(),'): { "text": "').concat(this.text,'", "fontFamily": "').concat(this.fontFamily,'" }>')}_getCacheCanvasDimensions(){const t=super._getCacheCanvasDimensions(),e=this.fontSize;return t.width+=e*t.zoomX,t.height+=e*t.zoomY,t}_render(t){const e=this.path;e&&!e.isNotVisible()&&e._render(t),this._setTextStyles(t),this._renderTextLinesBackground(t),this._renderTextDecoration(t,"underline"),this._renderText(t),this._renderTextDecoration(t,"overline"),this._renderTextDecoration(t,"linethrough")}_renderText(t){this.paintFirst===ji?(this._renderTextStroke(t),this._renderTextFill(t)):(this._renderTextFill(t),this._renderTextStroke(t))}_setTextStyles(t,e,i){if(t.textBaseline="alphabetic",this.path)switch(this.pathAlign){case Lt:t.textBaseline="middle";break;case"ascender":t.textBaseline=Hi;break;case"descender":t.textBaseline=of}t.font=this._getFontDeclaration(e,i)}calcTextWidth(){let t=this.getLineWidth(0);for(let e=1,i=this._textLines.length;e<i;e++){const r=this.getLineWidth(e);r>t&&(t=r)}return t}_renderTextLine(t,e,i,r,s,o){this._renderChars(t,e,i,r,s,o)}_renderTextLinesBackground(t){if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor"))return;const e=t.fillStyle,i=this._getLeftOffset();let r=this._getTopOffset();for(let s=0,o=this._textLines.length;s<o;s++){const l=this.getHeightOfLine(s);if(!this.textBackgroundColor&&!this.styleHas("textBackgroundColor",s)){r+=l;continue}const h=this._textLines[s].length,u=this._getLineLeftOffset(s);let d,g,p=0,m=0,y=this.getValueOfPropertyAt(s,0,"textBackgroundColor");for(let _=0;_<h;_++){const C=this.__charBounds[s][_];g=this.getValueOfPropertyAt(s,_,"textBackgroundColor"),this.path?(t.save(),t.translate(C.renderLeft,C.renderTop),t.rotate(C.angle),t.fillStyle=g,g&&t.fillRect(-C.width/2,-l/this.lineHeight*(1-this._fontSizeFraction),C.width,l/this.lineHeight),t.restore()):g!==y?(d=i+u+m,this.direction==="rtl"&&(d=this.width-d-p),t.fillStyle=y,y&&t.fillRect(d,r,p,l/this.lineHeight),m=C.left,p=C.width,y=g):p+=C.kernedWidth}g&&!this.path&&(d=i+u+m,this.direction==="rtl"&&(d=this.width-d-p),t.fillStyle=g,t.fillRect(d,r,p,l/this.lineHeight)),r+=l}t.fillStyle=e,this._removeShadow(t)}_measureChar(t,e,i,r){const s=Mo.getFontCache(e),o=this._getFontDeclaration(e),l=i+t,h=i&&o===this._getFontDeclaration(r),u=e.fontSize/this.CACHE_FONT_SIZE;let d,g,p,m;if(i&&s[i]!==void 0&&(p=s[i]),s[t]!==void 0&&(m=d=s[t]),h&&s[l]!==void 0&&(g=s[l],m=g-p),d===void 0||p===void 0||g===void 0){const y=function(){if(!kd){const _=Me();_.width=_.height=0,kd=_.getContext("2d")}return kd}();this._setTextStyles(y,e,!0),d===void 0&&(m=d=y.measureText(t).width,s[t]=d),p===void 0&&h&&i&&(p=y.measureText(i).width,s[i]=p),h&&g===void 0&&(g=y.measureText(l).width,s[l]=g,m=g-p)}return{width:d*u,kernedWidth:m*u}}getHeightOfChar(t,e){return this.getValueOfPropertyAt(t,e,"fontSize")}measureLine(t){const e=this._measureLine(t);return this.charSpacing!==0&&(e.width-=this._getWidthOfCharSpacing()),e.width<0&&(e.width=0),e}_measureLine(t){let e,i,r=0;const s=this.pathSide===Xe,o=this.path,l=this._textLines[t],h=l.length,u=new Array(h);this.__charBounds[t]=u;for(let d=0;d<h;d++){const g=l[d];i=this._getGraphemeBox(g,t,d,e),u[d]=i,r+=i.kernedWidth,e=g}if(u[h]={left:i?i.left+i.width:0,width:0,kernedWidth:0,height:this.fontSize,deltaY:0},o&&o.segmentsInfo){let d=0;const g=o.segmentsInfo[o.segmentsInfo.length-1].length;switch(this.textAlign){case he:d=s?g-r:0;break;case Lt:d=(g-r)/2;break;case Xe:d=s?0:g-r}d+=this.pathStartOffset*(s?-1:1);for(let p=s?h-1:0;s?p>=0:p<h;s?p--:p++)i=u[p],d>g?d%=g:d<0&&(d+=g),this._setGraphemeOnPath(d,i),d+=i.kernedWidth}return{width:r,numOfSpaces:0}}_setGraphemeOnPath(t,e){const i=t+e.kernedWidth/2,r=this.path,s=K_(r.path,i,r.segmentsInfo);e.renderLeft=s.x-r.pathOffset.x,e.renderTop=s.y-r.pathOffset.y,e.angle=s.angle+(this.pathSide===Xe?Math.PI:0)}_getGraphemeBox(t,e,i,r,s){const o=this.getCompleteStyleDeclaration(e,i),l=r?this.getCompleteStyleDeclaration(e,i-1):{},h=this._measureChar(t,o,r,l);let u,d=h.kernedWidth,g=h.width;this.charSpacing!==0&&(u=this._getWidthOfCharSpacing(),g+=u,d+=u);const p={width:g,left:0,height:o.fontSize,kernedWidth:d,deltaY:o.deltaY};if(i>0&&!s){const m=this.__charBounds[e][i-1];p.left=m.left+m.width+h.kernedWidth-h.width}return p}getHeightOfLine(t){if(this.__lineHeights[t])return this.__lineHeights[t];let e=this.getHeightOfChar(t,0);for(let i=1,r=this._textLines[t].length;i<r;i++)e=Math.max(this.getHeightOfChar(t,i),e);return this.__lineHeights[t]=e*this.lineHeight*this._fontSizeMult}calcTextHeight(){let t,e=0;for(let i=0,r=this._textLines.length;i<r;i++)t=this.getHeightOfLine(i),e+=i===r-1?t/this.lineHeight:t;return e}_getLeftOffset(){return this.direction==="ltr"?-this.width/2:this.width/2}_getTopOffset(){return-this.height/2}_renderTextCommon(t,e){t.save();let i=0;const r=this._getLeftOffset(),s=this._getTopOffset();for(let o=0,l=this._textLines.length;o<l;o++){const h=this.getHeightOfLine(o),u=h/this.lineHeight,d=this._getLineLeftOffset(o);this._renderTextLine(e,t,this._textLines[o],r+d,s+i+u,o),i+=h}t.restore()}_renderTextFill(t){(this.fill||this.styleHas(He))&&this._renderTextCommon(t,"fillText")}_renderTextStroke(t){(this.stroke&&this.strokeWidth!==0||!this.isEmptyStyles())&&(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this._setLineDash(t,this.strokeDashArray),t.beginPath(),this._renderTextCommon(t,"strokeText"),t.closePath(),t.restore())}_renderChars(t,e,i,r,s,o){const l=this.getHeightOfLine(o),h=this.textAlign.includes(Un),u=this.path,d=!h&&this.charSpacing===0&&this.isEmptyStyles(o)&&!u,g=this.direction==="ltr",p=this.direction==="ltr"?1:-1,m=e.direction;let y,_,C,b,x,T="",O=0;if(e.save(),m!==this.direction&&(e.canvas.setAttribute("dir",g?"ltr":"rtl"),e.direction=g?"ltr":"rtl",e.textAlign=g?he:Xe),s-=l*this._fontSizeFraction/this.lineHeight,d)return this._renderChar(t,e,o,0,i.join(""),r,s),void e.restore();for(let E=0,V=i.length-1;E<=V;E++)b=E===V||this.charSpacing||u,T+=i[E],C=this.__charBounds[o][E],O===0?(r+=p*(C.kernedWidth-C.width),O+=C.width):O+=C.kernedWidth,h&&!b&&this._reSpaceAndTab.test(i[E])&&(b=!0),b||(y=y||this.getCompleteStyleDeclaration(o,E),_=this.getCompleteStyleDeclaration(o,E+1),b=Yh(y,_,!1)),b&&(u?(e.save(),e.translate(C.renderLeft,C.renderTop),e.rotate(C.angle),this._renderChar(t,e,o,E,T,-O/2,0),e.restore()):(x=r,this._renderChar(t,e,o,E,T,x,s)),T="",y=_,r+=p*O,O=0);e.restore()}_applyPatternGradientTransformText(t){const e=Me(),i=this.width+this.strokeWidth,r=this.height+this.strokeWidth,s=e.getContext("2d");return e.width=i,e.height=r,s.beginPath(),s.moveTo(0,0),s.lineTo(i,0),s.lineTo(i,r),s.lineTo(0,r),s.closePath(),s.translate(i/2,r/2),s.fillStyle=t.toLive(s),this._applyPatternGradientTransform(s,t),s.fill(),s.createPattern(e,"no-repeat")}handleFiller(t,e,i){let r,s;return pn(i)?i.gradientUnits==="percentage"||i.gradientTransform||i.patternTransform?(r=-this.width/2,s=-this.height/2,t.translate(r,s),t[e]=this._applyPatternGradientTransformText(i),{offsetX:r,offsetY:s}):(t[e]=i.toLive(t),this._applyPatternGradientTransform(t,i)):(t[e]=i,{offsetX:0,offsetY:0})}_setStrokeStyles(t,e){let{stroke:i,strokeWidth:r}=e;return t.lineWidth=r,t.lineCap=this.strokeLineCap,t.lineDashOffset=this.strokeDashOffset,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,this.handleFiller(t,"strokeStyle",i)}_setFillStyles(t,e){let{fill:i}=e;return this.handleFiller(t,"fillStyle",i)}_renderChar(t,e,i,r,s,o,l){const h=this._getStyleDeclaration(i,r),u=this.getCompleteStyleDeclaration(i,r),d=t==="fillText"&&u.fill,g=t==="strokeText"&&u.stroke&&u.strokeWidth;if(g||d){if(e.save(),e.font=this._getFontDeclaration(u),h.textBackgroundColor&&this._removeShadow(e),h.deltaY&&(l+=h.deltaY),d){const p=this._setFillStyles(e,u);e.fillText(s,o-p.offsetX,l-p.offsetY)}if(g){const p=this._setStrokeStyles(e,u);e.strokeText(s,o-p.offsetX,l-p.offsetY)}e.restore()}}setSuperscript(t,e){this._setScript(t,e,this.superscript)}setSubscript(t,e){this._setScript(t,e,this.subscript)}_setScript(t,e,i){const r=this.get2DCursorLocation(t,!0),s=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"fontSize"),o=this.getValueOfPropertyAt(r.lineIndex,r.charIndex,"deltaY"),l={fontSize:s*i.size,deltaY:o+s*i.baseline};this.setSelectionStyles(l,t,e)}_getLineLeftOffset(t){const e=this.getLineWidth(t),i=this.width-e,r=this.textAlign,s=this.direction,o=this.isEndOfWrapping(t);let l=0;return r===Un||r===Ga&&!o||r===Ua&&!o||r===uh&&!o?0:(r===Lt&&(l=i/2),r===Xe&&(l=i),r===Ga&&(l=i/2),r===Ua&&(l=i),s==="rtl"&&(r===Xe||r===Un||r===Ua?l=0:r===he||r===uh?l=-i:r!==Lt&&r!==Ga||(l=-i/2)),l)}_clearCache(){this._forceClearCache=!1,this.__lineWidths=[],this.__lineHeights=[],this.__charBounds=[]}getLineWidth(t){if(this.__lineWidths[t]!==void 0)return this.__lineWidths[t];const{width:e}=this.measureLine(t);return this.__lineWidths[t]=e,e}_getWidthOfCharSpacing(){return this.charSpacing!==0?this.fontSize*this.charSpacing/1e3:0}getValueOfPropertyAt(t,e,i){var r;return(r=this._getStyleDeclaration(t,e)[i])!==null&&r!==void 0?r:this[i]}_renderTextDecoration(t,e){if(!this[e]&&!this.styleHas(e))return;let i=this._getTopOffset();const r=this._getLeftOffset(),s=this.path,o=this._getWidthOfCharSpacing(),l=this.offsets[e];for(let h=0,u=this._textLines.length;h<u;h++){const d=this.getHeightOfLine(h);if(!this[e]&&!this.styleHas(e,h)){i+=d;continue}const g=this._textLines[h],p=d/this.lineHeight,m=this._getLineLeftOffset(h);let y,_,C=0,b=0,x=this.getValueOfPropertyAt(h,0,e),T=this.getValueOfPropertyAt(h,0,He);const O=i+p*(1-this._fontSizeFraction);let E=this.getHeightOfChar(h,0),V=this.getValueOfPropertyAt(h,0,"deltaY");for(let B=0,Y=g.length;B<Y;B++){const J=this.__charBounds[h][B];y=this.getValueOfPropertyAt(h,B,e),_=this.getValueOfPropertyAt(h,B,He);const st=this.getHeightOfChar(h,B),ct=this.getValueOfPropertyAt(h,B,"deltaY");if(s&&y&&_)t.save(),t.fillStyle=T,t.translate(J.renderLeft,J.renderTop),t.rotate(J.angle),t.fillRect(-J.kernedWidth/2,l*st+ct,J.kernedWidth,this.fontSize/15),t.restore();else if((y!==x||_!==T||st!==E||ct!==V)&&b>0){let ot=r+m+C;this.direction==="rtl"&&(ot=this.width-ot-b),x&&T&&(t.fillStyle=T,t.fillRect(ot,O+l*E+V,b,this.fontSize/15)),C=J.left,b=J.width,x=y,T=_,E=st,V=ct}else b+=J.kernedWidth}let A=r+m+C;this.direction==="rtl"&&(A=this.width-A-b),t.fillStyle=_,y&&_&&t.fillRect(A,O+l*E+V,b-o,this.fontSize/15),i+=d}this._removeShadow(t)}_getFontDeclaration(){let{fontFamily:t=this.fontFamily,fontStyle:e=this.fontStyle,fontWeight:i=this.fontWeight,fontSize:r=this.fontSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},s=arguments.length>1?arguments[1]:void 0;const o=t.includes("'")||t.includes('"')||t.includes(",")||Qe.genericFonts.includes(t.toLowerCase())?t:'"'.concat(t,'"');return[e,i,"".concat(s?this.CACHE_FONT_SIZE:r,"px"),o].join(" ")}render(t){this.visible&&(this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||(this._forceClearCache&&this.initDimensions(),super.render(t)))}graphemeSplit(t){return Hh(t)}_splitTextIntoLines(t){const e=t.split(this._reNewline),i=new Array(e.length),r=[`
`];let s=[];for(let o=0;o<e.length;o++)i[o]=this.graphemeSplit(e[o]),s=s.concat(i[o],r);return s.pop(),{_unwrappedLines:i,lines:e,graphemeText:s,graphemeLines:i}}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L(L({},super.toObject([...gb,...t])),{},{styles:B_(this.styles,this.text)},this.path?{path:this.path.toObject()}:{})}set(t,e){const{textLayoutProperties:i}=this.constructor;super.set(t,e);let r=!1,s=!1;if(typeof t=="object")for(const o in t)o==="path"&&this.setPathInfo(),r=r||i.includes(o),s=s||o==="path";else r=i.includes(t),s=t==="path";return s&&this.setPathInfo(),r&&this.initialized&&(this.initDimensions(),this.setCoords()),this}complexity(){return 1}static async fromElement(t,e,i){const r=ir(t,Qe.ATTRIBUTE_NAMES,i),s=L(L({},e),r),{textAnchor:o=he,textDecoration:l="",dx:h=0,dy:u=0,top:d=0,left:g=0,fontSize:p=eg,strokeWidth:m=1}=s,y=Ae(s,T6),_=new this((t.textContent||"").replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),L({left:g+h,top:d+u,underline:l.includes("underline"),overline:l.includes("overline"),linethrough:l.includes("line-through"),strokeWidth:0,fontSize:p},y)),C=_.getScaledHeight()/_.height,b=((_.height+_.strokeWidth)*_.lineHeight-_.height)*C,x=_.getScaledHeight()+b;let T=0;return o===Lt&&(T=_.getScaledWidth()/2),o===Xe&&(T=_.getScaledWidth()),_.set({left:_.left-T,top:_.top-(x-_.fontSize*(.07+_._fontSizeFraction))/_.lineHeight,strokeWidth:m}),_}static fromObject(t){return this._fromObject(L(L({},t),{},{styles:F_(t.styles||{},t.text)}),{extraParam:"text"})}}D(Qe,"textLayoutProperties",fb),D(Qe,"cacheProperties",[...Or,...gb]),D(Qe,"ownDefaults",x6),D(Qe,"type","Text"),D(Qe,"genericFonts",["sans-serif","serif","cursive","fantasy","monospace"]),D(Qe,"ATTRIBUTE_NAMES",cs.concat("x","y","dx","dy","font-family","font-style","font-weight","font-size","letter-spacing","text-decoration","text-anchor")),j_(Qe,[class extends d_{_toSVG(){const n=this._getSVGLeftTopOffsets(),t=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(t)}toSVG(n){return this._createBaseSVGMarkup(this._toSVG(),{reviver:n,noStyle:!0,withShadow:!0})}_getSVGLeftTopOffsets(){return{textLeft:-this.width/2,textTop:-this.height/2,lineTop:this.getHeightOfLine(0)}}_wrapSVGTextAndBg(n){let{textBgRects:t,textSpans:e}=n;const i=this.getSvgTextDecoration(this);return[t.join(""),'		<text xml:space="preserve" ',this.fontFamily?'font-family="'.concat(this.fontFamily.replace(S6,"'"),'" '):"",this.fontSize?'font-size="'.concat(this.fontSize,'" '):"",this.fontStyle?'font-style="'.concat(this.fontStyle,'" '):"",this.fontWeight?'font-weight="'.concat(this.fontWeight,'" '):"",i?'text-decoration="'.concat(i,'" '):"",this.direction==="rtl"?'direction="'.concat(this.direction,'" '):"",'style="',this.getSvgStyles(!0),'"',this.addPaintOrder()," >",e.join(""),`</text>
`]}_getSVGTextAndBg(n,t){const e=[],i=[];let r,s=n;this.backgroundColor&&i.push(...Ad(this.backgroundColor,-this.width/2,-this.height/2,this.width,this.height));for(let o=0,l=this._textLines.length;o<l;o++)r=this._getLineLeftOffset(o),this.direction==="rtl"&&(r+=this.width),(this.textBackgroundColor||this.styleHas("textBackgroundColor",o))&&this._setSVGTextLineBg(i,o,t+r,s),this._setSVGTextLineText(e,o,t+r,s),s+=this.getHeightOfLine(o);return{textSpans:e,textBgRects:i}}_createTextCharSpan(n,t,e,i){const r=this.getSvgSpanStyles(t,n!==n.trim()||!!n.match(C6)),s=r?'style="'.concat(r,'"'):"",o=t.deltaY,l=o?' dy="'.concat(Ee(o,Kt.NUM_FRACTION_DIGITS),'" '):"";return'<tspan x="'.concat(Ee(e,Kt.NUM_FRACTION_DIGITS),'" y="').concat(Ee(i,Kt.NUM_FRACTION_DIGITS),'" ').concat(l).concat(s,">").concat(L_(n),"</tspan>")}_setSVGTextLineText(n,t,e,i){const r=this.getHeightOfLine(t),s=this.textAlign.includes(Un),o=this._textLines[t];let l,h,u,d,g,p="",m=0;i+=r*(1-this._fontSizeFraction)/this.lineHeight;for(let y=0,_=o.length-1;y<=_;y++)g=y===_||this.charSpacing,p+=o[y],u=this.__charBounds[t][y],m===0?(e+=u.kernedWidth-u.width,m+=u.width):m+=u.kernedWidth,s&&!g&&this._reSpaceAndTab.test(o[y])&&(g=!0),g||(l=l||this.getCompleteStyleDeclaration(t,y),h=this.getCompleteStyleDeclaration(t,y+1),g=Yh(l,h,!0)),g&&(d=this._getStyleDeclaration(t,y),n.push(this._createTextCharSpan(p,d,e,i)),p="",l=h,this.direction==="rtl"?e-=m:e+=m,m=0)}_setSVGTextLineBg(n,t,e,i){const r=this._textLines[t],s=this.getHeightOfLine(t)/this.lineHeight;let o,l=0,h=0,u=this.getValueOfPropertyAt(t,0,"textBackgroundColor");for(let d=0;d<r.length;d++){const{left:g,width:p,kernedWidth:m}=this.__charBounds[t][d];o=this.getValueOfPropertyAt(t,d,"textBackgroundColor"),o!==u?(u&&n.push(...Ad(u,e+h,i,l,s)),h=g,l=p,u=o):l+=m}o&&n.push(...Ad(u,e+h,i,l,s))}_getSVGLineTopOffset(n){let t,e=0;for(t=0;t<n;t++)e+=this.getHeightOfLine(t);const i=this.getHeightOfLine(t);return{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*i/(this.lineHeight*this._fontSizeMult)}}getSvgStyles(n){return"".concat(super.getSvgStyles(n)," white-space: pre;")}getSvgSpanStyles(n,t){const{fontFamily:e,strokeWidth:i,stroke:r,fill:s,fontSize:o,fontStyle:l,fontWeight:h,deltaY:u}=n,d=this.getSvgTextDecoration(n);return[r?al(ji,r):"",i?"stroke-width: ".concat(i,"; "):"",e?"font-family: ".concat(e.includes("'")||e.includes('"')?e:"'".concat(e,"'"),"; "):"",o?"font-size: ".concat(o,"px; "):"",l?"font-style: ".concat(l,"; "):"",h?"font-weight: ".concat(h,"; "):"",d&&"text-decoration: ".concat(d,"; "),s?al(He,s):"",u?"baseline-shift: ".concat(-u,"; "):"",t?"white-space: pre; ":""].join("")}getSvgTextDecoration(n){return["overline","underline","line-through"].filter(t=>n[t.replace("-","")]).join(" ")}}]),ht.setClass(Qe),ht.setSVGClass(Qe);class P6{constructor(t){D(this,"target",void 0),D(this,"__mouseDownInPlace",!1),D(this,"__dragStartFired",!1),D(this,"__isDraggingOver",!1),D(this,"__dragStartSelection",void 0),D(this,"__dragImageDisposer",void 0),D(this,"_dispose",void 0),this.target=t;const e=[this.target.on("dragenter",this.dragEnterHandler.bind(this)),this.target.on("dragover",this.dragOverHandler.bind(this)),this.target.on("dragleave",this.dragLeaveHandler.bind(this)),this.target.on("dragend",this.dragEndHandler.bind(this)),this.target.on("drop",this.dropHandler.bind(this))];this._dispose=()=>{e.forEach(i=>i()),this._dispose=void 0}}isPointerOverSelection(t){const e=this.target,i=e.getSelectionStartFromPointer(t);return e.isEditing&&i>=e.selectionStart&&i<=e.selectionEnd&&e.selectionStart<e.selectionEnd}start(t){return this.__mouseDownInPlace=this.isPointerOverSelection(t)}isActive(){return this.__mouseDownInPlace}end(t){const e=this.isActive();return e&&!this.__dragStartFired&&(this.target.setCursorByClick(t),this.target.initDelayedCursor(!0)),this.__mouseDownInPlace=!1,this.__dragStartFired=!1,this.__isDraggingOver=!1,e}getDragStartSelection(){return this.__dragStartSelection}setDragImage(t,e){var i;let{selectionStart:r,selectionEnd:s}=e;const o=this.target,l=o.canvas,h=new I(o.flipX?-1:1,o.flipY?-1:1),u=o._getCursorBoundaries(r),d=new I(u.left+u.leftOffset,u.top+u.topOffset).multiply(h).transform(o.calcTransformMatrix()),g=l.getScenePoint(t).subtract(d),p=o.getCanvasRetinaScaling(),m=o.getBoundingRect(),y=d.subtract(new I(m.left,m.top)),_=l.viewportTransform,C=y.add(g).transform(_,!0),b=o.backgroundColor,x=wg(o.styles);o.backgroundColor="";const T={stroke:"transparent",fill:"transparent",textBackgroundColor:"transparent"};o.setSelectionStyles(T,0,r),o.setSelectionStyles(T,s,o.text.length),o.dirty=!0;const O=o.toCanvasElement({enableRetinaScaling:l.enableRetinaScaling,viewportTransform:!0});o.backgroundColor=b,o.styles=x,o.dirty=!0,hh(O,{position:"fixed",left:"".concat(-O.width,"px"),border:ki,width:"".concat(O.width/p,"px"),height:"".concat(O.height/p,"px")}),this.__dragImageDisposer&&this.__dragImageDisposer(),this.__dragImageDisposer=()=>{O.remove()},Tn(t.target||this.target.hiddenTextarea).body.appendChild(O),(i=t.dataTransfer)===null||i===void 0||i.setDragImage(O,C.x,C.y)}onDragStart(t){this.__dragStartFired=!0;const e=this.target,i=this.isActive();if(i&&t.dataTransfer){const r=this.__dragStartSelection={selectionStart:e.selectionStart,selectionEnd:e.selectionEnd},s=e._text.slice(r.selectionStart,r.selectionEnd).join(""),o=L({text:e.text,value:s},r);t.dataTransfer.setData("text/plain",s),t.dataTransfer.setData("application/fabric",JSON.stringify({value:s,styles:e.getSelectionStyles(r.selectionStart,r.selectionEnd,!0)})),t.dataTransfer.effectAllowed="copyMove",this.setDragImage(t,o)}return e.abortCursorAnimation(),i}canDrop(t){if(this.target.editable&&!this.target.getActiveControl()&&!t.defaultPrevented){if(this.isActive()&&this.__dragStartSelection){const e=this.target.getSelectionStartFromPointer(t),i=this.__dragStartSelection;return e<i.selectionStart||e>i.selectionEnd}return!0}return!1}targetCanDrop(t){return this.target.canDrop(t)}dragEnterHandler(t){let{e}=t;const i=this.targetCanDrop(e);!this.__isDraggingOver&&i&&(this.__isDraggingOver=!0)}dragOverHandler(t){const{e}=t,i=this.targetCanDrop(e);!this.__isDraggingOver&&i?this.__isDraggingOver=!0:this.__isDraggingOver&&!i&&(this.__isDraggingOver=!1),this.__isDraggingOver&&(e.preventDefault(),t.canDrop=!0,t.dropTarget=this.target)}dragLeaveHandler(){(this.__isDraggingOver||this.isActive())&&(this.__isDraggingOver=!1)}dropHandler(t){var e;const{e:i}=t,r=i.defaultPrevented;this.__isDraggingOver=!1,i.preventDefault();let s=(e=i.dataTransfer)===null||e===void 0?void 0:e.getData("text/plain");if(s&&!r){const o=this.target,l=o.canvas;let h=o.getSelectionStartFromPointer(i);const{styles:u}=i.dataTransfer.types.includes("application/fabric")?JSON.parse(i.dataTransfer.getData("application/fabric")):{},d=s[Math.max(0,s.length-1)],g=0;if(this.__dragStartSelection){const p=this.__dragStartSelection.selectionStart,m=this.__dragStartSelection.selectionEnd;h>p&&h<=m?h=p:h>m&&(h-=m-p),o.removeChars(p,m),delete this.__dragStartSelection}o._reNewline.test(d)&&(o._reNewline.test(o._text[h])||h===o._text.length)&&(s=s.trimEnd()),t.didDrop=!0,t.dropTarget=o,o.insertChars(s,u,h),l.setActiveObject(o),o.enterEditing(i),o.selectionStart=Math.min(h+g,o._text.length),o.selectionEnd=Math.min(o.selectionStart+s.length,o._text.length),o.hiddenTextarea.value=o.text,o._updateTextarea(),o.hiddenTextarea.focus(),o.fire(th,{index:h+g,action:"drop"}),l.fire("text:changed",{target:o}),l.contextTopDirty=!0,l.requestRenderAll()}}dragEndHandler(t){let{e}=t;if(this.isActive()&&this.__dragStartFired&&this.__dragStartSelection){var i;const r=this.target,s=this.target.canvas,{selectionStart:o,selectionEnd:l}=this.__dragStartSelection,h=((i=e.dataTransfer)===null||i===void 0?void 0:i.dropEffect)||ki;h===ki?(r.selectionStart=o,r.selectionEnd=l,r._updateTextarea(),r.hiddenTextarea.focus()):(r.clearContextTop(),h==="move"&&(r.removeChars(o,l),r.selectionStart=r.selectionEnd=o,r.hiddenTextarea&&(r.hiddenTextarea.value=r.text),r._updateTextarea(),r.fire(th,{index:o,action:"dragend"}),s.fire("text:changed",{target:r}),s.requestRenderAll()),r.exitEditing())}this.__dragImageDisposer&&this.__dragImageDisposer(),delete this.__dragImageDisposer,delete this.__dragStartSelection,this.__isDraggingOver=!1}dispose(){this._dispose&&this._dispose()}}const Tv=/[ \n\.,;!\?\-]/;class O6 extends Qe{constructor(){super(...arguments),D(this,"_currentCursorOpacity",1)}initBehavior(){this._tick=this._tick.bind(this),this._onTickComplete=this._onTickComplete.bind(this),this.updateSelectionOnMouseMove=this.updateSelectionOnMouseMove.bind(this)}onDeselect(t){return this.isEditing&&this.exitEditing(),this.selected=!1,super.onDeselect(t)}_animateCursor(t){let{toValue:e,duration:i,delay:r,onComplete:s}=t;return yg({startValue:this._currentCursorOpacity,endValue:e,duration:i,delay:r,onComplete:s,abort:()=>!this.canvas||this.selectionStart!==this.selectionEnd,onChange:o=>{this._currentCursorOpacity=o,this.renderCursorOrSelection()}})}_tick(t){this._currentTickState=this._animateCursor({toValue:0,duration:this.cursorDuration/2,delay:Math.max(t||0,100),onComplete:this._onTickComplete})}_onTickComplete(){var t;(t=this._currentTickCompleteState)===null||t===void 0||t.abort(),this._currentTickCompleteState=this._animateCursor({toValue:1,duration:this.cursorDuration,onComplete:this._tick})}initDelayedCursor(t){this.abortCursorAnimation(),this._tick(t?0:this.cursorDelay)}abortCursorAnimation(){let t=!1;[this._currentTickState,this._currentTickCompleteState].forEach(e=>{e&&!e.isDone()&&(t=!0,e.abort())}),this._currentCursorOpacity=1,t&&this.clearContextTop()}restartCursorIfNeeded(){[this._currentTickState,this._currentTickCompleteState].some(t=>!t||t.isDone())&&this.initDelayedCursor()}selectAll(){return this.selectionStart=0,this.selectionEnd=this._text.length,this._fireSelectionChanged(),this._updateTextarea(),this}getSelectedText(){return this._text.slice(this.selectionStart,this.selectionEnd).join("")}findWordBoundaryLeft(t){let e=0,i=t-1;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i--;for(;/\S/.test(this._text[i])&&i>-1;)e++,i--;return t-e}findWordBoundaryRight(t){let e=0,i=t;if(this._reSpace.test(this._text[i]))for(;this._reSpace.test(this._text[i]);)e++,i++;for(;/\S/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e}findLineBoundaryLeft(t){let e=0,i=t-1;for(;!/\n/.test(this._text[i])&&i>-1;)e++,i--;return t-e}findLineBoundaryRight(t){let e=0,i=t;for(;!/\n/.test(this._text[i])&&i<this._text.length;)e++,i++;return t+e}searchWordBoundary(t,e){const i=this._text;let r=t>0&&this._reSpace.test(i[t])&&(e===-1||!ig.test(i[t-1]))?t-1:t,s=i[r];for(;r>0&&r<i.length&&!Tv.test(s);)r+=e,s=i[r];return e===-1&&Tv.test(s)&&r++,r}selectWord(t){t=t||this.selectionStart;const e=this.searchWordBoundary(t,-1),i=Math.max(e,this.searchWordBoundary(t,1));this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()}selectLine(t){t=t||this.selectionStart;const e=this.findLineBoundaryLeft(t),i=this.findLineBoundaryRight(t);return this.selectionStart=e,this.selectionEnd=i,this._fireSelectionChanged(),this._updateTextarea(),this}enterEditing(t){!this.isEditing&&this.editable&&(this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}updateSelectionOnMouseMove(t){if(this.getActiveControl())return;const e=this.hiddenTextarea;Tn(e).activeElement!==e&&e.focus();const i=this.getSelectionStartFromPointer(t),r=this.selectionStart,s=this.selectionEnd;(i===this.__selectionStartOnMouseDown&&r!==s||r!==i&&s!==i)&&(i>this.__selectionStartOnMouseDown?(this.selectionStart=this.__selectionStartOnMouseDown,this.selectionEnd=i):(this.selectionStart=i,this.selectionEnd=this.__selectionStartOnMouseDown),this.selectionStart===r&&this.selectionEnd===s||(this._fireSelectionChanged(),this._updateTextarea(),this.renderCursorOrSelection()))}_setEditingProps(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0}fromStringToGraphemeSelection(t,e,i){const r=i.slice(0,t),s=this.graphemeSplit(r).length;if(t===e)return{selectionStart:s,selectionEnd:s};const o=i.slice(t,e);return{selectionStart:s,selectionEnd:s+this.graphemeSplit(o).length}}fromGraphemeToStringSelection(t,e,i){const r=i.slice(0,t).join("").length;return t===e?{selectionStart:r,selectionEnd:r}:{selectionStart:r,selectionEnd:r+i.slice(t,e).join("").length}}_updateTextarea(){if(this.cursorOffsetCache={},this.hiddenTextarea){if(!this.inCompositionMode){const t=this.fromGraphemeToStringSelection(this.selectionStart,this.selectionEnd,this._text);this.hiddenTextarea.selectionStart=t.selectionStart,this.hiddenTextarea.selectionEnd=t.selectionEnd}this.updateTextareaPosition()}}updateFromTextArea(){if(!this.hiddenTextarea)return;this.cursorOffsetCache={};const t=this.hiddenTextarea;this.text=t.value,this.set("dirty",!0),this.initDimensions(),this.setCoords();const e=this.fromStringToGraphemeSelection(t.selectionStart,t.selectionEnd,t.value);this.selectionEnd=this.selectionStart=e.selectionEnd,this.inCompositionMode||(this.selectionStart=e.selectionStart),this.updateTextareaPosition()}updateTextareaPosition(){if(this.selectionStart===this.selectionEnd){const t=this._calcTextareaPosition();this.hiddenTextarea.style.left=t.left,this.hiddenTextarea.style.top=t.top}}_calcTextareaPosition(){if(!this.canvas)return{left:"1px",top:"1px"};const t=this.inCompositionMode?this.compositionStart:this.selectionStart,e=this._getCursorBoundaries(t),i=this.get2DCursorLocation(t),r=i.lineIndex,s=i.charIndex,o=this.getValueOfPropertyAt(r,s,"fontSize")*this.lineHeight,l=e.leftOffset,h=this.getCanvasRetinaScaling(),u=this.canvas.upperCanvasEl,d=u.width/h,g=u.height/h,p=d-o,m=g-o,y=new I(e.left+l,e.top+e.topOffset+o).transform(this.calcTransformMatrix()).transform(this.canvas.viewportTransform).multiply(new I(u.clientWidth/d,u.clientHeight/g));return y.x<0&&(y.x=0),y.x>p&&(y.x=p),y.y<0&&(y.y=0),y.y>m&&(y.y=m),y.x+=this.canvas._offset.left,y.y+=this.canvas._offset.top,{left:"".concat(y.x,"px"),top:"".concat(y.y,"px"),fontSize:"".concat(o,"px"),charHeight:o}}_saveEditingProps(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,selectable:this.selectable,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}}_restoreEditingProps(){this._savedProps&&(this.hoverCursor=this._savedProps.hoverCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.selectable=this._savedProps.selectable,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor||this.canvas.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor||this.canvas.moveCursor),delete this._savedProps)}_exitEditing(){const t=this.hiddenTextarea;this.selected=!1,this.isEditing=!1,t&&(t.blur&&t.blur(),t.parentNode&&t.parentNode.removeChild(t)),this.hiddenTextarea=null,this.abortCursorAnimation(),this.selectionStart!==this.selectionEnd&&this.clearContextTop()}exitEditing(){const t=this._textBeforeEdit!==this.text;return this._exitEditing(),this.selectionEnd=this.selectionStart,this._restoreEditingProps(),this._forceClearCache&&(this.initDimensions(),this.setCoords()),this.fire("editing:exited"),t&&this.fire(eh),this.canvas&&(this.canvas.fire("text:editing:exited",{target:this}),t&&this.canvas.fire("object:modified",{target:this})),this}_removeExtraneousStyles(){for(const t in this.styles)this._textLines[t]||delete this.styles[t]}removeStyleFromTo(t,e){const{lineIndex:i,charIndex:r}=this.get2DCursorLocation(t,!0),{lineIndex:s,charIndex:o}=this.get2DCursorLocation(e,!0);if(i!==s){if(this.styles[i])for(let l=r;l<this._unwrappedTextLines[i].length;l++)delete this.styles[i][l];if(this.styles[s])for(let l=o;l<this._unwrappedTextLines[s].length;l++){const h=this.styles[s][l];h&&(this.styles[i]||(this.styles[i]={}),this.styles[i][r+l-o]=h)}for(let l=i+1;l<=s;l++)delete this.styles[l];this.shiftLineStyles(s,i-s)}else if(this.styles[i]){const l=this.styles[i],h=o-r;for(let u=r;u<o;u++)delete l[u];for(const u in this.styles[i]){const d=parseInt(u,10);d>=o&&(l[d-h]=l[u],delete l[u])}}}shiftLineStyles(t,e){const i=Object.assign({},this.styles);for(const r in this.styles){const s=parseInt(r,10);s>t&&(this.styles[s+e]=i[s],i[s-e]||delete this.styles[s])}}insertNewlineStyleObject(t,e,i,r){const s={},o=this._unwrappedTextLines[t].length,l=o===e;let h=!1;i||(i=1),this.shiftLineStyles(t,i);const u=this.styles[t]?this.styles[t][e===0?e:e-1]:void 0;for(const g in this.styles[t]){const p=parseInt(g,10);p>=e&&(h=!0,s[p-e]=this.styles[t][g],l&&e===0||delete this.styles[t][g])}let d=!1;for(h&&!l&&(this.styles[t+i]=s,d=!0),(d||o>e)&&i--;i>0;)r&&r[i-1]?this.styles[t+i]={0:L({},r[i-1])}:u?this.styles[t+i]={0:L({},u)}:delete this.styles[t+i],i--;this._forceClearCache=!0}insertCharStyleObject(t,e,i,r){this.styles||(this.styles={});const s=this.styles[t],o=s?L({},s):{};i||(i=1);for(const h in o){const u=parseInt(h,10);u>=e&&(s[u+i]=o[u],o[u-i]||delete s[u])}if(this._forceClearCache=!0,r){for(;i--;)Object.keys(r[i]).length&&(this.styles[t]||(this.styles[t]={}),this.styles[t][e+i]=L({},r[i]));return}if(!s)return;const l=s[e?e-1:1];for(;l&&i--;)this.styles[t][e+i]=L({},l)}insertNewStyleBlock(t,e,i){const r=this.get2DCursorLocation(e,!0),s=[0];let o,l=0;for(let h=0;h<t.length;h++)t[h]===`
`?(l++,s[l]=0):s[l]++;for(s[0]>0&&(this.insertCharStyleObject(r.lineIndex,r.charIndex,s[0],i),i=i&&i.slice(s[0]+1)),l&&this.insertNewlineStyleObject(r.lineIndex,r.charIndex+s[0],l),o=1;o<l;o++)s[o]>0?this.insertCharStyleObject(r.lineIndex+o,0,s[o],i):i&&this.styles[r.lineIndex+o]&&i[0]&&(this.styles[r.lineIndex+o][0]=i[0]),i=i&&i.slice(s[o]+1);s[o]>0&&this.insertCharStyleObject(r.lineIndex+o,0,s[o],i)}removeChars(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t+1;this.removeStyleFromTo(t,e),this._text.splice(t,e-t),this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}insertChars(t,e,i){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:i;r>i&&this.removeStyleFromTo(i,r);const s=this.graphemeSplit(t);this.insertNewStyleBlock(s,i,e),this._text=[...this._text.slice(0,i),...s,...this._text.slice(r)],this.text=this._text.join(""),this.set("dirty",!0),this.initDimensions(),this.setCoords(),this._removeExtraneousStyles()}setSelectionStartEndWithShift(t,e,i){i<=t?(e===t?this._selectionDirection=he:this._selectionDirection===Xe&&(this._selectionDirection=he,this.selectionEnd=t),this.selectionStart=i):i>t&&i<e?this._selectionDirection===Xe?this.selectionEnd=i:this.selectionStart=i:(e===t?this._selectionDirection=Xe:this._selectionDirection===he&&(this._selectionDirection=Xe,this.selectionStart=e),this.selectionEnd=i)}}class E6 extends O6{initHiddenTextarea(){const t=this.canvas&&Tn(this.canvas.getElement())||Xs(),e=t.createElement("textarea");Object.entries({autocapitalize:"off",autocorrect:"off",autocomplete:"off",spellcheck:"false","data-fabric":"textarea",wrap:"off"}).map(o=>{let[l,h]=o;return e.setAttribute(l,h)});const{top:i,left:r,fontSize:s}=this._calcTextareaPosition();e.style.cssText="position: absolute; top: ".concat(i,"; left: ").concat(r,"; z-index: -999; opacity: 0; width: 1px; height: 1px; font-size: 1px; padding-top: ").concat(s,";"),(this.hiddenTextareaContainer||t.body).appendChild(e),Object.entries({blur:"blur",keydown:"onKeyDown",keyup:"onKeyUp",input:"onInput",copy:"copy",cut:"copy",paste:"paste",compositionstart:"onCompositionStart",compositionupdate:"onCompositionUpdate",compositionend:"onCompositionEnd"}).map(o=>{let[l,h]=o;return e.addEventListener(l,this[h].bind(this))}),this.hiddenTextarea=e}blur(){this.abortCursorAnimation()}onKeyDown(t){if(!this.isEditing)return;const e=this.direction==="rtl"?this.keysMapRtl:this.keysMap;if(t.keyCode in e)this[e[t.keyCode]](t);else{if(!(t.keyCode in this.ctrlKeysMapDown)||!t.ctrlKey&&!t.metaKey)return;this[this.ctrlKeysMapDown[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),t.keyCode>=33&&t.keyCode<=40?(this.inCompositionMode=!1,this.clearContextTop(),this.renderCursorOrSelection()):this.canvas&&this.canvas.requestRenderAll()}onKeyUp(t){!this.isEditing||this._copyDone||this.inCompositionMode?this._copyDone=!1:t.keyCode in this.ctrlKeysMapUp&&(t.ctrlKey||t.metaKey)&&(this[this.ctrlKeysMapUp[t.keyCode]](t),t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.requestRenderAll())}onInput(t){const e=this.fromPaste;if(this.fromPaste=!1,t&&t.stopPropagation(),!this.isEditing)return;const i=()=>{this.updateFromTextArea(),this.fire(th),this.canvas&&(this.canvas.fire("text:changed",{target:this}),this.canvas.requestRenderAll())};if(this.hiddenTextarea.value==="")return this.styles={},void i();const r=this._splitTextIntoLines(this.hiddenTextarea.value).graphemeText,s=this._text.length,o=r.length,l=this.selectionStart,h=this.selectionEnd,u=l!==h;let d,g,p,m,y=o-s;const _=this.fromStringToGraphemeSelection(this.hiddenTextarea.selectionStart,this.hiddenTextarea.selectionEnd,this.hiddenTextarea.value),C=l>_.selectionStart;u?(g=this._text.slice(l,h),y+=h-l):o<s&&(g=C?this._text.slice(h+y,h):this._text.slice(l,l-y));const b=r.slice(_.selectionEnd-y,_.selectionEnd);if(g&&g.length&&(b.length&&(d=this.getSelectionStyles(l,l+1,!1),d=b.map(()=>d[0])),u?(p=l,m=h):C?(p=h-g.length,m=h):(p=h,m=h+g.length),this.removeStyleFromTo(p,m)),b.length){const{copyPasteData:x}=Dn();e&&b.join("")===x.copiedText&&!Kt.disableStyleCopyPaste&&(d=x.copiedTextStyle),this.insertNewStyleBlock(b,l,d)}i()}onCompositionStart(){this.inCompositionMode=!0}onCompositionEnd(){this.inCompositionMode=!1}onCompositionUpdate(t){let{target:e}=t;const{selectionStart:i,selectionEnd:r}=e;this.compositionStart=i,this.compositionEnd=r,this.updateTextareaPosition()}copy(){if(this.selectionStart===this.selectionEnd)return;const{copyPasteData:t}=Dn();t.copiedText=this.getSelectedText(),Kt.disableStyleCopyPaste?t.copiedTextStyle=void 0:t.copiedTextStyle=this.getSelectionStyles(this.selectionStart,this.selectionEnd,!0),this._copyDone=!0}paste(){this.fromPaste=!0}_getWidthBeforeCursor(t,e){let i,r=this._getLineLeftOffset(t);return e>0&&(i=this.__charBounds[t][e-1],r+=i.left+i.width),r}getDownCursorOffset(t,e){const i=this._getSelectionForOffset(t,e),r=this.get2DCursorLocation(i),s=r.lineIndex;if(s===this._textLines.length-1||t.metaKey||t.keyCode===34)return this._text.length-i;const o=r.charIndex,l=this._getWidthBeforeCursor(s,o),h=this._getIndexOnLine(s+1,l);return this._textLines[s].slice(o).length+h+1+this.missingNewlineOffset(s)}_getSelectionForOffset(t,e){return t.shiftKey&&this.selectionStart!==this.selectionEnd&&e?this.selectionEnd:this.selectionStart}getUpCursorOffset(t,e){const i=this._getSelectionForOffset(t,e),r=this.get2DCursorLocation(i),s=r.lineIndex;if(s===0||t.metaKey||t.keyCode===33)return-i;const o=r.charIndex,l=this._getWidthBeforeCursor(s,o),h=this._getIndexOnLine(s-1,l),u=this._textLines[s].slice(0,o),d=this.missingNewlineOffset(s-1);return-this._textLines[s-1].length+h-u.length+(1-d)}_getIndexOnLine(t,e){const i=this._textLines[t];let r,s,o=this._getLineLeftOffset(t),l=0;for(let h=0,u=i.length;h<u;h++)if(r=this.__charBounds[t][h].width,o+=r,o>e){s=!0;const d=o-r,g=o,p=Math.abs(d-e);l=Math.abs(g-e)<p?h:h-1;break}return s||(l=i.length-1),l}moveCursorDown(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorUpOrDown("Down",t)}moveCursorUp(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorUpOrDown("Up",t)}_moveCursorUpOrDown(t,e){const i=this["get".concat(t,"CursorOffset")](e,this._selectionDirection===Xe);if(e.shiftKey?this.moveCursorWithShift(i):this.moveCursorWithoutShift(i),i!==0){const r=this.text.length;this.selectionStart=zs(0,this.selectionStart,r),this.selectionEnd=zs(0,this.selectionEnd,r),this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea()}}moveCursorWithShift(t){const e=this._selectionDirection===he?this.selectionStart+t:this.selectionEnd+t;return this.setSelectionStartEndWithShift(this.selectionStart,this.selectionEnd,e),t!==0}moveCursorWithoutShift(t){return t<0?(this.selectionStart+=t,this.selectionEnd=this.selectionStart):(this.selectionEnd+=t,this.selectionStart=this.selectionEnd),t!==0}moveCursorLeft(t){this.selectionStart===0&&this.selectionEnd===0||this._moveCursorLeftOrRight("Left",t)}_move(t,e,i){let r;if(t.altKey)r=this["findWordBoundary".concat(i)](this[e]);else{if(!t.metaKey&&t.keyCode!==35&&t.keyCode!==36)return this[e]+=i==="Left"?-1:1,!0;r=this["findLineBoundary".concat(i)](this[e])}return r!==void 0&&this[e]!==r&&(this[e]=r,!0)}_moveLeft(t,e){return this._move(t,e,"Left")}_moveRight(t,e){return this._move(t,e,"Right")}moveCursorLeftWithoutShift(t){let e=!0;return this._selectionDirection=he,this.selectionEnd===this.selectionStart&&this.selectionStart!==0&&(e=this._moveLeft(t,"selectionStart")),this.selectionEnd=this.selectionStart,e}moveCursorLeftWithShift(t){return this._selectionDirection===Xe&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):this.selectionStart!==0?(this._selectionDirection=he,this._moveLeft(t,"selectionStart")):void 0}moveCursorRight(t){this.selectionStart>=this._text.length&&this.selectionEnd>=this._text.length||this._moveCursorLeftOrRight("Right",t)}_moveCursorLeftOrRight(t,e){const i="moveCursor".concat(t).concat(e.shiftKey?"WithShift":"WithoutShift");this._currentCursorOpacity=1,this[i](e)&&(this.abortCursorAnimation(),this.initDelayedCursor(),this._fireSelectionChanged(),this._updateTextarea())}moveCursorRightWithShift(t){return this._selectionDirection===he&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):this.selectionEnd!==this._text.length?(this._selectionDirection=Xe,this._moveRight(t,"selectionEnd")):void 0}moveCursorRightWithoutShift(t){let e=!0;return this._selectionDirection=Xe,this.selectionStart===this.selectionEnd?(e=this._moveRight(t,"selectionStart"),this.selectionEnd=this.selectionStart):this.selectionStart=this.selectionEnd,e}}const jd=n=>!!n.button;class M6 extends E6{constructor(){super(...arguments),D(this,"draggableTextDelegate",void 0)}initBehavior(){this.on("mousedown",this._mouseDownHandler),this.on("mousedown:before",this._mouseDownHandlerBefore),this.on("mouseup",this.mouseUpHandler),this.on("mousedblclick",this.doubleClickHandler),this.on("tripleclick",this.tripleClickHandler),this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown),this.draggableTextDelegate=new P6(this),super.initBehavior()}shouldStartDragging(){return this.draggableTextDelegate.isActive()}onDragStart(t){return this.draggableTextDelegate.onDragStart(t)}canDrop(t){return this.draggableTextDelegate.canDrop(t)}onMouseDown(t){if(!this.canvas)return;this.__newClickTime=+new Date;const e=t.pointer;this.isTripleClick(e)&&(this.fire("tripleclick",t),lf(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastSelected=this.selected&&!this.getActiveControl()}isTripleClick(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y}doubleClickHandler(t){this.isEditing&&this.selectWord(this.getSelectionStartFromPointer(t.e))}tripleClickHandler(t){this.isEditing&&this.selectLine(this.getSelectionStartFromPointer(t.e))}_mouseDownHandler(t){let{e}=t;this.canvas&&this.editable&&!jd(e)&&!this.getActiveControl()&&(this.draggableTextDelegate.start(e)||(this.canvas.textEditingManager.register(this),this.selected&&(this.inCompositionMode=!1,this.setCursorByClick(e)),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.selectionStart===this.selectionEnd&&this.abortCursorAnimation(),this.renderCursorOrSelection())))}_mouseDownHandlerBefore(t){let{e}=t;this.canvas&&this.editable&&!jd(e)&&(this.selected=this===this.canvas._activeObject)}mouseUpHandler(t){let{e,transform:i}=t;const r=this.draggableTextDelegate.end(e);if(this.canvas){this.canvas.textEditingManager.unregister(this);const s=this.canvas._activeObject;if(s&&s!==this)return}!this.editable||this.group&&!this.group.interactive||i&&i.actionPerformed||jd(e)||r||(this.__lastSelected&&!this.getActiveControl()?(this.selected=!1,this.__lastSelected=!1,this.enterEditing(e),this.selectionStart===this.selectionEnd?this.initDelayedCursor(!0):this.renderCursorOrSelection()):this.selected=!0)}setCursorByClick(t){const e=this.getSelectionStartFromPointer(t),i=this.selectionStart,r=this.selectionEnd;t.shiftKey?this.setSelectionStartEndWithShift(i,r,e):(this.selectionStart=e,this.selectionEnd=e),this.isEditing&&(this._fireSelectionChanged(),this._updateTextarea())}getSelectionStartFromPointer(t){const e=this.canvas.getScenePoint(t).transform(Xi(this.calcTransformMatrix())).add(new I(-this._getLeftOffset(),-this._getTopOffset()));let i=0,r=0,s=0;for(let u=0;u<this._textLines.length&&i<=e.y;u++)i+=this.getHeightOfLine(u),s=u,u>0&&(r+=this._textLines[u-1].length+this.missingNewlineOffset(u-1));let o=Math.abs(this._getLineLeftOffset(s));const l=this._textLines[s].length,h=this.__charBounds[s];for(let u=0;u<l;u++){const d=o+h[u].kernedWidth;if(e.x<=d){Math.abs(e.x-d)<=Math.abs(e.x-o)&&r++;break}o=d,r++}return Math.min(this.flipX?l-r:r,this._text.length)}}const Tc="moveCursorUp",Pc="moveCursorDown",Oc="moveCursorLeft",Ec="moveCursorRight",Mc="exitEditing",A6=L({selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"",cursorDelay:1e3,cursorDuration:600,caching:!0,hiddenTextareaContainer:null,keysMap:{9:Mc,27:Mc,33:Tc,34:Pc,35:Ec,36:Oc,37:Oc,38:Tc,39:Ec,40:Pc},keysMapRtl:{9:Mc,27:Mc,33:Tc,34:Pc,35:Oc,36:Ec,37:Ec,38:Tc,39:Oc,40:Pc},ctrlKeysMapDown:{65:"selectAll"},ctrlKeysMapUp:{67:"copy",88:"cut"}},{_selectionDirection:null,_reSpace:/\s|\r?\n/,inCompositionMode:!1});class Zn extends M6{static getDefaults(){return L(L({},super.getDefaults()),Zn.ownDefaults)}get type(){const t=super.type;return t==="itext"?"i-text":t}constructor(t,e){super(t,L(L({},Zn.ownDefaults),e)),this.initBehavior()}_set(t,e){return this.isEditing&&this._savedProps&&t in this._savedProps?(this._savedProps[t]=e,this):(t==="canvas"&&(this.canvas instanceof Bo&&this.canvas.textEditingManager.remove(this),e instanceof Bo&&e.textEditingManager.add(this)),super._set(t,e))}setSelectionStart(t){t=Math.max(t,0),this._updateAndFire("selectionStart",t)}setSelectionEnd(t){t=Math.min(t,this.text.length),this._updateAndFire("selectionEnd",t)}_updateAndFire(t,e){this[t]!==e&&(this._fireSelectionChanged(),this[t]=e),this._updateTextarea()}_fireSelectionChanged(){this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this})}initDimensions(){this.isEditing&&this.initDelayedCursor(),super.initDimensions()}getSelectionStyles(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart||0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionEnd,i=arguments.length>2?arguments[2]:void 0;return super.getSelectionStyles(t,e,i)}setSelectionStyles(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.selectionStart||0,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.selectionEnd;return super.setSelectionStyles(t,e,i)}get2DCursorLocation(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;return super.get2DCursorLocation(t,e)}render(t){super.render(t),this.cursorOffsetCache={},this.renderCursorOrSelection()}toCanvasElement(t){const e=this.isEditing;this.isEditing=!1;const i=super.toCanvasElement(t);return this.isEditing=e,i}renderCursorOrSelection(){if(!this.isEditing)return;const t=this.clearContextTop(!0);if(!t)return;const e=this._getCursorBoundaries();this.selectionStart===this.selectionEnd?this.renderCursor(t,e):this.renderSelection(t,e),this.canvas.contextTopDirty=!0,t.restore()}_getCursorBoundaries(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.selectionStart,e=arguments.length>1?arguments[1]:void 0;const i=this._getLeftOffset(),r=this._getTopOffset(),s=this._getCursorBoundariesOffsets(t,e);return{left:i,top:r,leftOffset:s.left,topOffset:s.top}}_getCursorBoundariesOffsets(t,e){return e?this.__getCursorBoundariesOffsets(t):this.cursorOffsetCache&&"top"in this.cursorOffsetCache?this.cursorOffsetCache:this.cursorOffsetCache=this.__getCursorBoundariesOffsets(t)}__getCursorBoundariesOffsets(t){let e=0,i=0;const{charIndex:r,lineIndex:s}=this.get2DCursorLocation(t);for(let u=0;u<s;u++)e+=this.getHeightOfLine(u);const o=this._getLineLeftOffset(s),l=this.__charBounds[s][r];l&&(i=l.left),this.charSpacing!==0&&r===this._textLines[s].length&&(i-=this._getWidthOfCharSpacing());const h={top:e,left:o+(i>0?i:0)};return this.direction==="rtl"&&(this.textAlign===Xe||this.textAlign===Un||this.textAlign===Ua?h.left*=-1:this.textAlign===he||this.textAlign===uh?h.left=o-(i>0?i:0):this.textAlign!==Lt&&this.textAlign!==Ga||(h.left=o-(i>0?i:0))),h}renderCursorAt(t){const e=this._getCursorBoundaries(t,!0);this._renderCursor(this.canvas.contextTop,e,t)}renderCursor(t,e){this._renderCursor(t,e,this.selectionStart)}_renderCursor(t,e,i){const r=this.get2DCursorLocation(i),s=r.lineIndex,o=r.charIndex>0?r.charIndex-1:0,l=this.getValueOfPropertyAt(s,o,"fontSize"),h=this.getObjectScaling().x*this.canvas.getZoom(),u=this.cursorWidth/h,d=this.getValueOfPropertyAt(s,o,"deltaY"),g=e.topOffset+(1-this._fontSizeFraction)*this.getHeightOfLine(s)/this.lineHeight-l*(1-this._fontSizeFraction);this.inCompositionMode&&this.renderSelection(t,e),t.fillStyle=this.cursorColor||this.getValueOfPropertyAt(s,o,He),t.globalAlpha=this._currentCursorOpacity,t.fillRect(e.left+e.leftOffset-u/2,g+e.top+d,u,l)}renderSelection(t,e){const i={selectionStart:this.inCompositionMode?this.hiddenTextarea.selectionStart:this.selectionStart,selectionEnd:this.inCompositionMode?this.hiddenTextarea.selectionEnd:this.selectionEnd};this._renderSelection(t,i,e)}renderDragSourceEffect(){const t=this.draggableTextDelegate.getDragStartSelection();this._renderSelection(this.canvas.contextTop,t,this._getCursorBoundaries(t.selectionStart,!0))}renderDropTargetEffect(t){const e=this.getSelectionStartFromPointer(t);this.renderCursorAt(e)}_renderSelection(t,e,i){const r=e.selectionStart,s=e.selectionEnd,o=this.textAlign.includes(Un),l=this.get2DCursorLocation(r),h=this.get2DCursorLocation(s),u=l.lineIndex,d=h.lineIndex,g=l.charIndex<0?0:l.charIndex,p=h.charIndex<0?0:h.charIndex;for(let m=u;m<=d;m++){const y=this._getLineLeftOffset(m)||0;let _=this.getHeightOfLine(m),C=0,b=0,x=0;if(m===u&&(b=this.__charBounds[u][g].left),m>=u&&m<d)x=o&&!this.isEndOfWrapping(m)?this.width:this.getLineWidth(m)||5;else if(m===d)if(p===0)x=this.__charBounds[d][p].left;else{const A=this._getWidthOfCharSpacing();x=this.__charBounds[d][p-1].left+this.__charBounds[d][p-1].width-A}C=_,(this.lineHeight<1||m===d&&this.lineHeight>1)&&(_/=this.lineHeight);let T=i.left+y+b,O=_,E=0;const V=x-b;this.inCompositionMode?(t.fillStyle=this.compositionColor||"black",O=1,E=_):t.fillStyle=this.selectionColor,this.direction==="rtl"&&(this.textAlign===Xe||this.textAlign===Un||this.textAlign===Ua?T=this.width-T-V:this.textAlign===he||this.textAlign===uh?T=i.left+y-x:this.textAlign!==Lt&&this.textAlign!==Ga||(T=i.left+y-x)),t.fillRect(T,i.top+i.topOffset+E,V,O),i.topOffset+=C}}getCurrentCharFontSize(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,"fontSize")}getCurrentCharColor(){const t=this._getCurrentCharIndex();return this.getValueOfPropertyAt(t.l,t.c,He)}_getCurrentCharIndex(){const t=this.get2DCursorLocation(this.selectionStart,!0),e=t.charIndex>0?t.charIndex-1:0;return{l:t.lineIndex,c:e}}dispose(){this._exitEditing(),this.draggableTextDelegate.dispose(),super.dispose()}}D(Zn,"ownDefaults",A6),D(Zn,"type","IText"),ht.setClass(Zn),ht.setClass(Zn,"i-text");class Vi extends Zn{static getDefaults(){return L(L({},super.getDefaults()),Vi.ownDefaults)}constructor(t,e){super(t,L(L({},Vi.ownDefaults),e))}static createControls(){return{controls:k_()}}initDimensions(){this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes(Un)&&this.enlargeSpaces(),this.height=this.calcTextHeight())}_generateStyleMap(t){let e=0,i=0,r=0;const s={};for(let o=0;o<t.graphemeLines.length;o++)t.graphemeText[r]===`
`&&o>0?(i=0,r++,e++):!this.splitByGrapheme&&this._reSpaceAndTab.test(t.graphemeText[r])&&o>0&&(i++,r++),s[o]={line:e,offset:i},r+=t.graphemeLines[o].length,i+=t.graphemeLines[o].length;return s}styleHas(t,e){if(this._styleMap&&!this.isWrapping){const i=this._styleMap[e];i&&(e=i.line)}return super.styleHas(t,e)}isEmptyStyles(t){if(!this.styles)return!0;let e,i=0,r=t+1,s=!1;const o=this._styleMap[t],l=this._styleMap[t+1];o&&(t=o.line,i=o.offset),l&&(r=l.line,s=r===t,e=l.offset);const h=t===void 0?this.styles:{line:this.styles[t]};for(const u in h)for(const d in h[u]){const g=parseInt(d,10);if(g>=i&&(!s||g<e))for(const p in h[u][d])return!1}return!0}_getStyleDeclaration(t,e){if(this._styleMap&&!this.isWrapping){const i=this._styleMap[t];if(!i)return{};t=i.line,e=i.offset+e}return super._getStyleDeclaration(t,e)}_setStyleDeclaration(t,e,i){const r=this._styleMap[t];super._setStyleDeclaration(r.line,r.offset+e,i)}_deleteStyleDeclaration(t,e){const i=this._styleMap[t];super._deleteStyleDeclaration(i.line,i.offset+e)}_getLineStyle(t){const e=this._styleMap[t];return!!this.styles[e.line]}_setLineStyle(t){const e=this._styleMap[t];super._setLineStyle(e.line)}_wrapText(t,e){this.isWrapping=!0;const i=this.getGraphemeDataForRender(t),r=[];for(let s=0;s<i.wordsData.length;s++)r.push(...this._wrapLine(s,e,i));return this.isWrapping=!1,r}getGraphemeDataForRender(t){const e=this.splitByGrapheme,i=e?"":" ";let r=0;return{wordsData:t.map((s,o)=>{let l=0;const h=e?this.graphemeSplit(s):this.wordSplit(s);return h.length===0?[{word:[],width:0}]:h.map(u=>{const d=e?[u]:this.graphemeSplit(u),g=this._measureWord(d,o,l);return r=Math.max(g,r),l+=d.length+i.length,{word:d,width:g}})}),largestWordWidth:r}}_measureWord(t,e){let i,r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=0;for(let o=0,l=t.length;o<l;o++)s+=this._getGraphemeBox(t[o],e,o+r,i,!0).kernedWidth,i=t[o];return s}wordSplit(t){return t.split(this._wordJoiners)}_wrapLine(t,e,i){let{largestWordWidth:r,wordsData:s}=i,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;const l=this._getWidthOfCharSpacing(),h=this.splitByGrapheme,u=[],d=h?"":" ";let g=0,p=[],m=0,y=0,_=!0;e-=o;const C=Math.max(e,r,this.dynamicMinWidth),b=s[t];let x;for(m=0,x=0;x<b.length;x++){const{word:T,width:O}=b[x];m+=T.length,g+=y+O-l,g>C&&!_?(u.push(p),p=[],g=O,_=!0):g+=l,_||h||p.push(d),p=p.concat(T),y=h?0:this._measureWord([d],t,m),m++,_=!1}return x&&u.push(p),r+o>this.dynamicMinWidth&&(this.dynamicMinWidth=r-l+o),u}isEndOfWrapping(t){return!this._styleMap[t+1]||this._styleMap[t+1].line!==this._styleMap[t].line}missingNewlineOffset(t,e){return this.splitByGrapheme&&!e?this.isEndOfWrapping(t)?1:0:1}_splitTextIntoLines(t){const e=super._splitTextIntoLines(t),i=this._wrapText(e.lines,this.width),r=new Array(i.length);for(let s=0;s<i.length;s++)r[s]=i[s].join("");return e.lines=r,e.graphemeLines=i,e}getMinWidth(){return Math.max(this.minWidth,this.dynamicMinWidth)}_removeExtraneousStyles(){const t=new Map;for(const e in this._styleMap){const i=parseInt(e,10);if(this._textLines[i]){const r=this._styleMap[e].line;t.set("".concat(r),!0)}}for(const e in this.styles)t.has(e)||delete this.styles[e]}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return super.toObject(["minWidth","splitByGrapheme",...t])}}D(Vi,"type","Textbox"),D(Vi,"textLayoutProperties",[...Zn.textLayoutProperties,"width"]),D(Vi,"ownDefaults",{minWidth:20,dynamicMinWidth:2,lockScalingFlip:!0,noScaleCache:!1,_wordJoiners:/[ \t\r]/,splitByGrapheme:!1}),ht.setClass(Vi);class bf extends Cl{shouldPerformLayout(t){return!!t.target.clipPath&&super.shouldPerformLayout(t)}shouldLayoutClipPath(){return!1}calcLayoutResult(t,e){const{target:i}=t,{clipPath:r,group:s}=i;if(!r||!this.shouldPerformLayout(t))return;const{width:o,height:l}=tr(H_(i,r)),h=new I(o,l);if(r.absolutePositioned)return{center:br(r.getRelativeCenterPoint(),void 0,s?s.calcTransformMatrix():void 0),size:h};{const u=r.getRelativeCenterPoint().transform(i.calcOwnMatrix(),!0);if(this.shouldPerformLayout(t)){const{center:d=new I,correction:g=new I}=this.calcBoundingBox(e,t)||{};return{center:d.add(u),correction:g.subtract(u),size:h}}return{center:i.getRelativeCenterPoint().add(u),size:h}}}}D(bf,"type","clip-path"),ht.setClass(bf);class wf extends Cl{getInitialSize(t,e){let{target:i}=t,{size:r}=e;return new I(i.width||r.x,i.height||r.y)}}D(wf,"type","fixed"),ht.setClass(wf);class k6 extends Lo{subscribeTargets(t){const e=t.target;t.targets.reduce((i,r)=>(r.parent&&i.add(r.parent),i),new Set).forEach(i=>{i.layoutManager.subscribeTargets({target:i,targets:[e]})})}unsubscribeTargets(t){const e=t.target,i=e.getObjects();t.targets.reduce((r,s)=>(s.parent&&r.add(s.parent),r),new Set).forEach(r=>{!i.some(s=>s.parent===r)&&r.layoutManager.unsubscribeTargets({target:r,targets:[e]})})}}class Gr extends Di{static getDefaults(){return L(L({},super.getDefaults()),Gr.ownDefaults)}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),Object.assign(this,Gr.ownDefaults),this.setOptions(e);const{left:i,top:r,layoutManager:s}=e;this.groupInit(t,{left:i,top:r,layoutManager:s??new k6})}_shouldSetNestedCoords(){return!0}__objectSelectionMonitor(){}multiSelectAdd(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];this.multiSelectionStacking==="selection-order"?this.add(...e):e.forEach(r=>{const s=this._objects.findIndex(l=>l.isInFrontOf(r)),o=s===-1?this.size():s;this.insertAt(o,r)})}canEnterGroup(t){return this.getObjects().some(e=>e.isDescendantOf(t)||t.isDescendantOf(e))?(Sr("error","ActiveSelection: circular object trees are not supported, this call has no effect"),!1):super.canEnterGroup(t)}enterGroup(t,e){t.parent&&t.parent===t.group?t.parent._exitGroup(t):t.group&&t.parent!==t.group&&t.group.remove(t),this._enterGroup(t,e)}exitGroup(t,e){this._exitGroup(t,e),t.parent&&t.parent._enterGroup(t,!0)}_onAfterObjectsChange(t,e){super._onAfterObjectsChange(t,e);const i=new Set;e.forEach(r=>{const{parent:s}=r;s&&i.add(s)}),t===Cg?i.forEach(r=>{r._onAfterObjectsChange(oh,e)}):i.forEach(r=>{r._set("dirty",!0)})}onDeselect(){return this.removeAll(),!1}toString(){return"#<ActiveSelection: (".concat(this.complexity(),")>")}shouldCache(){return!1}isOnACache(){return!1}_renderControls(t,e,i){t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1;const r=L(L({hasControls:!1},i),{},{forActiveSelection:!0});for(let s=0;s<this._objects.length;s++)this._objects[s]._renderControls(t,r);super._renderControls(t,e),t.restore()}}D(Gr,"type","ActiveSelection"),D(Gr,"ownDefaults",{multiSelectionStacking:"canvas-stacking"}),ht.setClass(Gr),ht.setClass(Gr,"activeSelection");class mb{constructor(){D(this,"resources",{})}applyFilters(t,e,i,r,s){const o=s.getContext("2d");if(!o)return;o.drawImage(e,0,0,i,r);const l={sourceWidth:i,sourceHeight:r,imageData:o.getImageData(0,0,i,r),originalEl:e,originalImageData:o.getImageData(0,0,i,r),canvasEl:s,ctx:o,filterBackend:this};t.forEach(u=>{u.applyTo(l)});const{imageData:h}=l;return h.width===i&&h.height===r||(s.width=h.width,s.height=h.height),o.putImageData(h,0,0),l}}class hl{constructor(){let{tileSize:t=Kt.textureSize}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};D(this,"aPosition",new Float32Array([0,0,0,1,1,0,1,1])),D(this,"resources",{}),this.tileSize=t,this.setupGLContext(t,t),this.captureGPUInfo()}setupGLContext(t,e){this.dispose(),this.createWebGLCanvas(t,e)}createWebGLCanvas(t,e){const i=Me();i.width=t,i.height=e;const r=i.getContext("webgl",{alpha:!0,premultipliedAlpha:!1,depth:!1,stencil:!1,antialias:!1});r&&(r.clearColor(0,0,0,0),this.canvas=i,this.gl=r)}applyFilters(t,e,i,r,s,o){const l=this.gl,h=s.getContext("2d");if(!l||!h)return;let u;o&&(u=this.getCachedTexture(o,e));const d={originalWidth:e.width||e.originalWidth||0,originalHeight:e.height||e.originalHeight||0,sourceWidth:i,sourceHeight:r,destinationWidth:i,destinationHeight:r,context:l,sourceTexture:this.createTexture(l,i,r,u?void 0:e),targetTexture:this.createTexture(l,i,r),originalTexture:u||this.createTexture(l,i,r,u?void 0:e),passes:t.length,webgl:!0,aPosition:this.aPosition,programCache:this.programCache,pass:0,filterBackend:this,targetCanvas:s},g=l.createFramebuffer();return l.bindFramebuffer(l.FRAMEBUFFER,g),t.forEach(p=>{p&&p.applyTo(d)}),function(p){const m=p.targetCanvas,y=m.width,_=m.height,C=p.destinationWidth,b=p.destinationHeight;y===C&&_===b||(m.width=C,m.height=b)}(d),this.copyGLTo2D(l,d),l.bindTexture(l.TEXTURE_2D,null),l.deleteTexture(d.sourceTexture),l.deleteTexture(d.targetTexture),l.deleteFramebuffer(g),h.setTransform(1,0,0,1,0,0),d}dispose(){this.canvas&&(this.canvas=null,this.gl=null),this.clearWebGLCaches()}clearWebGLCaches(){this.programCache={},this.textureCache={}}createTexture(t,e,i,r,s){const{NEAREST:o,TEXTURE_2D:l,RGBA:h,UNSIGNED_BYTE:u,CLAMP_TO_EDGE:d,TEXTURE_MAG_FILTER:g,TEXTURE_MIN_FILTER:p,TEXTURE_WRAP_S:m,TEXTURE_WRAP_T:y}=t,_=t.createTexture();return t.bindTexture(l,_),t.texParameteri(l,g,s||o),t.texParameteri(l,p,s||o),t.texParameteri(l,m,d),t.texParameteri(l,y,d),r?t.texImage2D(l,0,h,h,u,r):t.texImage2D(l,0,h,e,i,0,h,u,null),_}getCachedTexture(t,e,i){const{textureCache:r}=this;if(r[t])return r[t];{const s=this.createTexture(this.gl,e.width,e.height,e,i);return s&&(r[t]=s),s}}evictCachesForKey(t){this.textureCache[t]&&(this.gl.deleteTexture(this.textureCache[t]),delete this.textureCache[t])}copyGLTo2D(t,e){const i=t.canvas,r=e.targetCanvas,s=r.getContext("2d");if(!s)return;s.translate(0,r.height),s.scale(1,-1);const o=i.height-r.height;s.drawImage(i,0,o,r.width,r.height,0,0,r.width,r.height)}copyGLTo2DPutImageData(t,e){const i=e.targetCanvas.getContext("2d"),r=e.destinationWidth,s=e.destinationHeight,o=r*s*4;if(!i)return;const l=new Uint8Array(this.imageBuffer,0,o),h=new Uint8ClampedArray(this.imageBuffer,0,o);t.readPixels(0,0,r,s,t.RGBA,t.UNSIGNED_BYTE,l);const u=new ImageData(h,r,s);i.putImageData(u,0,0)}captureGPUInfo(){if(this.gpuInfo)return this.gpuInfo;const t=this.gl,e={renderer:"",vendor:""};if(!t)return e;const i=t.getExtension("WEBGL_debug_renderer_info");if(i){const r=t.getParameter(i.UNMASKED_RENDERER_WEBGL),s=t.getParameter(i.UNMASKED_VENDOR_WEBGL);r&&(e.renderer=r.toLowerCase()),s&&(e.vendor=s.toLowerCase())}return this.gpuInfo=e,e}}let Vc;function vb(){const{WebGLProbe:n}=Dn();return n.queryWebGL(Me()),Kt.enableGLFiltering&&n.isSupported(Kt.textureSize)?new hl({tileSize:Kt.textureSize}):new mb}function Xc(){return!Vc&&(!(arguments.length>0&&arguments[0]!==void 0)||arguments[0])&&(Vc=vb()),Vc}function j6(n){Vc=n}const D6=["filters","resizeFilter","src","crossOrigin","type"],yb=["cropX","cropY"];class we extends pe{static getDefaults(){return L(L({},super.getDefaults()),we.ownDefaults)}constructor(t,e){super(),D(this,"_lastScaleX",1),D(this,"_lastScaleY",1),D(this,"_filterScalingX",1),D(this,"_filterScalingY",1),this.filters=[],Object.assign(this,we.ownDefaults),this.setOptions(e),this.cacheKey="texture".concat(ts()),this.setElement(typeof t=="string"?(this.canvas&&Tn(this.canvas.getElement())||Xs()).getElementById(t):t,e)}getElement(){return this._element}setElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._element=t,this._originalElement=t,this._setWidthHeight(e),t.classList.add(we.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}removeTexture(t){const e=Xc(!1);e instanceof hl&&e.evictCachesForKey(t)}dispose(){super.dispose(),this.removeTexture(this.cacheKey),this.removeTexture("".concat(this.cacheKey,"_filtered")),this._cacheContext=null,["_originalElement","_element","_filteredEl","_cacheCanvas"].forEach(t=>{const e=this[t];e&&Dn().dispose(e),this[t]=void 0})}getCrossOrigin(){return this._originalElement&&(this._originalElement.crossOrigin||null)}getOriginalSize(){const t=this.getElement();return t?{width:t.naturalWidth||t.width,height:t.naturalHeight||t.height}:{width:0,height:0}}_stroke(t){if(!this.stroke||this.strokeWidth===0)return;const e=this.width/2,i=this.height/2;t.beginPath(),t.moveTo(-e,-i),t.lineTo(e,-i),t.lineTo(e,i),t.lineTo(-e,i),t.lineTo(-e,-i),t.closePath()}toObject(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];const e=[];return this.filters.forEach(i=>{i&&e.push(i.toObject())}),L(L({},super.toObject([...yb,...t])),{},{src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e},this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{})}hasCrop(){return!!this.cropX||!!this.cropY||this.width<this._element.width||this.height<this._element.height}_toSVG(){const t=[],e=this._element,i=-this.width/2,r=-this.height/2;let s=[],o=[],l="",h="";if(!e)return[];if(this.hasCrop()){const u=ts();s.push('<clipPath id="imageCrop_'+u+`">
`,'	<rect x="'+i+'" y="'+r+'" width="'+this.width+'" height="'+this.height+`" />
`,`</clipPath>
`),l=' clip-path="url(#imageCrop_'+u+')" '}if(this.imageSmoothing||(h=' image-rendering="optimizeSpeed"'),t.push("	<image ","COMMON_PARTS",'xlink:href="'.concat(this.getSvgSrc(!0),'" x="').concat(i-this.cropX,'" y="').concat(r-this.cropY,'" width="').concat(e.width||e.naturalWidth,'" height="').concat(e.height||e.naturalHeight,'"').concat(h).concat(l,`></image>
`)),this.stroke||this.strokeDashArray){const u=this.fill;this.fill=null,o=['	<rect x="'.concat(i,'" y="').concat(r,'" width="').concat(this.width,'" height="').concat(this.height,'" style="').concat(this.getSvgStyles(),`" />
`)],this.fill=u}return s=this.paintFirst!==He?s.concat(o,t):s.concat(t,o),s}getSrc(t){const e=t?this._element:this._originalElement;return e?e.toDataURL?e.toDataURL():this.srcFromAttribute?e.getAttribute("src")||"":e.src:this.src||""}getSvgSrc(t){return this.getSrc(t)}setSrc(t){let{crossOrigin:e,signal:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Na(t,{crossOrigin:e,signal:i}).then(r=>{e!==void 0&&this.set({crossOrigin:e}),this.setElement(r)})}toString(){return'#<Image: { src: "'.concat(this.getSrc(),'" }>')}applyResizeFilters(){const t=this.resizeFilter,e=this.minimumScaleTrigger,i=this.getTotalObjectScaling(),r=i.x,s=i.y,o=this._filteredEl||this._originalElement;if(this.group&&this.set("dirty",!0),!t||r>e&&s>e)return this._element=o,this._filterScalingX=1,this._filterScalingY=1,this._lastScaleX=r,void(this._lastScaleY=s);const l=Me(),h=o.width,u=o.height;l.width=h,l.height=u,this._element=l,this._lastScaleX=t.scaleX=r,this._lastScaleY=t.scaleY=s,Xc().applyFilters([t],o,h,u,this._element),this._filterScalingX=l.width/this._originalElement.width,this._filterScalingY=l.height/this._originalElement.height}applyFilters(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.filters||[];if(t=t.filter(s=>s&&!s.isNeutralState()),this.set("dirty",!0),this.removeTexture("".concat(this.cacheKey,"_filtered")),t.length===0)return this._element=this._originalElement,this._filteredEl=void 0,this._filterScalingX=1,void(this._filterScalingY=1);const e=this._originalElement,i=e.naturalWidth||e.width,r=e.naturalHeight||e.height;if(this._element===this._originalElement){const s=Me();s.width=i,s.height=r,this._element=s,this._filteredEl=s}else this._filteredEl&&(this._element=this._filteredEl,this._filteredEl.getContext("2d").clearRect(0,0,i,r),this._lastScaleX=1,this._lastScaleY=1);Xc().applyFilters(t,this._originalElement,i,r,this._element),this._originalElement.width===this._element.width&&this._originalElement.height===this._element.height||(this._filterScalingX=this._element.width/this._originalElement.width,this._filterScalingY=this._element.height/this._originalElement.height)}_render(t){t.imageSmoothingEnabled=this.imageSmoothing,this.isMoving!==!0&&this.resizeFilter&&this._needsResize()&&this.applyResizeFilters(),this._stroke(t),this._renderPaintInOrder(t)}drawCacheOnCanvas(t){t.imageSmoothingEnabled=this.imageSmoothing,super.drawCacheOnCanvas(t)}shouldCache(){return this.needsItsOwnCache()}_renderFill(t){const e=this._element;if(!e)return;const i=this._filterScalingX,r=this._filterScalingY,s=this.width,o=this.height,l=Math.max(this.cropX,0),h=Math.max(this.cropY,0),u=e.naturalWidth||e.width,d=e.naturalHeight||e.height,g=l*i,p=h*r,m=Math.min(s*i,u-g),y=Math.min(o*r,d-p),_=-s/2,C=-o/2,b=Math.min(s,u/i-l),x=Math.min(o,d/r-h);e&&t.drawImage(e,g,p,m,y,_,C,b,x)}_needsResize(){const t=this.getTotalObjectScaling();return t.x!==this._lastScaleX||t.y!==this._lastScaleY}_resetWidthHeight(){this.set(this.getOriginalSize())}_setWidthHeight(){let{width:t,height:e}=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const i=this.getOriginalSize();this.width=t||i.width,this.height=e||i.height}parsePreserveAspectRatioAttribute(){const t=cg(this.preserveAspectRatio||""),e=this.width,i=this.height,r={width:e,height:i};let s,o=this._element.width,l=this._element.height,h=1,u=1,d=0,g=0,p=0,m=0;return!t||t.alignX===ki&&t.alignY===ki?(h=e/o,u=i/l):(t.meetOrSlice==="meet"&&(h=u=N_(this._element,r),s=(e-o*h)/2,t.alignX==="Min"&&(d=-s),t.alignX==="Max"&&(d=s),s=(i-l*u)/2,t.alignY==="Min"&&(g=-s),t.alignY==="Max"&&(g=s)),t.meetOrSlice==="slice"&&(h=u=W_(this._element,r),s=o-e/h,t.alignX==="Mid"&&(p=s/2),t.alignX==="Max"&&(p=s),s=l-i/u,t.alignY==="Mid"&&(m=s/2),t.alignY==="Max"&&(m=s),o=e/h,l=i/u)),{width:o,height:l,scaleX:h,scaleY:u,offsetLeft:d,offsetTop:g,cropX:p,cropY:m}}static fromObject(t,e){let{filters:i,resizeFilter:r,src:s,crossOrigin:o,type:l}=t,h=Ae(t,D6);return Promise.all([Na(s,L(L({},e),{},{crossOrigin:o})),i&&Do(i,e),r&&Do([r],e),wl(h,e)]).then(u=>{let[d,g=[],[p]=[],m={}]=u;return new this(d,L(L({},h),{},{src:s,filters:g,resizeFilter:p},m))})}static fromURL(t){let{crossOrigin:e=null,signal:i}=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return Na(t,{crossOrigin:e,signal:i}).then(s=>new this(s,r))}static async fromElement(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;const r=ir(t,this.ATTRIBUTE_NAMES,i);return this.fromURL(r["xlink:href"],e,r).catch(s=>(Sr("log","Unable to parse Image",s),null))}}function Dd(n){if(!t3.test(n.nodeName))return{};const t=n.getAttribute("viewBox");let e,i,r=1,s=1,o=0,l=0;const h=n.getAttribute("width"),u=n.getAttribute("height"),d=n.getAttribute("x")||0,g=n.getAttribute("y")||0,p=!(t&&lv.test(t)),m=!h||!u||h==="100%"||u==="100%";let y="",_=0,C=0;if(p&&(d||g)&&n.parentNode&&n.parentNode.nodeName!=="#document"&&(y=" translate("+Ei(d||"0")+" "+Ei(g||"0")+") ",e=(n.getAttribute("transform")||"")+y,n.setAttribute("transform",e),n.removeAttribute("x"),n.removeAttribute("y")),p&&m)return{width:0,height:0};const b={width:0,height:0};if(p)return b.width=Ei(h),b.height=Ei(u),b;const x=t.match(lv);o=-parseFloat(x[1]),l=-parseFloat(x[2]);const T=parseFloat(x[3]),O=parseFloat(x[4]);b.minX=o,b.minY=l,b.viewBoxWidth=T,b.viewBoxHeight=O,m?(b.width=T,b.height=O):(b.width=Ei(h),b.height=Ei(u),r=b.width/T,s=b.height/O);const E=cg(n.getAttribute("preserveAspectRatio")||"");if(E.alignX!==ki&&(E.meetOrSlice==="meet"&&(s=r=r>s?s:r),E.meetOrSlice==="slice"&&(s=r=r>s?r:s),_=b.width-T*r,C=b.height-O*r,E.alignX==="Mid"&&(_/=2),E.alignY==="Mid"&&(C/=2),E.alignX==="Min"&&(_=0),E.alignY==="Min"&&(C=0)),r===1&&s===1&&o===0&&l===0&&d===0&&g===0)return b;if((d||g)&&n.parentNode.nodeName!=="#document"&&(y=" translate("+Ei(d||"0")+" "+Ei(g||"0")+") "),e=y+" matrix("+r+" 0 0 "+s+" "+(o*r+_)+" "+(l*s+C)+") ",n.nodeName==="svg"){for(i=n.ownerDocument.createElementNS(hf,"g");n.firstChild;)i.appendChild(n.firstChild);n.appendChild(i)}else i=n,i.removeAttribute("x"),i.removeAttribute("y"),e=i.getAttribute("transform")+e;return i.setAttribute("transform",e),b}D(we,"type","Image"),D(we,"cacheProperties",[...Or,...yb]),D(we,"ownDefaults",{strokeWidth:0,srcFromAttribute:!1,minimumScaleTrigger:.5,cropX:0,cropY:0,imageSmoothing:!0}),D(we,"CSS_CANVAS","canvas-img"),D(we,"ATTRIBUTE_NAMES",[...cs,"x","y","width","height","preserveAspectRatio","xlink:href","crossOrigin","image-rendering"]),ht.setClass(we),ht.setSVGClass(we);const dh=n=>n.tagName.replace("svg:",""),I6=zh(["pattern","defs","symbol","metadata","clipPath","mask","desc"]);function _b(n,t){let e,i,r,s,o=[];for(r=0,s=t.length;r<s;r++)e=t[r],i=n.getElementsByTagNameNS("http://www.w3.org/2000/svg",e),o=o.concat(Array.from(i));return o}const R6=["gradientTransform","x1","x2","y1","y2","gradientUnits","cx","cy","r","fx","fy"],Id="xlink:href";function bb(n,t){var e;const i=((e=t.getAttribute(Id))===null||e===void 0?void 0:e.slice(1))||"",r=n.getElementById(i);if(r&&r.getAttribute(Id)&&bb(n,r),r&&(R6.forEach(s=>{const o=r.getAttribute(s);!t.hasAttribute(s)&&o&&t.setAttribute(s,o)}),!t.children.length)){const s=r.cloneNode(!0);for(;s.firstChild;)t.appendChild(s.firstChild)}t.removeAttribute(Id)}const L6=["linearGradient","radialGradient","svg:linearGradient","svg:radialGradient"];function wb(n){const t=n.getElementsByTagName("style");let e,i;const r={};for(e=0,i=t.length;e<i;e++){const s=(t[e].textContent||"").replace(/\/\*[\s\S]*?\*\//g,"");s.trim()!==""&&s.split("}").filter((o,l,h)=>h.length>1&&o.trim()).forEach(o=>{if((o.match(/{/g)||[]).length>1&&o.trim().startsWith("@"))return;const l=o.split("{"),h={},u=l[1].trim().split(";").filter(function(d){return d.trim()});for(e=0,i=u.length;e<i;e++){const d=u[e].split(":"),g=d[0].trim(),p=d[1].trim();h[g]=p}(o=l[0].trim()).split(",").forEach(d=>{(d=d.replace(/^svg/i,"").trim())!==""&&(r[d]=L(L({},r[d]||{}),h))})})}return r}const Pv=n=>ht.getSVGClass(dh(n).toLowerCase());class B6{constructor(t,e,i,r,s){this.elements=t,this.options=e,this.reviver=i,this.regexUrl=/^url\(['"]?#([^'"]+)['"]?\)/g,this.doc=r,this.clipPaths=s,this.gradientDefs=function(o){const l=_b(o,L6),h={};let u=l.length;for(;u--;){const d=l[u];d.getAttribute("xlink:href")&&bb(o,d);const g=d.getAttribute("id");g&&(h[g]=d)}return h}(r),this.cssRules=wb(r)}parse(){return Promise.all(this.elements.map(t=>this.createObject(t)))}async createObject(t){const e=Pv(t);if(e){const i=await e.fromElement(t,this.options,this.cssRules);return this.resolveGradient(i,t,He),this.resolveGradient(i,t,ji),i instanceof we&&i._originalElement?zc(i,i.parsePreserveAspectRatioAttribute()):zc(i),await this.resolveClipPath(i,t),this.reviver&&this.reviver(t,i),i}return null}extractPropertyDefinition(t,e,i){const r=t[e],s=this.regexUrl;if(!s.test(r))return;s.lastIndex=0;const o=s.exec(r)[1];return s.lastIndex=0,i[o]}resolveGradient(t,e,i){const r=this.extractPropertyDefinition(t,i,this.gradientDefs);if(r){const s=e.getAttribute(i+"-opacity"),o=Co.fromElement(r,t,L(L({},this.options),{},{opacity:s}));t.set(i,o)}}async resolveClipPath(t,e){const i=this.extractPropertyDefinition(t,"clipPath",this.clipPaths);if(i){const r=Xi(t.calcTransformMatrix()),s=i[0].parentElement;let o=e;for(;o.parentElement&&o.getAttribute("clip-path")!==t.clipPath;)o=o.parentElement;o.parentElement.appendChild(s);const l=ll("".concat(o.getAttribute("transform")||""," ").concat(s.getAttribute("originalTransform")||""));s.setAttribute("transform","matrix(".concat(l.join(","),")"));const h=await Promise.all(i.map(b=>Pv(b).fromElement(b,this.options,this.cssRules).then(x=>(zc(x),x.fillRule=x.clipRule,delete x.clipRule,x)))),u=h.length===1?h[0]:new Di(h),d=je(r,u.calcTransformMatrix());u.clipPath&&await this.resolveClipPath(u,o);const{scaleX:g,scaleY:p,angle:m,skewX:y,translateX:_,translateY:C}=Fs(d);u.set({flipX:!1,flipY:!1}),u.set({scaleX:g,scaleY:p,angle:m,skewX:y,skewY:0}),u.setPositionByOrigin(new I(_,C),Lt,Lt),t.clipPath=u}else delete t.clipPath}}const Ov=n=>QM.test(dh(n)),xf=()=>({objects:[],elements:[],options:{},allElements:[]});async function Pg(n,t){let{crossOrigin:e,signal:i}=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(i&&i.aborted)return Sr("log",new Qf("parseSVGDocument")),xf();const r=n.documentElement;(function(u){const d=_b(u,["use","svg:use"]),g=["x","y","xlink:href","href","transform"];for(const p of d){const m=p.attributes,y={};for(const B of m)B.value&&(y[B.name]=B.value);const _=(y["xlink:href"]||y.href||"").slice(1);if(_==="")return;const C=u.getElementById(_);if(C===null)return;let b=C.cloneNode(!0);const x=b.attributes,T={};for(const B of x)B.value&&(T[B.name]=B.value);const{x:O=0,y:E=0,transform:V=""}=y,A="".concat(V," ").concat(T.transform||""," translate(").concat(O,", ").concat(E,")");if(Dd(b),/^svg$/i.test(b.nodeName)){const B=b.ownerDocument.createElementNS(hf,"g");Object.entries(T).forEach(Y=>{let[J,st]=Y;return B.setAttributeNS(hf,J,st)}),B.append(...b.childNodes),b=B}for(const B of m){if(!B)continue;const{name:Y,value:J}=B;if(!g.includes(Y))if(Y==="style"){const st={};mf(J,st),Object.entries(T).forEach(ot=>{let[yt,Tt]=ot;st[yt]=Tt}),mf(T.style||"",st);const ct=Object.entries(st).map(ot=>ot.join(":")).join(";");b.setAttribute(Y,ct)}else!T[Y]&&b.setAttribute(Y,J)}b.setAttribute("transform",A),b.setAttribute("instantiated_by_use","1"),b.removeAttribute("id"),p.parentNode.replaceChild(b,p)}})(n);const s=Array.from(r.getElementsByTagName("*")),o=L(L({},Dd(r)),{},{crossOrigin:e,signal:i}),l=s.filter(u=>(Dd(u),Ov(u)&&!function(d){let g=d;for(;g&&(g=g.parentElement);)if(g&&g.nodeName&&I6.test(dh(g))&&!g.getAttribute("instantiated_by_use"))return!0;return!1}(u)));if(!l||l&&!l.length)return L(L({},xf()),{},{options:o,allElements:s});const h={};return s.filter(u=>dh(u)==="clipPath").forEach(u=>{u.setAttribute("originalTransform",u.getAttribute("transform")||"");const d=u.getAttribute("id");h[d]=Array.from(u.getElementsByTagName("*")).filter(g=>Ov(g))}),{objects:await new B6(l,o,t,n,h).parse(),elements:l,options:o,allElements:s}}function xb(n,t,e){return Pg(new(qn()).DOMParser().parseFromString(n.trim(),"text/xml"),t,e)}function F6(n,t){let e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return new Promise((i,r)=>{tb(n.replace(/^\n\s*/,"").trim(),{onComplete:s=>{const o=s.responseXML;o&&i(o),r()},signal:e.signal})}).then(i=>Pg(i,t,e)).catch(()=>xf())}const Cb=Uy,Ev=n=>function(t,e,i){const{points:r,pathOffset:s}=i;return new I(r[n]).subtract(s).transform(je(i.getViewportTransform(),i.calcTransformMatrix()))},Sb=(n,t,e,i)=>{const{target:r,pointIndex:s}=t,o=r,l=br(new I(e,i),void 0,o.calcOwnMatrix());return o.points[s]=l.add(o.pathOffset),o.setDimensions(),!0},Tb=(n,t)=>function(e,i,r,s){const o=i.target,l=new I(o.points[(n>0?n:o.points.length)-1]),h=l.subtract(o.pathOffset).transform(o.calcOwnMatrix()),u=t(e,L(L({},i),{},{pointIndex:n}),r,s),d=l.subtract(o.pathOffset).transform(o.calcOwnMatrix()).subtract(h);return o.left-=d.x,o.top-=d.y,u},Mv=n=>ls(Cb,Tb(n,Sb)),Cf=(n,t,e)=>{const{path:i,pathOffset:r}=n,s=i[t];return new I(s[e]-r.x,s[e+1]-r.y).transform(je(n.getViewportTransform(),n.calcTransformMatrix()))};function z6(n,t,e){const{commandIndex:i,pointIndex:r}=this;return Cf(e,i,r)}function V6(n,t,e,i){const{target:r}=t,{commandIndex:s,pointIndex:o}=this,l=((h,u,d,g,p)=>{const{path:m,pathOffset:y}=h,_=m[(g>0?g:m.length)-1],C=new I(_[p],_[p+1]),b=C.subtract(y).transform(h.calcOwnMatrix()),x=br(new I(u,d),void 0,h.calcOwnMatrix());m[g][p]=x.x+y.x,m[g][p+1]=x.y+y.y,h.setDimensions();const T=C.subtract(h.pathOffset).transform(h.calcOwnMatrix()).subtract(b);return h.left-=T.x,h.top-=T.y,h.set("dirty",!0),!0})(r,e,i,s,o);return dg(this.actionName,L(L({},gg(n,t,e,i)),{},{commandIndex:s,pointIndex:o})),l}class Pb extends hi{constructor(t){super(t)}render(t,e,i,r,s){const o=L(L({},r),{},{cornerColor:this.controlFill,cornerStrokeColor:this.controlStroke,transparentCorners:!this.controlFill});super.render(t,e,i,o,s)}}class X6 extends Pb{constructor(t){super(t)}render(t,e,i,r,s){const{path:o}=s,{commandIndex:l,pointIndex:h,connectToCommandIndex:u,connectToPointIndex:d}=this;t.save(),t.strokeStyle=this.controlStroke,this.connectionDashArray&&t.setLineDash(this.connectionDashArray);const[g]=o[l],p=Cf(s,u,d);if(g==="Q"){const m=Cf(s,l,h+2);t.moveTo(m.x,m.y),t.lineTo(e,i)}else t.moveTo(e,i);t.lineTo(p.x,p.y),t.stroke(),t.restore(),super.render(t,e,i,r,s)}}const Ac=(n,t,e,i,r,s)=>new(e?X6:Pb)(L(L({commandIndex:n,pointIndex:t,actionName:"modifyPath",positionHandler:z6,actionHandler:V6,connectToCommandIndex:r,connectToPointIndex:s},i),e?i.controlPointStyle:i.pointStyle));var Ns=Object.freeze({__proto__:null,changeWidth:ff,createObjectDefaultControls:bg,createPathControls:function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e={};let i="M";return n.path.forEach((r,s)=>{const o=r[0];switch(o!=="Z"&&(e["c_".concat(s,"_").concat(o)]=Ac(s,r.length-2,!1,t)),o){case"C":e["c_".concat(s,"_C_CP_1")]=Ac(s,1,!0,t,s-1,(l=>l==="C"?5:l==="Q"?3:1)(i)),e["c_".concat(s,"_C_CP_2")]=Ac(s,3,!0,t,s,5);break;case"Q":e["c_".concat(s,"_Q_CP_1")]=Ac(s,1,!0,t,s,3)}i=o}),e},createPolyActionHandler:Mv,createPolyControls:function(n){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const e={};for(let i=0;i<(typeof n=="number"?n:n.points.length);i++)e["p".concat(i)]=new hi(L({actionName:Cb,positionHandler:Ev(i),actionHandler:Mv(i)},t));return e},createPolyPositionHandler:Ev,createResizeControls:A_,createTextboxDefaultControls:k_,dragHandler:u_,factoryPolyActionHandler:Tb,getLocalPoint:Fh,polyActionHandler:Sb,renderCircleControl:y_,renderSquareControl:__,rotationStyleHandler:b_,rotationWithSnapping:w_,scaleCursorStyleHandler:wo,scaleOrSkewActionName:ya,scaleSkewCursorStyleHandler:Es,scalingEqually:va,scalingX:S_,scalingXOrSkewingY:gf,scalingY:T_,scalingYOrSkewingX:pf,skewCursorStyleHandler:P_,skewHandlerX:E_,skewHandlerY:M_,wrapWithFireEvent:ls,wrapWithFixedAnchor:Ys});const Sl=n=>n.webgl!==void 0,H6=(n,t)=>{const e=Me(),i=Me().getContext("webgl"),r={imageBuffer:new ArrayBuffer(n*t*4)},s={destinationWidth:n,destinationHeight:t,targetCanvas:e};let o;e.width=n,e.height=t,o=qn().performance.now(),hl.prototype.copyGLTo2D.call(r,i,s);const l=qn().performance.now()-o;return o=qn().performance.now(),hl.prototype.copyGLTo2DPutImageData.call(r,i,s),l>qn().performance.now()-o},Og="precision highp float",Y6=`
    `.concat(Og,`;
    varying vec2 vTexCoord;
    uniform sampler2D uTexture;
    void main() {
      gl_FragColor = texture2D(uTexture, vTexCoord);
    }`),N6=["type"],W6=["type"],U6=new RegExp(Og,"g");class Ze{get type(){return this.constructor.type}constructor(){let t=Ae(arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},N6);Object.assign(this,this.constructor.defaults,t)}getFragmentSource(){return Y6}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    void main() {
      vTexCoord = aPosition;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }`}createProgram(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getFragmentSource(),i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.getVertexSource();const{WebGLProbe:{GLPrecision:r="highp"}}=Dn();r!=="highp"&&(e=e.replace(U6,Og.replace("highp",r)));const s=t.createShader(t.VERTEX_SHADER),o=t.createShader(t.FRAGMENT_SHADER),l=t.createProgram();if(!s||!o||!l)throw new Gn("Vertex, fragment shader or program creation error");if(t.shaderSource(s,i),t.compileShader(s),!t.getShaderParameter(s,t.COMPILE_STATUS))throw new Gn("Vertex shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(s)));if(t.shaderSource(o,e),t.compileShader(o),!t.getShaderParameter(o,t.COMPILE_STATUS))throw new Gn("Fragment shader compile error for ".concat(this.type,": ").concat(t.getShaderInfoLog(o)));if(t.attachShader(l,s),t.attachShader(l,o),t.linkProgram(l),!t.getProgramParameter(l,t.LINK_STATUS))throw new Gn('Shader link error for "'.concat(this.type,'" ').concat(t.getProgramInfoLog(l)));const h=this.getUniformLocations(t,l)||{};return h.uStepW=t.getUniformLocation(l,"uStepW"),h.uStepH=t.getUniformLocation(l,"uStepH"),{program:l,attributeLocations:this.getAttributeLocations(t,l),uniformLocations:h}}getAttributeLocations(t,e){return{aPosition:t.getAttribLocation(e,"aPosition")}}getUniformLocations(t,e){const i=this.constructor.uniformLocations,r={};for(let s=0;s<i.length;s++)r[i[s]]=t.getUniformLocation(e,i[s]);return r}sendAttributeData(t,e,i){const r=e.aPosition,s=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,s),t.enableVertexAttribArray(r),t.vertexAttribPointer(r,2,t.FLOAT,!1,0,0),t.bufferData(t.ARRAY_BUFFER,i,t.STATIC_DRAW)}_setupFrameBuffer(t){const e=t.context;if(t.passes>1){const i=t.destinationWidth,r=t.destinationHeight;t.sourceWidth===i&&t.sourceHeight===r||(e.deleteTexture(t.targetTexture),t.targetTexture=t.filterBackend.createTexture(e,i,r)),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,t.targetTexture,0)}else e.bindFramebuffer(e.FRAMEBUFFER,null),e.finish()}_swapTextures(t){t.passes--,t.pass++;const e=t.targetTexture;t.targetTexture=t.sourceTexture,t.sourceTexture=e}isNeutralState(t){return!1}applyTo(t){Sl(t)?(this._setupFrameBuffer(t),this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){}getCacheKey(){return this.type}retrieveShader(t){const e=this.getCacheKey();return t.programCache[e]||(t.programCache[e]=this.createProgram(t.context)),t.programCache[e]}applyToWebGL(t){const e=t.context,i=this.retrieveShader(t);t.pass===0&&t.originalTexture?e.bindTexture(e.TEXTURE_2D,t.originalTexture):e.bindTexture(e.TEXTURE_2D,t.sourceTexture),e.useProgram(i.program),this.sendAttributeData(e,i.attributeLocations,t.aPosition),e.uniform1f(i.uniformLocations.uStepW,1/t.sourceWidth),e.uniform1f(i.uniformLocations.uStepH,1/t.sourceHeight),this.sendUniformData(e,i.uniformLocations),e.viewport(0,0,t.destinationWidth,t.destinationHeight),e.drawArrays(e.TRIANGLE_STRIP,0,4)}bindAdditionalTexture(t,e,i){t.activeTexture(i),t.bindTexture(t.TEXTURE_2D,e),t.activeTexture(t.TEXTURE0)}unbindAdditionalTexture(t,e){t.activeTexture(e),t.bindTexture(t.TEXTURE_2D,null),t.activeTexture(t.TEXTURE0)}sendUniformData(t,e){}createHelpLayer(t){if(!t.helpLayer){const e=Me();e.width=t.sourceWidth,e.height=t.sourceHeight,t.helpLayer=e}}toObject(){const t=Object.keys(this.constructor.defaults||{});return L({type:this.type},t.reduce((e,i)=>(e[i]=this[i],e),{}))}toJSON(){return this.toObject()}static async fromObject(t,e){return new this(Ae(t,W6))}}D(Ze,"type","BaseFilter"),D(Ze,"uniformLocations",[]);const G6={multiply:`gl_FragColor.rgb *= uColor.rgb;
`,screen:`gl_FragColor.rgb = 1.0 - (1.0 - gl_FragColor.rgb) * (1.0 - uColor.rgb);
`,add:`gl_FragColor.rgb += uColor.rgb;
`,difference:`gl_FragColor.rgb = abs(gl_FragColor.rgb - uColor.rgb);
`,subtract:`gl_FragColor.rgb -= uColor.rgb;
`,lighten:`gl_FragColor.rgb = max(gl_FragColor.rgb, uColor.rgb);
`,darken:`gl_FragColor.rgb = min(gl_FragColor.rgb, uColor.rgb);
`,exclusion:`gl_FragColor.rgb += uColor.rgb - 2.0 * (uColor.rgb * gl_FragColor.rgb);
`,overlay:`
    if (uColor.r < 0.5) {
      gl_FragColor.r *= 2.0 * uColor.r;
    } else {
      gl_FragColor.r = 1.0 - 2.0 * (1.0 - gl_FragColor.r) * (1.0 - uColor.r);
    }
    if (uColor.g < 0.5) {
      gl_FragColor.g *= 2.0 * uColor.g;
    } else {
      gl_FragColor.g = 1.0 - 2.0 * (1.0 - gl_FragColor.g) * (1.0 - uColor.g);
    }
    if (uColor.b < 0.5) {
      gl_FragColor.b *= 2.0 * uColor.b;
    } else {
      gl_FragColor.b = 1.0 - 2.0 * (1.0 - gl_FragColor.b) * (1.0 - uColor.b);
    }
    `,tint:`
    gl_FragColor.rgb *= (1.0 - uColor.a);
    gl_FragColor.rgb += uColor.rgb;
    `};class ba extends Ze{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec4 uColor;
      varying vec2 vTexCoord;
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        gl_FragColor = color;
        if (color.a > 0.0) {
          `.concat(G6[this.mode],`
        }
      }
      `)}applyTo2d(t){let{imageData:{data:e}}=t;const i=new se(this.color).getSource(),r=i[0]*this.alpha,s=i[1]*this.alpha,o=i[2]*this.alpha,l=1-this.alpha;for(let h=0;h<e.length;h+=4){const u=e[h],d=e[h+1],g=e[h+2];switch(this.mode){case"multiply":e[h]=u*r/255,e[h+1]=d*s/255,e[h+2]=g*o/255;break;case"screen":e[h]=255-(255-u)*(255-r)/255,e[h+1]=255-(255-d)*(255-s)/255,e[h+2]=255-(255-g)*(255-o)/255;break;case"add":e[h]=u+r,e[h+1]=d+s,e[h+2]=g+o;break;case"difference":e[h]=Math.abs(u-r),e[h+1]=Math.abs(d-s),e[h+2]=Math.abs(g-o);break;case"subtract":e[h]=u-r,e[h+1]=d-s,e[h+2]=g-o;break;case"darken":e[h]=Math.min(u,r),e[h+1]=Math.min(d,s),e[h+2]=Math.min(g,o);break;case"lighten":e[h]=Math.max(u,r),e[h+1]=Math.max(d,s),e[h+2]=Math.max(g,o);break;case"overlay":e[h]=r<128?2*u*r/255:255-2*(255-u)*(255-r)/255,e[h+1]=s<128?2*d*s/255:255-2*(255-d)*(255-s)/255,e[h+2]=o<128?2*g*o/255:255-2*(255-g)*(255-o)/255;break;case"exclusion":e[h]=r+u-2*r*u/255,e[h+1]=s+d-2*s*d/255,e[h+2]=o+g-2*o*g/255;break;case"tint":e[h]=r+u*l,e[h+1]=s+d*l,e[h+2]=o+g*l}}}sendUniformData(t,e){const i=new se(this.color).getSource();i[0]=this.alpha*i[0]/255,i[1]=this.alpha*i[1]/255,i[2]=this.alpha*i[2]/255,i[3]=this.alpha,t.uniform4fv(e.uColor,i)}}D(ba,"defaults",{color:"#F95C63",mode:"multiply",alpha:1}),D(ba,"type","BlendColor"),D(ba,"uniformLocations",["uColor"]),ht.setClass(ba);const q6={multiply:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.rgba *= color2.rgba;
      gl_FragColor = color;
    }
    `,mask:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform sampler2D uImage;
    uniform vec4 uColor;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      vec4 color2 = texture2D(uImage, vTexCoord2);
      color.a = color2.a;
      gl_FragColor = color;
    }
    `},Z6=["type","image"];class wa extends Ze{getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return q6[this.mode]}getVertexSource(){return`
    attribute vec2 aPosition;
    varying vec2 vTexCoord;
    varying vec2 vTexCoord2;
    uniform mat3 uTransformMatrix;
    void main() {
      vTexCoord = aPosition;
      vTexCoord2 = (uTransformMatrix * vec3(aPosition, 1.0)).xy;
      gl_Position = vec4(aPosition * 2.0 - 1.0, 0.0, 1.0);
    }
    `}applyToWebGL(t){const e=t.context,i=this.createTexture(t.filterBackend,this.image);this.bindAdditionalTexture(e,i,e.TEXTURE1),super.applyToWebGL(t),this.unbindAdditionalTexture(e,e.TEXTURE1)}createTexture(t,e){return t.getCachedTexture(e.cacheKey,e.getElement())}calculateMatrix(){const t=this.image,{width:e,height:i}=t.getElement();return[1/t.scaleX,0,0,0,1/t.scaleY,0,-t.left/e,-t.top/i,1]}applyTo2d(t){let{imageData:{data:e,width:i,height:r},filterBackend:{resources:s}}=t;const o=this.image;s.blendImage||(s.blendImage=Me());const l=s.blendImage,h=l.getContext("2d");l.width!==i||l.height!==r?(l.width=i,l.height=r):h.clearRect(0,0,i,r),h.setTransform(o.scaleX,0,0,o.scaleY,o.left,o.top),h.drawImage(o.getElement(),0,0,i,r);const u=h.getImageData(0,0,i,r).data;for(let d=0;d<e.length;d+=4){const g=e[d],p=e[d+1],m=e[d+2],y=e[d+3],_=u[d],C=u[d+1],b=u[d+2],x=u[d+3];switch(this.mode){case"multiply":e[d]=g*_/255,e[d+1]=p*C/255,e[d+2]=m*b/255,e[d+3]=y*x/255;break;case"mask":e[d+3]=x}}}sendUniformData(t,e){const i=this.calculateMatrix();t.uniform1i(e.uImage,1),t.uniformMatrix3fv(e.uTransformMatrix,!1,i)}toObject(){return L(L({},super.toObject()),{},{image:this.image&&this.image.toObject()})}static async fromObject(t,e){let{type:i,image:r}=t,s=Ae(t,Z6);return we.fromObject(r,e).then(o=>new this(L(L({},s),{},{image:o})))}}D(wa,"type","BlendImage"),D(wa,"defaults",{mode:"multiply",alpha:1}),D(wa,"uniformLocations",["uTransformMatrix","uImage"]),ht.setClass(wa);class xa extends Ze{getFragmentSource(){return`
    precision highp float;
    uniform sampler2D uTexture;
    uniform vec2 uDelta;
    varying vec2 vTexCoord;
    const float nSamples = 15.0;
    vec3 v3offset = vec3(12.9898, 78.233, 151.7182);
    float random(vec3 scale) {
      /* use the fragment position for a different seed per-pixel */
      return fract(sin(dot(gl_FragCoord.xyz, scale)) * 43758.5453);
    }
    void main() {
      vec4 color = vec4(0.0);
      float total = 0.0;
      float offset = random(v3offset);
      for (float t = -nSamples; t <= nSamples; t++) {
        float percent = (t + offset - 0.5) / nSamples;
        float weight = 1.0 - abs(percent);
        color += texture2D(uTexture, vTexCoord + uDelta * percent) * weight;
        total += weight;
      }
      gl_FragColor = color / total;
    }
  `}applyTo(t){Sl(t)?(this.aspectRatio=t.sourceWidth/t.sourceHeight,t.passes++,this._setupFrameBuffer(t),this.horizontal=!0,this.applyToWebGL(t),this._swapTextures(t),this._setupFrameBuffer(t),this.horizontal=!1,this.applyToWebGL(t),this._swapTextures(t)):this.applyTo2d(t)}applyTo2d(t){t.imageData=this.simpleBlur(t)}simpleBlur(t){let{ctx:e,imageData:i,filterBackend:{resources:r}}=t;const{width:s,height:o}=i;r.blurLayer1||(r.blurLayer1=Me(),r.blurLayer2=Me());const l=r.blurLayer1,h=r.blurLayer2;l.width===s&&l.height===o||(h.width=l.width=s,h.height=l.height=o);const u=l.getContext("2d"),d=h.getContext("2d"),g=15,p=.06*this.blur*.5;let m,y,_,C;for(u.putImageData(i,0,0),d.clearRect(0,0,s,o),C=-15;C<=g;C++)m=(Math.random()-.5)/4,y=C/g,_=p*y*s+m,d.globalAlpha=1-Math.abs(y),d.drawImage(l,_,m),u.drawImage(h,0,0),d.globalAlpha=1,d.clearRect(0,0,h.width,h.height);for(C=-15;C<=g;C++)m=(Math.random()-.5)/4,y=C/g,_=p*y*o+m,d.globalAlpha=1-Math.abs(y),d.drawImage(l,m,_),u.drawImage(h,0,0),d.globalAlpha=1,d.clearRect(0,0,h.width,h.height);e.drawImage(l,0,0);const b=e.getImageData(0,0,l.width,l.height);return u.globalAlpha=1,u.clearRect(0,0,l.width,l.height),b}sendUniformData(t,e){const i=this.chooseRightDelta();t.uniform2fv(e.uDelta,i)}isNeutralState(){return this.blur===0}chooseRightDelta(){let t=1;const e=[0,0];this.horizontal?this.aspectRatio>1&&(t=1/this.aspectRatio):this.aspectRatio<1&&(t=this.aspectRatio);const i=t*this.blur*.12;return this.horizontal?e[0]=i:e[1]=i,e}}D(xa,"type","Blur"),D(xa,"defaults",{blur:0}),D(xa,"uniformLocations",["uDelta"]),ht.setClass(xa);class Ca extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBrightness;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += uBrightness;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=Math.round(255*this.brightness);for(let r=0;r<e.length;r+=4)e[r]=e[r]+i,e[r+1]=e[r+1]+i,e[r+2]=e[r+2]+i}isNeutralState(){return this.brightness===0}sendUniformData(t,e){t.uniform1f(e.uBrightness,this.brightness)}}D(Ca,"type","Brightness"),D(Ca,"defaults",{brightness:0}),D(Ca,"uniformLocations",["uBrightness"]),ht.setClass(Ca);class As extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  varying vec2 vTexCoord;
  uniform mat4 uColorMatrix;
  uniform vec4 uConstants;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color *= uColorMatrix;
    color += uConstants;
    gl_FragColor = color;
  }`}applyTo2d(t){const e=t.imageData.data,i=this.matrix,r=this.colorsOnly;for(let s=0;s<e.length;s+=4){const o=e[s],l=e[s+1],h=e[s+2];if(r)e[s]=o*i[0]+l*i[1]+h*i[2]+255*i[4],e[s+1]=o*i[5]+l*i[6]+h*i[7]+255*i[9],e[s+2]=o*i[10]+l*i[11]+h*i[12]+255*i[14];else{const u=e[s+3];e[s]=o*i[0]+l*i[1]+h*i[2]+u*i[3]+255*i[4],e[s+1]=o*i[5]+l*i[6]+h*i[7]+u*i[8]+255*i[9],e[s+2]=o*i[10]+l*i[11]+h*i[12]+u*i[13]+255*i[14],e[s+3]=o*i[15]+l*i[16]+h*i[17]+u*i[18]+255*i[19]}}}sendUniformData(t,e){const i=this.matrix,r=[i[0],i[1],i[2],i[3],i[5],i[6],i[7],i[8],i[10],i[11],i[12],i[13],i[15],i[16],i[17],i[18]],s=[i[4],i[9],i[14],i[19]];t.uniformMatrix4fv(e.uColorMatrix,!1,r),t.uniform4fv(e.uConstants,s)}toObject(){return L(L({},super.toObject()),{},{matrix:[...this.matrix]})}}function Ws(n,t){var e;const i=(D(e=class extends As{toObject(){return{type:this.type,colorsOnly:this.colorsOnly}}},"type",n),D(e,"defaults",{colorsOnly:!1,matrix:t}),e);return ht.setClass(i,n),i}D(As,"type","ColorMatrix"),D(As,"defaults",{matrix:[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],colorsOnly:!0}),D(As,"uniformLocations",["uColorMatrix","uConstants"]),ht.setClass(As);const $6=Ws("Brownie",[.5997,.34553,-.27082,0,.186,-.0377,.86095,.15059,0,-.1449,.24113,-.07441,.44972,0,-.02965,0,0,0,1,0]),K6=Ws("Vintage",[.62793,.32021,-.03965,0,.03784,.02578,.64411,.03259,0,.02926,.0466,-.08512,.52416,0,.02023,0,0,0,1,0]),J6=Ws("Kodachrome",[1.12855,-.39673,-.03992,0,.24991,-.16404,1.08352,-.05498,0,.09698,-.16786,-.56034,1.60148,0,.13972,0,0,0,1,0]),Q6=Ws("Technicolor",[1.91252,-.85453,-.09155,0,.04624,-.30878,1.76589,-.10601,0,-.27589,-.2311,-.75018,1.84759,0,.12137,0,0,0,1,0]),t4=Ws("Polaroid",[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0]),e4=Ws("Sepia",[.393,.769,.189,0,0,.349,.686,.168,0,0,.272,.534,.131,0,0,0,0,0,1,0]),i4=Ws("BlackWhite",[1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,1.5,1.5,1.5,0,-1,0,0,0,1,0]);class Sf extends Ze{constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.subFilters=t.subFilters||[]}applyTo(t){Sl(t)&&(t.passes+=this.subFilters.length-1),this.subFilters.forEach(e=>{e.applyTo(t)})}toObject(){return{type:this.type,subFilters:this.subFilters.map(t=>t.toObject())}}isNeutralState(){return!this.subFilters.some(t=>!t.isNeutralState())}static fromObject(t,e){return Promise.all((t.subFilters||[]).map(i=>ht.getClass(i.type).fromObject(i,e))).then(i=>new this({subFilters:i}))}}D(Sf,"type","Composed"),ht.setClass(Sf);class Sa extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uContrast;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float contrastF = 1.015 * (uContrast + 1.0) / (1.0 * (1.015 - uContrast));
    color.rgb = contrastF * (color.rgb - 0.5) + 0.5;
    gl_FragColor = color;
  }`}isNeutralState(){return this.contrast===0}applyTo2d(t){let{imageData:{data:e}}=t;const i=Math.floor(255*this.contrast),r=259*(i+255)/(255*(259-i));for(let s=0;s<e.length;s+=4)e[s]=r*(e[s]-128)+128,e[s+1]=r*(e[s+1]-128)+128,e[s+2]=r*(e[s+2]-128)+128}sendUniformData(t,e){t.uniform1f(e.uContrast,this.contrast)}}D(Sa,"type","Contrast"),D(Sa,"defaults",{contrast:0}),D(Sa,"uniformLocations",["uContrast"]),ht.setClass(Sa);const n4={Convolute_3_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1), uStepH * (h - 1));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 3.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_3_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[9];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 3.0; h+=1.0) {
        for (float w = 0.0; w < 3.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 1.0), uStepH * (h - 1.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 3.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_5_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 5.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_5_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[25];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 5.0; h+=1.0) {
        for (float w = 0.0; w < 5.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 2.0), uStepH * (h - 2.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 5.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_7_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 7.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_7_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[49];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 7.0; h+=1.0) {
        for (float w = 0.0; w < 7.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 3.0), uStepH * (h - 3.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 7.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `,Convolute_9_1:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 0);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color += texture2D(uTexture, vTexCoord + matrixPos) * uMatrix[int(h * 9.0 + w)];
        }
      }
      gl_FragColor = color;
    }
    `,Convolute_9_0:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform float uMatrix[81];
    uniform float uStepW;
    uniform float uStepH;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = vec4(0, 0, 0, 1);
      for (float h = 0.0; h < 9.0; h+=1.0) {
        for (float w = 0.0; w < 9.0; w+=1.0) {
          vec2 matrixPos = vec2(uStepW * (w - 4.0), uStepH * (h - 4.0));
          color.rgb += texture2D(uTexture, vTexCoord + matrixPos).rgb * uMatrix[int(h * 9.0 + w)];
        }
      }
      float alpha = texture2D(uTexture, vTexCoord).a;
      gl_FragColor = color;
      gl_FragColor.a = alpha;
    }
    `};class Ta extends Ze{getCacheKey(){return"".concat(this.type,"_").concat(Math.sqrt(this.matrix.length),"_").concat(this.opaque?1:0)}getFragmentSource(){return n4[this.getCacheKey()]}applyTo2d(t){const e=t.imageData,i=e.data,r=this.matrix,s=Math.round(Math.sqrt(r.length)),o=Math.floor(s/2),l=e.width,h=e.height,u=t.ctx.createImageData(l,h),d=u.data,g=this.opaque?1:0;let p,m,y,_,C,b,x,T,O,E,V,A,B;for(V=0;V<h;V++)for(E=0;E<l;E++){for(C=4*(V*l+E),p=0,m=0,y=0,_=0,B=0;B<s;B++)for(A=0;A<s;A++)x=V+B-o,b=E+A-o,x<0||x>=h||b<0||b>=l||(T=4*(x*l+b),O=r[B*s+A],p+=i[T]*O,m+=i[T+1]*O,y+=i[T+2]*O,g||(_+=i[T+3]*O));d[C]=p,d[C+1]=m,d[C+2]=y,d[C+3]=g?i[C+3]:_}t.imageData=u}sendUniformData(t,e){t.uniform1fv(e.uMatrix,this.matrix)}toObject(){return L(L({},super.toObject()),{},{opaque:this.opaque,matrix:[...this.matrix]})}}D(Ta,"type","Convolute"),D(Ta,"defaults",{opaque:!1,matrix:[0,0,0,0,1,0,0,0,0]}),D(Ta,"uniformLocations",["uMatrix","uOpaque","uHalfSize","uSize"]),ht.setClass(Ta);const Ob="Gamma";class Pa extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform vec3 uGamma;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    vec3 correction = (1.0 / uGamma);
    color.r = pow(color.r, correction.r);
    color.g = pow(color.g, correction.g);
    color.b = pow(color.b, correction.b);
    gl_FragColor = color;
    gl_FragColor.rgb *= color.a;
  }
`}constructor(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};super(t),this.gamma=t.gamma||this.constructor.defaults.gamma.concat()}applyTo2d(t){let{imageData:{data:e}}=t;const i=this.gamma,r=1/i[0],s=1/i[1],o=1/i[2];this.rgbValues||(this.rgbValues={r:new Uint8Array(256),g:new Uint8Array(256),b:new Uint8Array(256)});const l=this.rgbValues;for(let h=0;h<256;h++)l.r[h]=255*Math.pow(h/255,r),l.g[h]=255*Math.pow(h/255,s),l.b[h]=255*Math.pow(h/255,o);for(let h=0;h<e.length;h+=4)e[h]=l.r[e[h]],e[h+1]=l.g[e[h+1]],e[h+2]=l.b[e[h+2]]}sendUniformData(t,e){t.uniform3fv(e.uGamma,this.gamma)}isNeutralState(){const{gamma:t}=this;return t[0]===1&&t[1]===1&&t[2]===1}toObject(){return{type:Ob,gamma:this.gamma.concat()}}}D(Pa,"type",Ob),D(Pa,"defaults",{gamma:[1,1,1]}),D(Pa,"uniformLocations",["uGamma"]),ht.setClass(Pa);const r4={average:`
    precision highp float;
    uniform sampler2D uTexture;
    varying vec2 vTexCoord;
    void main() {
      vec4 color = texture2D(uTexture, vTexCoord);
      float average = (color.r + color.b + color.g) / 3.0;
      gl_FragColor = vec4(average, average, average, color.a);
    }
    `,lightness:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = (max(max(col.r, col.g),col.b) + min(min(col.r, col.g),col.b)) / 2.0;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `,luminosity:`
    precision highp float;
    uniform sampler2D uTexture;
    uniform int uMode;
    varying vec2 vTexCoord;
    void main() {
      vec4 col = texture2D(uTexture, vTexCoord);
      float average = 0.21 * col.r + 0.72 * col.g + 0.07 * col.b;
      gl_FragColor = vec4(average, average, average, col.a);
    }
    `};class Oa extends Ze{applyTo2d(t){let{imageData:{data:e}}=t;for(let i,r=0;r<e.length;r+=4){switch(this.mode){case"average":i=(e[r]+e[r+1]+e[r+2])/3;break;case"lightness":i=(Math.min(e[r],e[r+1],e[r+2])+Math.max(e[r],e[r+1],e[r+2]))/2;break;case"luminosity":i=.21*e[r]+.72*e[r+1]+.07*e[r+2]}e[r]=i,e[r+1]=i,e[r+2]=i}}getCacheKey(){return"".concat(this.type,"_").concat(this.mode)}getFragmentSource(){return r4[this.mode]}sendUniformData(t,e){t.uniform1i(e.uMode,1)}isNeutralState(){return!1}}D(Oa,"type","Grayscale"),D(Oa,"defaults",{mode:"average"}),D(Oa,"uniformLocations",["uMode"]),ht.setClass(Oa);class Hc extends As{calculateMatrix(){const t=this.rotation*Math.PI,e=In(t),i=Rn(t),r=1/3,s=Math.sqrt(r)*i,o=1-e;this.matrix=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],this.matrix[0]=e+o/3,this.matrix[1]=r*o-s,this.matrix[2]=r*o+s,this.matrix[5]=r*o+s,this.matrix[6]=e+r*o,this.matrix[7]=r*o-s,this.matrix[10]=r*o-s,this.matrix[11]=r*o+s,this.matrix[12]=e+r*o}isNeutralState(){return this.rotation===0}applyTo(t){this.calculateMatrix(),super.applyTo(t)}toObject(){return{type:this.type,rotation:this.rotation}}}D(Hc,"type","HueRotation"),D(Hc,"defaults",{rotation:0}),ht.setClass(Hc);class Ea extends Ze{applyTo2d(t){let{imageData:{data:e}}=t;for(let i=0;i<e.length;i+=4)e[i]=255-e[i],e[i+1]=255-e[i+1],e[i+2]=255-e[i+2],this.alpha&&(e[i+3]=255-e[i+3])}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform int uInvert;
  uniform int uAlpha;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    if (uInvert == 1) {
      if (uAlpha == 1) {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,1.0 -color.a);
      } else {
        gl_FragColor = vec4(1.0 - color.r,1.0 -color.g,1.0 -color.b,color.a);
      }
    } else {
      gl_FragColor = color;
    }
  }
`}isNeutralState(){return!this.invert}sendUniformData(t,e){t.uniform1i(e.uInvert,Number(this.invert)),t.uniform1i(e.uAlpha,Number(this.alpha))}}D(Ea,"type","Invert"),D(Ea,"defaults",{alpha:!1,invert:!0}),D(Ea,"uniformLocations",["uInvert","uAlpha"]),ht.setClass(Ea);class Ma extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uStepH;
  uniform float uNoise;
  uniform float uSeed;
  varying vec2 vTexCoord;
  float rand(vec2 co, float seed, float vScale) {
    return fract(sin(dot(co.xy * vScale ,vec2(12.9898 , 78.233))) * 43758.5453 * (seed + 0.01) / 2.0);
  }
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    color.rgb += (0.5 - rand(vTexCoord, uSeed, 0.1 / uStepH)) * uNoise;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=this.noise;for(let r=0;r<e.length;r+=4){const s=(.5-Math.random())*i;e[r]+=s,e[r+1]+=s,e[r+2]+=s}}sendUniformData(t,e){t.uniform1f(e.uNoise,this.noise/255),t.uniform1f(e.uSeed,Math.random())}isNeutralState(){return this.noise===0}}D(Ma,"type","Noise"),D(Ma,"defaults",{noise:0}),D(Ma,"uniformLocations",["uNoise","uSeed"]),ht.setClass(Ma);class Aa extends Ze{applyTo2d(t){let{imageData:{data:e,width:i,height:r}}=t;for(let s=0;s<r;s+=this.blocksize)for(let o=0;o<i;o+=this.blocksize){const l=4*s*i+4*o,h=e[l],u=e[l+1],d=e[l+2],g=e[l+3];for(let p=s;p<Math.min(s+this.blocksize,r);p++)for(let m=o;m<Math.min(o+this.blocksize,i);m++){const y=4*p*i+4*m;e[y]=h,e[y+1]=u,e[y+2]=d,e[y+3]=g}}}isNeutralState(){return this.blocksize===1}getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uBlocksize;
  uniform float uStepW;
  uniform float uStepH;
  varying vec2 vTexCoord;
  void main() {
    float blockW = uBlocksize * uStepW;
    float blockH = uBlocksize * uStepH;
    int posX = int(vTexCoord.x / blockW);
    int posY = int(vTexCoord.y / blockH);
    float fposX = float(posX);
    float fposY = float(posY);
    vec2 squareCoords = vec2(fposX * blockW, fposY * blockH);
    vec4 color = texture2D(uTexture, squareCoords);
    gl_FragColor = color;
  }
`}sendUniformData(t,e){t.uniform1f(e.uBlocksize,this.blocksize)}}D(Aa,"type","Pixelate"),D(Aa,"defaults",{blocksize:4}),D(Aa,"uniformLocations",["uBlocksize"]),ht.setClass(Aa);class ka extends Ze{getFragmentSource(){return`
precision highp float;
uniform sampler2D uTexture;
uniform vec4 uLow;
uniform vec4 uHigh;
varying vec2 vTexCoord;
void main() {
  gl_FragColor = texture2D(uTexture, vTexCoord);
  if(all(greaterThan(gl_FragColor.rgb,uLow.rgb)) && all(greaterThan(uHigh.rgb,gl_FragColor.rgb))) {
    gl_FragColor.a = 0.0;
  }
}
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=255*this.distance,r=new se(this.color).getSource(),s=[r[0]-i,r[1]-i,r[2]-i],o=[r[0]+i,r[1]+i,r[2]+i];for(let l=0;l<e.length;l+=4){const h=e[l],u=e[l+1],d=e[l+2];h>s[0]&&u>s[1]&&d>s[2]&&h<o[0]&&u<o[1]&&d<o[2]&&(e[l+3]=0)}}sendUniformData(t,e){const i=new se(this.color).getSource(),r=this.distance,s=[0+i[0]/255-r,0+i[1]/255-r,0+i[2]/255-r,1],o=[i[0]/255+r,i[1]/255+r,i[2]/255+r,1];t.uniform4fv(e.uLow,s),t.uniform4fv(e.uHigh,o)}}D(ka,"type","RemoveColor"),D(ka,"defaults",{color:"#FFFFFF",distance:.02,useAlpha:!1}),D(ka,"uniformLocations",["uLow","uHigh"]),ht.setClass(ka);class ja extends Ze{sendUniformData(t,e){t.uniform2fv(e.uDelta,this.horizontal?[1/this.width,0]:[0,1/this.height]),t.uniform1fv(e.uTaps,this.taps)}getFilterWindow(){const t=this.tempScale;return Math.ceil(this.lanczosLobes/t)}getCacheKey(){const t=this.getFilterWindow();return"".concat(this.type,"_").concat(t)}getFragmentSource(){const t=this.getFilterWindow();return this.generateShader(t)}getTaps(){const t=this.lanczosCreate(this.lanczosLobes),e=this.tempScale,i=this.getFilterWindow(),r=new Array(i);for(let s=1;s<=i;s++)r[s-1]=t(s*e);return r}generateShader(t){const e=new Array(t);for(let i=1;i<=t;i++)e[i-1]="".concat(i,".0 * uDelta");return`
      precision highp float;
      uniform sampler2D uTexture;
      uniform vec2 uDelta;
      varying vec2 vTexCoord;
      uniform float uTaps[`.concat(t,`];
      void main() {
        vec4 color = texture2D(uTexture, vTexCoord);
        float sum = 1.0;
        `).concat(e.map((i,r)=>`
              color += texture2D(uTexture, vTexCoord + `.concat(i,") * uTaps[").concat(r,"] + texture2D(uTexture, vTexCoord - ").concat(i,") * uTaps[").concat(r,`];
              sum += 2.0 * uTaps[`).concat(r,`];
            `)).join(`
`),`
        gl_FragColor = color / sum;
      }
    `)}applyToForWebgl(t){t.passes++,this.width=t.sourceWidth,this.horizontal=!0,this.dW=Math.round(this.width*this.scaleX),this.dH=t.sourceHeight,this.tempScale=this.dW/this.width,this.taps=this.getTaps(),t.destinationWidth=this.dW,super.applyTo(t),t.sourceWidth=t.destinationWidth,this.height=t.sourceHeight,this.horizontal=!1,this.dH=Math.round(this.height*this.scaleY),this.tempScale=this.dH/this.height,this.taps=this.getTaps(),t.destinationHeight=this.dH,super.applyTo(t),t.sourceHeight=t.destinationHeight}applyTo(t){Sl(t)?this.applyToForWebgl(t):this.applyTo2d(t)}isNeutralState(){return this.scaleX===1&&this.scaleY===1}lanczosCreate(t){return e=>{if(e>=t||e<=-t)return 0;if(e<11920929e-14&&e>-11920929e-14)return 1;const i=(e*=Math.PI)/t;return Math.sin(e)/e*Math.sin(i)/i}}applyTo2d(t){const e=t.imageData,i=this.scaleX,r=this.scaleY;this.rcpScaleX=1/i,this.rcpScaleY=1/r;const s=e.width,o=e.height,l=Math.round(s*i),h=Math.round(o*r);let u;u=this.resizeType==="sliceHack"?this.sliceByTwo(t,s,o,l,h):this.resizeType==="hermite"?this.hermiteFastResize(t,s,o,l,h):this.resizeType==="bilinear"?this.bilinearFiltering(t,s,o,l,h):this.resizeType==="lanczos"?this.lanczosResize(t,s,o,l,h):new ImageData(l,h),t.imageData=u}sliceByTwo(t,e,i,r,s){const o=t.imageData,l=.5;let h=!1,u=!1,d=e*l,g=i*l;const p=t.filterBackend.resources;let m=0,y=0;const _=e;let C=0;p.sliceByTwo||(p.sliceByTwo=Me());const b=p.sliceByTwo;(b.width<1.5*e||b.height<i)&&(b.width=1.5*e,b.height=i);const x=b.getContext("2d");for(x.clearRect(0,0,1.5*e,i),x.putImageData(o,0,0),r=Math.floor(r),s=Math.floor(s);!h||!u;)e=d,i=g,r<Math.floor(d*l)?d=Math.floor(d*l):(d=r,h=!0),s<Math.floor(g*l)?g=Math.floor(g*l):(g=s,u=!0),x.drawImage(b,m,y,e,i,_,C,d,g),m=_,y=C,C+=g;return x.getImageData(m,y,r,s)}lanczosResize(t,e,i,r,s){const o=t.imageData.data,l=t.ctx.createImageData(r,s),h=l.data,u=this.lanczosCreate(this.lanczosLobes),d=this.rcpScaleX,g=this.rcpScaleY,p=2/this.rcpScaleX,m=2/this.rcpScaleY,y=Math.ceil(d*this.lanczosLobes/2),_=Math.ceil(g*this.lanczosLobes/2),C={},b={x:0,y:0},x={x:0,y:0};return function T(O){let E,V,A,B,Y,J,st,ct,ot,yt,Tt;for(b.x=(O+.5)*d,x.x=Math.floor(b.x),E=0;E<s;E++){for(b.y=(E+.5)*g,x.y=Math.floor(b.y),Y=0,J=0,st=0,ct=0,ot=0,V=x.x-y;V<=x.x+y;V++)if(!(V<0||V>=e)){yt=Math.floor(1e3*Math.abs(V-b.x)),C[yt]||(C[yt]={});for(let at=x.y-_;at<=x.y+_;at++)at<0||at>=i||(Tt=Math.floor(1e3*Math.abs(at-b.y)),C[yt][Tt]||(C[yt][Tt]=u(Math.sqrt(Math.pow(yt*p,2)+Math.pow(Tt*m,2))/1e3)),A=C[yt][Tt],A>0&&(B=4*(at*e+V),Y+=A,J+=A*o[B],st+=A*o[B+1],ct+=A*o[B+2],ot+=A*o[B+3]))}B=4*(E*r+O),h[B]=J/Y,h[B+1]=st/Y,h[B+2]=ct/Y,h[B+3]=ot/Y}return++O<r?T(O):l}(0)}bilinearFiltering(t,e,i,r,s){let o,l,h,u,d,g,p,m,y,_,C,b,x,T=0;const O=this.rcpScaleX,E=this.rcpScaleY,V=4*(e-1),A=t.imageData.data,B=t.ctx.createImageData(r,s),Y=B.data;for(p=0;p<s;p++)for(m=0;m<r;m++)for(d=Math.floor(O*m),g=Math.floor(E*p),y=O*m-d,_=E*p-g,x=4*(g*e+d),C=0;C<4;C++)o=A[x+C],l=A[x+4+C],h=A[x+V+C],u=A[x+V+4+C],b=o*(1-y)*(1-_)+l*y*(1-_)+h*_*(1-y)+u*y*_,Y[T++]=b;return B}hermiteFastResize(t,e,i,r,s){const o=this.rcpScaleX,l=this.rcpScaleY,h=Math.ceil(o/2),u=Math.ceil(l/2),d=t.imageData.data,g=t.ctx.createImageData(r,s),p=g.data;for(let m=0;m<s;m++)for(let y=0;y<r;y++){const _=4*(y+m*r);let C=0,b=0,x=0,T=0,O=0,E=0,V=0;const A=(m+.5)*l;for(let B=Math.floor(m*l);B<(m+1)*l;B++){const Y=Math.abs(A-(B+.5))/u,J=(y+.5)*o,st=Y*Y;for(let ct=Math.floor(y*o);ct<(y+1)*o;ct++){let ot=Math.abs(J-(ct+.5))/h;const yt=Math.sqrt(st+ot*ot);yt>1&&yt<-1||(C=2*yt*yt*yt-3*yt*yt+1,C>0&&(ot=4*(ct+B*e),V+=C*d[ot+3],x+=C,d[ot+3]<255&&(C=C*d[ot+3]/250),T+=C*d[ot],O+=C*d[ot+1],E+=C*d[ot+2],b+=C))}}p[_]=T/b,p[_+1]=O/b,p[_+2]=E/b,p[_+3]=V/x}return g}}D(ja,"type","Resize"),D(ja,"defaults",{resizeType:"hermite",scaleX:1,scaleY:1,lanczosLobes:3}),D(ja,"uniformLocations",["uDelta","uTaps"]),ht.setClass(ja);class Da extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uSaturation;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float rgMax = max(color.r, color.g);
    float rgbMax = max(rgMax, color.b);
    color.r += rgbMax != color.r ? (rgbMax - color.r) * uSaturation : 0.00;
    color.g += rgbMax != color.g ? (rgbMax - color.g) * uSaturation : 0.00;
    color.b += rgbMax != color.b ? (rgbMax - color.b) * uSaturation : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=-this.saturation;for(let r=0;r<e.length;r+=4){const s=Math.max(e[r],e[r+1],e[r+2]);e[r]+=s!==e[r]?(s-e[r])*i:0,e[r+1]+=s!==e[r+1]?(s-e[r+1])*i:0,e[r+2]+=s!==e[r+2]?(s-e[r+2])*i:0}}sendUniformData(t,e){t.uniform1f(e.uSaturation,-this.saturation)}isNeutralState(){return this.saturation===0}}D(Da,"type","Saturation"),D(Da,"defaults",{saturation:0}),D(Da,"uniformLocations",["uSaturation"]),ht.setClass(Da);class Ia extends Ze{getFragmentSource(){return`
  precision highp float;
  uniform sampler2D uTexture;
  uniform float uVibrance;
  varying vec2 vTexCoord;
  void main() {
    vec4 color = texture2D(uTexture, vTexCoord);
    float max = max(color.r, max(color.g, color.b));
    float avg = (color.r + color.g + color.b) / 3.0;
    float amt = (abs(max - avg) * 2.0) * uVibrance;
    color.r += max != color.r ? (max - color.r) * amt : 0.00;
    color.g += max != color.g ? (max - color.g) * amt : 0.00;
    color.b += max != color.b ? (max - color.b) * amt : 0.00;
    gl_FragColor = color;
  }
`}applyTo2d(t){let{imageData:{data:e}}=t;const i=-this.vibrance;for(let r=0;r<e.length;r+=4){const s=Math.max(e[r],e[r+1],e[r+2]),o=(e[r]+e[r+1]+e[r+2])/3,l=2*Math.abs(s-o)/255*i;e[r]+=s!==e[r]?(s-e[r])*l:0,e[r+1]+=s!==e[r+1]?(s-e[r+1])*l:0,e[r+2]+=s!==e[r+2]?(s-e[r+2])*l:0}}sendUniformData(t,e){t.uniform1f(e.uVibrance,-this.vibrance)}isNeutralState(){return this.vibrance===0}}D(Ia,"type","Vibrance"),D(Ia,"defaults",{vibrance:0}),D(Ia,"uniformLocations",["uVibrance"]),ht.setClass(Ia);var s4=Object.freeze({__proto__:null,BaseFilter:Ze,BlackWhite:i4,BlendColor:ba,BlendImage:wa,Blur:xa,Brightness:Ca,Brownie:$6,ColorMatrix:As,Composed:Sf,Contrast:Sa,Convolute:Ta,Gamma:Pa,Grayscale:Oa,HueRotation:Hc,Invert:Ea,Kodachrome:J6,Noise:Ma,Pixelate:Aa,Polaroid:t4,RemoveColor:ka,Resize:ja,Saturation:Da,Sepia:e4,Technicolor:Q6,Vibrance:Ia,Vintage:K6});const o4=Object.freeze(Object.defineProperty({__proto__:null,ActiveSelection:Gr,BaseBrush:Wh,BaseFabricObject:Hn,Canvas:Bo,Canvas2dFilterBackend:mb,CanvasDOMManager:eb,Circle:Sn,CircleBrush:p6,ClipPathLayout:bf,Color:se,Control:hi,Ellipse:Nn,FabricImage:we,FabricObject:pe,FabricText:Qe,FitContentLayout:lh,FixedLayout:wf,Gradient:Co,Group:Di,IText:Zn,Image:we,InteractiveFabricObject:Ro,Intersection:Ce,LayoutManager:Lo,LayoutStrategy:Cl,Line:Wr,Object:pe,Observable:Gy,Path:Wn,Pattern:Wa,PatternBrush:v6,PencilBrush:cl,Point:I,Polygon:_a,Polyline:gn,Rect:yi,Shadow:Qi,SprayBrush:m6,StaticCanvas:vn,StaticCanvasDOMManager:hg,Text:Qe,Textbox:Vi,Triangle:Ur,WebGLFilterBackend:hl,cache:Mo,classRegistry:ht,config:Kt,controlsUtils:Ns,createCollectionMixin:as,filters:s4,getCSSRules:wb,getEnv:Dn,getFabricDocument:Xs,getFabricWindow:qn,getFilterBackend:Xc,iMatrix:fi,initFilterBackend:vb,isPutImageFaster:H6,isWebGLPipelineState:Sl,loadSVGFromString:xb,loadSVGFromURL:F6,parseAttributes:ir,parseFontDeclaration:z_,parsePointsAttribute:cb,parseSVGDocument:Pg,parseStyleAttribute:V_,parseTransformAttribute:ll,runningAnimations:sl,setEnv:NM,setFilterBackend:j6,util:$,version:Qc},Symbol.toStringTag,{value:"Module"})),ul="center",a4="left",l4="right",en={CANVAS_INIT_DONE:"canvas_init_done",ALIGNING_GUIDELINE_ENABLE:"aligning_guideline_enable",CANVAS_SIZE_CHANGED:"canvas_size_changed",DOCUMENT_SIZE_CHANGED:"document_size_changed",CANVAS_ZOOM:"canvas_zoom",CONTENT_CHANGED:"content_changed",MINIMAP_VIEWPORT_CHANGED:"minimap_viewport_changed",THUMB_CHANGED:"thumb_changed",COLOR_PICKER_MOVE:"color_picker_move",COLOR_PICKER_DOWN:"color_picker_down",TOOLBAR_MORE_LIST_CHANGE:"toolbar_more_list_change",COMMAND_CHANGED:"command_changed",SYNC_STATUS_CHANGED:"sync_status_changed",DOCUMENT_SIZE_CHANGED_AllTEMPLATE:"document_size_changed_alltemplate",TEMPLATE_COLLECT_CLICK:"template_collect_click"},ui={SELECTION_CREATED:"selection:created",SELECTION_CLEARD:"selection:cleared",OBJECT_MODIFIED:"object:modified",SVG_FILL_MODIFIED:"svg:fill_modified",OBJECT_SELECTED:"object:selected",OBJECT_SELECTED_BY_RIGHT_CLICK:"object:selected_by_right_click",OBJECT_ROTATING:"object:rotating",OBJECT_SCALING:"object:scaling",OBJECT_MOVING:"object:moving",OBJECT_ADDED:"object:added",OBJECT_REMOVED:"object:removed",SELECTED_UPDATE:"selection:updated",SHOW_LOCK_SHAKE:"show_lock_shake",MOUSE_DBCLICK:"mousedblclick",MODIFIED:"modified",MOUSE_UP:"mouse:up",MOUSE_DOWN:"mouse:down",MOUSE_STRAT_DRAG:"mouse:start_drag",MOUSE_END_DRAG:"mouse:end_drag",MOUSE_MOVE:"mouse:move",MOUSE_OVER:"mouse:over",MOUSE_OUT:"mouse:out",MOUSE_DBLCLICK:"mouse:dblclick",TEXT_CHANGED:"text:changed",TEXT_SELECTION_CHANGED:"text:selection:changed",TEXT_EDITING_ENTERED:"text:editing:entered",TEXT_EDITING_EXITED:"text:editing:exited",TEXT_SCALE_CHANGE:"text_scale_change",TEXT_FONT_FAMILY_LOADED:"text_font_family_loaded",TEXT_FONT_INFO_READY:"text_font_info_ready",TEXT_FONT_LOAD_BY_OBJECTS:"text_font_load_by_objects",FTIMAGE_SHOW_CLIP:"FTImage:showClip",FTIMAGE_CLOSE_CLIP:"FTImage:closeClip",FTGRIDLINE_STATUS_CHANGED:"FTGridline:statusChanged",CANVAS_DRAGENTER:"dragenter",CANVAS_DRAGLEAVE:"dragleave",CANVAS_DRAGOVER:"dragover",CANVAS_DROP:"drop",BEFORE_RENDER:"before:render",AFTER_RENDER:"after:render",TOGGLE_PAGE:"toggle_page",PAGE_LOADED:"page_loaded",FTIMAGE_EXIT_EDIT:"FTimage_exit_edit",CANCEL_COLOR_PICK:"cancel_Color_pick",CHART_SCALE_CHANGE:"chart_scale_change",IMAGECONTAINER_DRAG_START:"imagecontainer_drag_start",IMAGECONTAINER_DRAGGING:"imagecontainer_dragging",IMAGECONTAINER_DRAG_END:"imagecontainer_drag_end",LEFT_MENU_TOGGLE:"left_menu_toggle",FILTER_TXT_UPLOAD_SUCCESS:"filter_txt_upload_success",FILTER_TXT_DRAW:"filter_txt_draw",FILTER_TXT_DRAW_NEED:"filter_txt_draw_need",MODIFIED_UI:"modified_ui",IMAGE_STROKE_CHANGE:"image_stroke_change",ADD_TEMPLATE_FAMILY_NAME:"add_template_family_name"},c4="color",_o="imageUrl",h4="#ffffff",u4={left:-.5,top:-.5,center:0,bottom:.5,right:.5},d4=n=>typeof n=="string"?u4[n]:n-.5,Eb="not-allowed",f4=(n,t,e,i)=>{if(!t||!n)return"drag";const r=i.controls[t];return r.getActionName(e,r,i)};function Mb(n){return n.originX===ul&&n.originY===ul}function Av(n){return-d4(n)+.5}const $r=(n,t)=>n[t];function Ab(n,t){const e=n.getTotalAngle(),i=e+$.radiansToDegrees(Math.atan2(t.y,t.x))+360;return Math.round(i%360/45)}function Tl(n){return(t,e,i,r)=>{const{target:s,originX:o,originY:l,corner:h}=e,u=s.getRelativeCenterPoint(),d=s.translateToOriginPoint(u,o,l),g=n(t,e,i,r);return h==="mtr"&&s.isType("EditorImage")&&s.isCliping||h==="mtr"&&s.isType("EditorClippingMask")&&s.isCliping||h==="mtr"&&s.clippingParent&&s.clippingParent.isType("EditorClippingText")&&s.clippingParent.isCliping||s.setPositionByOrigin(d,e.originX,e.originY),g}}const{radiansToDegrees:g4}=$,{wrapWithFireEvent:p4}=Ns,m4=(n,{target:t,ex:e,ey:i,theta:r,originX:s,originY:o},l,h)=>{const u=t.translateToOriginPoint(t.getRelativeCenterPoint(),s,o);if($r(t,"lockRotation"))return!1;const d=Math.atan2(i-u.y,e-u.x),g=Math.atan2(h-u.y,l-u.x);let p=g4(g-d+r);if(t.snapAngle&&t.snapAngle>0){const y=t.snapAngle,_=t.snapThreshold||y,C=Math.ceil(p/y)*y,b=Math.floor(p/y)*y;Math.abs(p-b)<_?p=b:Math.abs(p-C)<_&&(p=C)}p<0&&(p=360+p),p%=360;const m=t.angle!==p;return t.isType("EditorImage")&&t.isCliping||t.isType("EditorClippingMask")&&t.isCliping?(t.clipAngle=p,t.updateClipAngle(t)):t.clippingParent&&t.clippingParent.isType("EditorClippingText")&&t.clippingParent.isCliping&&(t.clipAngle=p,t.clippingParent.updateClipAngle(t)),t.clippingParent&&t.clippingParent.isType("EditorClippingMask")&&t.clippingParent.isCliping?(t.clipAngle=p,t.clippingParent.updateClipAngle(t)):t.angle=p,m},v4=p4("rotating",Tl(m4)),{getLocalPoint:y4,wrapWithFireEvent:Eg}=Ns;function kb(n,t){const e=t.canvas,i=n[e.uniScaleKey];return e.uniformScaling&&!i||!e.uniformScaling&&i}function jb(n,t,e){const i=$r(n,"lockScalingX"),r=$r(n,"lockScalingY");if(i&&r||!t&&(i||r)&&e||i&&t==="x"||r&&t==="y")return!0;const{width:s,height:o,strokeWidth:l}=n;return s===0&&l===0&&t!=="y"||o===0&&l===0&&t!=="x"}const _4=["ew","nwse","ns","nesw","ew","nwse","ns","nesw","ew"],Ra=(n,t,e)=>{const i=kb(n,e),r=t.x!==0&&t.y===0?"x":t.x===0&&t.y!==0?"y":"";if(jb(e,r,i))return Eb;const s=Ab(e,t);return`${_4[s]}-resize`};function Mg(n,t,e,i,r={}){var s,o,l,h;console.log("scaleObject");const u=t.target,d=r.by,g=kb(n,u),p=jb(u,d,g);let m,y,_,C,b,x,T,O;if(p)return!1;if(t.gestureScale)y=t.scaleX*t.gestureScale,_=t.scaleY*t.gestureScale;else{if(m=y4(t,t.originX,t.originY,e,i),b=d!=="y"?Math.sign(m.x||t.signX||1):1,x=d!=="x"?Math.sign(m.y||t.signY||1):1,t.signX||(t.signX=b),t.signY||(t.signY=x),$r(u,"lockScalingFlip")&&(t.signX!==b||t.signY!==x))return!1;if(C=u._getTransformedDimensions(),g&&!d){const A=Math.abs(m.x)+Math.abs(m.y),{original:B}=t,Y=Math.abs(C.x*B.scaleX/u.scaleX)+Math.abs(C.y*B.scaleY/u.scaleY),J=A/Y;if(y=B.scaleX*J,_=B.scaleY*J,u.isType("EditorClippingText")&&u.clippingPath instanceof we){const st=Math.abs(C.x*B.clippingPath.scaleX/u.clippingPath.scaleX)+Math.abs(C.y*B.clippingPath.scaleY/u.clippingPath.scaleY),ct=A/st;T=B.clippingPath.scaleX*ct,O=B.clippingPath.scaleY*ct}}else if(y=Math.abs(m.x*u.scaleX/C.x),_=Math.abs(m.y*u.scaleY/C.y),u.isType("EditorClippingText")&&u.clippingPath instanceof we){const{originX:A,originY:B,scaledWidth:Y,scaledHeight:J}=u._getOrigin(),{scaleX:st,scaleY:ct}=u._calcImageScale(A,B,Y,J);T=st,O=ct,u._caculateBounds(u.clippingPath._element),u.previousImageViewport=Object.assign({},u.imageViewport),u._updateImagePosition(),u._updateImageViewportPositionScale()}Mb(t)&&(y*=2,_*=2),t.signX!==b&&d!=="y"&&(t.originX=Av(t.originX),y*=-1,t.signX=b),t.signY!==x&&d!=="x"&&(t.originY=Av(t.originY),_*=-1,t.signY=x)}const E=u.scaleX,V=u.scaleY;return d?(d==="x"&&u.set("scaleX",y),d==="y"&&u.set("scaleY",_),u.isType("EditorClippingText")&&u.clippingPath instanceof we&&(u.clippingPath.set("scaleX",T),u.clippingPath.set("scaleY",O),(l=u.clipPath)==null||l.set("scaleX",T),(h=u.clipPath)==null||h.set("scaleY",O))):(!$r(u,"lockScalingX")&&u.set("scaleX",y),!$r(u,"lockScalingY")&&u.set("scaleY",_),u.isType("EditorClippingText")&&u.clippingPath instanceof we&&(u.clippingPath.set("scaleX",T),u.clippingPath.set("scaleY",O),(s=u.clipPath)==null||s.set("scaleX",T),(o=u.clipPath)==null||o.set("scaleY",O))),(u.isType("ActiveSelection")||u.isType("Group"))&&(u._objects=u._objects.map((A,B)=>{var Y,J;if(A.isType("EditorClippingText")&&A.clippingPath instanceof we){const st=Math.abs(m.x)+Math.abs(m.y),{original:ct}=t,ot=Math.abs(C.x*ct.objects[B].clippingPath.scaleX/A.clippingPath.scaleX)+Math.abs(C.y*ct.objects[B].clippingPath.scaleY/A.clippingPath.scaleY),yt=st/ot;T=ct.objects[B].clippingPath.scaleX*yt,O=ct.objects[B].clippingPath.scaleY*yt,(Y=A.clipPath)==null||Y.set("scaleX",T),(J=A.clipPath)==null||J.set("scaleY",O),A.clippingPath.set("scaleX",T),A.clippingPath.set("scaleY",O)}return A})),E!==u.scaleX||V!==u.scaleY}const b4=(n,t,e,i)=>Mg(n,t,e,i),w4=(n,t,e,i)=>Mg(n,t,e,i,{by:"x"}),x4=(n,t,e,i)=>Mg(n,t,e,i,{by:"y"}),kc=Eg("scaling",Tl(b4)),C4=Eg("scaling",Tl(w4)),S4=Eg("scaling",Tl(x4)),T4=["ns","nesw","ew","nwse"],P4=(n,t,e)=>{if(t.x!==0&&$r(e,"lockSkewingY")||t.y!==0&&$r(e,"lockSkewingX"))return Eb;const i=Ab(e,t)%4;return`${T4[i]}-resize`},{skewHandlerX:O4,skewHandlerY:E4}=Ns;function Ag(n,t){return n[t.canvas.altActionKey]}const kv=(n,t,e,i)=>Ag(n,t.target)?E4(n,t,e,i):C4(n,t,e,i),jv=(n,t,e,i)=>Ag(n,t.target)?O4(n,t,e,i):S4(n,t,e,i),So=(n,t,e)=>Ag(n,e)?P4(n,t,e):Ra(n,t,e);var ha=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fh={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */fh.exports;(function(n,t){(function(){var e,i="4.17.21",r=200,s="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",o="Expected a function",l="Invalid `variable` option passed into `_.template`",h="__lodash_hash_undefined__",u=500,d="__lodash_placeholder__",g=1,p=2,m=4,y=1,_=2,C=1,b=2,x=4,T=8,O=16,E=32,V=64,A=128,B=256,Y=512,J=30,st="...",ct=800,ot=16,yt=1,Tt=2,at=3,pt=1/0,ft=9007199254740991,Xt=17976931348623157e292,It=NaN,zt=4294967295,qt=zt-1,ue=zt>>>1,Zt=[["ary",A],["bind",C],["bindKey",b],["curry",T],["curryRight",O],["flip",Y],["partial",E],["partialRight",V],["rearg",B]],ie="[object Arguments]",me="[object Array]",q="[object AsyncFunction]",_t="[object Boolean]",ut="[object Date]",Ct="[object DOMException]",ee="[object Error]",ge="[object Function]",M="[object GeneratorFunction]",j="[object Map]",H="[object Number]",it="[object Null]",U="[object Object]",rt="[object Promise]",bt="[object Proxy]",dt="[object RegExp]",lt="[object Set]",nt="[object String]",Mt="[object Symbol]",xt="[object Undefined]",Pt="[object WeakMap]",Rt="[object WeakSet]",Wt="[object ArrayBuffer]",ne="[object DataView]",re="[object Float32Array]",ri="[object Float64Array]",Ue="[object Int8Array]",xi="[object Int16Array]",si="[object Int32Array]",nr="[object Uint8Array]",Zs="[object Uint8ClampedArray]",oi="[object Uint16Array]",Ri="[object Uint32Array]",El=/\b__p \+= '';/g,Iw=/\b(__p \+=) '' \+/g,Rw=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Xg=/&(?:amp|lt|gt|quot|#39);/g,Hg=/[&<>"']/g,Lw=RegExp(Xg.source),Bw=RegExp(Hg.source),Fw=/<%-([\s\S]+?)%>/g,zw=/<%([\s\S]+?)%>/g,Yg=/<%=([\s\S]+?)%>/g,Vw=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Xw=/^\w*$/,Hw=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Kh=/[\\^$.*+?()[\]{}|]/g,Yw=RegExp(Kh.source),Jh=/^\s+/,Nw=/\s/,Ww=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Uw=/\{\n\/\* \[wrapped with (.+)\] \*/,Gw=/,? & /,qw=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Zw=/[()=,{}\[\]\/\s]/,$w=/\\(\\)?/g,Kw=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ng=/\w*$/,Jw=/^[-+]0x[0-9a-f]+$/i,Qw=/^0b[01]+$/i,tx=/^\[object .+?Constructor\]$/,ex=/^0o[0-7]+$/i,ix=/^(?:0|[1-9]\d*)$/,nx=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ml=/($^)/,rx=/['\n\r\u2028\u2029\\]/g,Al="\\ud800-\\udfff",sx="\\u0300-\\u036f",ox="\\ufe20-\\ufe2f",ax="\\u20d0-\\u20ff",Wg=sx+ox+ax,Ug="\\u2700-\\u27bf",Gg="a-z\\xdf-\\xf6\\xf8-\\xff",lx="\\xac\\xb1\\xd7\\xf7",cx="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",hx="\\u2000-\\u206f",ux=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",qg="A-Z\\xc0-\\xd6\\xd8-\\xde",Zg="\\ufe0e\\ufe0f",$g=lx+cx+hx+ux,Qh="['’]",dx="["+Al+"]",Kg="["+$g+"]",kl="["+Wg+"]",Jg="\\d+",fx="["+Ug+"]",Qg="["+Gg+"]",tp="[^"+Al+$g+Jg+Ug+Gg+qg+"]",tu="\\ud83c[\\udffb-\\udfff]",gx="(?:"+kl+"|"+tu+")",ep="[^"+Al+"]",eu="(?:\\ud83c[\\udde6-\\uddff]){2}",iu="[\\ud800-\\udbff][\\udc00-\\udfff]",$s="["+qg+"]",ip="\\u200d",np="(?:"+Qg+"|"+tp+")",px="(?:"+$s+"|"+tp+")",rp="(?:"+Qh+"(?:d|ll|m|re|s|t|ve))?",sp="(?:"+Qh+"(?:D|LL|M|RE|S|T|VE))?",op=gx+"?",ap="["+Zg+"]?",mx="(?:"+ip+"(?:"+[ep,eu,iu].join("|")+")"+ap+op+")*",vx="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",yx="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",lp=ap+op+mx,_x="(?:"+[fx,eu,iu].join("|")+")"+lp,bx="(?:"+[ep+kl+"?",kl,eu,iu,dx].join("|")+")",wx=RegExp(Qh,"g"),xx=RegExp(kl,"g"),nu=RegExp(tu+"(?="+tu+")|"+bx+lp,"g"),Cx=RegExp([$s+"?"+Qg+"+"+rp+"(?="+[Kg,$s,"$"].join("|")+")",px+"+"+sp+"(?="+[Kg,$s+np,"$"].join("|")+")",$s+"?"+np+"+"+rp,$s+"+"+sp,yx,vx,Jg,_x].join("|"),"g"),Sx=RegExp("["+ip+Al+Wg+Zg+"]"),Tx=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Px=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Ox=-1,xe={};xe[re]=xe[ri]=xe[Ue]=xe[xi]=xe[si]=xe[nr]=xe[Zs]=xe[oi]=xe[Ri]=!0,xe[ie]=xe[me]=xe[Wt]=xe[_t]=xe[ne]=xe[ut]=xe[ee]=xe[ge]=xe[j]=xe[H]=xe[U]=xe[dt]=xe[lt]=xe[nt]=xe[Pt]=!1;var be={};be[ie]=be[me]=be[Wt]=be[ne]=be[_t]=be[ut]=be[re]=be[ri]=be[Ue]=be[xi]=be[si]=be[j]=be[H]=be[U]=be[dt]=be[lt]=be[nt]=be[Mt]=be[nr]=be[Zs]=be[oi]=be[Ri]=!0,be[ee]=be[ge]=be[Pt]=!1;var Ex={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Mx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ax={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},kx={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},jx=parseFloat,Dx=parseInt,cp=typeof ha=="object"&&ha&&ha.Object===Object&&ha,Ix=typeof self=="object"&&self&&self.Object===Object&&self,ai=cp||Ix||Function("return this")(),ru=t&&!t.nodeType&&t,us=ru&&!0&&n&&!n.nodeType&&n,hp=us&&us.exports===ru,su=hp&&cp.process,rn=function(){try{var z=us&&us.require&&us.require("util").types;return z||su&&su.binding&&su.binding("util")}catch{}}(),up=rn&&rn.isArrayBuffer,dp=rn&&rn.isDate,fp=rn&&rn.isMap,gp=rn&&rn.isRegExp,pp=rn&&rn.isSet,mp=rn&&rn.isTypedArray;function Ni(z,G,N){switch(N.length){case 0:return z.call(G);case 1:return z.call(G,N[0]);case 2:return z.call(G,N[0],N[1]);case 3:return z.call(G,N[0],N[1],N[2])}return z.apply(G,N)}function Rx(z,G,N,St){for(var Vt=-1,ae=z==null?0:z.length;++Vt<ae;){var Ke=z[Vt];G(St,Ke,N(Ke),z)}return St}function sn(z,G){for(var N=-1,St=z==null?0:z.length;++N<St&&G(z[N],N,z)!==!1;);return z}function Lx(z,G){for(var N=z==null?0:z.length;N--&&G(z[N],N,z)!==!1;);return z}function vp(z,G){for(var N=-1,St=z==null?0:z.length;++N<St;)if(!G(z[N],N,z))return!1;return!0}function Er(z,G){for(var N=-1,St=z==null?0:z.length,Vt=0,ae=[];++N<St;){var Ke=z[N];G(Ke,N,z)&&(ae[Vt++]=Ke)}return ae}function jl(z,G){var N=z==null?0:z.length;return!!N&&Ks(z,G,0)>-1}function ou(z,G,N){for(var St=-1,Vt=z==null?0:z.length;++St<Vt;)if(N(G,z[St]))return!0;return!1}function Oe(z,G){for(var N=-1,St=z==null?0:z.length,Vt=Array(St);++N<St;)Vt[N]=G(z[N],N,z);return Vt}function Mr(z,G){for(var N=-1,St=G.length,Vt=z.length;++N<St;)z[Vt+N]=G[N];return z}function au(z,G,N,St){var Vt=-1,ae=z==null?0:z.length;for(St&&ae&&(N=z[++Vt]);++Vt<ae;)N=G(N,z[Vt],Vt,z);return N}function Bx(z,G,N,St){var Vt=z==null?0:z.length;for(St&&Vt&&(N=z[--Vt]);Vt--;)N=G(N,z[Vt],Vt,z);return N}function lu(z,G){for(var N=-1,St=z==null?0:z.length;++N<St;)if(G(z[N],N,z))return!0;return!1}var Fx=cu("length");function zx(z){return z.split("")}function Vx(z){return z.match(qw)||[]}function yp(z,G,N){var St;return N(z,function(Vt,ae,Ke){if(G(Vt,ae,Ke))return St=ae,!1}),St}function Dl(z,G,N,St){for(var Vt=z.length,ae=N+(St?1:-1);St?ae--:++ae<Vt;)if(G(z[ae],ae,z))return ae;return-1}function Ks(z,G,N){return G===G?Jx(z,G,N):Dl(z,_p,N)}function Xx(z,G,N,St){for(var Vt=N-1,ae=z.length;++Vt<ae;)if(St(z[Vt],G))return Vt;return-1}function _p(z){return z!==z}function bp(z,G){var N=z==null?0:z.length;return N?uu(z,G)/N:It}function cu(z){return function(G){return G==null?e:G[z]}}function hu(z){return function(G){return z==null?e:z[G]}}function wp(z,G,N,St,Vt){return Vt(z,function(ae,Ke,ve){N=St?(St=!1,ae):G(N,ae,Ke,ve)}),N}function Hx(z,G){var N=z.length;for(z.sort(G);N--;)z[N]=z[N].value;return z}function uu(z,G){for(var N,St=-1,Vt=z.length;++St<Vt;){var ae=G(z[St]);ae!==e&&(N=N===e?ae:N+ae)}return N}function du(z,G){for(var N=-1,St=Array(z);++N<z;)St[N]=G(N);return St}function Yx(z,G){return Oe(G,function(N){return[N,z[N]]})}function xp(z){return z&&z.slice(0,Pp(z)+1).replace(Jh,"")}function Wi(z){return function(G){return z(G)}}function fu(z,G){return Oe(G,function(N){return z[N]})}function Go(z,G){return z.has(G)}function Cp(z,G){for(var N=-1,St=z.length;++N<St&&Ks(G,z[N],0)>-1;);return N}function Sp(z,G){for(var N=z.length;N--&&Ks(G,z[N],0)>-1;);return N}function Nx(z,G){for(var N=z.length,St=0;N--;)z[N]===G&&++St;return St}var Wx=hu(Ex),Ux=hu(Mx);function Gx(z){return"\\"+kx[z]}function qx(z,G){return z==null?e:z[G]}function Js(z){return Sx.test(z)}function Zx(z){return Tx.test(z)}function $x(z){for(var G,N=[];!(G=z.next()).done;)N.push(G.value);return N}function gu(z){var G=-1,N=Array(z.size);return z.forEach(function(St,Vt){N[++G]=[Vt,St]}),N}function Tp(z,G){return function(N){return z(G(N))}}function Ar(z,G){for(var N=-1,St=z.length,Vt=0,ae=[];++N<St;){var Ke=z[N];(Ke===G||Ke===d)&&(z[N]=d,ae[Vt++]=N)}return ae}function Il(z){var G=-1,N=Array(z.size);return z.forEach(function(St){N[++G]=St}),N}function Kx(z){var G=-1,N=Array(z.size);return z.forEach(function(St){N[++G]=[St,St]}),N}function Jx(z,G,N){for(var St=N-1,Vt=z.length;++St<Vt;)if(z[St]===G)return St;return-1}function Qx(z,G,N){for(var St=N+1;St--;)if(z[St]===G)return St;return St}function Qs(z){return Js(z)?eC(z):Fx(z)}function yn(z){return Js(z)?iC(z):zx(z)}function Pp(z){for(var G=z.length;G--&&Nw.test(z.charAt(G)););return G}var tC=hu(Ax);function eC(z){for(var G=nu.lastIndex=0;nu.test(z);)++G;return G}function iC(z){return z.match(nu)||[]}function nC(z){return z.match(Cx)||[]}var rC=function z(G){G=G==null?ai:to.defaults(ai.Object(),G,to.pick(ai,Px));var N=G.Array,St=G.Date,Vt=G.Error,ae=G.Function,Ke=G.Math,ve=G.Object,pu=G.RegExp,sC=G.String,on=G.TypeError,Rl=N.prototype,oC=ae.prototype,eo=ve.prototype,Ll=G["__core-js_shared__"],Bl=oC.toString,de=eo.hasOwnProperty,aC=0,Op=function(){var a=/[^.]+$/.exec(Ll&&Ll.keys&&Ll.keys.IE_PROTO||"");return a?"Symbol(src)_1."+a:""}(),Fl=eo.toString,lC=Bl.call(ve),cC=ai._,hC=pu("^"+Bl.call(de).replace(Kh,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zl=hp?G.Buffer:e,kr=G.Symbol,Vl=G.Uint8Array,Ep=zl?zl.allocUnsafe:e,Xl=Tp(ve.getPrototypeOf,ve),Mp=ve.create,Ap=eo.propertyIsEnumerable,Hl=Rl.splice,kp=kr?kr.isConcatSpreadable:e,qo=kr?kr.iterator:e,ds=kr?kr.toStringTag:e,Yl=function(){try{var a=vs(ve,"defineProperty");return a({},"",{}),a}catch{}}(),uC=G.clearTimeout!==ai.clearTimeout&&G.clearTimeout,dC=St&&St.now!==ai.Date.now&&St.now,fC=G.setTimeout!==ai.setTimeout&&G.setTimeout,Nl=Ke.ceil,Wl=Ke.floor,mu=ve.getOwnPropertySymbols,gC=zl?zl.isBuffer:e,jp=G.isFinite,pC=Rl.join,mC=Tp(ve.keys,ve),Je=Ke.max,gi=Ke.min,vC=St.now,yC=G.parseInt,Dp=Ke.random,_C=Rl.reverse,vu=vs(G,"DataView"),Zo=vs(G,"Map"),yu=vs(G,"Promise"),io=vs(G,"Set"),$o=vs(G,"WeakMap"),Ko=vs(ve,"create"),Ul=$o&&new $o,no={},bC=ys(vu),wC=ys(Zo),xC=ys(yu),CC=ys(io),SC=ys($o),Gl=kr?kr.prototype:e,Jo=Gl?Gl.valueOf:e,Ip=Gl?Gl.toString:e;function S(a){if(Ie(a)&&!Ht(a)&&!(a instanceof Jt)){if(a instanceof an)return a;if(de.call(a,"__wrapped__"))return R0(a)}return new an(a)}var ro=function(){function a(){}return function(c){if(!ke(c))return{};if(Mp)return Mp(c);a.prototype=c;var f=new a;return a.prototype=e,f}}();function ql(){}function an(a,c){this.__wrapped__=a,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=e}S.templateSettings={escape:Fw,evaluate:zw,interpolate:Yg,variable:"",imports:{_:S}},S.prototype=ql.prototype,S.prototype.constructor=S,an.prototype=ro(ql.prototype),an.prototype.constructor=an;function Jt(a){this.__wrapped__=a,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=zt,this.__views__=[]}function TC(){var a=new Jt(this.__wrapped__);return a.__actions__=Li(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=Li(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=Li(this.__views__),a}function PC(){if(this.__filtered__){var a=new Jt(this);a.__dir__=-1,a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a}function OC(){var a=this.__wrapped__.value(),c=this.__dir__,f=Ht(a),v=c<0,w=f?a.length:0,P=z2(0,w,this.__views__),k=P.start,R=P.end,X=R-k,Z=v?R:k-1,K=this.__iteratees__,tt=K.length,wt=0,Ot=gi(X,this.__takeCount__);if(!f||!v&&w==X&&Ot==X)return r0(a,this.__actions__);var jt=[];t:for(;X--&&wt<Ot;){Z+=c;for(var Ut=-1,Dt=a[Z];++Ut<tt;){var $t=K[Ut],Qt=$t.iteratee,qi=$t.type,Ti=Qt(Dt);if(qi==Tt)Dt=Ti;else if(!Ti){if(qi==yt)continue t;break t}}jt[wt++]=Dt}return jt}Jt.prototype=ro(ql.prototype),Jt.prototype.constructor=Jt;function fs(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var v=a[c];this.set(v[0],v[1])}}function EC(){this.__data__=Ko?Ko(null):{},this.size=0}function MC(a){var c=this.has(a)&&delete this.__data__[a];return this.size-=c?1:0,c}function AC(a){var c=this.__data__;if(Ko){var f=c[a];return f===h?e:f}return de.call(c,a)?c[a]:e}function kC(a){var c=this.__data__;return Ko?c[a]!==e:de.call(c,a)}function jC(a,c){var f=this.__data__;return this.size+=this.has(a)?0:1,f[a]=Ko&&c===e?h:c,this}fs.prototype.clear=EC,fs.prototype.delete=MC,fs.prototype.get=AC,fs.prototype.has=kC,fs.prototype.set=jC;function rr(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var v=a[c];this.set(v[0],v[1])}}function DC(){this.__data__=[],this.size=0}function IC(a){var c=this.__data__,f=Zl(c,a);if(f<0)return!1;var v=c.length-1;return f==v?c.pop():Hl.call(c,f,1),--this.size,!0}function RC(a){var c=this.__data__,f=Zl(c,a);return f<0?e:c[f][1]}function LC(a){return Zl(this.__data__,a)>-1}function BC(a,c){var f=this.__data__,v=Zl(f,a);return v<0?(++this.size,f.push([a,c])):f[v][1]=c,this}rr.prototype.clear=DC,rr.prototype.delete=IC,rr.prototype.get=RC,rr.prototype.has=LC,rr.prototype.set=BC;function sr(a){var c=-1,f=a==null?0:a.length;for(this.clear();++c<f;){var v=a[c];this.set(v[0],v[1])}}function FC(){this.size=0,this.__data__={hash:new fs,map:new(Zo||rr),string:new fs}}function zC(a){var c=ac(this,a).delete(a);return this.size-=c?1:0,c}function VC(a){return ac(this,a).get(a)}function XC(a){return ac(this,a).has(a)}function HC(a,c){var f=ac(this,a),v=f.size;return f.set(a,c),this.size+=f.size==v?0:1,this}sr.prototype.clear=FC,sr.prototype.delete=zC,sr.prototype.get=VC,sr.prototype.has=XC,sr.prototype.set=HC;function gs(a){var c=-1,f=a==null?0:a.length;for(this.__data__=new sr;++c<f;)this.add(a[c])}function YC(a){return this.__data__.set(a,h),this}function NC(a){return this.__data__.has(a)}gs.prototype.add=gs.prototype.push=YC,gs.prototype.has=NC;function _n(a){var c=this.__data__=new rr(a);this.size=c.size}function WC(){this.__data__=new rr,this.size=0}function UC(a){var c=this.__data__,f=c.delete(a);return this.size=c.size,f}function GC(a){return this.__data__.get(a)}function qC(a){return this.__data__.has(a)}function ZC(a,c){var f=this.__data__;if(f instanceof rr){var v=f.__data__;if(!Zo||v.length<r-1)return v.push([a,c]),this.size=++f.size,this;f=this.__data__=new sr(v)}return f.set(a,c),this.size=f.size,this}_n.prototype.clear=WC,_n.prototype.delete=UC,_n.prototype.get=GC,_n.prototype.has=qC,_n.prototype.set=ZC;function Rp(a,c){var f=Ht(a),v=!f&&_s(a),w=!f&&!v&&Lr(a),P=!f&&!v&&!w&&lo(a),k=f||v||w||P,R=k?du(a.length,sC):[],X=R.length;for(var Z in a)(c||de.call(a,Z))&&!(k&&(Z=="length"||w&&(Z=="offset"||Z=="parent")||P&&(Z=="buffer"||Z=="byteLength"||Z=="byteOffset")||cr(Z,X)))&&R.push(Z);return R}function Lp(a){var c=a.length;return c?a[Mu(0,c-1)]:e}function $C(a,c){return lc(Li(a),ps(c,0,a.length))}function KC(a){return lc(Li(a))}function _u(a,c,f){(f!==e&&!bn(a[c],f)||f===e&&!(c in a))&&or(a,c,f)}function Qo(a,c,f){var v=a[c];(!(de.call(a,c)&&bn(v,f))||f===e&&!(c in a))&&or(a,c,f)}function Zl(a,c){for(var f=a.length;f--;)if(bn(a[f][0],c))return f;return-1}function JC(a,c,f,v){return jr(a,function(w,P,k){c(v,w,f(w),k)}),v}function Bp(a,c){return a&&zn(c,ei(c),a)}function QC(a,c){return a&&zn(c,Fi(c),a)}function or(a,c,f){c=="__proto__"&&Yl?Yl(a,c,{configurable:!0,enumerable:!0,value:f,writable:!0}):a[c]=f}function bu(a,c){for(var f=-1,v=c.length,w=N(v),P=a==null;++f<v;)w[f]=P?e:td(a,c[f]);return w}function ps(a,c,f){return a===a&&(f!==e&&(a=a<=f?a:f),c!==e&&(a=a>=c?a:c)),a}function ln(a,c,f,v,w,P){var k,R=c&g,X=c&p,Z=c&m;if(f&&(k=w?f(a,v,w,P):f(a)),k!==e)return k;if(!ke(a))return a;var K=Ht(a);if(K){if(k=X2(a),!R)return Li(a,k)}else{var tt=pi(a),wt=tt==ge||tt==M;if(Lr(a))return a0(a,R);if(tt==U||tt==ie||wt&&!w){if(k=X||wt?{}:P0(a),!R)return X?A2(a,QC(k,a)):M2(a,Bp(k,a))}else{if(!be[tt])return w?a:{};k=H2(a,tt,R)}}P||(P=new _n);var Ot=P.get(a);if(Ot)return Ot;P.set(a,k),em(a)?a.forEach(function(Dt){k.add(ln(Dt,c,f,Dt,a,P))}):Q0(a)&&a.forEach(function(Dt,$t){k.set($t,ln(Dt,c,f,$t,a,P))});var jt=Z?X?Vu:zu:X?Fi:ei,Ut=K?e:jt(a);return sn(Ut||a,function(Dt,$t){Ut&&($t=Dt,Dt=a[$t]),Qo(k,$t,ln(Dt,c,f,$t,a,P))}),k}function t2(a){var c=ei(a);return function(f){return Fp(f,a,c)}}function Fp(a,c,f){var v=f.length;if(a==null)return!v;for(a=ve(a);v--;){var w=f[v],P=c[w],k=a[w];if(k===e&&!(w in a)||!P(k))return!1}return!0}function zp(a,c,f){if(typeof a!="function")throw new on(o);return oa(function(){a.apply(e,f)},c)}function ta(a,c,f,v){var w=-1,P=jl,k=!0,R=a.length,X=[],Z=c.length;if(!R)return X;f&&(c=Oe(c,Wi(f))),v?(P=ou,k=!1):c.length>=r&&(P=Go,k=!1,c=new gs(c));t:for(;++w<R;){var K=a[w],tt=f==null?K:f(K);if(K=v||K!==0?K:0,k&&tt===tt){for(var wt=Z;wt--;)if(c[wt]===tt)continue t;X.push(K)}else P(c,tt,v)||X.push(K)}return X}var jr=d0(Fn),Vp=d0(xu,!0);function e2(a,c){var f=!0;return jr(a,function(v,w,P){return f=!!c(v,w,P),f}),f}function $l(a,c,f){for(var v=-1,w=a.length;++v<w;){var P=a[v],k=c(P);if(k!=null&&(R===e?k===k&&!Gi(k):f(k,R)))var R=k,X=P}return X}function i2(a,c,f,v){var w=a.length;for(f=Yt(f),f<0&&(f=-f>w?0:w+f),v=v===e||v>w?w:Yt(v),v<0&&(v+=w),v=f>v?0:nm(v);f<v;)a[f++]=c;return a}function Xp(a,c){var f=[];return jr(a,function(v,w,P){c(v,w,P)&&f.push(v)}),f}function li(a,c,f,v,w){var P=-1,k=a.length;for(f||(f=N2),w||(w=[]);++P<k;){var R=a[P];c>0&&f(R)?c>1?li(R,c-1,f,v,w):Mr(w,R):v||(w[w.length]=R)}return w}var wu=f0(),Hp=f0(!0);function Fn(a,c){return a&&wu(a,c,ei)}function xu(a,c){return a&&Hp(a,c,ei)}function Kl(a,c){return Er(c,function(f){return hr(a[f])})}function ms(a,c){c=Ir(c,a);for(var f=0,v=c.length;a!=null&&f<v;)a=a[Vn(c[f++])];return f&&f==v?a:e}function Yp(a,c,f){var v=c(a);return Ht(a)?v:Mr(v,f(a))}function Ci(a){return a==null?a===e?xt:it:ds&&ds in ve(a)?F2(a):K2(a)}function Cu(a,c){return a>c}function n2(a,c){return a!=null&&de.call(a,c)}function r2(a,c){return a!=null&&c in ve(a)}function s2(a,c,f){return a>=gi(c,f)&&a<Je(c,f)}function Su(a,c,f){for(var v=f?ou:jl,w=a[0].length,P=a.length,k=P,R=N(P),X=1/0,Z=[];k--;){var K=a[k];k&&c&&(K=Oe(K,Wi(c))),X=gi(K.length,X),R[k]=!f&&(c||w>=120&&K.length>=120)?new gs(k&&K):e}K=a[0];var tt=-1,wt=R[0];t:for(;++tt<w&&Z.length<X;){var Ot=K[tt],jt=c?c(Ot):Ot;if(Ot=f||Ot!==0?Ot:0,!(wt?Go(wt,jt):v(Z,jt,f))){for(k=P;--k;){var Ut=R[k];if(!(Ut?Go(Ut,jt):v(a[k],jt,f)))continue t}wt&&wt.push(jt),Z.push(Ot)}}return Z}function o2(a,c,f,v){return Fn(a,function(w,P,k){c(v,f(w),P,k)}),v}function ea(a,c,f){c=Ir(c,a),a=A0(a,c);var v=a==null?a:a[Vn(hn(c))];return v==null?e:Ni(v,a,f)}function Np(a){return Ie(a)&&Ci(a)==ie}function a2(a){return Ie(a)&&Ci(a)==Wt}function l2(a){return Ie(a)&&Ci(a)==ut}function ia(a,c,f,v,w){return a===c?!0:a==null||c==null||!Ie(a)&&!Ie(c)?a!==a&&c!==c:c2(a,c,f,v,ia,w)}function c2(a,c,f,v,w,P){var k=Ht(a),R=Ht(c),X=k?me:pi(a),Z=R?me:pi(c);X=X==ie?U:X,Z=Z==ie?U:Z;var K=X==U,tt=Z==U,wt=X==Z;if(wt&&Lr(a)){if(!Lr(c))return!1;k=!0,K=!1}if(wt&&!K)return P||(P=new _n),k||lo(a)?C0(a,c,f,v,w,P):L2(a,c,X,f,v,w,P);if(!(f&y)){var Ot=K&&de.call(a,"__wrapped__"),jt=tt&&de.call(c,"__wrapped__");if(Ot||jt){var Ut=Ot?a.value():a,Dt=jt?c.value():c;return P||(P=new _n),w(Ut,Dt,f,v,P)}}return wt?(P||(P=new _n),B2(a,c,f,v,w,P)):!1}function h2(a){return Ie(a)&&pi(a)==j}function Tu(a,c,f,v){var w=f.length,P=w,k=!v;if(a==null)return!P;for(a=ve(a);w--;){var R=f[w];if(k&&R[2]?R[1]!==a[R[0]]:!(R[0]in a))return!1}for(;++w<P;){R=f[w];var X=R[0],Z=a[X],K=R[1];if(k&&R[2]){if(Z===e&&!(X in a))return!1}else{var tt=new _n;if(v)var wt=v(Z,K,X,a,c,tt);if(!(wt===e?ia(K,Z,y|_,v,tt):wt))return!1}}return!0}function Wp(a){if(!ke(a)||U2(a))return!1;var c=hr(a)?hC:tx;return c.test(ys(a))}function u2(a){return Ie(a)&&Ci(a)==dt}function d2(a){return Ie(a)&&pi(a)==lt}function f2(a){return Ie(a)&&gc(a.length)&&!!xe[Ci(a)]}function Up(a){return typeof a=="function"?a:a==null?zi:typeof a=="object"?Ht(a)?Zp(a[0],a[1]):qp(a):gm(a)}function Pu(a){if(!sa(a))return mC(a);var c=[];for(var f in ve(a))de.call(a,f)&&f!="constructor"&&c.push(f);return c}function g2(a){if(!ke(a))return $2(a);var c=sa(a),f=[];for(var v in a)v=="constructor"&&(c||!de.call(a,v))||f.push(v);return f}function Ou(a,c){return a<c}function Gp(a,c){var f=-1,v=Bi(a)?N(a.length):[];return jr(a,function(w,P,k){v[++f]=c(w,P,k)}),v}function qp(a){var c=Hu(a);return c.length==1&&c[0][2]?E0(c[0][0],c[0][1]):function(f){return f===a||Tu(f,a,c)}}function Zp(a,c){return Nu(a)&&O0(c)?E0(Vn(a),c):function(f){var v=td(f,a);return v===e&&v===c?ed(f,a):ia(c,v,y|_)}}function Jl(a,c,f,v,w){a!==c&&wu(c,function(P,k){if(w||(w=new _n),ke(P))p2(a,c,k,f,Jl,v,w);else{var R=v?v(Uu(a,k),P,k+"",a,c,w):e;R===e&&(R=P),_u(a,k,R)}},Fi)}function p2(a,c,f,v,w,P,k){var R=Uu(a,f),X=Uu(c,f),Z=k.get(X);if(Z){_u(a,f,Z);return}var K=P?P(R,X,f+"",a,c,k):e,tt=K===e;if(tt){var wt=Ht(X),Ot=!wt&&Lr(X),jt=!wt&&!Ot&&lo(X);K=X,wt||Ot||jt?Ht(R)?K=R:Fe(R)?K=Li(R):Ot?(tt=!1,K=a0(X,!0)):jt?(tt=!1,K=l0(X,!0)):K=[]:aa(X)||_s(X)?(K=R,_s(R)?K=rm(R):(!ke(R)||hr(R))&&(K=P0(X))):tt=!1}tt&&(k.set(X,K),w(K,X,v,P,k),k.delete(X)),_u(a,f,K)}function $p(a,c){var f=a.length;if(f)return c+=c<0?f:0,cr(c,f)?a[c]:e}function Kp(a,c,f){c.length?c=Oe(c,function(P){return Ht(P)?function(k){return ms(k,P.length===1?P[0]:P)}:P}):c=[zi];var v=-1;c=Oe(c,Wi(kt()));var w=Gp(a,function(P,k,R){var X=Oe(c,function(Z){return Z(P)});return{criteria:X,index:++v,value:P}});return Hx(w,function(P,k){return E2(P,k,f)})}function m2(a,c){return Jp(a,c,function(f,v){return ed(a,v)})}function Jp(a,c,f){for(var v=-1,w=c.length,P={};++v<w;){var k=c[v],R=ms(a,k);f(R,k)&&na(P,Ir(k,a),R)}return P}function v2(a){return function(c){return ms(c,a)}}function Eu(a,c,f,v){var w=v?Xx:Ks,P=-1,k=c.length,R=a;for(a===c&&(c=Li(c)),f&&(R=Oe(a,Wi(f)));++P<k;)for(var X=0,Z=c[P],K=f?f(Z):Z;(X=w(R,K,X,v))>-1;)R!==a&&Hl.call(R,X,1),Hl.call(a,X,1);return a}function Qp(a,c){for(var f=a?c.length:0,v=f-1;f--;){var w=c[f];if(f==v||w!==P){var P=w;cr(w)?Hl.call(a,w,1):ju(a,w)}}return a}function Mu(a,c){return a+Wl(Dp()*(c-a+1))}function y2(a,c,f,v){for(var w=-1,P=Je(Nl((c-a)/(f||1)),0),k=N(P);P--;)k[v?P:++w]=a,a+=f;return k}function Au(a,c){var f="";if(!a||c<1||c>ft)return f;do c%2&&(f+=a),c=Wl(c/2),c&&(a+=a);while(c);return f}function Gt(a,c){return Gu(M0(a,c,zi),a+"")}function _2(a){return Lp(co(a))}function b2(a,c){var f=co(a);return lc(f,ps(c,0,f.length))}function na(a,c,f,v){if(!ke(a))return a;c=Ir(c,a);for(var w=-1,P=c.length,k=P-1,R=a;R!=null&&++w<P;){var X=Vn(c[w]),Z=f;if(X==="__proto__"||X==="constructor"||X==="prototype")return a;if(w!=k){var K=R[X];Z=v?v(K,X,R):e,Z===e&&(Z=ke(K)?K:cr(c[w+1])?[]:{})}Qo(R,X,Z),R=R[X]}return a}var t0=Ul?function(a,c){return Ul.set(a,c),a}:zi,w2=Yl?function(a,c){return Yl(a,"toString",{configurable:!0,enumerable:!1,value:nd(c),writable:!0})}:zi;function x2(a){return lc(co(a))}function cn(a,c,f){var v=-1,w=a.length;c<0&&(c=-c>w?0:w+c),f=f>w?w:f,f<0&&(f+=w),w=c>f?0:f-c>>>0,c>>>=0;for(var P=N(w);++v<w;)P[v]=a[v+c];return P}function C2(a,c){var f;return jr(a,function(v,w,P){return f=c(v,w,P),!f}),!!f}function Ql(a,c,f){var v=0,w=a==null?v:a.length;if(typeof c=="number"&&c===c&&w<=ue){for(;v<w;){var P=v+w>>>1,k=a[P];k!==null&&!Gi(k)&&(f?k<=c:k<c)?v=P+1:w=P}return w}return ku(a,c,zi,f)}function ku(a,c,f,v){var w=0,P=a==null?0:a.length;if(P===0)return 0;c=f(c);for(var k=c!==c,R=c===null,X=Gi(c),Z=c===e;w<P;){var K=Wl((w+P)/2),tt=f(a[K]),wt=tt!==e,Ot=tt===null,jt=tt===tt,Ut=Gi(tt);if(k)var Dt=v||jt;else Z?Dt=jt&&(v||wt):R?Dt=jt&&wt&&(v||!Ot):X?Dt=jt&&wt&&!Ot&&(v||!Ut):Ot||Ut?Dt=!1:Dt=v?tt<=c:tt<c;Dt?w=K+1:P=K}return gi(P,qt)}function e0(a,c){for(var f=-1,v=a.length,w=0,P=[];++f<v;){var k=a[f],R=c?c(k):k;if(!f||!bn(R,X)){var X=R;P[w++]=k===0?0:k}}return P}function i0(a){return typeof a=="number"?a:Gi(a)?It:+a}function Ui(a){if(typeof a=="string")return a;if(Ht(a))return Oe(a,Ui)+"";if(Gi(a))return Ip?Ip.call(a):"";var c=a+"";return c=="0"&&1/a==-pt?"-0":c}function Dr(a,c,f){var v=-1,w=jl,P=a.length,k=!0,R=[],X=R;if(f)k=!1,w=ou;else if(P>=r){var Z=c?null:I2(a);if(Z)return Il(Z);k=!1,w=Go,X=new gs}else X=c?[]:R;t:for(;++v<P;){var K=a[v],tt=c?c(K):K;if(K=f||K!==0?K:0,k&&tt===tt){for(var wt=X.length;wt--;)if(X[wt]===tt)continue t;c&&X.push(tt),R.push(K)}else w(X,tt,f)||(X!==R&&X.push(tt),R.push(K))}return R}function ju(a,c){return c=Ir(c,a),a=A0(a,c),a==null||delete a[Vn(hn(c))]}function n0(a,c,f,v){return na(a,c,f(ms(a,c)),v)}function tc(a,c,f,v){for(var w=a.length,P=v?w:-1;(v?P--:++P<w)&&c(a[P],P,a););return f?cn(a,v?0:P,v?P+1:w):cn(a,v?P+1:0,v?w:P)}function r0(a,c){var f=a;return f instanceof Jt&&(f=f.value()),au(c,function(v,w){return w.func.apply(w.thisArg,Mr([v],w.args))},f)}function Du(a,c,f){var v=a.length;if(v<2)return v?Dr(a[0]):[];for(var w=-1,P=N(v);++w<v;)for(var k=a[w],R=-1;++R<v;)R!=w&&(P[w]=ta(P[w]||k,a[R],c,f));return Dr(li(P,1),c,f)}function s0(a,c,f){for(var v=-1,w=a.length,P=c.length,k={};++v<w;){var R=v<P?c[v]:e;f(k,a[v],R)}return k}function Iu(a){return Fe(a)?a:[]}function Ru(a){return typeof a=="function"?a:zi}function Ir(a,c){return Ht(a)?a:Nu(a,c)?[a]:I0(le(a))}var S2=Gt;function Rr(a,c,f){var v=a.length;return f=f===e?v:f,!c&&f>=v?a:cn(a,c,f)}var o0=uC||function(a){return ai.clearTimeout(a)};function a0(a,c){if(c)return a.slice();var f=a.length,v=Ep?Ep(f):new a.constructor(f);return a.copy(v),v}function Lu(a){var c=new a.constructor(a.byteLength);return new Vl(c).set(new Vl(a)),c}function T2(a,c){var f=c?Lu(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.byteLength)}function P2(a){var c=new a.constructor(a.source,Ng.exec(a));return c.lastIndex=a.lastIndex,c}function O2(a){return Jo?ve(Jo.call(a)):{}}function l0(a,c){var f=c?Lu(a.buffer):a.buffer;return new a.constructor(f,a.byteOffset,a.length)}function c0(a,c){if(a!==c){var f=a!==e,v=a===null,w=a===a,P=Gi(a),k=c!==e,R=c===null,X=c===c,Z=Gi(c);if(!R&&!Z&&!P&&a>c||P&&k&&X&&!R&&!Z||v&&k&&X||!f&&X||!w)return 1;if(!v&&!P&&!Z&&a<c||Z&&f&&w&&!v&&!P||R&&f&&w||!k&&w||!X)return-1}return 0}function E2(a,c,f){for(var v=-1,w=a.criteria,P=c.criteria,k=w.length,R=f.length;++v<k;){var X=c0(w[v],P[v]);if(X){if(v>=R)return X;var Z=f[v];return X*(Z=="desc"?-1:1)}}return a.index-c.index}function h0(a,c,f,v){for(var w=-1,P=a.length,k=f.length,R=-1,X=c.length,Z=Je(P-k,0),K=N(X+Z),tt=!v;++R<X;)K[R]=c[R];for(;++w<k;)(tt||w<P)&&(K[f[w]]=a[w]);for(;Z--;)K[R++]=a[w++];return K}function u0(a,c,f,v){for(var w=-1,P=a.length,k=-1,R=f.length,X=-1,Z=c.length,K=Je(P-R,0),tt=N(K+Z),wt=!v;++w<K;)tt[w]=a[w];for(var Ot=w;++X<Z;)tt[Ot+X]=c[X];for(;++k<R;)(wt||w<P)&&(tt[Ot+f[k]]=a[w++]);return tt}function Li(a,c){var f=-1,v=a.length;for(c||(c=N(v));++f<v;)c[f]=a[f];return c}function zn(a,c,f,v){var w=!f;f||(f={});for(var P=-1,k=c.length;++P<k;){var R=c[P],X=v?v(f[R],a[R],R,f,a):e;X===e&&(X=a[R]),w?or(f,R,X):Qo(f,R,X)}return f}function M2(a,c){return zn(a,Yu(a),c)}function A2(a,c){return zn(a,S0(a),c)}function ec(a,c){return function(f,v){var w=Ht(f)?Rx:JC,P=c?c():{};return w(f,a,kt(v,2),P)}}function so(a){return Gt(function(c,f){var v=-1,w=f.length,P=w>1?f[w-1]:e,k=w>2?f[2]:e;for(P=a.length>3&&typeof P=="function"?(w--,P):e,k&&Si(f[0],f[1],k)&&(P=w<3?e:P,w=1),c=ve(c);++v<w;){var R=f[v];R&&a(c,R,v,P)}return c})}function d0(a,c){return function(f,v){if(f==null)return f;if(!Bi(f))return a(f,v);for(var w=f.length,P=c?w:-1,k=ve(f);(c?P--:++P<w)&&v(k[P],P,k)!==!1;);return f}}function f0(a){return function(c,f,v){for(var w=-1,P=ve(c),k=v(c),R=k.length;R--;){var X=k[a?R:++w];if(f(P[X],X,P)===!1)break}return c}}function k2(a,c,f){var v=c&C,w=ra(a);function P(){var k=this&&this!==ai&&this instanceof P?w:a;return k.apply(v?f:this,arguments)}return P}function g0(a){return function(c){c=le(c);var f=Js(c)?yn(c):e,v=f?f[0]:c.charAt(0),w=f?Rr(f,1).join(""):c.slice(1);return v[a]()+w}}function oo(a){return function(c){return au(dm(um(c).replace(wx,"")),a,"")}}function ra(a){return function(){var c=arguments;switch(c.length){case 0:return new a;case 1:return new a(c[0]);case 2:return new a(c[0],c[1]);case 3:return new a(c[0],c[1],c[2]);case 4:return new a(c[0],c[1],c[2],c[3]);case 5:return new a(c[0],c[1],c[2],c[3],c[4]);case 6:return new a(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new a(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var f=ro(a.prototype),v=a.apply(f,c);return ke(v)?v:f}}function j2(a,c,f){var v=ra(a);function w(){for(var P=arguments.length,k=N(P),R=P,X=ao(w);R--;)k[R]=arguments[R];var Z=P<3&&k[0]!==X&&k[P-1]!==X?[]:Ar(k,X);if(P-=Z.length,P<f)return _0(a,c,ic,w.placeholder,e,k,Z,e,e,f-P);var K=this&&this!==ai&&this instanceof w?v:a;return Ni(K,this,k)}return w}function p0(a){return function(c,f,v){var w=ve(c);if(!Bi(c)){var P=kt(f,3);c=ei(c),f=function(R){return P(w[R],R,w)}}var k=a(c,f,v);return k>-1?w[P?c[k]:k]:e}}function m0(a){return lr(function(c){var f=c.length,v=f,w=an.prototype.thru;for(a&&c.reverse();v--;){var P=c[v];if(typeof P!="function")throw new on(o);if(w&&!k&&oc(P)=="wrapper")var k=new an([],!0)}for(v=k?v:f;++v<f;){P=c[v];var R=oc(P),X=R=="wrapper"?Xu(P):e;X&&Wu(X[0])&&X[1]==(A|T|E|B)&&!X[4].length&&X[9]==1?k=k[oc(X[0])].apply(k,X[3]):k=P.length==1&&Wu(P)?k[R]():k.thru(P)}return function(){var Z=arguments,K=Z[0];if(k&&Z.length==1&&Ht(K))return k.plant(K).value();for(var tt=0,wt=f?c[tt].apply(this,Z):K;++tt<f;)wt=c[tt].call(this,wt);return wt}})}function ic(a,c,f,v,w,P,k,R,X,Z){var K=c&A,tt=c&C,wt=c&b,Ot=c&(T|O),jt=c&Y,Ut=wt?e:ra(a);function Dt(){for(var $t=arguments.length,Qt=N($t),qi=$t;qi--;)Qt[qi]=arguments[qi];if(Ot)var Ti=ao(Dt),Zi=Nx(Qt,Ti);if(v&&(Qt=h0(Qt,v,w,Ot)),P&&(Qt=u0(Qt,P,k,Ot)),$t-=Zi,Ot&&$t<Z){var ze=Ar(Qt,Ti);return _0(a,c,ic,Dt.placeholder,f,Qt,ze,R,X,Z-$t)}var wn=tt?f:this,dr=wt?wn[a]:a;return $t=Qt.length,R?Qt=J2(Qt,R):jt&&$t>1&&Qt.reverse(),K&&X<$t&&(Qt.length=X),this&&this!==ai&&this instanceof Dt&&(dr=Ut||ra(dr)),dr.apply(wn,Qt)}return Dt}function v0(a,c){return function(f,v){return o2(f,a,c(v),{})}}function nc(a,c){return function(f,v){var w;if(f===e&&v===e)return c;if(f!==e&&(w=f),v!==e){if(w===e)return v;typeof f=="string"||typeof v=="string"?(f=Ui(f),v=Ui(v)):(f=i0(f),v=i0(v)),w=a(f,v)}return w}}function Bu(a){return lr(function(c){return c=Oe(c,Wi(kt())),Gt(function(f){var v=this;return a(c,function(w){return Ni(w,v,f)})})})}function rc(a,c){c=c===e?" ":Ui(c);var f=c.length;if(f<2)return f?Au(c,a):c;var v=Au(c,Nl(a/Qs(c)));return Js(c)?Rr(yn(v),0,a).join(""):v.slice(0,a)}function D2(a,c,f,v){var w=c&C,P=ra(a);function k(){for(var R=-1,X=arguments.length,Z=-1,K=v.length,tt=N(K+X),wt=this&&this!==ai&&this instanceof k?P:a;++Z<K;)tt[Z]=v[Z];for(;X--;)tt[Z++]=arguments[++R];return Ni(wt,w?f:this,tt)}return k}function y0(a){return function(c,f,v){return v&&typeof v!="number"&&Si(c,f,v)&&(f=v=e),c=ur(c),f===e?(f=c,c=0):f=ur(f),v=v===e?c<f?1:-1:ur(v),y2(c,f,v,a)}}function sc(a){return function(c,f){return typeof c=="string"&&typeof f=="string"||(c=un(c),f=un(f)),a(c,f)}}function _0(a,c,f,v,w,P,k,R,X,Z){var K=c&T,tt=K?k:e,wt=K?e:k,Ot=K?P:e,jt=K?e:P;c|=K?E:V,c&=~(K?V:E),c&x||(c&=~(C|b));var Ut=[a,c,w,Ot,tt,jt,wt,R,X,Z],Dt=f.apply(e,Ut);return Wu(a)&&k0(Dt,Ut),Dt.placeholder=v,j0(Dt,a,c)}function Fu(a){var c=Ke[a];return function(f,v){if(f=un(f),v=v==null?0:gi(Yt(v),292),v&&jp(f)){var w=(le(f)+"e").split("e"),P=c(w[0]+"e"+(+w[1]+v));return w=(le(P)+"e").split("e"),+(w[0]+"e"+(+w[1]-v))}return c(f)}}var I2=io&&1/Il(new io([,-0]))[1]==pt?function(a){return new io(a)}:od;function b0(a){return function(c){var f=pi(c);return f==j?gu(c):f==lt?Kx(c):Yx(c,a(c))}}function ar(a,c,f,v,w,P,k,R){var X=c&b;if(!X&&typeof a!="function")throw new on(o);var Z=v?v.length:0;if(Z||(c&=~(E|V),v=w=e),k=k===e?k:Je(Yt(k),0),R=R===e?R:Yt(R),Z-=w?w.length:0,c&V){var K=v,tt=w;v=w=e}var wt=X?e:Xu(a),Ot=[a,c,f,v,w,K,tt,P,k,R];if(wt&&Z2(Ot,wt),a=Ot[0],c=Ot[1],f=Ot[2],v=Ot[3],w=Ot[4],R=Ot[9]=Ot[9]===e?X?0:a.length:Je(Ot[9]-Z,0),!R&&c&(T|O)&&(c&=~(T|O)),!c||c==C)var jt=k2(a,c,f);else c==T||c==O?jt=j2(a,c,R):(c==E||c==(C|E))&&!w.length?jt=D2(a,c,f,v):jt=ic.apply(e,Ot);var Ut=wt?t0:k0;return j0(Ut(jt,Ot),a,c)}function w0(a,c,f,v){return a===e||bn(a,eo[f])&&!de.call(v,f)?c:a}function x0(a,c,f,v,w,P){return ke(a)&&ke(c)&&(P.set(c,a),Jl(a,c,e,x0,P),P.delete(c)),a}function R2(a){return aa(a)?e:a}function C0(a,c,f,v,w,P){var k=f&y,R=a.length,X=c.length;if(R!=X&&!(k&&X>R))return!1;var Z=P.get(a),K=P.get(c);if(Z&&K)return Z==c&&K==a;var tt=-1,wt=!0,Ot=f&_?new gs:e;for(P.set(a,c),P.set(c,a);++tt<R;){var jt=a[tt],Ut=c[tt];if(v)var Dt=k?v(Ut,jt,tt,c,a,P):v(jt,Ut,tt,a,c,P);if(Dt!==e){if(Dt)continue;wt=!1;break}if(Ot){if(!lu(c,function($t,Qt){if(!Go(Ot,Qt)&&(jt===$t||w(jt,$t,f,v,P)))return Ot.push(Qt)})){wt=!1;break}}else if(!(jt===Ut||w(jt,Ut,f,v,P))){wt=!1;break}}return P.delete(a),P.delete(c),wt}function L2(a,c,f,v,w,P,k){switch(f){case ne:if(a.byteLength!=c.byteLength||a.byteOffset!=c.byteOffset)return!1;a=a.buffer,c=c.buffer;case Wt:return!(a.byteLength!=c.byteLength||!P(new Vl(a),new Vl(c)));case _t:case ut:case H:return bn(+a,+c);case ee:return a.name==c.name&&a.message==c.message;case dt:case nt:return a==c+"";case j:var R=gu;case lt:var X=v&y;if(R||(R=Il),a.size!=c.size&&!X)return!1;var Z=k.get(a);if(Z)return Z==c;v|=_,k.set(a,c);var K=C0(R(a),R(c),v,w,P,k);return k.delete(a),K;case Mt:if(Jo)return Jo.call(a)==Jo.call(c)}return!1}function B2(a,c,f,v,w,P){var k=f&y,R=zu(a),X=R.length,Z=zu(c),K=Z.length;if(X!=K&&!k)return!1;for(var tt=X;tt--;){var wt=R[tt];if(!(k?wt in c:de.call(c,wt)))return!1}var Ot=P.get(a),jt=P.get(c);if(Ot&&jt)return Ot==c&&jt==a;var Ut=!0;P.set(a,c),P.set(c,a);for(var Dt=k;++tt<X;){wt=R[tt];var $t=a[wt],Qt=c[wt];if(v)var qi=k?v(Qt,$t,wt,c,a,P):v($t,Qt,wt,a,c,P);if(!(qi===e?$t===Qt||w($t,Qt,f,v,P):qi)){Ut=!1;break}Dt||(Dt=wt=="constructor")}if(Ut&&!Dt){var Ti=a.constructor,Zi=c.constructor;Ti!=Zi&&"constructor"in a&&"constructor"in c&&!(typeof Ti=="function"&&Ti instanceof Ti&&typeof Zi=="function"&&Zi instanceof Zi)&&(Ut=!1)}return P.delete(a),P.delete(c),Ut}function lr(a){return Gu(M0(a,e,F0),a+"")}function zu(a){return Yp(a,ei,Yu)}function Vu(a){return Yp(a,Fi,S0)}var Xu=Ul?function(a){return Ul.get(a)}:od;function oc(a){for(var c=a.name+"",f=no[c],v=de.call(no,c)?f.length:0;v--;){var w=f[v],P=w.func;if(P==null||P==a)return w.name}return c}function ao(a){var c=de.call(S,"placeholder")?S:a;return c.placeholder}function kt(){var a=S.iteratee||rd;return a=a===rd?Up:a,arguments.length?a(arguments[0],arguments[1]):a}function ac(a,c){var f=a.__data__;return W2(c)?f[typeof c=="string"?"string":"hash"]:f.map}function Hu(a){for(var c=ei(a),f=c.length;f--;){var v=c[f],w=a[v];c[f]=[v,w,O0(w)]}return c}function vs(a,c){var f=qx(a,c);return Wp(f)?f:e}function F2(a){var c=de.call(a,ds),f=a[ds];try{a[ds]=e;var v=!0}catch{}var w=Fl.call(a);return v&&(c?a[ds]=f:delete a[ds]),w}var Yu=mu?function(a){return a==null?[]:(a=ve(a),Er(mu(a),function(c){return Ap.call(a,c)}))}:ad,S0=mu?function(a){for(var c=[];a;)Mr(c,Yu(a)),a=Xl(a);return c}:ad,pi=Ci;(vu&&pi(new vu(new ArrayBuffer(1)))!=ne||Zo&&pi(new Zo)!=j||yu&&pi(yu.resolve())!=rt||io&&pi(new io)!=lt||$o&&pi(new $o)!=Pt)&&(pi=function(a){var c=Ci(a),f=c==U?a.constructor:e,v=f?ys(f):"";if(v)switch(v){case bC:return ne;case wC:return j;case xC:return rt;case CC:return lt;case SC:return Pt}return c});function z2(a,c,f){for(var v=-1,w=f.length;++v<w;){var P=f[v],k=P.size;switch(P.type){case"drop":a+=k;break;case"dropRight":c-=k;break;case"take":c=gi(c,a+k);break;case"takeRight":a=Je(a,c-k);break}}return{start:a,end:c}}function V2(a){var c=a.match(Uw);return c?c[1].split(Gw):[]}function T0(a,c,f){c=Ir(c,a);for(var v=-1,w=c.length,P=!1;++v<w;){var k=Vn(c[v]);if(!(P=a!=null&&f(a,k)))break;a=a[k]}return P||++v!=w?P:(w=a==null?0:a.length,!!w&&gc(w)&&cr(k,w)&&(Ht(a)||_s(a)))}function X2(a){var c=a.length,f=new a.constructor(c);return c&&typeof a[0]=="string"&&de.call(a,"index")&&(f.index=a.index,f.input=a.input),f}function P0(a){return typeof a.constructor=="function"&&!sa(a)?ro(Xl(a)):{}}function H2(a,c,f){var v=a.constructor;switch(c){case Wt:return Lu(a);case _t:case ut:return new v(+a);case ne:return T2(a,f);case re:case ri:case Ue:case xi:case si:case nr:case Zs:case oi:case Ri:return l0(a,f);case j:return new v;case H:case nt:return new v(a);case dt:return P2(a);case lt:return new v;case Mt:return O2(a)}}function Y2(a,c){var f=c.length;if(!f)return a;var v=f-1;return c[v]=(f>1?"& ":"")+c[v],c=c.join(f>2?", ":" "),a.replace(Ww,`{
/* [wrapped with `+c+`] */
`)}function N2(a){return Ht(a)||_s(a)||!!(kp&&a&&a[kp])}function cr(a,c){var f=typeof a;return c=c??ft,!!c&&(f=="number"||f!="symbol"&&ix.test(a))&&a>-1&&a%1==0&&a<c}function Si(a,c,f){if(!ke(f))return!1;var v=typeof c;return(v=="number"?Bi(f)&&cr(c,f.length):v=="string"&&c in f)?bn(f[c],a):!1}function Nu(a,c){if(Ht(a))return!1;var f=typeof a;return f=="number"||f=="symbol"||f=="boolean"||a==null||Gi(a)?!0:Xw.test(a)||!Vw.test(a)||c!=null&&a in ve(c)}function W2(a){var c=typeof a;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?a!=="__proto__":a===null}function Wu(a){var c=oc(a),f=S[c];if(typeof f!="function"||!(c in Jt.prototype))return!1;if(a===f)return!0;var v=Xu(f);return!!v&&a===v[0]}function U2(a){return!!Op&&Op in a}var G2=Ll?hr:ld;function sa(a){var c=a&&a.constructor,f=typeof c=="function"&&c.prototype||eo;return a===f}function O0(a){return a===a&&!ke(a)}function E0(a,c){return function(f){return f==null?!1:f[a]===c&&(c!==e||a in ve(f))}}function q2(a){var c=dc(a,function(v){return f.size===u&&f.clear(),v}),f=c.cache;return c}function Z2(a,c){var f=a[1],v=c[1],w=f|v,P=w<(C|b|A),k=v==A&&f==T||v==A&&f==B&&a[7].length<=c[8]||v==(A|B)&&c[7].length<=c[8]&&f==T;if(!(P||k))return a;v&C&&(a[2]=c[2],w|=f&C?0:x);var R=c[3];if(R){var X=a[3];a[3]=X?h0(X,R,c[4]):R,a[4]=X?Ar(a[3],d):c[4]}return R=c[5],R&&(X=a[5],a[5]=X?u0(X,R,c[6]):R,a[6]=X?Ar(a[5],d):c[6]),R=c[7],R&&(a[7]=R),v&A&&(a[8]=a[8]==null?c[8]:gi(a[8],c[8])),a[9]==null&&(a[9]=c[9]),a[0]=c[0],a[1]=w,a}function $2(a){var c=[];if(a!=null)for(var f in ve(a))c.push(f);return c}function K2(a){return Fl.call(a)}function M0(a,c,f){return c=Je(c===e?a.length-1:c,0),function(){for(var v=arguments,w=-1,P=Je(v.length-c,0),k=N(P);++w<P;)k[w]=v[c+w];w=-1;for(var R=N(c+1);++w<c;)R[w]=v[w];return R[c]=f(k),Ni(a,this,R)}}function A0(a,c){return c.length<2?a:ms(a,cn(c,0,-1))}function J2(a,c){for(var f=a.length,v=gi(c.length,f),w=Li(a);v--;){var P=c[v];a[v]=cr(P,f)?w[P]:e}return a}function Uu(a,c){if(!(c==="constructor"&&typeof a[c]=="function")&&c!="__proto__")return a[c]}var k0=D0(t0),oa=fC||function(a,c){return ai.setTimeout(a,c)},Gu=D0(w2);function j0(a,c,f){var v=c+"";return Gu(a,Y2(v,Q2(V2(v),f)))}function D0(a){var c=0,f=0;return function(){var v=vC(),w=ot-(v-f);if(f=v,w>0){if(++c>=ct)return arguments[0]}else c=0;return a.apply(e,arguments)}}function lc(a,c){var f=-1,v=a.length,w=v-1;for(c=c===e?v:c;++f<c;){var P=Mu(f,w),k=a[P];a[P]=a[f],a[f]=k}return a.length=c,a}var I0=q2(function(a){var c=[];return a.charCodeAt(0)===46&&c.push(""),a.replace(Hw,function(f,v,w,P){c.push(w?P.replace($w,"$1"):v||f)}),c});function Vn(a){if(typeof a=="string"||Gi(a))return a;var c=a+"";return c=="0"&&1/a==-pt?"-0":c}function ys(a){if(a!=null){try{return Bl.call(a)}catch{}try{return a+""}catch{}}return""}function Q2(a,c){return sn(Zt,function(f){var v="_."+f[0];c&f[1]&&!jl(a,v)&&a.push(v)}),a.sort()}function R0(a){if(a instanceof Jt)return a.clone();var c=new an(a.__wrapped__,a.__chain__);return c.__actions__=Li(a.__actions__),c.__index__=a.__index__,c.__values__=a.__values__,c}function tS(a,c,f){(f?Si(a,c,f):c===e)?c=1:c=Je(Yt(c),0);var v=a==null?0:a.length;if(!v||c<1)return[];for(var w=0,P=0,k=N(Nl(v/c));w<v;)k[P++]=cn(a,w,w+=c);return k}function eS(a){for(var c=-1,f=a==null?0:a.length,v=0,w=[];++c<f;){var P=a[c];P&&(w[v++]=P)}return w}function iS(){var a=arguments.length;if(!a)return[];for(var c=N(a-1),f=arguments[0],v=a;v--;)c[v-1]=arguments[v];return Mr(Ht(f)?Li(f):[f],li(c,1))}var nS=Gt(function(a,c){return Fe(a)?ta(a,li(c,1,Fe,!0)):[]}),rS=Gt(function(a,c){var f=hn(c);return Fe(f)&&(f=e),Fe(a)?ta(a,li(c,1,Fe,!0),kt(f,2)):[]}),sS=Gt(function(a,c){var f=hn(c);return Fe(f)&&(f=e),Fe(a)?ta(a,li(c,1,Fe,!0),e,f):[]});function oS(a,c,f){var v=a==null?0:a.length;return v?(c=f||c===e?1:Yt(c),cn(a,c<0?0:c,v)):[]}function aS(a,c,f){var v=a==null?0:a.length;return v?(c=f||c===e?1:Yt(c),c=v-c,cn(a,0,c<0?0:c)):[]}function lS(a,c){return a&&a.length?tc(a,kt(c,3),!0,!0):[]}function cS(a,c){return a&&a.length?tc(a,kt(c,3),!0):[]}function hS(a,c,f,v){var w=a==null?0:a.length;return w?(f&&typeof f!="number"&&Si(a,c,f)&&(f=0,v=w),i2(a,c,f,v)):[]}function L0(a,c,f){var v=a==null?0:a.length;if(!v)return-1;var w=f==null?0:Yt(f);return w<0&&(w=Je(v+w,0)),Dl(a,kt(c,3),w)}function B0(a,c,f){var v=a==null?0:a.length;if(!v)return-1;var w=v-1;return f!==e&&(w=Yt(f),w=f<0?Je(v+w,0):gi(w,v-1)),Dl(a,kt(c,3),w,!0)}function F0(a){var c=a==null?0:a.length;return c?li(a,1):[]}function uS(a){var c=a==null?0:a.length;return c?li(a,pt):[]}function dS(a,c){var f=a==null?0:a.length;return f?(c=c===e?1:Yt(c),li(a,c)):[]}function fS(a){for(var c=-1,f=a==null?0:a.length,v={};++c<f;){var w=a[c];v[w[0]]=w[1]}return v}function z0(a){return a&&a.length?a[0]:e}function gS(a,c,f){var v=a==null?0:a.length;if(!v)return-1;var w=f==null?0:Yt(f);return w<0&&(w=Je(v+w,0)),Ks(a,c,w)}function pS(a){var c=a==null?0:a.length;return c?cn(a,0,-1):[]}var mS=Gt(function(a){var c=Oe(a,Iu);return c.length&&c[0]===a[0]?Su(c):[]}),vS=Gt(function(a){var c=hn(a),f=Oe(a,Iu);return c===hn(f)?c=e:f.pop(),f.length&&f[0]===a[0]?Su(f,kt(c,2)):[]}),yS=Gt(function(a){var c=hn(a),f=Oe(a,Iu);return c=typeof c=="function"?c:e,c&&f.pop(),f.length&&f[0]===a[0]?Su(f,e,c):[]});function _S(a,c){return a==null?"":pC.call(a,c)}function hn(a){var c=a==null?0:a.length;return c?a[c-1]:e}function bS(a,c,f){var v=a==null?0:a.length;if(!v)return-1;var w=v;return f!==e&&(w=Yt(f),w=w<0?Je(v+w,0):gi(w,v-1)),c===c?Qx(a,c,w):Dl(a,_p,w,!0)}function wS(a,c){return a&&a.length?$p(a,Yt(c)):e}var xS=Gt(V0);function V0(a,c){return a&&a.length&&c&&c.length?Eu(a,c):a}function CS(a,c,f){return a&&a.length&&c&&c.length?Eu(a,c,kt(f,2)):a}function SS(a,c,f){return a&&a.length&&c&&c.length?Eu(a,c,e,f):a}var TS=lr(function(a,c){var f=a==null?0:a.length,v=bu(a,c);return Qp(a,Oe(c,function(w){return cr(w,f)?+w:w}).sort(c0)),v});function PS(a,c){var f=[];if(!(a&&a.length))return f;var v=-1,w=[],P=a.length;for(c=kt(c,3);++v<P;){var k=a[v];c(k,v,a)&&(f.push(k),w.push(v))}return Qp(a,w),f}function qu(a){return a==null?a:_C.call(a)}function OS(a,c,f){var v=a==null?0:a.length;return v?(f&&typeof f!="number"&&Si(a,c,f)?(c=0,f=v):(c=c==null?0:Yt(c),f=f===e?v:Yt(f)),cn(a,c,f)):[]}function ES(a,c){return Ql(a,c)}function MS(a,c,f){return ku(a,c,kt(f,2))}function AS(a,c){var f=a==null?0:a.length;if(f){var v=Ql(a,c);if(v<f&&bn(a[v],c))return v}return-1}function kS(a,c){return Ql(a,c,!0)}function jS(a,c,f){return ku(a,c,kt(f,2),!0)}function DS(a,c){var f=a==null?0:a.length;if(f){var v=Ql(a,c,!0)-1;if(bn(a[v],c))return v}return-1}function IS(a){return a&&a.length?e0(a):[]}function RS(a,c){return a&&a.length?e0(a,kt(c,2)):[]}function LS(a){var c=a==null?0:a.length;return c?cn(a,1,c):[]}function BS(a,c,f){return a&&a.length?(c=f||c===e?1:Yt(c),cn(a,0,c<0?0:c)):[]}function FS(a,c,f){var v=a==null?0:a.length;return v?(c=f||c===e?1:Yt(c),c=v-c,cn(a,c<0?0:c,v)):[]}function zS(a,c){return a&&a.length?tc(a,kt(c,3),!1,!0):[]}function VS(a,c){return a&&a.length?tc(a,kt(c,3)):[]}var XS=Gt(function(a){return Dr(li(a,1,Fe,!0))}),HS=Gt(function(a){var c=hn(a);return Fe(c)&&(c=e),Dr(li(a,1,Fe,!0),kt(c,2))}),YS=Gt(function(a){var c=hn(a);return c=typeof c=="function"?c:e,Dr(li(a,1,Fe,!0),e,c)});function NS(a){return a&&a.length?Dr(a):[]}function WS(a,c){return a&&a.length?Dr(a,kt(c,2)):[]}function US(a,c){return c=typeof c=="function"?c:e,a&&a.length?Dr(a,e,c):[]}function Zu(a){if(!(a&&a.length))return[];var c=0;return a=Er(a,function(f){if(Fe(f))return c=Je(f.length,c),!0}),du(c,function(f){return Oe(a,cu(f))})}function X0(a,c){if(!(a&&a.length))return[];var f=Zu(a);return c==null?f:Oe(f,function(v){return Ni(c,e,v)})}var GS=Gt(function(a,c){return Fe(a)?ta(a,c):[]}),qS=Gt(function(a){return Du(Er(a,Fe))}),ZS=Gt(function(a){var c=hn(a);return Fe(c)&&(c=e),Du(Er(a,Fe),kt(c,2))}),$S=Gt(function(a){var c=hn(a);return c=typeof c=="function"?c:e,Du(Er(a,Fe),e,c)}),KS=Gt(Zu);function JS(a,c){return s0(a||[],c||[],Qo)}function QS(a,c){return s0(a||[],c||[],na)}var tT=Gt(function(a){var c=a.length,f=c>1?a[c-1]:e;return f=typeof f=="function"?(a.pop(),f):e,X0(a,f)});function H0(a){var c=S(a);return c.__chain__=!0,c}function eT(a,c){return c(a),a}function cc(a,c){return c(a)}var iT=lr(function(a){var c=a.length,f=c?a[0]:0,v=this.__wrapped__,w=function(P){return bu(P,a)};return c>1||this.__actions__.length||!(v instanceof Jt)||!cr(f)?this.thru(w):(v=v.slice(f,+f+(c?1:0)),v.__actions__.push({func:cc,args:[w],thisArg:e}),new an(v,this.__chain__).thru(function(P){return c&&!P.length&&P.push(e),P}))});function nT(){return H0(this)}function rT(){return new an(this.value(),this.__chain__)}function sT(){this.__values__===e&&(this.__values__=im(this.value()));var a=this.__index__>=this.__values__.length,c=a?e:this.__values__[this.__index__++];return{done:a,value:c}}function oT(){return this}function aT(a){for(var c,f=this;f instanceof ql;){var v=R0(f);v.__index__=0,v.__values__=e,c?w.__wrapped__=v:c=v;var w=v;f=f.__wrapped__}return w.__wrapped__=a,c}function lT(){var a=this.__wrapped__;if(a instanceof Jt){var c=a;return this.__actions__.length&&(c=new Jt(this)),c=c.reverse(),c.__actions__.push({func:cc,args:[qu],thisArg:e}),new an(c,this.__chain__)}return this.thru(qu)}function cT(){return r0(this.__wrapped__,this.__actions__)}var hT=ec(function(a,c,f){de.call(a,f)?++a[f]:or(a,f,1)});function uT(a,c,f){var v=Ht(a)?vp:e2;return f&&Si(a,c,f)&&(c=e),v(a,kt(c,3))}function dT(a,c){var f=Ht(a)?Er:Xp;return f(a,kt(c,3))}var fT=p0(L0),gT=p0(B0);function pT(a,c){return li(hc(a,c),1)}function mT(a,c){return li(hc(a,c),pt)}function vT(a,c,f){return f=f===e?1:Yt(f),li(hc(a,c),f)}function Y0(a,c){var f=Ht(a)?sn:jr;return f(a,kt(c,3))}function N0(a,c){var f=Ht(a)?Lx:Vp;return f(a,kt(c,3))}var yT=ec(function(a,c,f){de.call(a,f)?a[f].push(c):or(a,f,[c])});function _T(a,c,f,v){a=Bi(a)?a:co(a),f=f&&!v?Yt(f):0;var w=a.length;return f<0&&(f=Je(w+f,0)),pc(a)?f<=w&&a.indexOf(c,f)>-1:!!w&&Ks(a,c,f)>-1}var bT=Gt(function(a,c,f){var v=-1,w=typeof c=="function",P=Bi(a)?N(a.length):[];return jr(a,function(k){P[++v]=w?Ni(c,k,f):ea(k,c,f)}),P}),wT=ec(function(a,c,f){or(a,f,c)});function hc(a,c){var f=Ht(a)?Oe:Gp;return f(a,kt(c,3))}function xT(a,c,f,v){return a==null?[]:(Ht(c)||(c=c==null?[]:[c]),f=v?e:f,Ht(f)||(f=f==null?[]:[f]),Kp(a,c,f))}var CT=ec(function(a,c,f){a[f?0:1].push(c)},function(){return[[],[]]});function ST(a,c,f){var v=Ht(a)?au:wp,w=arguments.length<3;return v(a,kt(c,4),f,w,jr)}function TT(a,c,f){var v=Ht(a)?Bx:wp,w=arguments.length<3;return v(a,kt(c,4),f,w,Vp)}function PT(a,c){var f=Ht(a)?Er:Xp;return f(a,fc(kt(c,3)))}function OT(a){var c=Ht(a)?Lp:_2;return c(a)}function ET(a,c,f){(f?Si(a,c,f):c===e)?c=1:c=Yt(c);var v=Ht(a)?$C:b2;return v(a,c)}function MT(a){var c=Ht(a)?KC:x2;return c(a)}function AT(a){if(a==null)return 0;if(Bi(a))return pc(a)?Qs(a):a.length;var c=pi(a);return c==j||c==lt?a.size:Pu(a).length}function kT(a,c,f){var v=Ht(a)?lu:C2;return f&&Si(a,c,f)&&(c=e),v(a,kt(c,3))}var jT=Gt(function(a,c){if(a==null)return[];var f=c.length;return f>1&&Si(a,c[0],c[1])?c=[]:f>2&&Si(c[0],c[1],c[2])&&(c=[c[0]]),Kp(a,li(c,1),[])}),uc=dC||function(){return ai.Date.now()};function DT(a,c){if(typeof c!="function")throw new on(o);return a=Yt(a),function(){if(--a<1)return c.apply(this,arguments)}}function W0(a,c,f){return c=f?e:c,c=a&&c==null?a.length:c,ar(a,A,e,e,e,e,c)}function U0(a,c){var f;if(typeof c!="function")throw new on(o);return a=Yt(a),function(){return--a>0&&(f=c.apply(this,arguments)),a<=1&&(c=e),f}}var $u=Gt(function(a,c,f){var v=C;if(f.length){var w=Ar(f,ao($u));v|=E}return ar(a,v,c,f,w)}),G0=Gt(function(a,c,f){var v=C|b;if(f.length){var w=Ar(f,ao(G0));v|=E}return ar(c,v,a,f,w)});function q0(a,c,f){c=f?e:c;var v=ar(a,T,e,e,e,e,e,c);return v.placeholder=q0.placeholder,v}function Z0(a,c,f){c=f?e:c;var v=ar(a,O,e,e,e,e,e,c);return v.placeholder=Z0.placeholder,v}function $0(a,c,f){var v,w,P,k,R,X,Z=0,K=!1,tt=!1,wt=!0;if(typeof a!="function")throw new on(o);c=un(c)||0,ke(f)&&(K=!!f.leading,tt="maxWait"in f,P=tt?Je(un(f.maxWait)||0,c):P,wt="trailing"in f?!!f.trailing:wt);function Ot(ze){var wn=v,dr=w;return v=w=e,Z=ze,k=a.apply(dr,wn),k}function jt(ze){return Z=ze,R=oa($t,c),K?Ot(ze):k}function Ut(ze){var wn=ze-X,dr=ze-Z,pm=c-wn;return tt?gi(pm,P-dr):pm}function Dt(ze){var wn=ze-X,dr=ze-Z;return X===e||wn>=c||wn<0||tt&&dr>=P}function $t(){var ze=uc();if(Dt(ze))return Qt(ze);R=oa($t,Ut(ze))}function Qt(ze){return R=e,wt&&v?Ot(ze):(v=w=e,k)}function qi(){R!==e&&o0(R),Z=0,v=X=w=R=e}function Ti(){return R===e?k:Qt(uc())}function Zi(){var ze=uc(),wn=Dt(ze);if(v=arguments,w=this,X=ze,wn){if(R===e)return jt(X);if(tt)return o0(R),R=oa($t,c),Ot(X)}return R===e&&(R=oa($t,c)),k}return Zi.cancel=qi,Zi.flush=Ti,Zi}var IT=Gt(function(a,c){return zp(a,1,c)}),RT=Gt(function(a,c,f){return zp(a,un(c)||0,f)});function LT(a){return ar(a,Y)}function dc(a,c){if(typeof a!="function"||c!=null&&typeof c!="function")throw new on(o);var f=function(){var v=arguments,w=c?c.apply(this,v):v[0],P=f.cache;if(P.has(w))return P.get(w);var k=a.apply(this,v);return f.cache=P.set(w,k)||P,k};return f.cache=new(dc.Cache||sr),f}dc.Cache=sr;function fc(a){if(typeof a!="function")throw new on(o);return function(){var c=arguments;switch(c.length){case 0:return!a.call(this);case 1:return!a.call(this,c[0]);case 2:return!a.call(this,c[0],c[1]);case 3:return!a.call(this,c[0],c[1],c[2])}return!a.apply(this,c)}}function BT(a){return U0(2,a)}var FT=S2(function(a,c){c=c.length==1&&Ht(c[0])?Oe(c[0],Wi(kt())):Oe(li(c,1),Wi(kt()));var f=c.length;return Gt(function(v){for(var w=-1,P=gi(v.length,f);++w<P;)v[w]=c[w].call(this,v[w]);return Ni(a,this,v)})}),Ku=Gt(function(a,c){var f=Ar(c,ao(Ku));return ar(a,E,e,c,f)}),K0=Gt(function(a,c){var f=Ar(c,ao(K0));return ar(a,V,e,c,f)}),zT=lr(function(a,c){return ar(a,B,e,e,e,c)});function VT(a,c){if(typeof a!="function")throw new on(o);return c=c===e?c:Yt(c),Gt(a,c)}function XT(a,c){if(typeof a!="function")throw new on(o);return c=c==null?0:Je(Yt(c),0),Gt(function(f){var v=f[c],w=Rr(f,0,c);return v&&Mr(w,v),Ni(a,this,w)})}function HT(a,c,f){var v=!0,w=!0;if(typeof a!="function")throw new on(o);return ke(f)&&(v="leading"in f?!!f.leading:v,w="trailing"in f?!!f.trailing:w),$0(a,c,{leading:v,maxWait:c,trailing:w})}function YT(a){return W0(a,1)}function NT(a,c){return Ku(Ru(c),a)}function WT(){if(!arguments.length)return[];var a=arguments[0];return Ht(a)?a:[a]}function UT(a){return ln(a,m)}function GT(a,c){return c=typeof c=="function"?c:e,ln(a,m,c)}function qT(a){return ln(a,g|m)}function ZT(a,c){return c=typeof c=="function"?c:e,ln(a,g|m,c)}function $T(a,c){return c==null||Fp(a,c,ei(c))}function bn(a,c){return a===c||a!==a&&c!==c}var KT=sc(Cu),JT=sc(function(a,c){return a>=c}),_s=Np(function(){return arguments}())?Np:function(a){return Ie(a)&&de.call(a,"callee")&&!Ap.call(a,"callee")},Ht=N.isArray,QT=up?Wi(up):a2;function Bi(a){return a!=null&&gc(a.length)&&!hr(a)}function Fe(a){return Ie(a)&&Bi(a)}function t5(a){return a===!0||a===!1||Ie(a)&&Ci(a)==_t}var Lr=gC||ld,e5=dp?Wi(dp):l2;function i5(a){return Ie(a)&&a.nodeType===1&&!aa(a)}function n5(a){if(a==null)return!0;if(Bi(a)&&(Ht(a)||typeof a=="string"||typeof a.splice=="function"||Lr(a)||lo(a)||_s(a)))return!a.length;var c=pi(a);if(c==j||c==lt)return!a.size;if(sa(a))return!Pu(a).length;for(var f in a)if(de.call(a,f))return!1;return!0}function r5(a,c){return ia(a,c)}function s5(a,c,f){f=typeof f=="function"?f:e;var v=f?f(a,c):e;return v===e?ia(a,c,e,f):!!v}function Ju(a){if(!Ie(a))return!1;var c=Ci(a);return c==ee||c==Ct||typeof a.message=="string"&&typeof a.name=="string"&&!aa(a)}function o5(a){return typeof a=="number"&&jp(a)}function hr(a){if(!ke(a))return!1;var c=Ci(a);return c==ge||c==M||c==q||c==bt}function J0(a){return typeof a=="number"&&a==Yt(a)}function gc(a){return typeof a=="number"&&a>-1&&a%1==0&&a<=ft}function ke(a){var c=typeof a;return a!=null&&(c=="object"||c=="function")}function Ie(a){return a!=null&&typeof a=="object"}var Q0=fp?Wi(fp):h2;function a5(a,c){return a===c||Tu(a,c,Hu(c))}function l5(a,c,f){return f=typeof f=="function"?f:e,Tu(a,c,Hu(c),f)}function c5(a){return tm(a)&&a!=+a}function h5(a){if(G2(a))throw new Vt(s);return Wp(a)}function u5(a){return a===null}function d5(a){return a==null}function tm(a){return typeof a=="number"||Ie(a)&&Ci(a)==H}function aa(a){if(!Ie(a)||Ci(a)!=U)return!1;var c=Xl(a);if(c===null)return!0;var f=de.call(c,"constructor")&&c.constructor;return typeof f=="function"&&f instanceof f&&Bl.call(f)==lC}var Qu=gp?Wi(gp):u2;function f5(a){return J0(a)&&a>=-ft&&a<=ft}var em=pp?Wi(pp):d2;function pc(a){return typeof a=="string"||!Ht(a)&&Ie(a)&&Ci(a)==nt}function Gi(a){return typeof a=="symbol"||Ie(a)&&Ci(a)==Mt}var lo=mp?Wi(mp):f2;function g5(a){return a===e}function p5(a){return Ie(a)&&pi(a)==Pt}function m5(a){return Ie(a)&&Ci(a)==Rt}var v5=sc(Ou),y5=sc(function(a,c){return a<=c});function im(a){if(!a)return[];if(Bi(a))return pc(a)?yn(a):Li(a);if(qo&&a[qo])return $x(a[qo]());var c=pi(a),f=c==j?gu:c==lt?Il:co;return f(a)}function ur(a){if(!a)return a===0?a:0;if(a=un(a),a===pt||a===-pt){var c=a<0?-1:1;return c*Xt}return a===a?a:0}function Yt(a){var c=ur(a),f=c%1;return c===c?f?c-f:c:0}function nm(a){return a?ps(Yt(a),0,zt):0}function un(a){if(typeof a=="number")return a;if(Gi(a))return It;if(ke(a)){var c=typeof a.valueOf=="function"?a.valueOf():a;a=ke(c)?c+"":c}if(typeof a!="string")return a===0?a:+a;a=xp(a);var f=Qw.test(a);return f||ex.test(a)?Dx(a.slice(2),f?2:8):Jw.test(a)?It:+a}function rm(a){return zn(a,Fi(a))}function _5(a){return a?ps(Yt(a),-ft,ft):a===0?a:0}function le(a){return a==null?"":Ui(a)}var b5=so(function(a,c){if(sa(c)||Bi(c)){zn(c,ei(c),a);return}for(var f in c)de.call(c,f)&&Qo(a,f,c[f])}),sm=so(function(a,c){zn(c,Fi(c),a)}),mc=so(function(a,c,f,v){zn(c,Fi(c),a,v)}),w5=so(function(a,c,f,v){zn(c,ei(c),a,v)}),x5=lr(bu);function C5(a,c){var f=ro(a);return c==null?f:Bp(f,c)}var S5=Gt(function(a,c){a=ve(a);var f=-1,v=c.length,w=v>2?c[2]:e;for(w&&Si(c[0],c[1],w)&&(v=1);++f<v;)for(var P=c[f],k=Fi(P),R=-1,X=k.length;++R<X;){var Z=k[R],K=a[Z];(K===e||bn(K,eo[Z])&&!de.call(a,Z))&&(a[Z]=P[Z])}return a}),T5=Gt(function(a){return a.push(e,x0),Ni(om,e,a)});function P5(a,c){return yp(a,kt(c,3),Fn)}function O5(a,c){return yp(a,kt(c,3),xu)}function E5(a,c){return a==null?a:wu(a,kt(c,3),Fi)}function M5(a,c){return a==null?a:Hp(a,kt(c,3),Fi)}function A5(a,c){return a&&Fn(a,kt(c,3))}function k5(a,c){return a&&xu(a,kt(c,3))}function j5(a){return a==null?[]:Kl(a,ei(a))}function D5(a){return a==null?[]:Kl(a,Fi(a))}function td(a,c,f){var v=a==null?e:ms(a,c);return v===e?f:v}function I5(a,c){return a!=null&&T0(a,c,n2)}function ed(a,c){return a!=null&&T0(a,c,r2)}var R5=v0(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=Fl.call(c)),a[c]=f},nd(zi)),L5=v0(function(a,c,f){c!=null&&typeof c.toString!="function"&&(c=Fl.call(c)),de.call(a,c)?a[c].push(f):a[c]=[f]},kt),B5=Gt(ea);function ei(a){return Bi(a)?Rp(a):Pu(a)}function Fi(a){return Bi(a)?Rp(a,!0):g2(a)}function F5(a,c){var f={};return c=kt(c,3),Fn(a,function(v,w,P){or(f,c(v,w,P),v)}),f}function z5(a,c){var f={};return c=kt(c,3),Fn(a,function(v,w,P){or(f,w,c(v,w,P))}),f}var V5=so(function(a,c,f){Jl(a,c,f)}),om=so(function(a,c,f,v){Jl(a,c,f,v)}),X5=lr(function(a,c){var f={};if(a==null)return f;var v=!1;c=Oe(c,function(P){return P=Ir(P,a),v||(v=P.length>1),P}),zn(a,Vu(a),f),v&&(f=ln(f,g|p|m,R2));for(var w=c.length;w--;)ju(f,c[w]);return f});function H5(a,c){return am(a,fc(kt(c)))}var Y5=lr(function(a,c){return a==null?{}:m2(a,c)});function am(a,c){if(a==null)return{};var f=Oe(Vu(a),function(v){return[v]});return c=kt(c),Jp(a,f,function(v,w){return c(v,w[0])})}function N5(a,c,f){c=Ir(c,a);var v=-1,w=c.length;for(w||(w=1,a=e);++v<w;){var P=a==null?e:a[Vn(c[v])];P===e&&(v=w,P=f),a=hr(P)?P.call(a):P}return a}function W5(a,c,f){return a==null?a:na(a,c,f)}function U5(a,c,f,v){return v=typeof v=="function"?v:e,a==null?a:na(a,c,f,v)}var lm=b0(ei),cm=b0(Fi);function G5(a,c,f){var v=Ht(a),w=v||Lr(a)||lo(a);if(c=kt(c,4),f==null){var P=a&&a.constructor;w?f=v?new P:[]:ke(a)?f=hr(P)?ro(Xl(a)):{}:f={}}return(w?sn:Fn)(a,function(k,R,X){return c(f,k,R,X)}),f}function q5(a,c){return a==null?!0:ju(a,c)}function Z5(a,c,f){return a==null?a:n0(a,c,Ru(f))}function $5(a,c,f,v){return v=typeof v=="function"?v:e,a==null?a:n0(a,c,Ru(f),v)}function co(a){return a==null?[]:fu(a,ei(a))}function K5(a){return a==null?[]:fu(a,Fi(a))}function J5(a,c,f){return f===e&&(f=c,c=e),f!==e&&(f=un(f),f=f===f?f:0),c!==e&&(c=un(c),c=c===c?c:0),ps(un(a),c,f)}function Q5(a,c,f){return c=ur(c),f===e?(f=c,c=0):f=ur(f),a=un(a),s2(a,c,f)}function tP(a,c,f){if(f&&typeof f!="boolean"&&Si(a,c,f)&&(c=f=e),f===e&&(typeof c=="boolean"?(f=c,c=e):typeof a=="boolean"&&(f=a,a=e)),a===e&&c===e?(a=0,c=1):(a=ur(a),c===e?(c=a,a=0):c=ur(c)),a>c){var v=a;a=c,c=v}if(f||a%1||c%1){var w=Dp();return gi(a+w*(c-a+jx("1e-"+((w+"").length-1))),c)}return Mu(a,c)}var eP=oo(function(a,c,f){return c=c.toLowerCase(),a+(f?hm(c):c)});function hm(a){return id(le(a).toLowerCase())}function um(a){return a=le(a),a&&a.replace(nx,Wx).replace(xx,"")}function iP(a,c,f){a=le(a),c=Ui(c);var v=a.length;f=f===e?v:ps(Yt(f),0,v);var w=f;return f-=c.length,f>=0&&a.slice(f,w)==c}function nP(a){return a=le(a),a&&Bw.test(a)?a.replace(Hg,Ux):a}function rP(a){return a=le(a),a&&Yw.test(a)?a.replace(Kh,"\\$&"):a}var sP=oo(function(a,c,f){return a+(f?"-":"")+c.toLowerCase()}),oP=oo(function(a,c,f){return a+(f?" ":"")+c.toLowerCase()}),aP=g0("toLowerCase");function lP(a,c,f){a=le(a),c=Yt(c);var v=c?Qs(a):0;if(!c||v>=c)return a;var w=(c-v)/2;return rc(Wl(w),f)+a+rc(Nl(w),f)}function cP(a,c,f){a=le(a),c=Yt(c);var v=c?Qs(a):0;return c&&v<c?a+rc(c-v,f):a}function hP(a,c,f){a=le(a),c=Yt(c);var v=c?Qs(a):0;return c&&v<c?rc(c-v,f)+a:a}function uP(a,c,f){return f||c==null?c=0:c&&(c=+c),yC(le(a).replace(Jh,""),c||0)}function dP(a,c,f){return(f?Si(a,c,f):c===e)?c=1:c=Yt(c),Au(le(a),c)}function fP(){var a=arguments,c=le(a[0]);return a.length<3?c:c.replace(a[1],a[2])}var gP=oo(function(a,c,f){return a+(f?"_":"")+c.toLowerCase()});function pP(a,c,f){return f&&typeof f!="number"&&Si(a,c,f)&&(c=f=e),f=f===e?zt:f>>>0,f?(a=le(a),a&&(typeof c=="string"||c!=null&&!Qu(c))&&(c=Ui(c),!c&&Js(a))?Rr(yn(a),0,f):a.split(c,f)):[]}var mP=oo(function(a,c,f){return a+(f?" ":"")+id(c)});function vP(a,c,f){return a=le(a),f=f==null?0:ps(Yt(f),0,a.length),c=Ui(c),a.slice(f,f+c.length)==c}function yP(a,c,f){var v=S.templateSettings;f&&Si(a,c,f)&&(c=e),a=le(a),c=mc({},c,v,w0);var w=mc({},c.imports,v.imports,w0),P=ei(w),k=fu(w,P),R,X,Z=0,K=c.interpolate||Ml,tt="__p += '",wt=pu((c.escape||Ml).source+"|"+K.source+"|"+(K===Yg?Kw:Ml).source+"|"+(c.evaluate||Ml).source+"|$","g"),Ot="//# sourceURL="+(de.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Ox+"]")+`
`;a.replace(wt,function(Dt,$t,Qt,qi,Ti,Zi){return Qt||(Qt=qi),tt+=a.slice(Z,Zi).replace(rx,Gx),$t&&(R=!0,tt+=`' +
__e(`+$t+`) +
'`),Ti&&(X=!0,tt+=`';
`+Ti+`;
__p += '`),Qt&&(tt+=`' +
((__t = (`+Qt+`)) == null ? '' : __t) +
'`),Z=Zi+Dt.length,Dt}),tt+=`';
`;var jt=de.call(c,"variable")&&c.variable;if(!jt)tt=`with (obj) {
`+tt+`
}
`;else if(Zw.test(jt))throw new Vt(l);tt=(X?tt.replace(El,""):tt).replace(Iw,"$1").replace(Rw,"$1;"),tt="function("+(jt||"obj")+`) {
`+(jt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(R?", __e = _.escape":"")+(X?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+tt+`return __p
}`;var Ut=fm(function(){return ae(P,Ot+"return "+tt).apply(e,k)});if(Ut.source=tt,Ju(Ut))throw Ut;return Ut}function _P(a){return le(a).toLowerCase()}function bP(a){return le(a).toUpperCase()}function wP(a,c,f){if(a=le(a),a&&(f||c===e))return xp(a);if(!a||!(c=Ui(c)))return a;var v=yn(a),w=yn(c),P=Cp(v,w),k=Sp(v,w)+1;return Rr(v,P,k).join("")}function xP(a,c,f){if(a=le(a),a&&(f||c===e))return a.slice(0,Pp(a)+1);if(!a||!(c=Ui(c)))return a;var v=yn(a),w=Sp(v,yn(c))+1;return Rr(v,0,w).join("")}function CP(a,c,f){if(a=le(a),a&&(f||c===e))return a.replace(Jh,"");if(!a||!(c=Ui(c)))return a;var v=yn(a),w=Cp(v,yn(c));return Rr(v,w).join("")}function SP(a,c){var f=J,v=st;if(ke(c)){var w="separator"in c?c.separator:w;f="length"in c?Yt(c.length):f,v="omission"in c?Ui(c.omission):v}a=le(a);var P=a.length;if(Js(a)){var k=yn(a);P=k.length}if(f>=P)return a;var R=f-Qs(v);if(R<1)return v;var X=k?Rr(k,0,R).join(""):a.slice(0,R);if(w===e)return X+v;if(k&&(R+=X.length-R),Qu(w)){if(a.slice(R).search(w)){var Z,K=X;for(w.global||(w=pu(w.source,le(Ng.exec(w))+"g")),w.lastIndex=0;Z=w.exec(K);)var tt=Z.index;X=X.slice(0,tt===e?R:tt)}}else if(a.indexOf(Ui(w),R)!=R){var wt=X.lastIndexOf(w);wt>-1&&(X=X.slice(0,wt))}return X+v}function TP(a){return a=le(a),a&&Lw.test(a)?a.replace(Xg,tC):a}var PP=oo(function(a,c,f){return a+(f?" ":"")+c.toUpperCase()}),id=g0("toUpperCase");function dm(a,c,f){return a=le(a),c=f?e:c,c===e?Zx(a)?nC(a):Vx(a):a.match(c)||[]}var fm=Gt(function(a,c){try{return Ni(a,e,c)}catch(f){return Ju(f)?f:new Vt(f)}}),OP=lr(function(a,c){return sn(c,function(f){f=Vn(f),or(a,f,$u(a[f],a))}),a});function EP(a){var c=a==null?0:a.length,f=kt();return a=c?Oe(a,function(v){if(typeof v[1]!="function")throw new on(o);return[f(v[0]),v[1]]}):[],Gt(function(v){for(var w=-1;++w<c;){var P=a[w];if(Ni(P[0],this,v))return Ni(P[1],this,v)}})}function MP(a){return t2(ln(a,g))}function nd(a){return function(){return a}}function AP(a,c){return a==null||a!==a?c:a}var kP=m0(),jP=m0(!0);function zi(a){return a}function rd(a){return Up(typeof a=="function"?a:ln(a,g))}function DP(a){return qp(ln(a,g))}function IP(a,c){return Zp(a,ln(c,g))}var RP=Gt(function(a,c){return function(f){return ea(f,a,c)}}),LP=Gt(function(a,c){return function(f){return ea(a,f,c)}});function sd(a,c,f){var v=ei(c),w=Kl(c,v);f==null&&!(ke(c)&&(w.length||!v.length))&&(f=c,c=a,a=this,w=Kl(c,ei(c)));var P=!(ke(f)&&"chain"in f)||!!f.chain,k=hr(a);return sn(w,function(R){var X=c[R];a[R]=X,k&&(a.prototype[R]=function(){var Z=this.__chain__;if(P||Z){var K=a(this.__wrapped__),tt=K.__actions__=Li(this.__actions__);return tt.push({func:X,args:arguments,thisArg:a}),K.__chain__=Z,K}return X.apply(a,Mr([this.value()],arguments))})}),a}function BP(){return ai._===this&&(ai._=cC),this}function od(){}function FP(a){return a=Yt(a),Gt(function(c){return $p(c,a)})}var zP=Bu(Oe),VP=Bu(vp),XP=Bu(lu);function gm(a){return Nu(a)?cu(Vn(a)):v2(a)}function HP(a){return function(c){return a==null?e:ms(a,c)}}var YP=y0(),NP=y0(!0);function ad(){return[]}function ld(){return!1}function WP(){return{}}function UP(){return""}function GP(){return!0}function qP(a,c){if(a=Yt(a),a<1||a>ft)return[];var f=zt,v=gi(a,zt);c=kt(c),a-=zt;for(var w=du(v,c);++f<a;)c(f);return w}function ZP(a){return Ht(a)?Oe(a,Vn):Gi(a)?[a]:Li(I0(le(a)))}function $P(a){var c=++aC;return le(a)+c}var KP=nc(function(a,c){return a+c},0),JP=Fu("ceil"),QP=nc(function(a,c){return a/c},1),tO=Fu("floor");function eO(a){return a&&a.length?$l(a,zi,Cu):e}function iO(a,c){return a&&a.length?$l(a,kt(c,2),Cu):e}function nO(a){return bp(a,zi)}function rO(a,c){return bp(a,kt(c,2))}function sO(a){return a&&a.length?$l(a,zi,Ou):e}function oO(a,c){return a&&a.length?$l(a,kt(c,2),Ou):e}var aO=nc(function(a,c){return a*c},1),lO=Fu("round"),cO=nc(function(a,c){return a-c},0);function hO(a){return a&&a.length?uu(a,zi):0}function uO(a,c){return a&&a.length?uu(a,kt(c,2)):0}return S.after=DT,S.ary=W0,S.assign=b5,S.assignIn=sm,S.assignInWith=mc,S.assignWith=w5,S.at=x5,S.before=U0,S.bind=$u,S.bindAll=OP,S.bindKey=G0,S.castArray=WT,S.chain=H0,S.chunk=tS,S.compact=eS,S.concat=iS,S.cond=EP,S.conforms=MP,S.constant=nd,S.countBy=hT,S.create=C5,S.curry=q0,S.curryRight=Z0,S.debounce=$0,S.defaults=S5,S.defaultsDeep=T5,S.defer=IT,S.delay=RT,S.difference=nS,S.differenceBy=rS,S.differenceWith=sS,S.drop=oS,S.dropRight=aS,S.dropRightWhile=lS,S.dropWhile=cS,S.fill=hS,S.filter=dT,S.flatMap=pT,S.flatMapDeep=mT,S.flatMapDepth=vT,S.flatten=F0,S.flattenDeep=uS,S.flattenDepth=dS,S.flip=LT,S.flow=kP,S.flowRight=jP,S.fromPairs=fS,S.functions=j5,S.functionsIn=D5,S.groupBy=yT,S.initial=pS,S.intersection=mS,S.intersectionBy=vS,S.intersectionWith=yS,S.invert=R5,S.invertBy=L5,S.invokeMap=bT,S.iteratee=rd,S.keyBy=wT,S.keys=ei,S.keysIn=Fi,S.map=hc,S.mapKeys=F5,S.mapValues=z5,S.matches=DP,S.matchesProperty=IP,S.memoize=dc,S.merge=V5,S.mergeWith=om,S.method=RP,S.methodOf=LP,S.mixin=sd,S.negate=fc,S.nthArg=FP,S.omit=X5,S.omitBy=H5,S.once=BT,S.orderBy=xT,S.over=zP,S.overArgs=FT,S.overEvery=VP,S.overSome=XP,S.partial=Ku,S.partialRight=K0,S.partition=CT,S.pick=Y5,S.pickBy=am,S.property=gm,S.propertyOf=HP,S.pull=xS,S.pullAll=V0,S.pullAllBy=CS,S.pullAllWith=SS,S.pullAt=TS,S.range=YP,S.rangeRight=NP,S.rearg=zT,S.reject=PT,S.remove=PS,S.rest=VT,S.reverse=qu,S.sampleSize=ET,S.set=W5,S.setWith=U5,S.shuffle=MT,S.slice=OS,S.sortBy=jT,S.sortedUniq=IS,S.sortedUniqBy=RS,S.split=pP,S.spread=XT,S.tail=LS,S.take=BS,S.takeRight=FS,S.takeRightWhile=zS,S.takeWhile=VS,S.tap=eT,S.throttle=HT,S.thru=cc,S.toArray=im,S.toPairs=lm,S.toPairsIn=cm,S.toPath=ZP,S.toPlainObject=rm,S.transform=G5,S.unary=YT,S.union=XS,S.unionBy=HS,S.unionWith=YS,S.uniq=NS,S.uniqBy=WS,S.uniqWith=US,S.unset=q5,S.unzip=Zu,S.unzipWith=X0,S.update=Z5,S.updateWith=$5,S.values=co,S.valuesIn=K5,S.without=GS,S.words=dm,S.wrap=NT,S.xor=qS,S.xorBy=ZS,S.xorWith=$S,S.zip=KS,S.zipObject=JS,S.zipObjectDeep=QS,S.zipWith=tT,S.entries=lm,S.entriesIn=cm,S.extend=sm,S.extendWith=mc,sd(S,S),S.add=KP,S.attempt=fm,S.camelCase=eP,S.capitalize=hm,S.ceil=JP,S.clamp=J5,S.clone=UT,S.cloneDeep=qT,S.cloneDeepWith=ZT,S.cloneWith=GT,S.conformsTo=$T,S.deburr=um,S.defaultTo=AP,S.divide=QP,S.endsWith=iP,S.eq=bn,S.escape=nP,S.escapeRegExp=rP,S.every=uT,S.find=fT,S.findIndex=L0,S.findKey=P5,S.findLast=gT,S.findLastIndex=B0,S.findLastKey=O5,S.floor=tO,S.forEach=Y0,S.forEachRight=N0,S.forIn=E5,S.forInRight=M5,S.forOwn=A5,S.forOwnRight=k5,S.get=td,S.gt=KT,S.gte=JT,S.has=I5,S.hasIn=ed,S.head=z0,S.identity=zi,S.includes=_T,S.indexOf=gS,S.inRange=Q5,S.invoke=B5,S.isArguments=_s,S.isArray=Ht,S.isArrayBuffer=QT,S.isArrayLike=Bi,S.isArrayLikeObject=Fe,S.isBoolean=t5,S.isBuffer=Lr,S.isDate=e5,S.isElement=i5,S.isEmpty=n5,S.isEqual=r5,S.isEqualWith=s5,S.isError=Ju,S.isFinite=o5,S.isFunction=hr,S.isInteger=J0,S.isLength=gc,S.isMap=Q0,S.isMatch=a5,S.isMatchWith=l5,S.isNaN=c5,S.isNative=h5,S.isNil=d5,S.isNull=u5,S.isNumber=tm,S.isObject=ke,S.isObjectLike=Ie,S.isPlainObject=aa,S.isRegExp=Qu,S.isSafeInteger=f5,S.isSet=em,S.isString=pc,S.isSymbol=Gi,S.isTypedArray=lo,S.isUndefined=g5,S.isWeakMap=p5,S.isWeakSet=m5,S.join=_S,S.kebabCase=sP,S.last=hn,S.lastIndexOf=bS,S.lowerCase=oP,S.lowerFirst=aP,S.lt=v5,S.lte=y5,S.max=eO,S.maxBy=iO,S.mean=nO,S.meanBy=rO,S.min=sO,S.minBy=oO,S.stubArray=ad,S.stubFalse=ld,S.stubObject=WP,S.stubString=UP,S.stubTrue=GP,S.multiply=aO,S.nth=wS,S.noConflict=BP,S.noop=od,S.now=uc,S.pad=lP,S.padEnd=cP,S.padStart=hP,S.parseInt=uP,S.random=tP,S.reduce=ST,S.reduceRight=TT,S.repeat=dP,S.replace=fP,S.result=N5,S.round=lO,S.runInContext=z,S.sample=OT,S.size=AT,S.snakeCase=gP,S.some=kT,S.sortedIndex=ES,S.sortedIndexBy=MS,S.sortedIndexOf=AS,S.sortedLastIndex=kS,S.sortedLastIndexBy=jS,S.sortedLastIndexOf=DS,S.startCase=mP,S.startsWith=vP,S.subtract=cO,S.sum=hO,S.sumBy=uO,S.template=yP,S.times=qP,S.toFinite=ur,S.toInteger=Yt,S.toLength=nm,S.toLower=_P,S.toNumber=un,S.toSafeInteger=_5,S.toString=le,S.toUpper=bP,S.trim=wP,S.trimEnd=xP,S.trimStart=CP,S.truncate=SP,S.unescape=TP,S.uniqueId=$P,S.upperCase=PP,S.upperFirst=id,S.each=Y0,S.eachRight=N0,S.first=z0,sd(S,function(){var a={};return Fn(S,function(c,f){de.call(S.prototype,f)||(a[f]=c)}),a}(),{chain:!1}),S.VERSION=i,sn(["bind","bindKey","curry","curryRight","partial","partialRight"],function(a){S[a].placeholder=S}),sn(["drop","take"],function(a,c){Jt.prototype[a]=function(f){f=f===e?1:Je(Yt(f),0);var v=this.__filtered__&&!c?new Jt(this):this.clone();return v.__filtered__?v.__takeCount__=gi(f,v.__takeCount__):v.__views__.push({size:gi(f,zt),type:a+(v.__dir__<0?"Right":"")}),v},Jt.prototype[a+"Right"]=function(f){return this.reverse()[a](f).reverse()}}),sn(["filter","map","takeWhile"],function(a,c){var f=c+1,v=f==yt||f==at;Jt.prototype[a]=function(w){var P=this.clone();return P.__iteratees__.push({iteratee:kt(w,3),type:f}),P.__filtered__=P.__filtered__||v,P}}),sn(["head","last"],function(a,c){var f="take"+(c?"Right":"");Jt.prototype[a]=function(){return this[f](1).value()[0]}}),sn(["initial","tail"],function(a,c){var f="drop"+(c?"":"Right");Jt.prototype[a]=function(){return this.__filtered__?new Jt(this):this[f](1)}}),Jt.prototype.compact=function(){return this.filter(zi)},Jt.prototype.find=function(a){return this.filter(a).head()},Jt.prototype.findLast=function(a){return this.reverse().find(a)},Jt.prototype.invokeMap=Gt(function(a,c){return typeof a=="function"?new Jt(this):this.map(function(f){return ea(f,a,c)})}),Jt.prototype.reject=function(a){return this.filter(fc(kt(a)))},Jt.prototype.slice=function(a,c){a=Yt(a);var f=this;return f.__filtered__&&(a>0||c<0)?new Jt(f):(a<0?f=f.takeRight(-a):a&&(f=f.drop(a)),c!==e&&(c=Yt(c),f=c<0?f.dropRight(-c):f.take(c-a)),f)},Jt.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},Jt.prototype.toArray=function(){return this.take(zt)},Fn(Jt.prototype,function(a,c){var f=/^(?:filter|find|map|reject)|While$/.test(c),v=/^(?:head|last)$/.test(c),w=S[v?"take"+(c=="last"?"Right":""):c],P=v||/^find/.test(c);w&&(S.prototype[c]=function(){var k=this.__wrapped__,R=v?[1]:arguments,X=k instanceof Jt,Z=R[0],K=X||Ht(k),tt=function($t){var Qt=w.apply(S,Mr([$t],R));return v&&wt?Qt[0]:Qt};K&&f&&typeof Z=="function"&&Z.length!=1&&(X=K=!1);var wt=this.__chain__,Ot=!!this.__actions__.length,jt=P&&!wt,Ut=X&&!Ot;if(!P&&K){k=Ut?k:new Jt(this);var Dt=a.apply(k,R);return Dt.__actions__.push({func:cc,args:[tt],thisArg:e}),new an(Dt,wt)}return jt&&Ut?a.apply(this,R):(Dt=this.thru(tt),jt?v?Dt.value()[0]:Dt.value():Dt)})}),sn(["pop","push","shift","sort","splice","unshift"],function(a){var c=Rl[a],f=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",v=/^(?:pop|shift)$/.test(a);S.prototype[a]=function(){var w=arguments;if(v&&!this.__chain__){var P=this.value();return c.apply(Ht(P)?P:[],w)}return this[f](function(k){return c.apply(Ht(k)?k:[],w)})}}),Fn(Jt.prototype,function(a,c){var f=S[c];if(f){var v=f.name+"";de.call(no,v)||(no[v]=[]),no[v].push({name:c,func:f})}}),no[ic(e,b).name]=[{name:"wrapper",func:e}],Jt.prototype.clone=TC,Jt.prototype.reverse=PC,Jt.prototype.value=OC,S.prototype.at=iT,S.prototype.chain=nT,S.prototype.commit=rT,S.prototype.next=sT,S.prototype.plant=aT,S.prototype.reverse=lT,S.prototype.toJSON=S.prototype.valueOf=S.prototype.value=cT,S.prototype.first=S.prototype.head,qo&&(S.prototype[qo]=oT),S},to=rC();us?((us.exports=to)._=to,ru._=to):ai._=to}).call(ha)})(fh,fh.exports);var Re=fh.exports;const{getLocalPoint:M4,wrapWithFireEvent:A4}=Ns,k4=(n,t,e,i)=>{var r,s,o,l;const h=M4(t,t.originX,t.originY,e,i);if(t.originX===ul||t.originX===l4&&h.x<0||t.originX===a4&&h.x>0){const{target:u}=t,d=u.strokeWidth/(u.strokeUniform?u.scaleX:1),g=Mb(t)?2:1,p=u.width,m=Math.ceil(Math.abs(h.x*g/u.scaleX)-d);if(u.isType("EditorClippingText")&&u.clippingPath instanceof we){const{originX:y,originY:_,scaledWidth:C,scaledHeight:b}=u._getOrigin();u.isChangeWidth=!0,u.set("width",Math.max(m,0)),u.isChangeWidth=!1;const{scaleX:x,scaleY:T}=u._calcImageScale(y,_,C,b);return(r=u.clippingPath)==null||r.set("scaleX",x),(s=u.clippingPath)==null||s.set("scaleY",T),(o=u.clipPath)==null||o.set("scaleX",x),(l=u.clipPath)==null||l.set("scaleY",T),u._updateImageViewportScale(C,b),u._updateImageViewportPositionScale(),p!==u.width}return u.set("width",Math.max(m,0)),p!==u.width}return!1},Dv=A4("resizing",Tl(k4)),{Control:Cn}=o4,{rotationStyleHandler:j4,scaleOrSkewActionName:jc}=Ns,D4=`<svg width="24px" height="24px" viewBox="0 0 24 24" version="1.1" xmlns="http://www.w3.org/2000/svg"
xmlns:xlink="http://www.w3.org/1999/xlink">
<title>Icon / Ball Control / Ball Control-Spin</title>
<desc>Created with Sketch.</desc>
<g id="Icon-/-Ball-Control-/-Ball-Control-Spin" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
  <circle id="椭圆形" stroke-opacity="0.15" stroke="#000000" fill="#FFFFFF" cx="12" cy="12" r="11.5">
  </circle>
  <g id="Icon-/-cursor-/-Spin" fill="#1B1E24">
    <path
      d="M10.6666667,6 L10.6666667,10 L9.06333333,8.39666667 C8.014,9.252 7.33333333,10.5433333 7.33333333,12 C7.33333333,14.5733333 9.42733333,16.6666667 12,16.6666667 L12,16.6666667 L12,18 C8.686,18 6,15.314 6,12 C6,10.1726667 6.81933333,8.54133333 8.10866667,7.442 L8.10866667,7.442 L6.66666667,6 L10.6666667,6 Z M12,6 C15.314,6 18,8.686 18,12 C18,13.8273333 17.1806667,15.4586667 15.8913333,16.558 L15.8913333,16.558 L17.3333333,18 L13.3333333,18 L13.3333333,14 L14.9366667,15.6033333 C15.986,14.748 16.6666667,13.4566667 16.6666667,12 C16.6666667,9.42666667 14.5726667,7.33333333 12,7.33333333 L12,7.33333333 Z"
      id="合并形状"></path>
  </g>
</g>
</svg>`,I4=`data:image/svg+xml;charset=utf8,${encodeURIComponent(D4)}`;function Db(n,t,e,i,r,s,o){o!==void 0&&(n.save(),n.translate(t,e),n.rotate($.degreesToRadians(o)),n.drawImage(i,-r/2,-s/2,r,s),n.restore())}const R4=document.createElement("img");document.createElement("img");const Ib=document.createElement("img");Ib.src=I4;function Iv(n,t,e,i,r){Db(n,t,e,R4,20,25,r.angle)}function L4(n,t,e,i,r){Db(n,t,e,Ib,20,20,r.angle)}function Rb(n,t,e,i,r,s){n.beginPath(),n.moveTo(t+s,e),n.arcTo(t+i,e,t+i,e+r,s),n.arcTo(t+i,e+r,t,e+r,s),n.arcTo(t,e+r,t,e,s),n.arcTo(t,e,t+i,e,s),n.closePath()}function Rv(n,t,e,i,r){n.save(),n.translate(t,e),n.rotate($.degreesToRadians(r.angle)),Rb(n,-2,-10,4,18,2),n.lineWidth=4,n.stroke(),n.fillStyle="#ffffff",n.fill(),n.restore()}function Lv(n,t,e,i,r){n.save(),n.translate(t,e),n.rotate($.degreesToRadians(r.angle)),Rb(n,-10,-2,18,4,2),n.lineWidth=4,n.stroke(),n.fillStyle="#ffffff",n.fill(),n.restore()}const Lb=()=>({ml:new Cn({x:-.5,y:0,offsetX:-1,cursorStyleHandler:So,actionHandler:kv,getActionName:jc,render:Rv}),mr:new Cn({x:.5,y:0,offsetX:1,cursorStyleHandler:So,actionHandler:kv,getActionName:jc,render:Rv}),mb:new Cn({x:0,y:.5,offsetY:1,cursorStyleHandler:So,actionHandler:jv,getActionName:jc,render:Lv}),mt:new Cn({x:0,y:-.5,offsetY:-1,cursorStyleHandler:So,actionHandler:jv,getActionName:jc,render:Lv}),tl:new Cn({x:-.5,y:-.5,cursorStyleHandler:Ra,actionHandler:kc}),tr:new Cn({x:.5,y:-.5,cursorStyleHandler:Ra,actionHandler:kc}),bl:new Cn({x:-.5,y:.5,cursorStyleHandler:Ra,actionHandler:kc}),br:new Cn({x:.5,y:.5,cursorStyleHandler:Ra,actionHandler:kc}),mtr:new Cn({x:0,y:-.5,actionHandler:v4,cursorStyleHandler:j4,offsetY:-30,withConnection:!0,actionName:"rotate",render:L4,cursorStyle:"none"})}),B4=()=>({mr:new Cn({x:.5,y:0,offsetX:1,actionHandler:Dv,cursorStyleHandler:So,actionName:"resizing",render:Iv}),ml:new Cn({x:-.5,y:0,offsetX:-1,actionHandler:Dv,cursorStyleHandler:So,actionName:"resizing",render:Iv})}),Bb=()=>({...Lb(),...B4()});pe.ownDefaults.controls={...pe.prototype.controls||{},...Lb()};Vi&&(Vi.ownDefaults.controls={...Vi.prototype.controls||{},...Bb()},Vi.ownDefaults.controls.mt.setVisibility(!1),Vi.ownDefaults.controls.mb.setVisibility(!1));function Pl(n,t){return t.forEach(e=>{Object.getOwnPropertyNames(e.prototype).forEach(i=>{i!=="constructor"&&Object.defineProperty(n.prototype,i,Object.getOwnPropertyDescriptor(e.prototype,i)||Object.create(null))})}),n}class F4 extends as(hi){shouldActivate(t,e,i,{tl:r,tr:s,br:o,bl:l}){var h,u;const d=e.clipParent||e.clipChild;return(((h=e.canvas)==null?void 0:h.getActiveObject())===e||((u=e.canvas)==null?void 0:u.getActiveObject())===d||e===d)&&e.isControlVisible(t)&&Ce.isPointInPolygon(i,[r,s,o,l])}}Pl(hi,[F4]);const Rd="stateProperties";function Bv(n,t,e){const i={};e&&e.forEach(function(r){i[r]=n[r]}),Re.extend(n[t],i,!0)}function Tf(n,t,e){if(n===t)return!0;if(Array.isArray(n)){if(!Array.isArray(t)||n.length!==t.length)return!1;for(var i=0,r=n.length;i<r;i++)if(!Tf(n[i],t[i]))return!1;return!0}else if(n&&typeof n=="object"){var s=Object.keys(n),o;if(!t||typeof t!="object"||!e&&s.length!==Object.keys(t).length)return!1;for(var i=0,r=s.length;i<r;i++)if(o=s[i],!(o==="canvas"||o==="group")&&!Tf(n[o],t[o]))return!1;return!0}}let z4=class extends as(pe){hasStateChanged(n){n=n||Rd;const t="_"+n;return Object.keys(this[t]).length<this[n].length?!0:!Tf(this[t],this,!0)}getSavedState(n){const t=n&&n.propertySet||"stateProperties";return Re.cloneDeep(this["_"+t])}saveState(n){const t=n&&n.propertySet||Rd,e="_"+t;if(!this[e])return this.setupState(n);Bv(this,e,this[t]),n&&n.stateProperties&&Bv(this,e,n.stateProperties);const i="_"+(n&&n.propertySet||"stateProperties"),r=this.toDatalessObject().objects;return this[i].objects=r,this}setupState(n){n=n||{};const t=n.propertySet||Rd;return n.propertySet=t,this["_"+t]={},this.saveState(n),this}};Pl(pe,[z4]);const V4=["sourceType","sourceChannel","imageViewport","imageAngle","imageScale","imageCanvasScale","preImageScale","originalImageSize","hdImageSize","initialViewSize","initialImageSize","effectId","effectBrightness","brightness","saturation","contrast","sharpen","blur","stockPhotoInfo","imageVip","resizeFilterType","cutoutKey","skinKey","carToonKey","originInfo","imgStyles","imgStylesKey","imgStylesVip","strokeLineJoin","tint","tempereature","effectFilterId","effectFilterStrength","effectFilterIsPro","effectFilterSize","effectFilterDefalStrength","effectFilterName","effectFilterGroupName","cutoutUrl","skinUrl","cutoutKeyTemplate","preTrimImageViewport","originalImageObject","originalClipPathObject"];Object.assign(pe.ownDefaults,{paintFirst:"stroke",lockScalingFlip:!0,cornerStrokeColor:"rgba(0,0,0, 0.15)",cornerSize:12,cornerRoundSize:3,cornerColor:"rgba(255,255,255,1)",transparentCorners:!1,cornerStyle:"circle",borderColor:"#3f9eff",borderDashArray:[3,0],borderScaleFactor:2,borderOpacityWhenMoving:1,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeDashOffset strokeLineJoin strokeMiterLimit angle opacity fill globalCompositeOperation shadow clipTo visible backgroundColor skewX skewY fillRule paintFirst clipPath strokeUniform ".split(" ").concat(V4)});Object.assign(Di.ownDefaults,{_controlsVisibility:{mt:!1,mb:!1,ml:!1,mr:!1}});const X4="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let dl=(n=21)=>{let t="",e=crypto.getRandomValues(new Uint8Array(n));for(;n--;)t+=X4[e[n]&63];return t};function H4(n,t,e,i){const r=n/e,s=t/i;return Math.min(r,s)}const Y4=pe.prototype.render;class N4 extends as(pe){setOptions(t={}){this._setOptions(t),t.objectId||this.generateNewObjectId()}generateNewObjectId(){this.objectId=dl(10)}showLoadError(t){this.loadError||xb(`<?xml version="1.0" encoding="UTF-8"?>
          <svg width="16px" height="16px" viewBox="0 0 16 16" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
              <!-- Generator: Sketch 53.2 (72643) - https://sketchapp.com -->
              <title>Icon / Error 2</title>
              <desc>Created with Sketch.</desc>
              <g id="Icon-/-Error-2" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
                  <path d="M8,1 C4.134,1 1,4.134 1,8 C1,11.866 4.134,15 8,15 C11.866,15 15,11.866 15,8 C15,4.134 11.866,1 8,1" id="Fill-1" fill="#F24A62"></path>
                  <path d="M8.0363,13.1456 C7.4563,13.1456 6.9853,12.6986 6.9853,12.1456 C6.9853,11.5936 7.4563,11.1456 8.0363,11.1456 C8.6163,11.1456 9.0873,11.5936 9.0873,12.1456 C9.0873,12.6986 8.6163,13.1456 8.0363,13.1456 Z M8.0724,10.1319 C7.5194,10.1319 7.0724,9.6849 7.0724,9.1319 L7.0724,4.1319 C7.0724,3.5789 7.5194,3.1319 8.0724,3.1319 C8.6254,3.1319 9.0724,3.5789 9.0724,4.1319 L9.0724,9.1319 C9.0724,9.6849 8.6254,10.1319 8.0724,10.1319 Z" id="合并形状" fill="#FFFFFF"></path>
              </g>
          </svg>`).then(({objects:e,options:i})=>{this.loadError=$.groupSVGElements(e,i),this.loadError.originX="center",this.loadError.originY="center",this.loadError.objectCaching=!1,this.dirty=!0,t&&t()})}renderLoadErrorIcon(t){if(this.loadError){const e=this.loadError.width,i=this.loadError.height,r=H4(this.width,this.height,e,i);this.loadError.scale(r),t.save(),this.loadError.render(t),t.restore()}}clone(t){const e=this.toObject(t);return this.constructor.fromObject(e)}render(t){var e;const i=this.animationObject||((e=this.originalTarget)==null?void 0:e.animationObject)||this;Y4.call(i,t)}animateFlip(t,e){const i=this;if(e===i[t])return i;const{canvas:r,group:s}=i,o=t==="imageFlipX"?"scaleX":"scaleY";let l=i.get("animationObject");return l||(i.canvas=void 0,i.group=void 0,l=Re.cloneDeep(i),l.canvas=r,l.group=s,l._set("cacheGlyphs",i.get("cacheGlyphs")),i.canvas=r,i.group=s),l.set("animation",{[o]:-i[o]}),i.set("animationObject",l),i[t]=e,l.animate(l.get("animation"),{duration:300,onChange:function(h){h<0&&(l[t]=e,l[o]=Math.abs(l[o])),i.dirty=!0;const u=i.getRelativeCenterPoint();l.angle=i.angle,l.group=i.group,l.dirty=!0,l.setPositionByOrigin(u,"center","center"),l.set("animationObject",l),i.set("animationObject",l),r==null||r.requestRenderAll()},onComplete:function(){l[t]=e,l.set("animation",void 0),l.dispose(),i.dirty=!0,i.cacheWidth=0,i.cacheHeight=0,i.clipPath&&(i.clipPath.cacheWidth=0,i.clipPath.cacheHeight=0),delete i.animationObject,r==null||r.requestRenderAll()},easing:$.ease.easeInOutQuad}),i}_fireDataChanged(t){const e={target:this,withoutStep:t};this.canvas&&this.canvas.fire("object:modified",e)}}Pl(pe,[N4]);const W4=n=>{let t,e;return n.isType("EditorClippingText")&&n.clippingPath instanceof we&&(t={scaleX:n.clippingPath.scaleX,scaleY:n.clippingPath.scaleY}),(n.isType("ActiveSelection")||n.isType("Group"))&&(e=n._objects.map(i=>i.isType("EditorClippingText")&&i.clippingPath?{clippingPath:{scaleX:i.clippingPath.scaleX,scaleY:i.clippingPath.scaleY}}:{clippingPath:void 0})),{scaleX:n.scaleX,scaleY:n.scaleY,skewX:n.skewX,skewY:n.skewY,angle:n.angle,left:n.left,flipX:n.flipX,flipY:n.flipY,top:n.top,clippingPath:t,objects:e}},U4=(n,...t)=>console[n]("fabric",...t),{sendPointToPlane:Fv,degreesToRadians:G4}=$,{dragHandler:q4}=Ns;class Z4 extends as(Bo){findObjectWithId(t){for(let e=0;e<this._objects.length;e++)if(t===this._objects[e].objectId)return this._objects[e]}__onMouseDown(t){this._isClick=!0,this._cacheTransformEventData(t);let e=this._target;if(e&&(e.clipParent||e.clipChild||e.clippingParent)){const o=e.findControl(this.getPointer(t,!0));e.clipParent&&e.clipParent.isType("EditorImage")&&(e=o&&e.isControlVisible(o.key)?e:e.clipParent),e.clipParent&&e.clipParent.isType("EditorClippingMask")&&(e=o&&e.isControlVisible(o.key)?e:e.clipParent),e.clipParent&&e.clipParent.isType("EditorClippingText")&&(e=o&&e.isControlVisible(o.key)?e:e.clipParent.clippingPath),this.setActiveObject(e,t)}this._handleEvent(t,"down:before");const{button:i}=t;if(i){(this.fireMiddleClick&&i===1||this.fireRightClick&&i===2)&&this._handleEvent(t,"down"),this._resetTransformEventData();return}if(this.isDrawingMode){this._onMouseDownInDrawingMode(t);return}if(!this._isMainEvent(t)||this._currentTransform)return;if(this._activeObject&&this.isCliping&&e!==this._activeObject){!this._activeObject.clippingParent&&this._activeObject._onDoubleClick?this._activeObject._onDoubleClick():this._activeObject.clipParent&&this._activeObject.clipParent._onDoubleClick?this._activeObject.clipParent._onDoubleClick():this._activeObject.clippingParent&&this._activeObject.clippingParent._onDoubleClick&&this._activeObject.clippingParent._onDoubleClick();return}let r=this._shouldRender(e),s=!1;if(this.handleMultiSelection(t,e)?(e=this._activeObject,s=!0,r=!0):this._shouldClearSelection(t,e)&&this.discardActiveObject(t),this.selection&&(!e||!e.selectable&&!e.isEditing&&e!==this._activeObject||e.canSelection||e.isLock)){const o=this.getScenePoint(t);this._groupSelector={x:o.x,y:o.y,deltaY:0,deltaX:0}}if(e){const o=e===this._activeObject;e.selectable&&e.activeOn==="down"&&!e.canSelection&&this.setActiveObject(e,t);const l=e.findControl(this.getViewportPoint(t),$.isTouchEvent(t));if((e===this._activeObject||this._activeObject&&e===this._activeObject.group)&&(l||!s)){this._setupCurrentTransform(t,e,o);const h=l&&e.controls[l.key],u=this.getScenePoint(t),d=h&&h.getMouseDownHandler(t,e,h);d&&d.call(h,t,this._currentTransform,u.x,u.y)}}r&&(this._objectsToRender=void 0),this._handleEvent(t,"down"),r&&this.requestRenderAll()}_setupCurrentTransform(t,e,i){var r;const s=e.group?Fv(this.getScenePoint(t),void 0,e.group.calcTransformMatrix()):this.getScenePoint(t),{key:o="",control:l}=e.getActiveControl()||{},h=i&&l?(r=l.getActionHandler(t,e,l))==null?void 0:r.bind(l):q4,u=f4(i,o,t,e),d=t[this.centeredKey],g=this._shouldCenterTransform(e,u,d)?{x:ul,y:ul}:this._getOriginFromCorner(e,o),p={target:e,action:u,actionHandler:h,actionPerformed:!1,corner:o,scaleX:e.scaleX,scaleY:e.scaleY,skewX:e.skewX,skewY:e.skewY,offsetX:s.x-e.left,offsetY:s.y-e.top,originX:g.x,originY:g.y,ex:s.x,ey:s.y,lastX:s.x,lastY:s.y,theta:G4(e.angle),width:e.width,height:e.height,shiftKey:t.shiftKey,altKey:d,original:{...W4(e),originX:g.x,originY:g.y}};this._currentTransform=p,this.stateful&&e.saveState(),this.fire("before:transform",{e:t,transform:p})}_transformObject(t){const e=this.getScenePoint(t),i=this._currentTransform,r=i.target,s=r.group?Fv(e,void 0,r.group.calcTransformMatrix()):e;if(i.action==="drag"&&!r.isMoving){const o=this.getViewportPoint(t),l=this.getScenePoint(t),h=this._target,u={e:t,target:h,subTargets:this.targets||[],button:1,isClick:!1,pointer:this._pointer,absolutePointer:this._absolutePointer,viewportPoint:o,scenePoint:l,transform:this._currentTransform};this.fire("mouse:start_drag",u)}r.isMoving=!0,i.shiftKey=t.shiftKey,i.altKey=!!this.centeredKey&&t[this.centeredKey],this._performTransformAction(t,i,s),i.actionPerformed&&this.requestRenderAll()}}Pl(Bo,[Z4]);const $4=vn.getDefaults();vn.getDefaults=()=>({...$4,stateful:!0});class K4 extends as(vn){constructor(){super(...arguments),At(this,"stateful")}_onObjectAdded(t){this.stateful&&t.setupState(),t.canvas&&t.canvas!==this&&(U4("warn",`Canvas is trying to add an object that belongs to a different canvas.
Resulting to default behavior: removing object from previous canvas and adding to new canvas`),t.canvas.remove(t)),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added",{target:this})}}Pl(vn,[K4]);class Fb extends pe{constructor(t){super(t)}updateClipCoords(t,e){this.clipCoords=t,this.clipObject=t.clipPath,this.maskAlpha=e,this.needRedraw=!0}needRefresh(){this.needRedraw=!0}renderCache(t){this._cacheCanvas||(this._cacheCanvas=$.createCanvasElement(),this._cacheContext=this._cacheCanvas.getContext("2d"),this._cacheCanvas.width=this.width,this._cacheCanvas.height=this.height),this.needRedraw&&(this._cacheContext&&this.drawObject(this._cacheContext),this.needRedraw=!1)}drawObject(t){t.clearRect(0,0,this.width,this.height),t.save(),t.fillStyle=`rgba(0, 0, 0, ${this.maskAlpha})`,t.fillRect(0,0,this.width,this.height),t.restore(),t.save();const e=this.getViewportTransform();if(t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),this.clipCoords)if(this.clipObject){console.log("drawObject");const i=this.clipCoords.width/this.clipObject.width,r=this.clipCoords.height/this.clipObject.height,s={x:this.clipCoords.tl.x,y:this.clipCoords.tl.y},o=this.clipObject.flipX,l=this.clipObject.flipY,h=this.clipObject.angle,u=this.clipObject.left,d=this.clipObject.top,g=this.clipObject.scaleX,p=this.clipObject.scaleY,m=this.clipObject.originX,y=this.clipObject.originY;this.clipCoords.flipX===!0&&(this.clipObject.flipX=!0),this.clipCoords.flipY===!0&&(this.clipObject.flipY=!0),this.clipObject.angle=this.clipCoords.angle,this.clipObject.scaleX=i,this.clipObject.scaleY=r,this.clipObject.left=s.x,this.clipObject.top=s.y,this.clipObject.originX="left",this.clipObject.originY="top",this.clipObject.render(t),this.clipObject.flipX=o,this.clipObject.flipY=l,this.clipObject.angle=h,this.clipObject.scaleX=g,this.clipObject.scaleY=p,this.clipObject.left=u,this.clipObject.top=d,this.clipObject.originX=m,this.clipObject.originY=y}else t.beginPath(),t.moveTo(this.clipCoords.tl.x,this.clipCoords.tl.y),t.lineTo(this.clipCoords.tr.x,this.clipCoords.tr.y),t.lineTo(this.clipCoords.br.x,this.clipCoords.br.y),t.lineTo(this.clipCoords.bl.x,this.clipCoords.bl.y),t.lineTo(this.clipCoords.tl.x,this.clipCoords.tl.y),t.closePath(),t.fillStyle="#000",t.fill();t.restore()}}Object.assign(Fb.ownDefaults,{clipCoords:void 0,clipObject:void 0,needRedraw:!0,maskAlpha:.1});class J4 extends pe{static getDefaults(){return{...super.getDefaults(),options:void 0,display:void 0,canvas:void 0,rect:void 0}}constructor(t,e={}){super(e),this.canvas=t,this.options=e,this.options.hiddenDelayMS||(this.options.hiddenDelayMS=500),this.options.color||(this.options.color="#fff"),this.options.size||(this.options.size=1),this.options.grid||(this.options.grid=3),t.on("before:render",()=>{this.clearContextTop()}),t.on("after:render",()=>{this.drawWithRect()})}show(t){this.rect={left:t.left,top:t.top,width:t.width,height:t.height,angle:t.angle,centerPoint:t.centerPoint}}clearContextTop(){var t;(t=this.canvas)!=null&&t.contextTop&&this.canvas.clearContext(this.canvas.contextTop)}drawWithRect(){if(!this.canvas)return;const t=this.canvas.getSelectionContext();if(this.rect&&t){const e=this.canvas.viewportTransform;t.save(),t.lineWidth=this.options.size/e[0],t.strokeStyle=this.options.color;const i=new I(this.rect.left,this.rect.top),r=$.degreesToRadians(this.rect.angle),s=i.rotate(r,this.rect.centerPoint);let o=0,l=0;s.x!==this.rect.centerPoint.x||s.y!==this.rect.centerPoint.y?(o=s.x,l=s.y):(o=s.x-.5*this.rect.width,l=s.y-.5*this.rect.height);let h=$.composeMatrix({translateX:o,translateY:l,angle:this.rect.angle});h=$.multiplyTransformMatrices(e,h),t.transform(h[0],h[1],h[2],h[3],h[4],h[5]),t.beginPath(),this.drawGridlines(t,this.rect.width,this.rect.height),t.closePath(),t.stroke(),t.restore()}}drawGridlines(t,e,i){const r=e/this.options.grid,s=i/this.options.grid;for(let o=1;o<this.options.grid;o++)t.moveTo(0,o*s),t.lineTo(e,o*s);for(let o=1;o<this.options.grid;o++)t.moveTo(o*r,0),t.lineTo(o*r,i)}hide(){var t;this.rect&&(this.options.hiddenDelayMS&&this.options.hiddenDelayMS>0?setTimeout(()=>{var e;this.rect=void 0,(e=this.canvas)==null||e.requestRenderAll()},this.options.hiddenDelayMS):(this.rect=void 0,(t=this.canvas)==null||t.requestRenderAll()))}}class Q4{constructor(){At(this,"EventList"),this.EventList=new Array}addEventListener(t,e){this.EventList.push({name:t,listener:e})}removeEventListener(t,e){this.EventList=e?this.EventList.filter(i=>!(i.name===t&&i.listener===e)):this.EventList.filter(i=>i.name!==t)}dispatchEvent(t,e){this.EventList.filter(i=>i.name===t).map(i=>i.listener).forEach(i=>i(e))}}const nn=new Q4,tA=n=>{const t={min:600,max:2560},e={width:n.width,height:n.height,scale:1},i=1/Math.max(Math.min(Math.max(n.width,n.height),t.min)/t.min,Math.max(n.width,n.height)/t.max);return i!==1&&(e.width*=i,e.height*=i,e.scale=i),e};function eA(n,t,e,i){const r=n/e,s=t/i;return Math.min(r,s)}let iA=class extends Bo{constructor(n,t,e){super(n,t),this._documentScale=1,this.maxScaleValue=5,this.currentHoverObject=void 0,this.isCliping=!1,this.clipTarget=void 0,this.currentClipCoords=void 0,this.isMainCanvas=e==null?void 0:e.isMainCanvas,this.scrollPaddingX=60,this.scrollPaddingY=60,this.gridlinesView=new J4(this,{grid:3}),this._initCanvas()}_initCanvas(){this.selectionBorderColor="rgb(176,207,255)",this.selectionColor="rgba(44,125,250,0.1)",this.selectionLineWidth=1,this.moveCursor="move",this.skipOffscreen=!1}_showOrHideGridlines(n){n&&n.show===!0&&this.currentClipCoords?this.gridlinesView.show({left:this.currentClipCoords.left,top:this.currentClipCoords.top,width:this.currentClipCoords.width,height:this.currentClipCoords.height,angle:this.currentClipCoords.angle,centerPoint:this.currentClipCoords.centerPoint}):this.gridlinesView.hide()}updateCanvasSize(n,t){t||(t=Object.assign({},this.designRect)),this.setDimensions(n),this.canvasSize=n,this.centerPoint=new I(.5*this.canvasSize.width,.5*this.canvasSize.height),this.clipObject=new Fb({width:n.width,height:n.height}),this.clipPath=this.clipObject,this._internalUpdateDocumentSize(t),this.clipObject.width=n.width,this.clipObject.height=n.height,this.renderAll()}_internalUpdateDocumentSize(n){const t=tA(n);this._documentScale=t.scale,this.designRect={x:(this.canvasSize.width-t.width)/2,y:(this.canvasSize.height-t.height)/2,width:t.width,height:t.height},this.originalVptMatrix=[1,0,0,1,this.designRect.x,this.designRect.y],this.viewportTransform=Re.clone(this.originalVptMatrix),this.defaultClipCoords={tl:new I(0,0),tr:new I(this.designRect.width,0),br:new I(this.designRect.width,this.designRect.height),bl:new I(0,this.designRect.height),left:0,top:0,width:this.designRect.width,height:this.designRect.height,angle:0,centerPoint:new I(.5*this.designRect.width,.5*this.designRect.height)};const e=120,i=eA(this.canvasSize.width-e,this.canvasSize.height-e,this.designRect.width,this.designRect.height);this.minScaleValue=.5*i,this.updateClipArea();const r=this.canvasSize.width/this.designRect.width;this.fitWidthVptMatrix=void 0,this.fitVptMatrix=void 0,this.zoomToPoint(this.centerPoint,r),this.fitWidthVptMatrix=Re.clone(this.viewportTransform),this.viewportTransform=Re.clone(this.originalVptMatrix),this.fitVptMatrix=void 0,this.zoomToPoint(this.centerPoint,i,!0),this.fitVptMatrix=Re.clone(this.viewportTransform)}zoomToPoint(n,t,e){const i=Math.min(Math.max(t,this.minScaleValue),this.maxScaleValue);return super.zoomToPoint(n,i),this.clipObject.needRefresh(),this._fixTranslate(),e&&this.isMainCanvas&&this.delayedDispatchEvent(),this}delayedDispatchEvent(){nn.dispatchEvent(en.CANVAS_ZOOM,{zoomLevel:this.getZoom(),isInit:!0,documentSize:this.designRect})}_fixTranslate(){if(this.fitVptMatrix){const n=this.viewportTransform;if(!n)return;if(n[4]=Math.min(this.fitVptMatrix[4],n[4]),n[5]=Math.min(this.fitVptMatrix[5],n[5]),n[0]<this.fitVptMatrix[0]){const t=this.centerPoint,e=new I(t.x,t.y),i=this.fitVptMatrix.slice(0),r=new I(e.x,e.y).transform($.invertTransform(i));i[0]=n[0],i[3]=n[0];const s=r.transform(i);i[4]+=e.x-s.x,i[5]+=e.y-s.y,n[4]=Math.max(i[4],n[4]),n[5]=Math.max(i[5],n[5])}this.setViewportTransform(n)}}updateClipArea(n,t){this.isCliping=!0,this.clipTarget=t,n||(n=this.defaultClipCoords,this.isCliping=!1),this.currentClipCoords=n;const e=n.clipPath;if(e){const i=Re.clone(e);this.currentClipCoords.clipPath=i,this.clipObject.updateClipCoords(this.currentClipCoords,this.isCliping?.3:0)}else this.clipObject.updateClipCoords(this.currentClipCoords,this.isCliping?.1:0);this.getElement().style.backgroundColor=this.isCliping?"rgba(0, 0, 0, 0.15)":"transparent"}drawClipPathOnCanvas(n){this.viewportTransform;const t=this.clipPath;n.save(),n.globalCompositeOperation="destination-in",t&&t._cacheCanvas&&t._cacheCanvas.width!==0&&t._cacheCanvas.height!==0&&n.drawImage(t._cacheCanvas,0,0),n.restore()}setCurrentHoverObject(n){this.currentHoverObject=n,this.requestRenderAll()}drawControls(n){const t=this._activeObject;t&&t.group&&t.group._renderControls(n,{hasControls:!1,borderDashArray:[4,4]}),t&&t._renderControls(n),this.isCliping&&this.clipTarget?(this.clipTarget._renderControls(n),this.clipTarget.clipChild&&this.clipTarget.clipChild._renderControls(n)):this.currentHoverObject&&this.currentHoverObject!==t&&this.currentHoverObject._renderControls(n,{hasControls:!1})}getArtboard(){return this._objects[0]}getdesignRect(){return this.designRect}getdesignRectWithZoom(){const n=this.designRect,t=n.width,e=n.height,i=this.viewportTransform;return{x:i[4],y:i[5],width:t*i[0],height:e*i[0]}}loadFromObjects(n,t){const e=this,i=this.renderOnAddRemove;this.renderOnAddRemove=!1,this._objects=[],this.clear(),this.__setupCanvas({},n,i,function(){e.isLoading=!1,e.loadingImage=void 0,e.requestRenderAll(),t&&t()})}__setupCanvas(n,t,e,i){const r=this;t.forEach(function(s,o){r.add(s)}),this.renderOnAddRemove=e,delete n.objects,delete n.backgroundImage,delete n.overlayImage,delete n.background,delete n.overlay,this._setOptions(n),this.renderAll(),i&&i()}insertAt(n,t,e){const i=this._objects;return e?i[n]=t:i.splice(n,0,t),this._onObjectAdded&&this._onObjectAdded(t),this.renderOnAddRemove&&this.requestRenderAll(),this}_setCursorFromEvent(n,t){if(!t){this.setCursor(this.defaultCursor);return}let e=t.hoverCursor||this.hoverCursor;const i=this._activeObject===this._activeSelection?this._activeObject:null,r=(!i||t.group!==i)&&t.findControl(this.getViewportPoint(n));if(!r)t.subTargetCheck&&this.targets.concat().reverse().map(s=>{e=s.hoverCursor||e}),this.setCursor(e);else{const s=t.controls[r.key];this.setCursor(s.cursorStyleHandler(n,s,t))}n.fabricObjectCorner=r,this.requestRenderAll()}findObjectWithId(n){for(let t=0;t<this._objects.length;t++)if(n===this._objects[t].objectId)return this._objects[t]}checkCanScroll(){const n=this.getZoom(),{width:t,height:e}=this.designRect,{width:i,height:r}=this.canvasSize;let s=!0,o=!0,l=this.scrollPaddingX,h=this.scrollPaddingY,u=-(n*t+this.scrollPaddingX-i),d=-(n*e+this.scrollPaddingY-r);return n*t+2*this.scrollPaddingX<i&&(s=!1),n*e+2*this.scrollPaddingY<r&&(o=!1),{minX:u,maxX:l,minY:d,maxY:h,canScrollX:s,canScrollY:o}}moveCanvasByOffset(n,t){const{viewportTransform:e=[]}=this,i=Re.clone(e),r=i[0],s=i[1],o=i[2],l=i[3];let h=i[4],u=i[5];const d=this.checkCanScroll(),g=d.minX,p=d.maxX,m=d.minY,y=d.maxY,_=d.canScrollX,C=d.canScrollY;_&&(h=Math.max(g,Math.min(h+=n,p))),C&&(u=Math.max(m,Math.min(u+=t,y))),this.setViewportTransform([r,s,o,l,h,u]),nn.dispatchEvent(en.MINIMAP_VIEWPORT_CHANGED,this),this.clipPath&&this.clipPath.needRefresh(),this.renderAll()}},Ld={};function gh(n,t){return new Promise(e=>{if(Ld[n]){e(Ld[n]);return}$.loadImage(n,{...t}).then(i=>{Ld[n]=i,e(i)}).catch(()=>{e(n)})})}const nA=n=>!!n&&n.toLive!==void 0;function zv(n,t,e,i){const r=n/e,s=t/i;return Math.max(r,s)}const rA=["sourceType","sourceChannel","imageViewport","imageAngle","imageScale","imageCanvasScale","preImageScale","originalImageSize","hdImageSize","initialViewSize","initialImageSize","effectId","effectBrightness","brightness","saturation","contrast","sharpen","blur","stockPhotoInfo","aiPhotoInfo","imageVip","resizeFilterType","cutoutKey","skinKey","carToonKey","originInfo","imgStyles","imgStylesKey","imgStylesVip","strokeLineJoin","tint","tempereature","effectFilterId","effectFilterStrength","effectFilterIsPro","effectFilterSize","effectFilterDefalStrength","effectFilterName","effectFilterGroupName","cutoutUrl","skinUrl","cutoutKeyTemplate","preTrimImageViewport"],sA=["cropX","cropY"];class hs extends we{constructor(t,e){super(t,{filters:[],...e}),t&&typeof t=="string"&&t.length>0?console.log("if constructor"):t&&(console.log("else constructor"),this.originalImageSize={width:t.naturalWidth||t.width,height:t.naturalHeight||t.height},this.applyStyles(e)),this.on("mousedblclick",this._onDoubleClick.bind(this)),this.on("moving",this._onMoving.bind(this)),this.on("scaling",this._onScaling.bind(this)),this.on("mousedown",this._onMousedown.bind(this)),this.on("mouseup",this._onMouseup.bind(this))}_onScaling(t){const{transform:e}=t,i=this.getOriginalRect();if(this.isCliping&&t&&t.transform&&i){if(this.scaleX<=this.minScale||this.scaleY<=this.minScale){const r=this.translateToOriginPoint(this.getCenterPoint(),e.originX,e.originY);this.scaleX=this.minScale,this.scaleY=this.minScale,this.setPositionByOrigin(r,e.originX,e.originY)}else this.editingScale=this.scaleX,this.editingScaleX=this.scaleX,this.editingScaleY=this.scaleY;this._showOrHideGridlines(!0)}}_onMoving(){const t=this.getOriginalRect();this.isCliping&&t&&(this._adjustPositionV2(),this._showOrHideGridlines(!0))}_adjustPositionV2(){const t=this.getPreviousCenterPoint(),e=$.rotatePoint(new I(this.left,this.top),t,$.degreesToRadians(-this.angle)),i=e.x,r=e.y;this.clipChild.rotate(-this.imageAngle||0),this.clipChild.setCoords();const s=this.clipChild.getBoundingRect(!0,!0);this.clipChild.rotate(this.editingAngle||0),this.clipChild.setCoords();const o=s.left-(this.getScaledWidth()-s.width),l=s.top-(this.getScaledHeight()-s.height),h=$.capValue(o,i,s.left),u=$.capValue(l,r,s.top);if(h!=i||u!=r){const d=$.rotatePoint(new I(h,u),t,$.degreesToRadians(this.angle));this.set("left",d.x),this.set("top",d.y)}}_showOrHideGridlines(t){var e;(e=this.canvas)==null||e.fire(ui.FTGRIDLINE_STATUS_CHANGED,{show:t})}_onMouseup(){this._showOrHideGridlines(!1)}_onMousedown(t){const{transform:e}=t,i=this.getOriginalRect(),r=this.getPreviousCenterPoint();if(i&&t&&t.transform){let s=0,o=0;this.clipChild.rotate(-this.imageAngle||0),this.clipChild.setCoords();const l=this.clipChild.getBoundingRect();this.clipChild.rotate(this.editingAngle||0),this.clipChild.setCoords();const h=$.rotatePoint(new I(this.left,this.top),r,$.degreesToRadians(-this.angle)),{width:u}=this,{height:d}=this,g=this.getScaledWidth(),p=this.getScaledHeight(),m=l.left-h.x,y=l.top-h.y;e.corner==="tl"?(s=(g-m)/u,o=(p-y)/d):e.corner==="tr"?(s=(m+l.width)/u,o=(p-y)/d):e.corner==="br"?(s=(m+l.width)/u,o=(y+l.height)/d):e.corner==="bl"&&(s=(g-m)/u,o=(y+l.height)/d),this.minScale=Math.max(s,o)}}getPreviousCenterPoint(){return this.clipChild&&this.clipChild.getCenterPoint()}rotateActiveObjectByStep(t=45){this.rotateByStep(t)}rotateByStep(t=45){const e=this.angle>=315?0:this.angle+t;return this.rotate(e),this}rotate(t){this.clippingParent&&this.clippingParent.isCliping?this.clippingParent.updateClipAngle({clipAngle:t}):super.rotate(t)}updateClipAngle(t){const e=t.clipAngle-(this.editingAngle||0);this.imageAngle=e,this.isCliping&&this._adjustRotatePosition(),this.imageCanvasScale=this._caculateCanvasScale(this.getOriginalRect())}_adjustRotatePosition(){const t=this.clipChild.getCenterPoint(),e=new I(this.left,this.top),i=$.degreesToRadians(this.getClipAngle()-this.angle),r=e.rotate(i,t);this.set("left",r.x),this.set("top",r.y),this.set("angle",this.getClipAngle());const s=this.getScaledWidth(),o=this.getScaledHeight();this.clipChild.rotate(-this.imageAngle||0),this.clipChild.setCoords();const l=this.clipChild.getBoundingRect();this.clipChild.rotate(this.editingAngle||0),this.clipChild.setCoords();const h=$.rotatePoint(new I(this.left,this.top),t,$.degreesToRadians(-this.angle)),u=Math.abs((t.x-h.x)/s),d=Math.abs((t.y-h.y)/o),g=Math.min(u,1-u),p=Math.min(d,1-d),m=l.width/(s*g*2),y=l.height/(o*p*2),_=Math.max(m,y)*this.scaleX,C=this.originX,b=this.originY;this.originX=u,this.originY=d,this._setPositionByChangeOrigin(new I(this.left,this.top),C,b,u,d),_>this.editingScale&&(this.scale(_),this.setCoords()),this.originX=C,this.originY=b,this._setPositionByChangeOrigin(new I(this.left,this.top),u,d,C,b),this.setCoords()}_setPositionByChangeOrigin(t,e,i,r,s){let o=this.translateToGivenOrigin(t,e,i,r,s);if(this.angle){const l=$.degreesToRadians(this.angle);o=o.rotate(l,t)}this.set("left",o.x),this.set("top",o.y)}_caculateCanvasScale(t){if(!this.imageAngle||!this.imageViewport)return 1;let e=this.width,i=this.height;t&&(e=t.width,i=t.height);const r=new yi({width:e,height:i,left:0,top:0,originX:"center",originY:"center"});r.rotate(this.imageAngle||0),r.setCoords();const s=r.getBoundingRect().width,o=r.getBoundingRect().height,l=Math.max(s/e,o/i);return l>1?l:1}_onDoubleClick(){this.getOriginalRect()?this.closeClipBounds(!0):this.showClipBounds()}closeClipBounds(t){var e,i;const r=this.getOriginalRect();if(r&&this.isCliping&&this.imageViewport){this.setControlsVisibility({mt:!0,mb:!0,ml:!0,mr:!0,mtr:!0});const s=this.getPreviousCenterPoint();this.getOriginClipInfo().scaleX;const o=this.getOriginClipInfo().scaleX,l=this.getOriginClipInfo().scaleY;if(t){const u=this.getScaledWidth(),d=this.getScaledHeight(),g=$.rotatePoint(new I(this.left,this.top),s,$.degreesToRadians(-this.angle)),p=(r.x-g.x)/u,m=(r.y-g.y)/d;this.imageViewport.x=p,this.imageViewport.y=m,this.imageViewport.width=this.getClipArea().width/u,this.imageViewport.height=this.getClipArea().height/d,this.imageViewport=function(y,_){const C=y.width*_,b=y.height*_,x=y.width-C,T=y.height-b,O=y.x+.5*x,E=y.y+.5*T;return{x:$.toFixed(O,3),y:$.toFixed(E,3),width:$.toFixed(C,3),height:$.toFixed(b,3)}}(this.imageViewport,this.imageCanvasScale),this.flipX&&(this.imageViewport.x=1-this.imageViewport.width-this.imageViewport.x),this.flipY&&(this.imageViewport.y=1-this.imageViewport.height-this.imageViewport.y),this.group&&(this.group.dirty=!0)}else this.imageViewport=this.previousImageViewport;this.imageAngle&&(this.angle=(this.angle||0)-this.imageAngle),this.scaleX=o,this.scaleY=l;const h=$.rotatePoint(new I(r.x,r.y),s,$.degreesToRadians(this.angle));this.left=h.x,this.top=h.y,this.width=r.width,this.height=r.height,this.clipChild.clipParent=null,(!this.clippingPath||this.clippingPath.isType("Rect"))&&(this.clippingPath=this.clipChild),(e=this.canvas)==null||e.remove(this.clipChild),this.clipChild=null,this.onClipChanged(!1,t),(i=this.canvas)==null||i.fire(ui.FTIMAGE_CLOSE_CLIP,{object:this})}}showClipBounds(){var t,e;if(!this.isCliping&&this.imageViewport){this.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1}),this.clipChild=new yi({width:this.width,height:this.height,left:this.left,top:this.top,angle:this.angle||0,scaleX:this.scaleX,scaleY:this.scaleY,fill:"#00000000",centeredRotation:!0,excludeFromExport:!0,changeSizeWhenScaleXY:!0,strokeWidth:0}),this.clipChild.clipParent=this,this.clipChild.setControlsVisibility({mtr:!1}),this.editingAngle=this.angle||0;const i=this.calcACoords(),r=this.getCenterPoint();this.editingScale=this.scaleX,this.editingScaleX=this.scaleX,this.editingScaleY=this.scaleY;const s=this.getScaledWidth()/this.imageViewport.width/this.scaleX,o=this.getScaledHeight()/this.imageViewport.height/this.scaleY;this.width=s,this.height=o;const l=this.getScaledWidth(),h=this.getScaledHeight();this.scaleX*=this.imageCanvasScale,this.scaleY*=this.imageCanvasScale;const u=this.getScaledWidth(),d=this.getScaledHeight(),g=this.getOriginalRect();if(!g)return;const p=new I(g.x,g.y);this.flipX&&(this.imageViewport.x=1-this.imageViewport.width-this.imageViewport.x),this.flipY&&(this.imageViewport.y=1-this.imageViewport.height-this.imageViewport.y);let m=p.x-this.imageViewport.x*l,y=p.y-this.imageViewport.y*h;if(this.imageAngle){const x={x:this.imageViewport.x+this.imageViewport.width/2,y:this.imageViewport.y+this.imageViewport.height/2};m-=(u-l)*x.x,y-=(d-h)*x.y}const _=this.angle||0,C=_+(this.imageAngle||0),b=$.rotatePoint(new I(m,y),r,$.degreesToRadians(C));this.left=b.x,this.top=b.y,this.previousImageViewport=Object.assign({},this.imageViewport),this.imageViewport.x=0,this.imageViewport.y=0,this.imageViewport.width=1,this.imageViewport.height=1,this.onClipChanged(!0),this.imageAngle&&(this.angle=C),(t=this.canvas)==null||t.fire(ui.FTIMAGE_SHOW_CLIP,{object:this,clipCoords:Object.assign({},i,{left:g.x,top:g.y,width:this.getClipArea().width,height:this.getClipArea().height,angle:_,flipX:this.flipX,flipY:this.flipY,centerPoint:r,clipPath:this._clipExtraData()})}),this.rotate(C),this.group||this.setCoords(),(e=this.canvas)==null||e.add(this.clipChild),this.clipChild.on("moving",this.updateClipReact.bind(this)),this.clipChild.on("mouseup",this._onClipMouseUp.bind(this))}}updateClipReact(){var t;if(this.clipChild){const e=this.getOriginalRect();if(!e)return;const i=this.clipChild.calcACoords(),r=this.clipChild.getCenterPoint();(t=this.canvas)==null||t.fire(ui.FTIMAGE_SHOW_CLIP,{object:this,clipCoords:Object.assign({},i,{left:e.x,top:e.y,width:this.getClipArea().width,height:this.getClipArea().height,angle:this.clipChild.angle,flipX:this.flipX,flipY:this.flipY,centerPoint:r,clipPath:this._clipExtraData()}),isUpdate:!0})}}getOriginClipInfo(){return this.clipChild}getClipAngle(){let t=this.editingAngle;return this.isCliping||(t=this.angle),(this.imageAngle||0)+(t||0)}isPerpendicular(){const t=(this.imageAngle||0)%90;return t<=1||90-t<=1}_onClipMouseUp(){this._showOrHideGridlines(!1)}getClipArea(){const t=this.clipChild;return{width:t?t.getScaledWidth():0,height:t?t.getScaledHeight():0}}_clipExtraData(){return this.clippingPath||void 0}getOriginalRect(){const t=this.clipChild;if(t){const e=t.getCenterPoint(),i=new I(t.left,t.top),r=$.degreesToRadians(-(t.angle||0)),s=i.rotate(r,e);return{x:s.x,y:s.y,width:t.width,height:t.height}}return null}onClipChanged(t,e){this.isCliping=t,this.imageChanged=!0,t?this.clipPath=void 0:this.clippingPath&&this.setClipTo()}setClipTo(){this.clippingPath&&(this.clipPath=this.clippingPath||this.clipChild,this.clipPath&&(this.clipPath.objectCaching=!1,this.clipPath.originX="center",this.clipPath.originY="center",this.clipPath.left=0,this.clipPath.top=0,this.clipPath.angle=0,this._updateClipSize()))}_updateClipSize(){const t=this.clipPath;t&&(t.scaleX=this.width/t.width,t.scaleY=this.height/t.height,t.dirty=!0)}_drawClipPath(t,e){if(!e)return;const i=e.scaleX,r=e.scaleY;e.scaleX*=this.scaleX,e.scaleY*=this.scaleY,e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),e.scaleX=i,e.scaleY=r,this.drawClipPathOnCache(t,e)}_updateState(t){}setElement(t,e={}){this.removeTexture(this.cacheKey),this.removeTexture(`${this.cacheKey}_filtered`),this._element=t,this._originalElement=t,this._setWidthHeight(e),t&&t instanceof HTMLImageElement&&t.classList.add(we.CSS_CANVAS),this.filters.length!==0&&this.applyFilters(),this.resizeFilter&&this.applyResizeFilters()}requestRenderCanvas(){this.dirty=!0,this.group&&(this.group.dirty=!0),this.clipPath&&(this.clipPath.dirty=!0),this.canvas&&this.canvas.requestRenderAll()}_caculateBounds(t){const e=this.width,i=this.height,r=t.naturalWidth||t.width,s=t.naturalHeight||t.height;this.originalImageSize={width:r,height:s},this._caculateViewport(e,i,r,s),this.setCoords()}_caculateViewport(t,e,i,r){const s=zv(t,e,i,r),o=s*i,l=s*r;this.initialImageSize={width:o,height:l},this.initialViewSize={width:this.width,height:this.height};const h=(o-t)/2,u=(l-e)/2;this.imageViewport={x:h/o,y:u/l,width:t/o,height:e/l}}getImageLoadingImageViewport(t){const e=this.width,i=this.height,r=t.naturalWidth||t.width,s=t.naturalHeight||t.height,o=zv(e,i,r,s),l=o*r,h=o*s;return{x:(l-e)/2/l,y:(h-i)/2/h,width:e/l,height:i/h}}getDrawImageViewport(){return this.imageViewport}hnadleChangedImage(t){return t instanceof HTMLImageElement||t instanceof HTMLVideoElement||t instanceof HTMLCanvasElement}isImageReady(){const t=this._originalElement,e=this.getElement(),i=e.naturalWidth||e.width;let r=!1;return t||(r=!0),this.sourceType===_o&&i>0&&!r}applyFilters(t){return this.isImageReady()&&(super.applyFilters(t),this.imageChanged=!0,this.temperatureAndTintChanged=!0,this.filtersChanged=!0),this}applyStyles(t){const e=t.effectId,i=t.effectBrightness,r=t.brightness,s=t.contrast,o=t.saturation,l=t.blur,h=t.tint,u=t.temperature;this.filters=[],l!==void 0&&l!==0&&console.log("blur...."),e!==void 0&&e!==0?console.log("effectId...."):i!==void 0&&i!==0&&console.log("effectBrightness...."),r!==void 0&&r!==0&&console.log("brightness...."),s!==void 0&&s!==0&&console.log("contrast....."),o!==void 0&&o!==0&&console.log("saturation....."),h!==void 0&&h!==0&&console.log("tint....."),u!==void 0&&u!==0&&console.log("temperature......"),console.log("applyFilters"),this.applyFilters(),this.requestRenderCanvas()}setSrc(t,e){const{crossOrigin:i,signal:r}=e;return this.imageUrl=t,this.src=t,delete this.loadError,delete this.loadErrorType,this.imageLoading=!0,this.sourceType=_o,gh(t,{crossOrigin:i,signal:r}).then(s=>{this.hnadleChangedImage(s)?(typeof i<"u"&&this.set({crossOrigin:i}),this.imageLoading=!1,this.setElement(s,{width:e.width,height:e.height}),this._caculateBounds(s)):this.showLoadError(()=>{this.requestRenderCanvas()}),this.applyStyles(this),this.requestRenderCanvas()})}setSource(t,e,i,r){let s=r.withoutStep||!1;this.isType("EditorImage")&&this.sourceType===void 0&&(s=!0),this.loadError=null,this.sourceType=e,e===_o&&(this.setSrc(t,Object.assign({},r,{crossOrigin:"anonymous"})).then(()=>{this._fireDataChanged(s)}),this._set("fill",void 0)),this.dirty=!0}_fireDataChanged(t){super._fireDataChanged(t)}_releaseCanvas(t){t instanceof HTMLCanvasElement&&t!==this.getElement()&&(e=>{e.width=1,e.height=1;const i=e.getContext("2d");i&&i.clearRect(0,0,1,1)})(t)}drawOurSelfCanvas(t,e){var i;const r=$.createCanvasElement();let s=t.width,o=t.height;return e&&(s=t.width/e,o=t.height/e),r.width=s,r.height=o,(i=r.getContext("2d"))==null||i.drawImage(t,0,0,s,o),this._releaseCanvas(t),r}_renderTemperatureAndTint(t){if(this.temperatureAndTintChanged){if(this.tintTemperatureCanvas=t,this.tintTemperatureCanvas){this.temperatureAndTintChanged=!1;const e=this.drawOurSelfCanvas(this.tintTemperatureCanvas,this.tintTemperatureCanvas.proportion);return this.myTintTemperatureCanvas=e,e}return t}return this.myTintTemperatureCanvas?this.myTintTemperatureCanvas:t}_renderFill(t){if(this.readyToRender){let e=this.fill;e||(e=h4);const i=this.width,r=this.height;if(this.sourceType===_o&&this.imageViewport&&this.originalImageSize&&this.isImageReady()||this.imageViewport&&this.imageLoading&&this.originalImageSize){let s=this._element;const o=this.imageLoading?s.width:this.originalImageSize.width,l=this.imageLoading?s.height:this.originalImageSize.height;if(s&&s.width>0){const h=this.imageLoading?this.getImageLoadingImageViewport(s):this.getDrawImageViewport();let u=h.x*o,d=h.y*l,g=h.width*o,p=h.height*l;this.resizeFilterType&&this.resizeFilter&&(g=Math.min(g,i*this._filterScalingX),p=Math.min(p,r*this._filterScalingY),u=Math.max(u,u*this._filterScalingX),d=Math.max(d,r*this._filterScalingY));const m=-i/2,y=-r/2,_=i,C=r;s=this._renderTemperatureAndTint(s),t.save(),this.imageAngle&&!this.isCliping&&(t.rotate($.degreesToRadians(this.imageAngle)),t.scale(this.imageCanvasScale,this.imageCanvasScale)),s&&t.drawImage(s,u,d,g,p,m,y,_,C),t.restore()}else t.fillStyle="transparent",t.fillRect(-i/2,-r/2,this.width,this.height)}else if(this.sourceType===c4){const s=nA(e);t.fillStyle=s?e.toLive(t):e,t.fillRect(-i/2,-r/2,this.width,this.height)}}}_render(t){this.loadError?this.renderLoadErrorIcon(t):(super._render(t),!this.shouldCache()&&this._shouldRenderLoadingMask()&&this._renderLoadingMask(t))}_drawCroppingLines(t){if(!this.isCliping)return;const e=this.clipChild.width,i=this.clipChild.height,r=this.canvas.getZoom()*Kt.devicePixelRatio;t.save(),t.lineWidth=1,t.globalAlpha=1,t.strokeStyle="#f6f7fa",t.beginPath(),t.moveTo(-e/2+e/3,-i/2),t.lineTo(-e/2+e/3,i/2),t.moveTo(-e/2+2*e/3,-i/2),t.lineTo(-e/2+2*e/3,i/2),t.moveTo(-e/2,-i/2+i/3),t.lineTo(e/2,-i/2+i/3),t.moveTo(-e/2,-i/2+2*i/3),t.lineTo(e/2,-i/2+2*i/3),t.scale(1/(this.clipChild.scaleX*r),1/(this.clipChild.scaleY*r)),t.stroke(),t.restore()}_shouldRenderLoadingMask(){return this.sourceType===_o&&this.imageLoading}_renderLoadingMask(t){var e;const i=this.width,r=this.height,s=+new Date/2%360*Math.PI/180,o=+new Date/4%360*Math.PI/180,l=this.canvas&&this.canvas.getZoom()||1,h=Math.max(this.scaleX||1,this.scaleY||1),u=12/h/l,d=2/h/l;t.save(),t.fillStyle="rgba(210,210,210,".concat((.2+.4*Math.sin(o/2)).toString(),")"),t.fillRect(-i/2,-r/2,i,r),t.strokeStyle="#3F9EFF",t.lineWidth=d,t.beginPath(),t.arc(0,0,u,s,s+Math.PI),t.stroke(),t.restore(),(e=this.canvas)==null||e.requestRenderAll()}toObject(t=[]){const e=[];return this.filters.forEach(i=>{i&&e.push(i.toObject())}),{...super.toObject([...sA,...rA,...t]),src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e,...this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{}}}static fromObject({filters:t,resizeFilter:e,src:i,crossOrigin:r,type:s,...o},l={}){return Promise.all([gh(i,{...l,crossOrigin:r}),t&&$.enlivenObjects(t,l),e&&$.enlivenObjects([e],l),$.enlivenObjectEnlivables(o,l)]).then(([h,u=[],[d]=[],g={}])=>{const p=new this(h,{...o,src:i,filters:u,resizeFilter:d,...g});return p._caculateBounds(h),p})}}At(hs,"type","EditorImage");Object.assign(hs.ownDefaults,{strokeWidth:0,readyToRender:!0,sourceType:_o,loadError:void 0,temperatureAndTintChanged:!0,tintTemperatureCanvas:void 0,myTintTemperatureCanvas:void 0,filtersChanged:!0,imageChanged:!0,isCropping:!1,isCliping:!1,clipChild:void 0,imageCanvasScale:1,clippingPath:void 0});ht.setClass(hs,"editorimage");ht.setClass(hs,"editorImage");ht.setClass(hs,"EditorImage");const zb=class Vb extends hs{constructor(t,e){const i=Object.assign({},{lockRotation:!0,hoverCursor:"default",backgroundColor:"#ffffff",fill:"transparent",objectCaching:!1,lockUniScaling:!0},e),r={...t};super(r,i),this._updateState(!1,!0)}_updateState(t,e){this.lockMovementX=!t,this.lockMovementY=!t,this.lockScalingX=!t,this.lockScalingY=!t,this.hasControls=t,this.canSelection=!t,this.selectable=!1}fromObject(t,e){return e&&e(new Vb("",t))}static fromObject({filters:t,resizeFilter:e,src:i,crossOrigin:r,type:s,...o},l={}){return Promise.all([gh(i,{...l,crossOrigin:r}),t&&$.enlivenObjects(t,l),e&&$.enlivenObjects([e],l),$.enlivenObjectEnlivables(o,l)]).then(([h,u=[],[d]=[],g={}])=>{const p=new this(h,{...o,src:i,filters:u,resizeFilter:d,...g});return p._caculateBounds(h),p})}};At(zb,"type","EditorBackground");let kg=zb;ht.setClass(kg);ht.setSVGClass(kg);class oA{constructor(t,e,i){this._objects=[],this._objectsJSON=void 0,this.isReady=!0,this.autoTry=0,this.isLoading=!1,this.pageId||(this.pageId=dl(10)),this.canvas=t,this.addDefaultBackground(e)}addDefaultBackground(t){if(t&&this._objects.length===0){const e=new kg(t);this.add(e)}}add(t){t._set("canvas",this.canvas),t.setCoords(),t.fire("object:added",{target:t}),t.fire("added"),this._objects.push(t),t._pageId=this.pageId}onSelect(t){const e=this;if(!(!e||!e.canvas)&&this.isReady){const i=function(){e.canvas.isLoading=!1,e.canvas.loadFromObjects(e._objects,function(){e._objects=e.canvas._objects,t&&t(!0)})};this._objectsJSON||i()}}}const aA=99;class lA extends iA{constructor(t,e,i){super(t,e,i)}initialize(t,e){this.updateCanvasSize(t,e),this.initPage()}initPage(){this._pages=[],this.currentPageId="";const t=new oA(this,this.designRect);this.addPage(t)}addPage(t,e,i,r){this._pages.length>=aA||(i!==void 0?this._pages.splice(i,0,t):this._pages.push(t),this.setPage(r||t.pageId))}setPage(t,e){this.onSelectPage(t,!1,e)}onSelectPage(t,e,i){const r=this;this.currentPageId=t;const s=this.getPageByPageId(t);s&&(this._objects=s._objects,this.discardActiveObject(),e?i&&i():(s.isLoading=!0,s.onSelect(function(o){o?(r.requestRenderAll(),s.isLoading=!1):s.autoTry<3&&(s.autoTry+=1,r.onSelectPage(t,e,i)),i&&i()})))}getPageByPageId(t){const e=this._pages.filter(i=>i.pageId===t);if(e)return e[0];throw"invalid pageId"}}const cA=["cropX","cropY"];class Rs extends hs{static getDefaults(){return{...super.getDefaults(),strokeWidth:0}}constructor(t,e){super(t,{filters:[],...e}),this.setControlsVisibility({ml:!1,mt:!1,mr:!1,mb:!1}),this.setClipTo()}setClipTo(){this.clippingPath&&(this.clipPath=this.clippingPath,this.clipPath&&(this.clipPath.objectCaching=!1,this.clipPath.originX="center",this.clipPath.originY="center",this.clipPath.left=0,this.clipPath.top=0,this._updateClipSize()))}_updateClipSize(){const t=this.clipPath;t&&(t.type==="rect"?(t.width=this.width,t.height=this.height):(t.scaleX=this.width/t.width,t.scaleY=this.height/t.height),t.dirty=!0)}_clipExtraData(){return this.clippingPath||void 0}onClipChanged(t,e){super.onClipChanged(t,e),t?this.clipPath=void 0:this.clippingPath&&this.setClipTo()}_drawClipPath(t,e){if(!e)return;const i=e.scaleX,r=e.scaleY;e.scaleX*=this.scaleX,e.scaleY*=this.scaleY,e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),e.scaleX=i,e.scaleY=r,this.drawClipPathOnCache(t,e)}drawClipPathOnCache(t,e){if(t.save(),e.inverted?t.globalCompositeOperation="destination-out":t.globalCompositeOperation="destination-in",e.absolutePositioned){const i=$.invertTransform(this.calcTransformMatrix());t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}getDrawImageViewport(){const t=Object.assign({},this.imageViewport);return this.imageFlipX&&(t.x=1-t.x-t.width),this.imageFlipY&&(t.y=1-t.y-t.height),t}_renderFill(t){t.save(),this.imageAngle&&!this.isCliping&&(t.rotate($.degreesToRadians(this.imageAngle)),t.scale(this.imageCanvasScale,this.imageCanvasScale)),(this.imageFlipX||this.imageFlipY)&&t.scale(this.imageFlipX?-1:1,this.imageFlipY?-1:1);const e=this._element;if(!e)return;const i=this.width,r=this.height,s=e.naturalWidth||e.width,o=e.naturalHeight||e.height,l=this.getDrawImageViewport(),h=l.x*s,u=l.y*o,d=l.width*s,g=l.height*o;e&&t.drawImage(e,h,u,d,g,-i/2,-r/2,i,r),t.restore()}toObject(t=[]){const e=[];return this.filters.forEach(i=>{i&&e.push(i.toObject())}),{...super.toObject([...cA,...t]),src:this.getSrc(),crossOrigin:this.getCrossOrigin(),filters:e,...this.resizeFilter?{resizeFilter:this.resizeFilter.toObject()}:{}}}static fromObject({filters:t,resizeFilter:e,src:i,crossOrigin:r,type:s,...o},l={}){return Promise.all([gh(i,{...l,crossOrigin:r}),t&&$.enlivenObjects(t,l),e&&$.enlivenObjects([e],l),$.enlivenObjectEnlivables(o,l)]).then(([h,u=[],[d]=[],g={}])=>{const p={...o.originalClipPathObject};if(Object.keys(p).length===0){const m=new this(h,{...o,src:i,filters:u,resizeFilter:d,...g});return m._caculateBounds(h),m}else return $.enlivenObjects([p]).then(m=>{const y=m[0];o.clippingPath=y;const _=new this(h,{...o,src:i,filters:u,resizeFilter:d,...g});return _._caculateBounds(h),_})})}}At(Rs,"type","EditorClippingMask"),At(Rs,"stateProperties",we.stateProperties.concat("imageViewport","originalClipPathObject","originalImageObject","imageCanvasScale")),At(Rs,"cacheProperties",we.cacheProperties.concat("imageViewport","originalClipPathObject","originalImageObject","imageCanvasScale"));Object.assign(Rs,{strokeWidth:0});ht.setClass(Rs,"editorclippingmask");ht.setClass(Rs,"editorClippingMask");ht.setClass(Rs,"EditorClippingMask");class Uh extends Qe{_applyTextbox(t,e=0){if(!(t&&t instanceof Qe))return;this.sourceTextbox=t;let i=t.text.replace(/\r?\n/gi," ");if(t.text.length>i.length){const r=i.split(" ");let s=r.length;for(;(s-=1)>-1&&!r[s];)r.splice(s,1);i=r.join(" ")}this.curveAmount=Math.max(-1,Math.min(1,e)),this.text=i,this.styles={},this.charSpacing=t.charSpacing,this.fontSize=t.fontSize,this.underline=t.underline,this.linethrough=t.linethrough,this.overline=t.overline,this.stroke=t.stroke,this.strokeWidth=t.strokeWidth,this.shadow=t.shadow,this.outerGlow=t.outerGlow,t.styles,this.styles,this.initDimensions(),this._resetCurvedCharData()}_resetCurvedCharData(){delete this.curveCharData}_getCurvedCharData(){if(this.curveCharData)return this.curveCharData;const t=this.curveAmount||0,e=0,i=this._textLines[e],r=this.width+this._getWidthOfCharSpacing(),s=this.height,o={chars:[],highlights:[],underlines:[],linethroughs:[],overlines:[],bounds:null,attributes:{curved:t!==0,curveAmount:t,lineW:r,lineH:s,minFontSize:0}};if(this.curveCharData=o,!i.length)return o.bounds={minX:0,minY:0,maxX:0,maxY:s,width:0,height:s},o;let l=null,h=0;const u=(m,y,_,C=null)=>{const b=C||this.getCompleteStyleDeclaration(e,m);b.textBackgroundColor?l?l.color===b.textBackgroundColor?l.end=Math.max(0,Math.min(1,(y+_)/r)):(l=null,u(m,y,_,b)):(l={color:b.textBackgroundColor,start:Math.max(0,Math.min(1,y/r)),end:Math.max(0,Math.min(1,(y+_)/r))},o.highlights.push(l)):l&&(l=null)},d=this._getTopOffset()+this.getHeightOfLine(e)/this.lineHeight*(1-this._fontSizeFraction),g={underline:null,linethrough:null,overline:null},p=(m,y,_,C="underline",b=null)=>{const x=b||this.getCompleteStyleDeclaration(e,m);if(x[C]){let T=g[C];const O=h/r,E=1+Math.abs(O);if(T)T.color===x.fill&&T.size===x.fontSize?T.end=Math.max(O,Math.min(E,(y+_)/r)):(T=null,g[C]=T,p(m,y,_,C,x));else switch(T={color:x.fill,size:x.fontSize,top:d+this.offsets[C]*this.getHeightOfChar(e,m),start:Math.max(O,Math.min(E,y/r)),end:Math.max(O,Math.min(E,(y+_)/r))},g[C]=T,C){case"underline":o.underlines.push(T);break;case"linethrough":o.linethroughs.push(T);break;case"overline":o.overlines.push(T);break}}else g[C]&&(g[C]=null)};if(t){const m=Math.PI*2,y=t<0?-1:1,_=Math.PI/180*15,C=Math.min(m,this.text.length*_),b=Math.abs(t)*C,x=r*(m/b),T=x/m+s/4*Math.abs(t),O={x:r/2,y:s/2+T*y};o.attributes.directionFactor=y,o.attributes.activeBeta=b,o.attributes.circleRadius=T,o.attributes.circleCenter=O,o.attributes.circleCircumference=x,o.attributes.arcLength=b/m*x;let E=0;for(let V=0;V<i.length;V++){const A=this.__charBounds[e][V],B=this.getCompleteStyleDeclaration(e,V);o.attributes.minFontSize=o.attributes.minFontSize?Math.min(o.attributes.minFontSize,B.fontSize):B.fontSize,u(V,E,A.kernedWidth,B),p(V,E,A.kernedWidth,"underline",B),p(V,E,A.kernedWidth,"linethrough",B),p(V,E,A.kernedWidth,"overline",B),E+=A.kernedWidth/2;const Y=(E-O.x)/O.x,J=(b/2*Y-Math.PI/2)*y,st=O.x+Math.cos(J)*T,ct=O.y+Math.sin(J)*T,ot=Math.atan2(ct-O.y,st-O.x)+Math.PI/2+(t<0?Math.PI:0),yt=A.kernedWidth,Tt=s,at=Math.sqrt((yt/2)**2+(Tt/2)**2);o.chars.push({x:st,y:ct,rotation:ot,width:yt,height:Tt,offsetB:0,offsetD:0,offsetX:0,offsetY:0}),E+=A.kernedWidth/2;for(let pt=0;pt<4;pt++){const ft=Math.atan2(Tt/2*(pt<2?-1:1),yt/2*(pt%3?-1:1)),Xt=ot+ft,It=Math.cos(Xt)*at+st,zt=Math.sin(Xt)*at+ct;o.bounds?(o.bounds.minX=Math.min(o.bounds.minX,It),o.bounds.minY=Math.min(o.bounds.minY,zt),o.bounds.maxX=Math.max(o.bounds.maxX,It),o.bounds.maxY=Math.max(o.bounds.maxY,zt)):o.bounds={minX:It,minY:zt,maxX:It,maxY:zt,width:0,height:0}}}}else{let m=0;for(let y=0;y<i.length;y++){const _=this.__charBounds[e][y],C=this.getCompleteStyleDeclaration(e,y);o.attributes.minFontSize=o.attributes.minFontSize?Math.min(o.attributes.minFontSize,C.fontSize):C.fontSize,u(y,m,_.kernedWidth,C),p(y,m,_.kernedWidth,"underline",C),p(y,m,_.kernedWidth,"linethrough",C),p(y,m,_.kernedWidth,"overline",C),m+=_.kernedWidth/2,o.chars.push({x:m,y:s/2,rotation:0,width:_.kernedWidth,height:s,offsetB:0,offsetD:0,offsetX:0,offsetY:0}),m+=_.kernedWidth/2}o.bounds={minX:0,minY:0,maxX:m,maxY:s,width:0,height:0}}return o.bounds?(o.bounds.width=o.bounds.maxX-o.bounds.minX,o.bounds.height=o.bounds.maxY-o.bounds.minY):o.bounds={minX:0,minY:0,maxX:0,maxY:s,width:0,height:s},o.chars.forEach(m=>{m.offsetX=m.x-o.bounds.minX,m.offsetY=m.y-o.bounds.minY,m.offsetD=Math.sqrt(m.offsetX**2+m.offsetY**2),m.offsetB=Math.atan2(m.offsetY,m.offsetX)}),o}_arcFill(t,e="",i=0,r=0,s=0,o=0,l=!1){if(!t||!e)return;const h=Math.max(0,i),u=Math.max(h,r);if(h===u||s===o)return;const d=Math.PI*2,g=Math.PI/1800;let p=l?o:s,m=l?s:o;for(;p<0;)p+=d;for(;m<0;)m+=d;for(;m<p;)m+=d;const y=Math.abs(m%d-p%d)<g;y&&(p=0,m=d),t.fillStyle=e,t.beginPath(),t.arc(0,0,u,p,m,!1),h?t.arc(0,0,h,m,p,!0):y||t.lineTo(0,0),t.fill()}_renderTextDecoration(t,e){const i=this.canvas?this.canvas.getRetinaScaling():1,r=this._getCurvedCharData(),{bounds:s,underlines:o,linethroughs:l,overlines:h}=r;let u=null;switch(e){case"underline":u=o;break;case"linethrough":u=l;break;case"overline":u=h;break}if(u&&u.length&&s){t.save();const d=t.fillStyle,{curved:g,lineW:p,lineH:m,minFontSize:y}=r.attributes,_=y/15,C=this.angle*(Math.PI/180);if(g){t.save(),t.translate(-s.width/2,-s.height/2);let{circleCenter:b={x:0,y:0},circleRadius:x=0,activeBeta:T=0,directionFactor:O=1}=r.attributes;const E=this.scaleX<0?1:0,V=this.scaleY<0?1:0,A=Math.pow(-1,E+V),B=(b.x-s.minX)*this.scaleX,Y=(b.y-s.minY)*this.scaleY,J=Math.sqrt(B**2+Y**2),st=Math.atan2(Y,B)+C*A,ct=(Math.cos(st)*J+this.left)*i,ot=(Math.sin(st)*J+this.top)*i;this.scaleX*i,this.scaleY*i,t.save(),t.transform(1,0,0,1,ct,ot),t.rotate(C);const yt=-(Math.PI/2*O)-T/2,Tt=-(Math.PI/2*O)+T/2-yt;u.forEach(at=>{const pt=O<0?1-at.start:at.start,ft=O<0?1-at.end:at.end,Xt=Tt*pt+yt,It=Tt*ft+yt,zt=O<0?x+at.top+_:x-at.top,qt=zt-_;this._arcFill(t,at.color,qt,zt,Xt,It,O<0)}),t.restore(),t.restore()}else{t.save(),t.translate(-s.width/2,-s.height/2);let b=this.left*i,x=this.top*i;this.scaleX*i,this.scaleY*i,t.save(),t.transform(1,0,0,1,b,x),t.rotate(C),o.forEach(T=>{t.fillStyle=T.color,t.fillRect(T.start*p,m/2+T.top,(T.end-T.start)*p,_)}),t.restore(),t.restore()}t.restore(),t.fillStyle=d,this._removeShadow(t)}}_renderCharsCurved(t,e,i,r,s,o){if(o)return;const l=this.canvas?this.canvas.getRetinaScaling():1;this.debugCurve&&(e.lineWidth=1/this.scaleX);const h=e.getTransform(),u=this._getCurvedCharData(),{chars:d,bounds:g,attributes:p}=u;if(d&&g){e.save(),e.translate(-g.width/2,-g.height/2);let m=this.angle*(Math.PI/180);for(let y=0;y<d.length;y++){const _=d[y],C=(Math.cos(_.offsetB+m)*_.offsetD*this.scaleX+this.left)*l,b=(Math.sin(_.offsetB+m)*_.offsetD*this.scaleY+this.top)*l;this.scaleX*l,this.scaleY*l,e.save(),e.transform(1,0,0,1,C,b),e.rotate(_.rotation+m),this.debugCurve&&t==="fillText"&&e.strokeRect(-(_.width/2),-(_.height/2),_.width,_.height),this._renderChar(t,e,o,y,i[y],-(_.width/2),s),e.restore()}this.debugCurve&&t==="fillText"&&(e.setTransform(this.scaleX,0,0,this.scaleY,this.left,this.top),e.rotate(m),e.strokeRect(0,0,g.width,g.height)),e.restore()}e.setTransform(h)}_renderChars(t,e,i,r,s,o){var l=this.getHeightOfLine(o),h=this.textAlign.indexOf("justify")!==-1,u,d,g="",p,m=0,y;if(!h&&this.charSpacing===0&&this.isEmptyStyles(o),e.save(),s-=l*this._fontSizeFraction/this.lineHeight,this._renderCharsCurved(t,e,i,r,s,o),this.debugCurve){l=this.height;for(let _=0,C=i.length-1;_<=C;_++)y=!0,g+=i[_],p=this.__charBounds[o][_],m===0?(r+=p.kernedWidth-p.width,m+=p.width):m+=p.kernedWidth,h&&!y&&this._reSpaceAndTab.test(i[_])&&(y=!0),y||(u=u||this.getCompleteStyleDeclaration(o,_),d=this.getCompleteStyleDeclaration(o,_+1),y=this._hasStyleChanged(u,d)),y&&(this._renderChar(t,e,o,_,g,r,s,l),g="",u=d,r+=m,m=0)}e.restore()}}ht.setClass(Uh,"editorcurvedtext");ht.setClass(Uh,"editorCurvedText");ht.setClass(Uh,"EditorCurvedText");class Us extends Vi{static getDefaults(){return{...super.getDefaults(),objectCaching:!0,locked:!1,isUpperCase:!1}}constructor(t,e){super(t,e),this.generateCurveText(),this.on("scaling",this._onScaling.bind(this))}_onScaling(){const t=this.scaleX,e=Math.abs(t);this.scaleX=1,this.scaleY=1,this.width*=e,this.height*=e,this.set("fontSize",this.fontSize*e)}generateCurveText(){this.curvedText=new Uh("",{left:0,top:0,textAlign:"left",fontSize:60,fill:"rgb(0,0,0)",padding:10,debugMode:!1,debugCurve:!1}),this.curvedText.objectCaching=!0,this.curvedText.paintFirst="stroke",this.curvedText.noScaleCache=!1,this.curvedText.strokeWidth=0}enterEditing(t){this.isEditing||!this.editable||this.locked||(this.canvas&&(this.canvas.calcOffset(),this.canvas.textEditingManager.exitTextEditing()),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this.hiddenTextarea.value=this.text,this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._textBeforeEdit=this.text,this._tick(),this.fire("editing:entered",t?{e:t}:void 0),this._fireSelectionChanged(),this.canvas&&(this.canvas.fire("text:editing:entered",{target:this,e:t}),this.canvas.requestRenderAll()))}initDimensions(){if(this.initialized&&(this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&!this.hasCurved()&&this._set("width",this.dynamicMinWidth),this.textAlign.includes("justify")&&this.enlargeSpaces(),this.height=this.calcTextHeight(),this.hasCurvedText())){const t=this.getCurveAmount();this.curvedText._applyTextbox(this,t);const{bounds:e}=this.curvedText._getCurvedCharData();if(e){const i=this.angle*(Math.PI/180),r=(this.width-e.width)/2,s=this.left+r*Math.cos(i),o=this.top+r*Math.sin(i);this.left=s,this.top=o,this.width=e.width,this.height=e.height,this.setCoords()}}}getCurveAmount(){return!this.curved||!this.curved.enabled?0:this.curved.type==="circle"?1:(this.curved.degrees||0)/100}hasCurved(){return this.curved&&this.curved.enabled}hasCurvedText(){return this.curved&&this.curved.enabled&&this.curvedText}_shouldRenderCurvedText(){return this.hasCurvedText()&&!this.isEditing}render(t){if(this.hasCurved()){const e=this.getCurveAmount();this.curvedText._applyTextbox(this,e);const{bounds:i}=this.curvedText._getCurvedCharData();if(i){const r=this.angle*(Math.PI/180),s=(this.width-i.width)/2,o=this.left+s*Math.cos(r),l=this.top+s*Math.sin(r);this.left=o,this.top=l,this.width=i.width,this.height=i.height,this.setCoords()}}this.originalStroke=this.stroke,this.originalShadow=this.shadow,this.originalOuterGlow=this.outerGlow,this.hasCurvedText()&&this.isEditing&&(this.stroke="transparent",this.shadow=null,this.outerGlow=null,this.curvedText.stroke="transparent",this.curvedText.shadow=null,this.curvedText.outerGlow=null),this._renderOuterGlow(t)||super.render(t),this.stroke=this.originalStroke,this.shadow=this.originalShadow,this.outerGlow=this.originalOuterGlow,this.curvedText.stroke=this.originalStroke,this.curvedText.shadow=this.originalShadow,this.curvedText.outerGlow=this.originalOuterGlow}_render(t){if(!this.hasCurved()){super._render(t);return}this._shouldRenderCurvedText()?this.curvedText._render(t):(t.save(),t.globalAlpha=this.opacity/4,this.curvedText._render(t),t.restore(),this.initDimensions(),super._render(t))}_removeOuterGlow(t){this.outerGlow&&(t.shadowColor="",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0)}_renderOuterGlow(t){if(!this.outerGlow||!this.outerGlow.color||!this.outerGlow.blur||this.isNotVisible()||this.canvas&&this.canvas.skipOffscreen&&!this.group&&!this.isOnScreen()||!t.canvas.width||!t.canvas.height)return;if(!this._outerGlowCacheCtx){const d=$.createCanvasElement().getContext("2d");this._outerGlowCacheCtx=d}const e=this._outerGlowCacheCtx,i=e.canvas;i.width!==t.canvas.width||i.height!==t.canvas.height?(i.width=t.canvas.width,i.height=t.canvas.height):(e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,i.width,i.height));const r=this.stroke,s=this.shadow,o=this.opacity,l=this.objectCaching,h=this.fill;this.stroke=null,this.shadow=null,this.objectCaching=!1,this.opacity=1,this.fill=this.outerGlow.color,this.curvedText&&this.hasCurvedText()&&!this.isEditing&&(this.curvedText.stroke=null,this.curvedText.shadow=null,this.curvedText.objectCaching=!1,this.curvedText.opacity=1,this.curvedText.fill=this.outerGlow.color),e.save(),e.setTransform(t.getTransform());const u=[1.25,1.5,1.75,2];for(let d=0;d<u.length;d++)this._setOuterGlow(e,u[d]),super.render(e);return this.stroke=r,this.shadow=s,this.objectCaching=l,this.fill=h,this.curvedText&&this.hasCurvedText()&&!this.isEditing&&(this.curvedText.stroke=r,this.curvedText.shadow=s,this.curvedText.objectCaching=l,this.curvedText.fill=h),this._removeOuterGlow(e),super.render(e),e.restore(),this.opacity=o,this.curvedText&&this.hasCurvedText()&&!this.isEditing&&(this.curvedText.opacity=o),t.save(),this._setOpacity(t),t.setTransform(1,0,0,1,0,0),t.imageSmoothingEnabled=!0,t.drawImage(e.canvas,0,0),t.restore(),!0}_setOuterGlow(t,e=1){if(!this.outerGlow)return;const i=this.outerGlow,r=this.canvas,s=this.getCanvasRetinaScaling(),[o,,,l]=(r==null?void 0:r.viewportTransform)||fi,h=o*s,u=l*s,d=i.nonScaling?new I(1,1):this.getObjectScaling(),g=i.blur*Kt.browserShadowBlurConstant*(h+u)*(d.x+d.y)/4;t.shadowBlur=g/e,t.shadowColor=i.color,t.shadowOffsetX=0,t.shadowOffsetY=0}_getTransformedDimensions(t={},e=!0){const i={scaleX:this.scaleX,scaleY:this.scaleY,skewX:this.skewX,skewY:this.skewY,width:this.width,height:this.height,strokeWidth:this.strokeWidth,...t},r=i.strokeWidth,s=i.width,o=i.height,l=i.skewX===0&&i.skewY===0;let h;return l?h=new I(s*i.scaleX,o*i.scaleY):h=$.sizeAfterTransform(s,o,i),e?h:h.scalarAdd(r)}_splitText(){let t=this.text;this.isUpperCase&&(t=this.text.toUpperCase());const e=this._splitTextIntoLines(t);return this.textLines=e.lines,this._textLines=e.graphemeLines,this._unwrappedTextLines=e._unwrappedLines,this._text=e.graphemeText,e}_set(t,e){return["isUpperCase"].includes(t)&&(this.dirty=!0,this._forceClearCache=!0),super._set(t,e)}toObject(t=[]){return super.toObject(["curved",...t])}static fromObject(t){return this._fromObject({...t,styles:$.stylesFromArray(t.styles||{},t.text)},{extraParam:"text"})}}At(Us,"type","EditorTextbox");Object.defineProperty(Us.prototype,"curved",{get(){return this.__curved},set(n){this.__curved=n,n!=null&&n.enabled?this.setControlsVisibility({mr:!1,ml:!1}):this.setControlsVisibility({mr:!0,ml:!0})}});ht.setClass(Us,"editortextbox");ht.setClass(Us,"editorTextbox");ht.setClass(Us,"EditorTextbox");function hA(n,t){if(t){const{target:e}=t;return e._onDoubleClick&&e._onDoubleClick(),!0}return!1}const uA="M21,3H3C2,3 1,4 1,5V19A2,2 0 0,0 3,21H21C22,21 23,20 23,19V5C23,4 22,3 21,3M5,17L8.5,12.5L11,15.5L14.5,11L19,17H5Z",dA=new Wn(uA);function fA(n,t,e,i,r){n.save(),n.translate(t,e);const s=r.getTotalAngle();n.rotate($.degreesToRadians(s)),dA._renderPathCommands(n),n.fillStyle="#3f9eff",n.fill(),n.restore()}const xs=Bb(),gA=new hi({x:0,y:-.5,offsetY:-60,cursorStyle:"pointer",mouseDownHandler:hA,render:fA}),pA={tl:xs.tl,tr:xs.tr,bl:xs.bl,br:xs.br,mtr:xs.mtr,ml:xs.ml,mr:xs.mr,e:gA},mA=n=>JSON.parse(JSON.stringify(n));function vA(n,t,e,i){var r=n/e,s=t/i;return Math.max(r,s)}class Wo extends Us{constructor(t,e){super(t,e),this.scaleFactor=1,this.controls=pA,this.setClipTo(!0),this.on("rotating",this._onRotating.bind(this)),this.on("mousedown",this._onMousedown.bind(this))}_onMousedown(){this.previousImageViewport=Object.assign({},this.imageViewport),this.previousViewSize={width:this.width,height:this.height};const t=this.clippingPath.getScaledWidth(),e=this.clippingPath.getScaledHeight();this.width>=this.height&&this.width/this.height>=t/e?(this.isRatioW=!0,this.isRatioH=!1):(this.isRatioW=!1,this.isRatioH=!0)}_onRotating(){this.editingAngle=this.angle||0}initDimensions(){var t,e,i,r;const{height:s,width:o}=this;if(!this.initialized)return;this.isEditing&&this.initDelayedCursor(),this._clearCache(),this.dynamicMinWidth=0,this._styleMap=this._generateStyleMap(this._splitText()),this.dynamicMinWidth>this.width&&this._set("width",this.dynamicMinWidth),this.textAlign.includes("justify")&&this.enlargeSpaces();const{originX:l,originY:h,scaledWidth:u,scaledHeight:d}=this._getOrigin();if(this.height=this.calcTextHeight(),this.clippingPath&&(Math.abs(s-this.height)>=1||Math.abs(o-this.width)>=1)&&this.clippingPath&&this.clipPath&&!this.isChangeWidth){const{scaleX:g,scaleY:p}=this._calcImageScale(l,h,u,d);(t=this.clippingPath)==null||t.set("scaleX",g),(e=this.clippingPath)==null||e.set("scaleY",p),(i=this.clipPath)==null||i.set("scaleX",g),(r=this.clipPath)==null||r.set("scaleY",p),this._updateImageViewportScale(u,d)}}_getOrigin(){const t=this,e=t.getRelativeCenterPoint(),i=$.degreesToRadians(-t.clippingPath.angle),r=new I(t.clippingPath.left,t.clippingPath.top).rotate(i,e),s=t.clippingPath.getScaledWidth(),o=t.clippingPath.getScaledHeight(),l=Math.abs((e.x-r.x)/s),h=Math.abs((e.y-r.y)/o),u=Math.min(l,1-l),d=Math.min(h,1-h);return{originX:u,originY:d,scaledWidth:s,scaledHeight:o}}_getResizeAsImage(){const t=this;return t.scaleX/t.scaleY!==1}_calcImageScale(t,e,i,r){const s=this,o=s.imageAngle||0;s.rotate(-o),s.setCoords();const l=s.getBoundingRect();s.rotate(s.editingAngle||0),s.setCoords();const h=l.width/(i*t*2),u=l.height/(r*e*2);let d,g;if(s._getResizeAsImage()||o!=0){const p=Math.max(h,u);d=p*s.clippingPath.scaleX,g=p*s.clippingPath.scaleY}else s.width>=s.height&&s.width/s.height>=i/r?(d=h*s.clippingPath.scaleX,g=h*s.clippingPath.scaleY):(d=u*s.clippingPath.scaleX,g=u*s.clippingPath.scaleY);return{scaleX:d,scaleY:g}}_updateImageViewportScale(t,e){const i=this;if(!i.imageViewport)return;i.width>=i.height&&i.width/i.height>=t/e?(!i.isRatioW||!i.isMoveW)&&(i.isRatioW=!0,i.isRatioH=!1,i.isMoveH=!1,i.isMoveW=!1,i._caculateBounds(i.clippingPath._element),i.previousImageViewport=Object.assign({},i.imageViewport)):(!i.isRatioH||!i.isMoveH)&&(i.isRatioH=!0,i.isRatioW=!1,i.isMoveH=!1,i.isMoveW=!1,i._caculateBounds(i.clippingPath._element),i.previousImageViewport=Object.assign({},i.imageViewport)),i._updateImagePosition();const r=i.initialImageSize.width/i.initialImageSize.height,s=i.width,o=i.height,l=i.previousImageViewport||i.imageViewport||{x:0,y:0,width:1,height:1},h=i.previousViewSize||{width:i.width,height:i.height},u=1+(i.width-h.width)/h.width,d=l.width*u;if(i.imageViewport.x+d>1){const g=1-i.imageViewport.x,p=o/(s/g/r),m=(l.height-p)/2;i.imageViewport.y=$.capValue(0,l.y+m,1),i.imageViewport.height=$.capValue(0,p,1-i.imageViewport.y),i.imageViewport.width=g}else i.imageViewport.width=d;i._updateImagePosition()}_updateImageViewportPositionScale(){var t,e;const i=this;let r,s;const o=i.getCenterPoint();r=$.rotatePoint(new I(i.clippingPath.left,i.clippingPath.top),o,$.degreesToRadians(-i.clippingPath.angle));const l=r.x,h=r.y;i.rotate(-i.imageAngle||0),i.setCoords();const u=i.getBoundingRect();i.rotate(i.editingAngle||0),i.setCoords();const d=u.left-(i.clippingPath.getScaledWidth()-u.width),g=u.top-(i.clippingPath.getScaledHeight()-u.height),p=$.capValue(d,l,u.left),m=$.capValue(g,h,u.top);s=$.rotatePoint(new I(p,m),o,$.degreesToRadians(i.clippingPath.angle)),i.clippingPath.set("left",s.x),i.clippingPath.set("top",s.y),(t=i.clipPath)==null||t.set("left",s.x),(e=i.clipPath)==null||e.set("top",s.y);const y=i.getCenterPoint(),_=i.getTotalAngle();r=i.getXY();const C=$.rotatePoint(new I(r.x,r.y),y,$.degreesToRadians(-(_||0))),b=i.clippingPath.getScaledWidth(),x=i.clippingPath.getScaledHeight();s=$.rotatePoint(new I(i.clippingPath.left,i.clippingPath.top),y,$.degreesToRadians(-i.clippingPath.angle));const T=(C.x-s.x)/b,O=(C.y-s.y)/x;i.imageViewport&&(i.imageViewport.x=T,i.imageViewport.y=O)}_updateImagePosition(){if(this.clippingPath&&this.clipPath&&this.imageViewport){const t=this.getCenterPoint(),e=this.getTotalAngle(),i=this.getXY(),r=new I(i.x,i.y).rotate($.degreesToRadians(-(e||0)),t),s=this.clippingPath.getScaledWidth(),o=this.clippingPath.getScaledHeight();let l=r.x-this.imageViewport.x*s,h=r.y-this.imageViewport.y*o;const u=e+(this.imageAngle||0),d=new I(l,h).rotate($.degreesToRadians(u),t);this.clippingPath.setPositionByOrigin(new I(d.x,d.y),"left","top"),this.clipPath.setPositionByOrigin(new I(d.x,d.y),"left","top"),this.clippingPath.angle=u,this.clipPath.angle=u}}setClipTo(t,e){this.clippingPath&&(this.clipPath=Re.cloneDeep(this.clippingPath),this.clipPath&&(this.clipPath.absolutePositioned=!0,this._updateClipSize(t,e)))}_updateCenterImageViewport(){if(!this.imageViewport)return;const t=this.getScaledWidth(),e=this.getScaledHeight(),i=t/this.imageViewport.width,r=e/this.imageViewport.height,s=(i-this.getScaledWidth())/2/i,o=(r-this.getScaledHeight())/2/r;this.imageViewport.x=s,this.imageViewport.y=o}_updateClipSize(t,e){const i=this.clipPath;if(i&&t){if(this.imageViewport&&!e){const E=this.getRelativeCenterPoint(),V=this.clippingPath.getScaledWidth(),A=this.clippingPath.getScaledHeight(),B=new I(this.left,this.top).rotate($.degreesToRadians(-(this.angle||0)),E),Y={x:B.x,y:B.y,width:this.width,height:this.height},J=new I(Y.x,Y.y),st=J.x-this.imageViewport.x*V,ct=J.y-this.imageViewport.y*A,ot=(this.angle||0)+(this.imageAngle||0),yt=$.rotatePoint(new I(st,ct),E,$.degreesToRadians(ot));this.clippingPath.setPositionByOrigin(new I(yt.x,yt.y),"left","top"),this.clippingPath.angle=ot,i.setPositionByOrigin(new I(yt.x,yt.y),"left","top"),i.angle=ot,i.dirty=!0}else{if(this.hasCurved()){const Zt=this.getCurveAmount();this.curvedText._applyTextbox(this,Zt);const{bounds:ie}=this.curvedText._getCurvedCharData();if(ie){const me=this.angle*(Math.PI/180),q=(this.width-ie.width)/2,_t=this.left+q*Math.cos(me),ut=this.top+q*Math.sin(me);this.left=_t,this.top=ut,this.width=ie.width,this.height=ie.height,this.setCoords()}}const E=this.getCenterPoint(),V=this.getScaledWidth()/this.clippingPath.width||1,A=this.getScaledHeight()/this.clippingPath.height||1,B=Math.max(V,A);i.scale(B),this.clippingPath.scale(B);const Y=this.clippingPath.getScaledWidth(),J=this.clippingPath.getScaledHeight(),st=B*this.clippingPath.width,ct=B*this.clippingPath.height,ot=(st-this.getScaledWidth())/2/st,yt=(ct-this.getScaledHeight())/2/ct,Tt=this.getScaledWidth(),at=this.getScaledHeight();this.initialImageSize={width:st,height:ct},this.initialViewSize={width:this.width,height:this.height},this.imageViewport={x:ot,y:yt,width:Tt/st,height:at/ct};const pt=$.rotatePoint(new I(this.left,this.top),E,$.degreesToRadians(-(this.angle||0))),ft={x:pt.x,y:pt.y,width:this.width,height:this.height},Xt=new I(ft.x,ft.y),It=Xt.x-ot*Y,zt=Xt.y-yt*J,qt=(this.angle||0)+(this.imageAngle||0),ue=$.rotatePoint(new I(It,zt),E,$.degreesToRadians(qt));i.setPositionByOrigin(new I(ue.x,ue.y),"left","top"),i.angle=qt,i.dirty=!0,this.clippingPath.setPositionByOrigin(new I(ue.x,ue.y),"left","top"),this.clippingPath.angle=qt}this.editingScaleX=this.clippingPath.scaleX,this.editingScaleY=this.clippingPath.scaleY,this.editingAngle=this.angle||0;const r=this.getRelativeCenterPoint(),s=new I(this.clippingPath.left,this.clippingPath.top),o=$.rotatePoint(s,r,$.degreesToRadians(this.getClipAngle()-this.clippingPath.angle));this.clippingPath.set("left",o.x),this.clippingPath.set("top",o.y),this.clippingPath.set("angle",this.getClipAngle());const l=this.clippingPath.getScaledWidth(),h=this.clippingPath.getScaledHeight();this.rotate(-this.imageAngle||0),this.setCoords();const u=this.getBoundingRect();this.rotate(this.editingAngle||0),this.setCoords();const d=$.rotatePoint(new I(this.clippingPath.left,this.clippingPath.top),r,$.degreesToRadians(-this.clippingPath.angle)),g=Math.abs((r.x-d.x)/l),p=Math.abs((r.y-d.y)/h),m=Math.min(g,1-g),y=Math.min(p,1-p),_=u.width/(l*m*2),C=u.height/(h*y*2),b=Math.max(_,C)*this.clippingPath.scaleX,x=Math.max(_,C)*this.clippingPath.scaleY,T=this.originX,O=this.originY;this.originX=g,this.originY=p,this._setPositionByChangeOrigin(new I(this.clippingPath.left,this.clippingPath.top),T,O,g,p),(b>this.editingScaleX||x>this.editingScaleY)&&(this.clippingPath.scaleX=b,this.clippingPath.scaleY=x,this.clippingPath.setCoords(),this.clipPath&&(this.clipPath.scaleX=b,this.clipPath.scaleY=x,this.clipPath.setCoords())),this.originX=T,this.originY=O,this._setPositionByChangeOrigin(new I(this.clippingPath.left,this.clippingPath.top),g,p,T,O),this.clippingPath.setCoords()}}_setShadow(t){this.isCliping||super._setShadow(t)}_renderTextStroke(t){this.isCliping||super._renderTextStroke(t)}drawObject(t,e){const i=this.fill,r=this.stroke,s=this.shadow;e?(this.fill="black",this.stroke="",this.shadow=null,this._setClippingProperties(t)):this._renderBackground(t),this._render(t),this.fill=i,this.stroke=r,this.curvedText.stroke=r,this.shadow=s}_render(t){this.isCliping&&(this.curvedText.stroke=""),super._render(t),this._updateImagePosition(),this._renderClippingText(t)}_renderClippingText(t){if(!this.clippingPath||this.isNotVisible())return;this._cacheClippingPathCanvas||(this._cacheClippingPathCanvas=$.createCanvasElement());const e=this._cacheClippingPathCanvas,i=e.getContext("2d");i.save(),e.width!==t.canvas.width||e.height!==t.canvas.height?(e.width=t.canvas.width,e.height=t.canvas.height):(i.setTransform(1,0,0,1,0,0),i.clearRect(0,0,e.width,e.height));const r=t.getTransform();i.setTransform(r),i.save(),this.stroke="",this.curvedText.stroke="",super._render(i),i.restore(),i.save(),this._drawClipPath(i,this.clipPath),i.restore(),t.save(),t.setTransform(1,0,0,1,0,0),t.drawImage(e,0,0,e.width,e.height),t.restore(),i.restore()}_drawClipPath(t,e){if(!e)return;const i=e.scaleX,r=e.scaleY;(this.scaleX>1||this.scaleY>1)&&(e.scaleX*=this.scaleX,e.scaleY*=this.scaleY),e.canvas=this.canvas,e.shouldCache(),e._transformDone=!0,e.renderCache({forClipping:!0}),e.scaleX=i,e.scaleY=r,this.drawClipPathOnCache(t,e)}drawClipPathOnCache(t,e){if(t.save(),t.globalCompositeOperation="source-atop",e.absolutePositioned){var i=$.invertTransform(this.calcTransformMatrix());t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}e.transform(t),t.scale(1/e.zoomX,1/e.zoomY),t.drawImage(e._cacheCanvas,-e.cacheTranslationX,-e.cacheTranslationY),t.restore()}_onDoubleClick(){var t;this.group?(t=this.canvas)==null||t.fire(ui.FTIMAGE_SHOW_CLIP,{object:this,clipCoords:Object.assign({},this.aCoords,{left:this.left,top:this.top,width:this.getScaledWidth(),height:this.getScaledHeight(),angle:this.angle,clipPath:this._clipExtraData(),centerPoint:this.getCenterPoint()})}):this.isCliping?this.closeClipBounds(!0):this.showClipBounds()}closeClipBounds(t){var e,i,r,s;this.dirty=!0;var o=this.getOriginalRect();if(o&&this.isCliping&&this.imageViewport){this.clipChild?this.clipChild.getCenterPoint():this.getCenterPoint(),!t&&this.clipChild&&(this.clipChild.setOptions(this.clipChildState),this.clipChild.setCoords());var l=this.getPreviousCenterPoint();if(this.getOriginClipInfo().scaleX,t){var h=this.clippingPath.getScaledWidth(),u=this.clippingPath.getScaledHeight(),d=$.degreesToRadians(-this.clippingPath.angle),g=new I(this.clippingPath.left,this.clippingPath.top).rotate(d,l),p=(o.x-g.x)/h,m=(o.y-g.y)/u;this.imageViewport.x=p,this.imageViewport.y=m,this.imageViewport.width=this.getClipArea().width/h,this.imageViewport.height=this.getClipArea().height/u}else this.imageViewport=this.previousImageViewport;this.clipChild.clipParent=null,(e=this.canvas)==null||e.remove(this.clipChild),this.clipChild=null,this.selectable=!0,this.evented=!0,this.hasControls=!0,this.clippingPath.clippingParent=null,this.onClipChanged(!1,t),(i=this.canvas)==null||i.setActiveObject(this),(r=this.canvas)==null||r.remove(this.clippingPath),(s=this.canvas)==null||s.fire(ui.FTIMAGE_CLOSE_CLIP,{object:this})}}getOriginClipInfo(){return this.clipChild}getOriginalRect(){const t=this.clipChild;if(t){const e=t.getCenterPoint(),i=$.rotatePoint(new I(t.left,t.top),e,$.degreesToRadians(-(t.angle||0)));return{x:i.x,y:i.y,width:t.width,height:t.height}}return null}showClipBounds(){var t,e,i,r;if(this.clipPath&&!this.isCliping&&this.imageViewport){this.clipChild=new yi({width:this.width,height:this.height,left:this.left,top:this.top,angle:this.angle||0,scaleX:this.scaleX,scaleY:this.scaleY,fill:"#00000000",centeredRotation:!0,excludeFromExport:!0,changeSizeWhenScaleXY:!0,hasControls:!1}),this.clipChild.clipParent=this,this.clippingPath.setControlsVisibility({mt:!1,mb:!1,ml:!1,mr:!1}),this.editingAngle=this.angle||0;const s=this.calcACoords(),o=this.getCenterPoint();this.editingScale=this.clippingPath.scaleX,this.editingScaleX=this.clippingPath.scaleX,this.editingScaleY=this.clippingPath.scaleY;const l=this.clippingPath.getScaledWidth(),h=this.clippingPath.getScaledHeight(),u=this.getOriginalRect(),d=new I(u.x,u.y);let g=d.x-this.imageViewport.x*l,p=d.y-this.imageViewport.y*h;const m=this.angle||0,y=m+(this.imageAngle||0),_=$.rotatePoint(new I(g,p),o,$.degreesToRadians(y));this.clippingPath.left=_.x,this.clippingPath.top=_.y,this.clipPath.left=_.x,this.clipPath.top=_.y,this.previousImageViewport=Object.assign({},this.imageViewport),this.imageViewport.x=0,this.imageViewport.y=0,this.imageViewport.width=1,this.imageViewport.height=1,this.onClipChanged(!0),this.imageAngle&&(this.clippingPath.angle=y),(t=this.canvas)==null||t.fire(ui.FTIMAGE_SHOW_CLIP,{object:this,clipCoords:Object.assign({},s,{left:u.x,top:u.y,width:this.getClipArea().width,height:this.getClipArea().height,angle:m,flipX:this.flipX,flipY:this.flipY,centerPoint:o,clipPath:this._clipExtraData()})}),this.selectable=!1,this.evented=!1,this.hasControls=!1,this.clippingPath.clippingParent=this,(e=this.canvas)==null||e.add(this.clippingPath),(i=this.canvas)==null||i.add(this.clipChild),(r=this.canvas)==null||r.setActiveObject(this.clippingPath),this.clippingPath.on("moving",this._onClippingPathMoving.bind(this)),this.clippingPath.on("mousedown",this._onClippingPathMousedown.bind(this)),this.clippingPath.on("scaling",this._onClippingPathScaling.bind(this))}}onClipChanged(t,e){this.isCliping=t,t?this.clipPath=void 0:this.clippingPath&&this.setClipTo()}getClipArea(){const t=this.clipChild;return{width:t?t.getScaledWidth():0,height:t?t.getScaledHeight():0}}_clipExtraData(){return this||void 0}_onClippingPathMoving(){this.dirty=!0;const t=this.getOriginalRect();this.isCliping&&t&&this._adjustPositionV2()}_adjustPositionV2(){const t=this.getPreviousCenterPoint(),e=$.rotatePoint(new I(this.clippingPath.left,this.clippingPath.top),t,$.degreesToRadians(-this.clippingPath.angle)),i=e.x,r=e.y;this.clipChild.rotate(-this.imageAngle||0),this.clipChild.setCoords();const s=this.clipChild.getBoundingRect();this.clipChild.rotate(this.editingAngle||0),this.clipChild.setCoords();const o=s.left-(this.clippingPath.getScaledWidth()-s.width),l=s.top-(this.clippingPath.getScaledHeight()-s.height),h=$.capValue(o,i,s.left),u=$.capValue(l,r,s.top);if(h!=i||u!=r){const d=$.rotatePoint(new I(h,u),t,$.degreesToRadians(this.clippingPath.angle));this.clippingPath.set("left",d.x),this.clippingPath.set("top",d.y);const g=this.clippingPath.getScaledWidth(),p=this.clippingPath.getScaledHeight();this.width>=this.height&&this.width/this.height>=g/p?(this.isMoveW=!0,this.isMoveH=!1):(this.isMoveW=!1,this.isMoveH=!0)}}getPreviousCenterPoint(){return this.clipChild&&this.clipChild.getCenterPoint()}_onClippingPathScaling(t){const{transform:e}=t,i=this.getOriginalRect();if(this.isCliping&&t&&t.transform&&i){if(this.clippingPath.scaleX<=this.minScale||this.clippingPath.scaleY<=this.minScale){const o=this.clippingPath.translateToOriginPoint(this.clippingPath.getCenterPoint(),e.originX,e.originY);this.clippingPath.scaleX=this.minScale,this.clippingPath.scaleY=this.minScale,this.clippingPath.setPositionByOrigin(o,e.originX,e.originY)}else this.editingScale=this.clippingPath.scaleX,this.editingScaleX=this.clippingPath.scaleX,this.editingScaleY=this.clippingPath.scaleY;const r=this.clippingPath.getScaledWidth(),s=this.clippingPath.getScaledHeight();this.width>=this.height&&this.width/this.height>=r/s?(this.isMoveW=!0,this.isMoveH=!1):(this.isMoveW=!1,this.isMoveH=!0)}}_onClippingPathMousedown(t){var e=t.transform,i=e&&e.corner,r=this.getOriginalRect(),s=this.getPreviousCenterPoint();if(r&&t&&t.transform){this.clipChild.rotate(-this.imageAngle||0),this.clipChild.setCoords();var o=this.clipChild.getBoundingRect();this.clipChild.rotate(this.editingAngle||0),this.clipChild.setCoords();var l=$.rotatePoint(new I(this.clippingPath.left,this.clippingPath.top),s,$.degreesToRadians(-this.clippingPath.angle)),h=0,u=0,d=this.clippingPath.width,g=this.clippingPath.height,p=this.clippingPath.getScaledWidth(),m=this.clippingPath.getScaledHeight(),y=o.left-l.x,_=o.top-l.y;i==="tl"?(h=(p-y)/d,u=(m-_)/g):i==="tr"?(h=(y+o.width)/d,u=(m-_)/g):i==="br"?(h=(y+o.width)/d,u=(_+o.height)/g):i==="bl"?(h=(p-y)/d,u=(_+o.height)/g):i==="mt"?(h=1/0,u=(m-_)/g):i==="mr"?(h=(y+o.width)/d,u=1/0):i==="mb"?(h=1/0,u=(_+o.height)/g):i==="ml"&&(h=(p-y)/d,u=1/0),this.minScale=Math.max(h,u),this.minScaleX=h,this.minScaleY=u}}updateClipAngle(t){const e=t.clipAngle-(this.editingAngle||0);this.imageAngle=e,this.isCliping&&this._adjustRotatePosition()}_adjustRotatePosition(){var t=this.clipChild.getRelativeCenterPoint(),e=new I(this.clippingPath.left,this.clippingPath.top),i=$.rotatePoint(e,t,$.degreesToRadians(this.getClipAngle()-this.clippingPath.angle));this.clippingPath.set("left",i.x),this.clippingPath.set("top",i.y),this.clippingPath.set("angle",this.getClipAngle());const r=this.clippingPath.getScaledWidth(),s=this.clippingPath.getScaledHeight();this.clipChild.rotate(-this.imageAngle||0),this.clipChild.setCoords();var o=this.clipChild.getBoundingRect();this.clipChild.rotate(this.editingAngle||0),this.clipChild.setCoords();var l=$.rotatePoint(new I(this.clippingPath.left,this.clippingPath.top),t,$.degreesToRadians(-this.clippingPath.angle)),h=Math.abs((t.x-l.x)/r),u=Math.abs((t.y-l.y)/s),d=Math.min(h,1-h),g=Math.min(u,1-u),p=o.width/(r*d*2),m=o.height/(s*g*2);Math.max(p,m)*this.clippingPath.scaleX;var y=Math.max(p,m)*this.clippingPath.scaleX,_=Math.max(p,m)*this.clippingPath.scaleY,C=this.originX,b=this.originY;this.originX=h,this.originY=u,this._setPositionByChangeOrigin(new I(this.clippingPath.left,this.clippingPath.top),C,b,h,u),(y>this.editingScaleX||_>this.editingScaleY)&&(this.clippingPath.scaleX=y,this.clippingPath.scaleY=_,this.clippingPath.setCoords(),this.clipPath&&(this.clipPath.scaleX=y,this.clipPath.scaleY=_,this.clipPath.setCoords())),this.originX=C,this.originY=b,this._setPositionByChangeOrigin(new I(this.clippingPath.left,this.clippingPath.top),h,u,C,b),this.clippingPath.setCoords()}_setPositionByChangeOrigin(t,e,i,r,s){var o,l,h=this.clippingPath.translateToGivenOrigin(t,e,i,r,s);this.clippingPath.angle&&(h=$.rotatePoint(h,t,$.degreesToRadians(this.clippingPath.angle))),this.clippingPath.set("left",h.x),this.clippingPath.set("top",h.y),(o=this.clipPath)==null||o.set("left",h.x),(l=this.clipPath)==null||l.set("top",h.y)}getClipAngle(){let t=this.editingAngle;return this.isCliping||(t=this.angle),(this.imageAngle||0)+(t||0)}updateClipReact(){var t;if(this.clipChild){const e=this.getOriginalRect();if(!e)return;const i=this.clipChild.calcACoords(),r=this.clipChild.getCenterPoint();(t=this.canvas)==null||t.fire(ui.FTIMAGE_SHOW_CLIP,{object:this,clipCoords:Object.assign({},i,{left:e.x,top:e.y,width:this.getClipArea().width,height:this.getClipArea().height,angle:this.clipChild.angle,flipX:this.flipX,flipY:this.flipY,centerPoint:r,clipPath:this._clipExtraData()}),isUpdate:!0})}}_caculateCanvasScale(t){if(!this.imageAngle||!this.imageViewport)return 1;let e=this.clippingPath.width,i=this.clippingPath.height;t&&(e=t.width,i=t.height);const r=new yi({width:e,height:i,left:0,top:0,originX:"center",originY:"center"});r.rotate(this.imageAngle),r.setCoords();const s=r.getBoundingRect().width,o=r.getBoundingRect().height,l=Math.max(s/e,o/i);return l>1?l:1}_caculateBounds(t){const e=this.getScaledWidth(),i=this.getScaledHeight(),r=t.naturalWidth||t.width,s=t.naturalHeight||t.height;this._caculateViewport1(e,i,r,s),this.setCoords()}_caculateViewport(t,e,i,r){const s=vA(t,e,i,r),o=s*i,l=s*r;this.initialImageSize={width:o,height:l},this.initialViewSize={width:this.width,height:this.height};const h=(o-t)/2,u=(l-e)/2;this.imageViewport={x:h/o,y:u/l,width:t/o,height:e/l}}_caculateViewport1(t,e,i,r){const s=i,o=r,l=0,h=0,u=Math.max(this.clippingPath.scaleX,this.clippingPath.scaleY),d=u*i,g=u*r;this.initialImageSize={width:d,height:g},this.initialViewSize={width:this.width,height:this.height};const p=u*s,m=u*o,y=(p-t)/2+l*u,_=(m-e)/2+h*u;this.imageViewport={x:y/d,y:_/g,width:t/d,height:e/g}}toObject(t=[]){return super.toObject(["minWidth","splitByGrapheme","clippingPath","imageViewport","imageAngle","previousImageViewport","initialImageSize",...t])}static _fromObject({type:t,...e},{extraParam:i,...r}={}){const s=e.curved;return delete e.curved,$.enlivenObjectEnlivables(mA(e),r).then(o=>{const l={...r,...o};if(l.curved=s,i){const{[i]:h,...u}=l,d={...u.originalImageObject};return Object.keys(d).length===0?new this(h,u):$.enlivenObjects([u.originalImageObject]).then(g=>(u.clippingPath=g[0],u.clippingPath.objectCaching=!0,new this(h,u)))}else{const h={...l.originalImageObject};return Object.keys(h).length===0?new this(l):$.enlivenObjects([l.originalImageObject]).then(u=>(l.clippingPath=u[0],l.clippingPath.objectCaching=!1,new this(l)))}})}static fromObject(t){return this._fromObject({...t,styles:$.stylesFromArray(t.styles||{},t.text)},{extraParam:"text"})}}At(Wo,"type","EditorClippingText");Object.defineProperty(Wo.prototype,"tileImageOption",{get(){return this.__tileImageOption},set(n){var t,e;this.__tileImageOption=n,this.clippingPath&&(this.clippingPath.set("isClippingText",this.tileImageOption.enabled),this.clippingPath.set("tileImageOption",this.tileImageOption),(t=this.clipPath)==null||t.set("isClippingText",this.tileImageOption.enabled),(e=this.clipPath)==null||e.set("tileImageOption",this.tileImageOption))}});Object.defineProperty(Wo.prototype,"flipX",{get(){return this.__flipX},set(n){this.__flipX=n,this.clippingPath&&this.clippingPath.set("flipX",this.flipX),this.clipPath&&this.clipPath.set("flipX",this.flipX)}});ht.setClass(Wo,"editorclippingtext");ht.setClass(Wo,"editorClippingText");ht.setClass(Wo,"EditorClippingText");function Xb(n){const t=vt(n);return[t,e=>{e instanceof Function?t.value=e(t.value):t.value=e}]}const[yA,_A]=Xb(),ni=()=>({canvas:yA,setCanvas:_A});function bA(){const{setCanvas:n}=ni(),t={preserveObjectStacking:!0,fireRightClick:!0,stopContextMenu:!0,perPixelTargetFind:!0,targetFindTolerance:10,controlsAboveOverlay:!0,allowTouchScrolling:!0},e=document.createElement("canvas"),i=Ch(new lA(e,t,{isMainCanvas:!0}));return n(i),i}const Gs=Xy("editorStore",{state:()=>({activeSidebarItem:{sidebarItemId:"",sidebarItemTitle:"",sidebarItemType:"",previousSidebarItemId:"",previousSidebarItemTitle:"",previousSidebarItemType:"",selectedCurrent:0},isActiveSidebar:!0,isActiveSidebarMobile:!0,isToggleSidebar:!0,isEffects:!1,isFontFamily:!1,wrapperEl:vt(),layout:"grid"}),getters:{getActiveSidebarItem:n=>n.activeSidebarItem,getIsActiveSidebar:n=>n.isActiveSidebar,getIsActiveSidebarMobile:n=>n.isActiveSidebarMobile,getIsToggleSidebar:n=>n.isToggleSidebar,getIsEffects:n=>n.isEffects,getIsFontFamily:n=>n.isFontFamily,getWrapperEl:n=>n.wrapperEl,getLayout:n=>n.layout},actions:{setActiveSidebarItem(n){this.activeSidebarItem=n},setIsActiveSidebar(n){this.isActiveSidebar=n},setIsActiveSidebarMobile(n){this.isActiveSidebarMobile=n},setIsToggleSidebar(n){this.isToggleSidebar=n},setIsEffects(n){this.isEffects=n},setIsFontFamily(n){this.isFontFamily=n},setWrapperEl(n){this.wrapperEl=n.value},setLayout(n){this.layout=n}}});class Hb{constructor(t,e,i){At(this,"depth"),At(this,"canvas"),At(this,"object"),At(this,"parentObjectId"),At(this,"newData"),At(this,"oldData"),At(this,"groupInfo"),this.object=t,this.canvas=t.canvas||ni().canvas.value,this.newData=e,this.oldData=i}execute(){}undo(){this._updatePage()}redo(){this._updatePage()}_updatePage(){console.log("_updatePage")}findObjectWithId(t){return this.canvas.findObjectWithId(t)}getName(){return""}}class Yb{constructor(){At(this,"commands"),this.commands=new Array}push(t){this.commands.push(t)}pop(){if(this.commands.length>0)return this.commands.pop()}shift(){if(this.commands.length>0)return this.commands.shift()}isEmpty(){return!this.commands||this.commands.length<=0}clear(){this.commands=[]}getLength(){return this.commands.length}}class wA extends Hb{constructor(t,e,i){super(t,e,i),At(this,"coordsProperties"),At(this,"excludeProperties"),this.coordsProperties=["left","top","scaleX","scaleY","angle"],this.excludeProperties=[]}execute(){const t=this;this.oldData||(this.oldData=this.object.getSavedState()),this.excludeProperties.forEach(e=>{delete t.oldData[e],delete t.newData[e]})}undo(){super.undo(),this._updateWithData(this.oldData)}redo(){super.redo(),this._updateWithData(this.newData)}_updateWithData(t){const e=this.findObjectWithId(this.object.objectId);e&&(e.isType("EditorClippingMask")||e.isType("EditorClippingText"))?(console.log(e.originalImageObject.src,"item.originalImageObject"),console.log(t.originalImageObject.src,"options")):(e.set(t),e.setCoords(),e.dirty=!0,this.object=e)}getName(){return"objectModify"}}const Cs=vt(new Yb),ua=vt(new Yb),Dc=vt(new Array),jg=()=>{const{canvas:n}=ni(),t=mt(()=>!Cs.value.isEmpty()),e=mt(()=>!ua.value.isEmpty()),i=()=>{const s=n.value;s&&s.on({})},r=(s,o)=>{const l=n.value;s&&l&&(l.requestRenderAll(),requestAnimationFrame(()=>{nn.dispatchEvent(en.THUMB_CHANGED,{layerThumbDirty:!0})}))};return{actionHistory:Dc,undoStack:Cs,redoStack:ua,canUndo:t,canRedo:e,init:i,execute:s=>{if(Cs.value.getLength()>=100){Cs.value.shift();return}Cs.value.push(s),s.forEach(o=>{o.execute(),Dc.value.push(o.getName())}),ua.value.clear(),r(s)},undo:()=>{const s=Cs.value.pop();if(s){for(let o=0;o<s.length;o++)s[o].undo();ua.value.push(s),s.forEach(o=>{Dc.value.push(o.getName()+" - undo")})}r(s)},redo:()=>{const s=ua.value.pop();if(s){for(let o=0;o<s.length;o++)s[o].redo();Cs.value.push(s),s.forEach(o=>{Dc.value.push(o.getName()+" - redo")})}r(s)}}},xA={width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function CA(n,t){return W(),Q("svg",xA,t[0]||(t[0]=[F("path",{d:"M11.875 10.208a.625.625 0 1 0 1.25 0v-3.75h3.75a.625.625 0 1 0 0-1.25h-3.75v-3.75a.625.625 0 1 0-1.25 0v3.75h-3.75a.625.625 0 0 0 0 1.25h3.75v3.75Z",fill:"currentColor"},null,-1),F("path",{d:"M6.015 3.333H5c-.92 0-1.667.746-1.667 1.667v10c0 .92.746 1.666 1.667 1.666h8.333c.92 0 1.667-.746 1.667-1.666v-2.151h-1.25v2.15c0 .23-.187.417-.417.417H5A.417.417 0 0 1 4.583 15V5c0-.23.187-.417.417-.417h1.015v-1.25Z",fill:"currentColor"},null,-1)]))}const SA={render:CA},TA={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function PA(n,t){return W(),Q("svg",TA,t[0]||(t[0]=[F("path",{fill:"currentColor","fill-rule":"evenodd",d:"M3.75 5.25h16.5a.75.75 0 1 1 0 1.5H3.75a.75.75 0 0 1 0-1.5zm4 4h8.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5zm-4 4h16.5a.75.75 0 1 1 0 1.5H3.75a.75.75 0 1 1 0-1.5zm4 4h8.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5z"},null,-1)]))}const OA={render:PA},EA={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"};function MA(n,t){return W(),Q("svg",EA,t[0]||(t[0]=[F("defs",null,[F("path",{id:"_1025355287__a",d:"M3.8 17.3h16.6c.9 0 .9 1.6-.1 1.5H3.8c-.8 0-.9-1.4 0-1.5zm0-8h16.6c.9 0 .9 1.6-.1 1.5H3.8c-.8 0-.9-1.4 0-1.5zm0 4h16.6c.9 0 .9 1.6-.1 1.5H3.8c-.8 0-.9-1.4 0-1.5zm0-8c5.5 0 11-.1 16.5 0 .9 0 .9 1.5-.1 1.5-5.5-.1-11 0-16.5-.1-.9 0-.9-1.4-.1-1.4Z"})],-1),F("use",{fill:"currentColor","xlink:href":"#_1025355287__a","fill-rule":"evenodd"},null,-1)]))}const AA={render:MA},kA={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"};function jA(n,t){return W(),Q("svg",kA,t[0]||(t[0]=[F("defs",null,[F("path",{id:"_310417673__a",d:"M3.75 5.25h16.5a.75.75 0 1 1 0 1.5H3.75a.75.75 0 0 1 0-1.5zm0 4h8.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5zm0 4h16.5a.75.75 0 1 1 0 1.5H3.75a.75.75 0 1 1 0-1.5zm0 4h8.5a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5z"})],-1),F("use",{fill:"currentColor","xlink:href":"#_310417673__a","fill-rule":"evenodd"},null,-1)]))}const DA={render:jA},IA={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function RA(n,t){return W(),Q("svg",IA,t[0]||(t[0]=[F("path",{fill:"currentColor","fill-rule":"evenodd",d:"M20.25 5.25a.75.75 0 1 1 0 1.5H3.75a.75.75 0 0 1 0-1.5h16.5zm0 4a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5zm0 4a.75.75 0 1 1 0 1.5H3.75a.75.75 0 1 1 0-1.5h16.5zm0 4a.75.75 0 1 1 0 1.5h-8.5a.75.75 0 1 1 0-1.5h8.5z"},null,-1)]))}const LA={render:RA},BA={viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function FA(n,t){return W(),Q("svg",BA,t[0]||(t[0]=[F("path",{d:"M4 10.1v2.83L12.93 4H10.1L4 10.1zm0-2.829L7.272 4H4V7.27zm0 8.487v2.828L18.586 4h-2.828L4 15.759zM20 13.9v-2.83L11.07 20h2.83l6.1-6.1zm0 2.828L16.729 20H20v-3.272zm0-8.486V5.414L5.414 20h2.828L20 8.243zM2 22V2h20v20H2z","fill-rule":"evenodd"},null,-1)]))}const zA={render:FA},VA={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function XA(n,t){return W(),Q("svg",VA,t[0]||(t[0]=[F("path",{fill:"currentColor","fill-rule":"evenodd",d:"M7.08 4.72h4.44c2.03 0 3.5.3 4.41.87.92.57 1.37 1.49 1.37 2.75 0 .85-.2 1.55-.6 2.1-.4.54-.93.87-1.6.98v.1c.91.2 1.56.58 1.96 1.13.4.56.6 1.3.6 2.2 0 1.31-.47 2.33-1.4 3.06A6.1 6.1 0 0 1 12.41 19H7.08V4.72zm3.03 5.66h1.75c.82 0 1.42-.13 1.79-.38.36-.26.55-.68.55-1.26 0-.55-.2-.94-.6-1.18a3.86 3.86 0 0 0-1.9-.36h-1.6v3.18zm0 2.4v3.72h1.97c.83 0 1.45-.16 1.84-.48.4-.32.6-.8.6-1.46 0-1.19-.85-1.78-2.54-1.78h-1.87z"},null,-1)]))}const HA={render:XA},YA={xmlns:"http://www.w3.org/2000/svg",version:"1.2",viewBox:"0 0 25 24",width:"25",height:"24",class:"brightness svg","aria-hidden":"true",focusable:"false"};function NA(n,t){return W(),Q("svg",YA,t[0]||(t[0]=[vl('<path class="a icon-active" d="m15.5 12.6h-6.4l2.3-3.3h1.9z"></path><path class="b icon-active__stroke" d="m9.3 12.4c0-1.7 1.4-3.1 3.1-3.1 1.7 0 3 1.4 3 3.1 0 1.6-1.3 3-3 3-1.7 0-3.1-1.4-3.1-3z"></path><path class="b icon-active__stroke" d="m20.9 3.5l-3.9 3.8"></path><path class="b icon-active__stroke" d="m24.4 12h-5.4"></path><path class="b icon-active__stroke" d="m20.9 20.5l-3.9-3.8"></path><path class="b icon-active__stroke" d="m12.4 24v-5.4"></path><path class="b icon-active__stroke" d="m3.9 20.5l3.8-3.8"></path><path class="b icon-active__stroke" d="m0.4 12h5.4"></path><path class="b icon-active__stroke" d="m3.9 3.5l3.8 3.8"></path><path class="b icon-active__stroke" d="m12.4 0v5.4"></path><path class="c icon-active" d="m9.3 12.2c0 0 0.3-2.4 2.5-2.9 2.3-0.6 0.4 2.4 0.4 2.4"></path><path class="a icon-active" d="m15.5 12.6c0 0 0.1-3-2.7-3.3z"></path>',12)]))}const WA={render:NA},UA={viewBox:"64 64 896 896",focusable:"false","data-icon":"clear",width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"};function GA(n,t){return W(),Q("svg",UA,[F("defs",null,[(W(),_i(tl("style")))]),t[0]||(t[0]=F("path",{d:"M899.1 869.6l-53-305.6H864c14.4 0 26-11.6 26-26V346c0-14.4-11.6-26-26-26H618V138c0-14.4-11.6-26-26-26H432c-14.4 0-26 11.6-26 26v182H160c-14.4 0-26 11.6-26 26v192c0 14.4 11.6 26 26 26h17.9l-53 305.6a25.95 25.95 0 0025.6 30.4h723c1.5 0 3-.1 4.4-.4a25.88 25.88 0 0021.2-30zM204 390h272V182h72v208h272v104H204V390zm468 440V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H416V674c0-4.4-3.6-8-8-8h-48c-4.4 0-8 3.6-8 8v156H202.8l45.1-260H776l45.1 260H672z"},null,-1))])}const qA={render:GA},ZA={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function $A(n,t){return W(),Q("svg",ZA,t[0]||(t[0]=[F("path",{fill:"currentColor",d:"M15 5.5V5a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v10c0 1.1.9 2 2 2h2.5v-1.5H5a.5.5 0 0 1-.5-.5V5c0-.28.22-.5.5-.5h8c.28 0 .5.22.5.5v.5H15zm-4 3a.5.5 0 0 0-.5.5v10c0 .28.22.5.5.5h8a.5.5 0 0 0 .5-.5V9a.5.5 0 0 0-.5-.5h-8zM11 7h8a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-8a2 2 0 0 1-2-2V9c0-1.1.9-2 2-2z"},null,-1)]))}const KA={render:$A},JA={xmlns:"http://www.w3.org/2000/svg",width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",class:"injected-svg","data-src":"https://static.create.vista.com/images/textEffects/curved.svg","xmlns:xlink":"http://www.w3.org/1999/xlink"};function QA(n,t){return W(),Q("svg",JA,t[0]||(t[0]=[F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M17.04 5.713A1.2 1.2 0 0118.136 5h3.137a1.2 1.2 0 011.096.713l7.102 15.979a1.2 1.2 0 01-1.096 1.687h-1.843a1.2 1.2 0 01-1.097-.713l-1.74-3.913h-7.982l-1.739 3.913a1.2 1.2 0 01-1.097.713h-1.843a1.2 1.2 0 01-1.096-1.687l7.102-15.98zm.007 10.04h5.315l-2.657-5.98-2.658 5.98z",fill:"#000"},null,-1),F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.295 29.75c1.513-1.144 3.558-2.124 6.617-2.124 3.344 0 5.475 1.17 7.026 2.445a2.836 2.836 0 101.376-1.458c-1.778-1.487-4.362-2.987-8.402-2.987-3.9 0-6.444 1.4-8.215 2.834a2.836 2.836 0 101.598 1.289z",fill:"#000"},null,-1)]))}const tk={render:QA},ek={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function ik(n,t){return W(),Q("svg",ek,t[0]||(t[0]=[F("path",{fill:"currentColor",d:"M8 5a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3h4.25a.75.75 0 1 1 0 1.5H19V18a3 3 0 0 1-3 3H8a3 3 0 0 1-3-3V6.5H3.75a.75.75 0 0 1 0-1.5H8zM6.5 6.5V18c0 .83.67 1.5 1.5 1.5h8c.83 0 1.5-.67 1.5-1.5V6.5h-11zm3-1.5h5c0-.83-.67-1.5-1.5-1.5h-2c-.83 0-1.5.67-1.5 1.5zm-.25 4h1.5v8h-1.5V9zm4 0h1.5v8h-1.5V9z"},null,-1)]))}const nk={render:ik},rk={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function sk(n,t){return W(),Q("svg",rk,t[0]||(t[0]=[F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M5 3h8a2 2 0 0 1 2 2v.5h-1.5V5a.5.5 0 0 0-.5-.5H5a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h2.5V17H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2Zm6 5.5a.5.5 0 0 0-.5.5v10a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5V9a.5.5 0 0 0-.5-.5h-8ZM19 7h-8a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2Z",fill:"currentColor"},null,-1),F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M15 11a.75.75 0 0 0-.75.75v1.5h-1.5a.75.75 0 0 0 0 1.5h1.5v1.5a.75.75 0 0 0 1.5 0v-1.5h1.5a.75.75 0 0 0 0-1.5h-1.5v-1.5A.75.75 0 0 0 15 11Z",fill:"currentColor"},null,-1)]))}const ok={render:sk},ak={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function lk(n,t){return W(),Q("svg",ak,t[0]||(t[0]=[F("path",{fill:"none",stroke:"currentColor","stroke-width":"1.5","stroke-linejoin":"round",d:"m6.5 4.25.75-.75a2.121 2.121 0 0 1 3 3L6.5 10.25 2.75 6.5a2.121 2.121 0 0 1 3-3l.75.75zm7 6 4-7.5 4 7.5h-8zm-10.75 3.5h7.5v7.5h-7.5v-7.5zm14.75-.25a4 4 0 1 0 0 8 4 4 0 0 0 0-8z"},null,-1)]))}const ck={render:lk},hk={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"};function uk(n,t){return W(),Q("svg",hk,t[0]||(t[0]=[F("title",null,"eyedropper",-1),F("path",{d:"M19.35,11.72L17.22,13.85L15.81,12.43L8.1,20.14L3.5,22L2,20.5L3.86,15.9L11.57,8.19L10.15,6.78L12.28,4.65L19.35,11.72M16.76,3C17.93,1.83 19.83,1.83 21,3C22.17,4.17 22.17,6.07 21,7.24L19.08,9.16L14.84,4.92L16.76,3M5.56,17.03L4.5,19.5L6.97,18.44L14.4,11L13,9.6L5.56,17.03Z"},null,-1)]))}const dk={render:uk},fk={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function gk(n,t){return W(),Q("svg",fk,t[0]||(t[0]=[F("path",{fill:"currentColor",d:"M5.5 4h4c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-4A1.5 1.5 0 0 1 4 9.5v-4C4 4.67 4.67 4 5.5 4zm9 0h4c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-4A1.5 1.5 0 0 1 13 9.5v-4c0-.83.67-1.5 1.5-1.5zm0 9h4c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-4a1.5 1.5 0 0 1-1.5-1.5v-4c0-.83.67-1.5 1.5-1.5zm-9 0h4c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-4A1.5 1.5 0 0 1 4 18.5v-4c0-.83.67-1.5 1.5-1.5zm0-7.5v4h4v-4h-4zm9 0v4h4v-4h-4zm0 9v4h4v-4h-4zm-9 0v4h4v-4h-4z"},null,-1)]))}const pk={render:gk},mk={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function vk(n,t){return W(),Q("svg",mk,t[0]||(t[0]=[F("path",{fill:"currentColor",d:"M20 17.05A2.5 2.5 0 1 1 17.05 20H6.95A2.5 2.5 0 1 1 4 17.05V6.95A2.5 2.5 0 1 1 6.95 4h10.1A2.5 2.5 0 1 1 20 6.95v10.1zm-1.5.16V6.79a2.5 2.5 0 0 1-1.3-1.29H6.8a2.5 2.5 0 0 1-1.3 1.3v10.4a2.5 2.5 0 0 1 1.3 1.3h10.4a2.5 2.5 0 0 1 1.3-1.3zM4.5 5.5a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm15-15a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm0 15a1 1 0 1 0 0-2 1 1 0 0 0 0 2zm-9-6.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7zm0-1.5a2 2 0 1 0 0-4 2 2 0 0 0 0 4zm4.75-2.5h1.5v5c0 .97-.78 1.75-1.75 1.75h-5v-1.5h5c.14 0 .25-.11.25-.25v-5z"},null,-1)]))}const yk={render:vk},_k={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function bk(n,t){return W(),Q("svg",_k,t[0]||(t[0]=[F("path",{d:"m2.325 10.665 1.67 1.99a8.75 8.75 0 1 1 5.543 7.255.75.75 0 1 1 .54-1.399 7.25 7.25 0 1 0-4.434-5.084l2.668-2.238a.75.75 0 0 1 .964 1.149l-3.064 2.571a1.75 1.75 0 0 1-2.465-.216L1.175 11.63a.75.75 0 0 1 1.15-.964Z",fill:"currentColor"},null,-1),F("path",{d:"M13.45 7.75a.75.75 0 0 0-1.5 0v5c0 .285.16.545.415.672l3 1.5a.75.75 0 1 0 .67-1.342l-2.585-1.293V7.75Z",fill:"currentColor"},null,-1)]))}const wk={render:bk},xk={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"};function Ck(n,t){return W(),Q("svg",xk,t[0]||(t[0]=[F("path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"},null,-1),F("polyline",{points:"9 22 9 12 15 12 15 22"},null,-1)]))}const Sk={render:Ck},Tk={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function Pk(n,t){return W(),Q("svg",Tk,t[0]||(t[0]=[F("path",{fill:"currentColor","fill-rule":"evenodd",d:"m14.73 6.5-3.67 11H14l-.3 1.5H6l.3-1.5h2.81l3.68-11H10l.3-1.5H18l-.3 1.5h-2.97z"},null,-1)]))}const Ok={render:Pk},Ek={width:"20",height:"20",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Mk(n,t){return W(),Q("svg",Ek,t[0]||(t[0]=[F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M8.976 13.582 12.31 2.75a.625.625 0 1 0-1.195-.368l-.68 2.212a9.364 9.364 0 0 0-.435-.01c-3.015 0-5.775 1.441-8.28 4.324a1.667 1.667 0 0 0 0 2.186c1.717 1.976 3.554 3.275 5.512 3.896l-.525 1.705a.625.625 0 1 0 1.195.368l.547-1.776h.002a.628.628 0 0 1 .014-.053l.355-1.154.134-.436a.636.636 0 0 0 .022-.06zm-1.376.212c-1.727-.55-3.367-1.714-4.937-3.52a.417.417 0 0 1 0-.547C4.944 7.102 7.373 5.833 10 5.833h.05a.617.617 0 0 0-.01.028l-.25.812a3.334 3.334 0 0 0-1.833 5.96L7.6 13.795zm2.118 1.618c.094.003.188.005.282.005 3.015 0 5.775-1.441 8.28-4.324a1.666 1.666 0 0 0 0-2.186c-1.677-1.93-3.469-3.214-5.375-3.852l-.368 1.196c1.676.567 3.271 1.717 4.8 3.476a.417.417 0 0 1 0 .546c-2.252 2.592-4.648 3.86-7.236 3.893l-.383 1.246zm.646-2.098a3.334 3.334 0 0 0 1.8-5.85l-1.8 5.85z",fill:"currentColor"},null,-1)]))}const Ak={render:Mk},kk={xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24"};function jk(n,t){return W(),Q("svg",kk,t[0]||(t[0]=[F("path",{fill:"currentColor",d:"M12 18.5c-3.62 0-6.93-1.73-9.94-5.19a2 2 0 0 1 0-2.62C5.06 7.23 8.38 5.5 12 5.5c3.62 0 6.93 1.73 9.94 5.19a2 2 0 0 1 0 2.62c-3 3.46-6.32 5.19-9.94 5.19zm0-1.5c3.15 0 6.07-1.52 8.8-4.67a.5.5 0 0 0 0-.66C18.07 8.52 15.15 7 12 7c-3.15 0-6.07 1.52-8.8 4.67a.5.5 0 0 0 0 .66C5.93 15.48 8.85 17 12 17zm0-1a4 4 0 1 1 0-8 4 4 0 0 1 0 8zm.5-4a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"},null,-1)]))}const Dk={render:jk},Ik={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Rk(n,t){return W(),Q("svg",Ik,t[0]||(t[0]=[F("path",{d:"M16 18.7c-.2 0-.4 0-.6-.2L1.7 11a1.1 1.1 0 010-2l13.7-7.6a1.1 1.1 0 011.2 0L30.3 9a1.1 1.1 0 010 2l-13.7 7.6-.6.2zM4.6 9.9L16 16.2 27.4 10 16 3.6 4.6 9.9z",fill:"currentColor"},null,-1),F("path",{d:"M16 24.8c-.2 0-.4 0-.6-.2L1.7 17a1.1 1.1 0 010-2l5.5-3a1.1 1.1 0 111.1 2l-3.7 2L16 22.3 27.4 16l-3.7-2a1.1 1.1 0 111-2l5.6 3a1.1 1.1 0 010 2l-13.7 7.6-.6.2z",fill:"currentColor"},null,-1),F("path",{d:"M16 30.9c-.2 0-.4 0-.6-.2L1.7 23.1a1.1 1.1 0 010-2l5.5-3a1.1 1.1 0 111.1 2l-3.7 2L16 28.4l11.4-6.3-3.7-2a1.1 1.1 0 111-2l5.6 3a1.1 1.1 0 010 2l-13.7 7.6-.6.2z",fill:"currentColor"},null,-1)]))}const Lk={render:Rk},Bk={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function Fk(n,t){return W(),Q("svg",Bk,t[0]||(t[0]=[F("path",{d:"M7.349 15.508c0 1.263.43 2.249 1.292 2.957.861.708 2.01 1.063 3.445 1.063 1.436 0 2.571-.355 3.407-1.063.836-.708 1.254-1.636 1.254-2.785 0-.885-.205-1.611-.614-2.18H18V12H6.432v1.5h7.175c.388.185.688.367.9.544.492.408.737.957.737 1.646 0 .753-.27 1.362-.813 1.828-.542.46-1.324.689-2.345.689-1.02 0-1.815-.227-2.383-.68-.561-.453-.842-1.126-.842-2.019v-.23H7.349v.23ZM8.351 11h2.918c-.667-.268-1.147-.523-1.441-.765-.473-.396-.709-.916-.709-1.56 0-.715.233-1.28.699-1.694.466-.415 1.193-.622 2.182-.622.983 0 1.723.242 2.22.727.498.485.747 1.117.747 1.895v.21h1.512v-.21c0-1.148-.405-2.093-1.215-2.833-.804-.74-1.892-1.11-3.264-1.11-1.372 0-2.447.348-3.225 1.043-.772.69-1.158 1.573-1.158 2.651 0 .948.245 1.704.734 2.268Z",fill:"currentColor"},null,-1)]))}const zk={render:Fk},Vk={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function Xk(n,t){return W(),Q("svg",Vk,t[0]||(t[0]=[F("path",{fill:"currentColor","fill-rule":"evenodd",d:"M11.75 5.25h7.5a.75.75 0 1 1 0 1.5h-7.5a.75.75 0 1 1 0-1.5zm0 6h7.5a.75.75 0 1 1 0 1.5h-7.5a.75.75 0 1 1 0-1.5zm0 6h7.5a.75.75 0 1 1 0 1.5h-7.5a.75.75 0 1 1 0-1.5zM6 8a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 6a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm0 6a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"},null,-1)]))}const Hk={render:Xk},Yk={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Nk(n,t){return W(),Q("svg",Yk,t[0]||(t[0]=[F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M4 18.5a.5.5 0 0 1-.5-.5V5a.5.5 0 0 1 .5-.5h6.5c.275 0 .5.225.5.5v13.5H4Zm8.5 1.497V20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h6.5c1.102 0 2 .895 2 2v3.997h2L20 9c1.105 0 2 .892 2 2v7l-1.5-.001V11c0-.278-.222-.5-.5-.5l-3.126-.001-4.374-.002v8l7.5.003a.5.5 0 0 0 .5-.5H22a2 2 0 0 1-2 2l-7.5-.003ZM5 7.497h4.5v-1.5H5v1.5Zm0 3h4.5v-1.5H5v1.5Zm4.5 3H5v-1.5h4.5v1.5Zm-4.5 3h4.5v-1.5H5v1.5Zm11-3h-2v-1.5h2v1.5Zm0 3h-2v-1.5h2v1.5Zm3-3h-2v-1.5h2v1.5Zm0 3h-2v-1.5h2v1.5Z",fill:"currentColor"},null,-1)]))}const Wk={render:Nk},Uk={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function Gk(n,t){return W(),Q("svg",Uk,t[0]||(t[0]=[F("path",{fill:"currentColor",d:"M12.75 14.33v3.03a.75.75 0 0 1-1.5 0v-3.03c-.6-.3-1.03-.94-1.03-1.69 0-1.02.8-1.85 1.78-1.85s1.78.83 1.78 1.85c0 .75-.42 1.4-1.03 1.69zM6 8h12a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2v-9c0-1.1.9-2 2-2zm0 1.5a.5.5 0 0 0-.5.5v9c0 .28.22.5.5.5h12a.5.5 0 0 0 .5-.5v-9a.5.5 0 0 0-.5-.5H6zM7.5 8H6a6 6 0 1 1 12 0h-1.5a4.5 4.5 0 1 0-9 0z"},null,-1)]))}const qk={render:Gk},Zk={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function $k(n,t){return W(),Q("svg",Zk,t[0]||(t[0]=[F("path",{fill:"currentColor","fill-rule":"evenodd",d:"M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z"},null,-1)]))}const Kk={render:$k},Jk={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function Qk(n,t){return W(),Q("svg",Jk,t[0]||(t[0]=[F("path",{fill:"currentColor",d:"m8.55 5.78 5.96 5.97c.1.1.1.25 0 .35l-5.87 5.87a.75.75 0 0 0 1.06 1.06l5.87-5.87c.69-.68.69-1.79 0-2.47L9.61 4.72a.75.75 0 0 0-1.06 1.06z"},null,-1)]))}const tj={render:Qk},ej={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function ij(n,t){return W(),Q("svg",ej,t[0]||(t[0]=[vl('<g fill="currentColor" fill-rule="evenodd"><path d="M3 2h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zm0 8h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1zm0 8h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1z"></path><path d="M11 2h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zm0 8h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1zm0 8h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1z" opacity=".45"></path><path d="M19 2h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zm0 8h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1zm0 8h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1z" opacity=".15"></path><path d="M7 6h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm0 8h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1z" opacity=".7"></path><path d="M15 6h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1zm0 8h2a1 1 0 0 1 1 1v2a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1v-2a1 1 0 0 1 1-1z" opacity=".3"></path></g>',1)]))}const nj={render:ij},rj={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function sj(n,t){return W(),Q("svg",rj,t[0]||(t[0]=[F("path",{fill:"currentColor",d:"m6.14 7.5 1.44 5.62a.5.5 0 0 0 .48.38h10.41c.76 0 1.4-.57 1.5-1.32l.5-4.12a.5.5 0 0 0-.5-.56H6.14zM5.74 6h14.23a2 2 0 0 1 1.98 2.24l-.5 4.12A3 3 0 0 1 18.47 15H8.07a2 2 0 0 1-1.94-1.5l-.19-.72a.75.75 0 0 1-.15-.3L3.84 4.62l-2.33-.89a.75.75 0 1 1 .54-1.4l2.7 1.03c.23.09.4.28.46.52L5.73 6zM9 22a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm8 0a3 3 0 1 1 0-6 3 3 0 0 1 0 6zm-8-1.5a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3zm8 0a1.5 1.5 0 1 0 0-3 1.5 1.5 0 0 0 0 3z"},null,-1)]))}const oj={render:sj},aj={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function lj(n,t){return W(),Q("svg",aj,t[0]||(t[0]=[F("mask",{id:"_1304310517__a",fill:"#fff"},[F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14 5a2 2 0 1 0-4 0H8v3a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V5h-2Z"})],-1),F("path",{d:"M14 5h-1.5v1.5H14V5Zm-4 0v1.5h1.5V5H10ZM8 5V3.5H6.5V5H8Zm8 0h1.5V3.5H16V5Zm-4-.5a.5.5 0 0 1 .5.5h3A3.5 3.5 0 0 0 12 1.5v3Zm-.5.5a.5.5 0 0 1 .5-.5v-3A3.5 3.5 0 0 0 8.5 5h3ZM8 6.5h2v-3H8v3ZM9.5 8V5h-3v3h3ZM9 7.5a.5.5 0 0 1 .5.5h-3A2.5 2.5 0 0 0 9 10.5v-3Zm6 0H9v3h6v-3Zm-.5.5a.5.5 0 0 1 .5-.5v3A2.5 2.5 0 0 0 17.5 8h-3Zm0-3v3h3V5h-3ZM14 6.5h2v-3h-2v3Z",fill:"currentColor",mask:"url(#_1304310517__a)"},null,-1),F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M16 6.5h1.714c.316 0 .572.224.572.5v13c0 .276-.256.5-.572.5H6.286c-.316 0-.572-.224-.572-.5V7c0-.276.256-.5.572-.5H8V5H6.286C5.023 5 4 5.895 4 7v13c0 1.105 1.023 2 2.286 2h11.428C18.977 22 20 21.105 20 20V7c0-1.105-1.023-2-2.286-2H16v1.5Z",fill:"currentColor"},null,-1)]))}const cj={render:lj},hj={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function uj(n,t){return W(),Q("svg",hj,t[0]||(t[0]=[F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M25.334 4H6.666A2.667 2.667 0 0 0 4 6.666v18.668A2.67 2.67 0 0 0 6.666 28h18.668A2.667 2.667 0 0 0 28 25.334V6.666A2.667 2.667 0 0 0 25.334 4ZM6.666 26h9.994l-4.878-6.608a.666.666 0 0 0-1.074.004L6.116 25.71c.12.174.32.29.55.29Zm18.668 0a.668.668 0 0 0 .666-.666v-3.63l-4.914-6.588a.666.666 0 0 0-1.072.004l-4.44 6.04 3.57 4.84h6.19Zm-2.646-12.08L26 18.36V6.666A.666.666 0 0 0 25.334 6H6.666A.666.666 0 0 0 6 6.666v15.802l3.09-4.248a2.666 2.666 0 0 1 4.302-.014l.938 1.27 4.07-5.54a2.666 2.666 0 0 1 4.288-.016ZM9.334 11.334a2 2 0 1 0 4 0 2 2 0 0 0-4 0Z",fill:"currentColor"},null,-1)]))}const dj={render:uj},fj={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function gj(n,t){return W(),Q("svg",fj,t[0]||(t[0]=[F("path",{fill:"currentColor",d:"M15.45 17.97 9.5 12.01a.25.25 0 0 1 0-.36l5.87-5.87a.75.75 0 0 0-1.06-1.06l-5.87 5.87c-.69.68-.69 1.8 0 2.48l5.96 5.96a.75.75 0 0 0 1.06-1.06z"},null,-1)]))}const pj={render:gj},mj={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function vj(n,t){return W(),Q("svg",mj,t[0]||(t[0]=[F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.078 5.333H5.334A2.667 2.667 0 0 0 2.667 8v2.667c0 .203.023.402.066.592a2.315 2.315 0 0 0-.066.55v12.382c0 1.367 1.194 2.476 2.667 2.476h21.333c1.473 0 2.667-1.109 2.667-2.477V11.81c0-1.368-1.194-2.477-2.667-2.477h-9.333l-.726-2.176a2.667 2.667 0 0 0-2.53-1.824Zm-8.744 4h9.892L14.71 7.79a.667.667 0 0 0-.633-.456H5.334A.667.667 0 0 0 4.667 8v1.411c.213-.05.436-.078.667-.078Zm-.667 2.477c0-.229.267-.477.667-.477h21.333c.4 0 .667.248.667.477v12.38c0 .229-.267.477-.667.477H5.334c-.4 0-.667-.248-.667-.477V11.81Z",fill:"currentColor"},null,-1)]))}const yj={render:vj},_j={width:"24",height:"24",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"};function bj(n,t){return W(),Q("svg",_j,t[0]||(t[0]=[F("path",{fill:"currentColor",d:"m18.054 7.252-2.296-2.296a.75.75 0 0 1 1.06-1.06l2.83 2.828a1.75 1.75 0 0 1 0 2.475l-2.832 2.831a.75.75 0 0 1-1.06-1.06l2.219-2.22H8a4.25 4.25 0 0 0 0 8.5h4a.75.75 0 0 1 0 1.5H8a5.75 5.75 0 0 1 0-11.5h10c.018 0 .036 0 .054.002Z"},null,-1)]))}const wj={render:bj},xj={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"};function Cj(n,t){return W(),Q("svg",xj,t[0]||(t[0]=[F("path",{d:"M20,13.33l-2.56,2.56-3.18-3.21-1.58,1.58,3.21,3.18L13.33,20H20ZM6.67,20,4.11,17.44l3.21-3.18L5.74,12.68,2.56,15.89,0,13.33V20ZM0,6.67,2.56,4.11,5.74,7.32,7.32,5.74,4.11,2.56,6.67,0H0ZM13.33,0l2.56,2.56L12.68,5.74l1.58,1.58,3.18-3.21L20,6.67V0Z"},null,-1)]))}const Sj={render:Cj},Tj={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function Pj(n,t){return W(),Q("svg",Tj,t[0]||(t[0]=[F("path",{fill:"currentColor",d:"M15.25 18.48V15a.75.75 0 1 0-1.5 0v4c0 .97.78 1.75 1.75 1.75h4a.75.75 0 1 0 0-1.5h-2.6a8.75 8.75 0 0 0-2.07-15.53.75.75 0 1 0-.49 1.42 7.25 7.25 0 0 1 .91 13.34zM8.75 5.52V9a.75.75 0 0 0 1.5 0V5c0-.97-.78-1.75-1.75-1.75h-4a.75.75 0 0 0 0 1.5h2.6a8.75 8.75 0 0 0 2.18 15.57.75.75 0 0 0 .47-1.43 7.25 7.25 0 0 1-1-13.37z"},null,-1)]))}const Oj={render:Pj},Ej={xmlns:"http://www.w3.org/2000/svg",version:"1.2",viewBox:"0 0 25 24",width:"25",height:"24",class:"drop-shadow svg","aria-hidden":"true",focusable:"false"};function Mj(n,t){return W(),Q("svg",Ej,t[0]||(t[0]=[F("path",{class:"a icon-active",d:"m23.3 24.1h-16.8c-0.7 0-1.3-0.6-1.3-1.4v-17.3c0-0.7 0.6-1.3 1.3-1.3h16.8c0.8 0 1.4 0.6 1.4 1.3v17.3c0 0.8-0.6 1.4-1.4 1.4z"},null,-1),F("path",{class:"b icon-active__stroke",d:"m19.9 21.2h-17.3c-0.7 0-1.4-0.6-1.4-1.3v-17.3c0-0.7 0.7-1.4 1.4-1.4h17.3c0.7 0 1.3 0.7 1.3 1.4v17.3c0 0.7-0.6 1.3-1.3 1.3z"},null,-1),F("path",{class:"c icon-active__stroke",d:"m19.9 21.2h-17.3c-0.7 0-1.4-0.6-1.4-1.3v-17.3c0-0.7 0.7-1.4 1.4-1.4h17.3c0.7 0 1.3 0.7 1.3 1.4v17.3c0 0.7-0.6 1.3-1.3 1.3z"},null,-1)]))}const Aj={render:Mj},kj={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function jj(n,t){return W(),Q("svg",kj,t[0]||(t[0]=[F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 6a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 3 6Zm0 6a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 3 12Zm.75 5.25a.75.75 0 0 0 0 1.5h7.5a.75.75 0 0 0 0-1.5h-7.5Z",fill:"currentColor"},null,-1),F("path",{d:"M17.75 4a.75.75 0 0 0-.75.75v14.5a.75.75 0 0 0 1.5 0V4.75a.75.75 0 0 0-.75-.75Z",fill:"currentColor"},null,-1),F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M14.72 16.43a.75.75 0 0 1 1.06 0l1.97 1.97 1.97-1.97a.75.75 0 1 1 1.06 1.06l-2.145 2.146a1.254 1.254 0 0 1-1.364.271 1.248 1.248 0 0 1-.406-.271L14.72 17.49a.75.75 0 0 1 0-1.06ZM20.78 7.573a.75.75 0 0 1-1.06 0l-1.97-1.97-1.97 1.97a.75.75 0 1 1-1.06-1.06l2.145-2.146a1.255 1.255 0 0 1 1.364-.272c.152.063.29.156.406.272l2.145 2.146a.75.75 0 0 1 0 1.06Z",fill:"currentColor"},null,-1)]))}const Dj={render:jj},Ij={xmlns:"http://www.w3.org/2000/svg",version:"1.2",viewBox:"0 0 26 26",width:"26",height:"26",class:"stroke svg","aria-hidden":"true",focusable:"false"};function Rj(n,t){return W(),Q("svg",Ij,t[0]||(t[0]=[F("path",{class:"a icon-active",d:"m19.8 21.5h-13.7c-0.6 0-1.1-0.5-1.1-1.2v-14.1c0-0.6 0.5-1.1 1.1-1.1h13.7c0.6 0 1.1 0.5 1.1 1.1v14.1c0 0.7-0.5 1.2-1.1 1.2z"},null,-1),F("path",{class:"b icon-active",d:"m19.8 21.5h-13.7c-0.6 0-1.1-0.5-1.1-1.2v-14.1c0-0.6 0.5-1.1 1.1-1.1h13.7c0.6 0 1.1 0.5 1.1 1.1v14.1c0 0.7-0.5 1.2-1.1 1.2z"},null,-1),F("path",{class:"c icon-active__stroke",d:"m22.8 25h-19.7c-0.9 0-1.6-0.7-1.6-1.6v-20.3c0-0.9 0.7-1.6 1.6-1.6h19.7c0.9 0 1.6 0.7 1.6 1.6v20.3c0 0.9-0.7 1.6-1.6 1.6z"},null,-1)]))}const Lj={render:Rj},Bj={width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function Fj(n,t){return W(),Q("svg",Bj,t[0]||(t[0]=[F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M25.333 4H6.667A2.667 2.667 0 0 0 4 6.667v18.666A2.667 2.667 0 0 0 6.667 28h18.666A2.667 2.667 0 0 0 28 25.333V6.667A2.667 2.667 0 0 0 25.333 4ZM6 6.667C6 6.298 6.298 6 6.667 6h10.666v20H6.667A.667.667 0 0 1 6 25.333V6.667Zm13.333 6.666V6h6c.369 0 .667.298.667.667v6.666h-6.667Zm0 2V26h6a.667.667 0 0 0 .667-.667v-10h-6.667Z",fill:"currentColor"},null,-1)]))}const zj={render:Fj},Vj={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function Xj(n,t){return W(),Q("svg",Vj,t[0]||(t[0]=[F("path",{d:"M11 2 5.5 16h2.25l1.12-3h6.25l1.12 3h2.25L13 2h-2zm-1.38 9L12 4.67 14.38 11H9.62z",fill:"currentColor"},null,-1)]))}const Hj={render:Xj},Yj={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function Nj(n,t){return W(),Q("svg",Yj,t[0]||(t[0]=[F("path",{fill:"currentColor","fill-rule":"evenodd",d:"M18 5.5h-5.25V18c0 .28.22.5.5.5h2a.75.75 0 1 1 0 1.5h-6.5a.75.75 0 1 1 0-1.5h2a.5.5 0 0 0 .5-.5V5.5H6a.5.5 0 0 0-.5.5v1.25a.75.75 0 0 1-1.5 0V5.5C4 4.67 4.67 4 5.5 4h13c.83 0 1.5.67 1.5 1.5v1.75a.75.75 0 1 1-1.5 0V6a.5.5 0 0 0-.5-.5z"},null,-1)]))}const Wj={render:Nj},Uj={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"};function Gj(n,t){return W(),Q("svg",Uj,t[0]||(t[0]=[F("path",{"fill-rule":"evenodd",d:"M6.5,0,.33,6.17A10,10,0,0,1,6.5,0ZM10,0a10,10,0,0,1,2.59.34L.34,12.59A10.18,10.18,0,0,1,0,10.1L10.1,0Zm4.63,1.13a10.68,10.68,0,0,1,1.7,1.13L2.26,16.33a10.68,10.68,0,0,1-1.13-1.7Zm3.11,2.54a10.68,10.68,0,0,1,1.13,1.7L5.37,18.87a10.68,10.68,0,0,1-1.7-1.13ZM19.5,13.2a10,10,0,0,1-6.17,6.18Zm.16-5.79A9.78,9.78,0,0,1,20,9.9L9.9,20H9.62a9.51,9.51,0,0,1-2.21-.33Z"},null,-1)]))}const qj={render:Gj},Zj={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function $j(n,t){return W(),Q("svg",Zj,t[0]||(t[0]=[F("path",{d:"M6 21.25a.75.75 0 0 1 .75-.75h10.5a.75.75 0 0 1 0 1.5H6.75a.75.75 0 0 1-.75-.75ZM15.754 14.006V5h1.528v8.95c0 1.574-.476 2.807-1.424 3.703-.948.896-2.253 1.347-3.92 1.347-1.667 0-2.952-.454-3.862-1.356-.904-.902-1.358-2.145-1.358-3.733V5h1.528v9.025c0 1.168.32 2.072.966 2.704.646.632 1.592.945 2.83.945 1.183 0 2.1-.313 2.746-.945.646-.638.966-1.548.966-2.723Z",fill:"currentColor"},null,-1)]))}const Kj={render:$j},Jj={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function Qj(n,t){return W(),Q("svg",Jj,t[0]||(t[0]=[F("path",{fill:"currentColor",d:"m6.05 7.25 2.22-2.22A.75.75 0 0 0 7.2 3.97L4.43 6.75c-.69.68-.69 1.8 0 2.48l2.83 2.83A.75.75 0 0 0 8.32 11L6.07 8.75H16a4.25 4.25 0 1 1 0 8.5h-4a.75.75 0 1 0 0 1.5h4a5.75 5.75 0 0 0 0-11.5H6.05z"},null,-1)]))}const tD={render:Qj},eD={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function iD(n,t){return W(),Q("svg",eD,t[0]||(t[0]=[F("path",{fill:"currentColor",d:"M17 9h3v11H9v-3c.51 0 1.01-.05 1.5-.14v1.64h8v-8h-1.64c.1-.49.14-.99.14-1.5zm-8 6A6 6 0 1 1 9 3a6 6 0 0 1 0 12zm0-1.5a4.5 4.5 0 1 0 0-9 4.5 4.5 0 0 0 0 9z"},null,-1)]))}const nD={render:iD},rD={xmlns:"http://www.w3.org/2000/svg",fill:"none",width:"32",height:"32",viewBox:"0 0 32 32"};function sD(n,t){return W(),Q("svg",rD,t[0]||(t[0]=[F("path",{"clip-rule":"evenodd",d:"M10.3 6.12A6 6 0 0 1 22 8v2.667H8a2.667 2.667 0 0 0-2.667 2.666v12A2.667 2.667 0 0 0 8 28h16a2.667 2.667 0 0 0 2.667-2.667v-12A2.667 2.667 0 0 0 24 10.667V8A8 8 0 0 0 8.401 5.493a1 1 0 0 0 1.9.626zm-2.967 7.213c0-.368.299-.666.667-.666h16c.368 0 .667.298.667.666v12A.667.667 0 0 1 24 26H8a.667.667 0 0 1-.667-.667zm7.668 5.77-.003 4.043a1 1 0 1 0 2 .002L17 19.102c.809-.394 1.37-1.251 1.37-2.245 0-1.367-1.062-2.476-2.371-2.476s-2.37 1.109-2.37 2.476c0 .995.561 1.853 1.371 2.247z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))}const oD={render:sD},aD={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function lD(n,t){return W(),Q("svg",aD,t[0]||(t[0]=[F("path",{fill:"currentColor","fill-rule":"evenodd",d:"m8.77 19-.29-1.37h-.07c-.48.6-.96 1.01-1.44 1.22-.47.22-1.07.33-1.79.33-.95 0-1.7-.25-2.24-.74-.54-.5-.81-1.2-.81-2.1 0-1.95 1.55-2.97 4.66-3.06l1.64-.05v-.6c0-.76-.17-1.32-.5-1.68-.32-.36-.84-.54-1.55-.54-.8 0-1.71.25-2.73.74l-.44-1.11a6.86 6.86 0 0 1 3.26-.83c1.15 0 2 .25 2.55.76.55.51.83 1.33.83 2.46V19H8.77zm-3.3-1.03c.91 0 1.63-.25 2.14-.75.52-.5.78-1.2.78-2.09v-.87l-1.46.06a5.3 5.3 0 0 0-2.5.54c-.52.32-.78.82-.78 1.5 0 .52.16.92.48 1.2.32.27.77.41 1.34.41zM21.15 19l-1.6-4.09H14.4L12.82 19h-1.51l5.08-12.9h1.26L22.7 19h-1.55zm-2.06-5.43-1.5-3.98c-.19-.5-.39-1.13-.6-1.86-.12.56-.3 1.18-.55 1.86l-1.5 3.98h4.15z"},null,-1)]))}const cD={render:lD},hD={xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"};function uD(n,t){return W(),Q("svg",hD,t[0]||(t[0]=[F("path",{fill:"currentColor",d:"M5.5 4h4c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-4A1.5 1.5 0 0 1 4 9.5v-4C4 4.67 4.67 4 5.5 4zm9 0h4c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-4A1.5 1.5 0 0 1 13 9.5v-4c0-.83.67-1.5 1.5-1.5zm0 9h4c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-4a1.5 1.5 0 0 1-1.5-1.5v-4c0-.83.67-1.5 1.5-1.5zm-9 0h4c.83 0 1.5.67 1.5 1.5v4c0 .83-.67 1.5-1.5 1.5h-4A1.5 1.5 0 0 1 4 18.5v-4c0-.83.67-1.5 1.5-1.5zm0-7.5v4h4v-4h-4zm9 0v4h4v-4h-4zm0 9v4h4v-4h-4zm-9 0v4h4v-4h-4z"},null,-1)]))}const dD={render:uD},fD={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"};function gD(n,t){return W(),Q("svg",fD,t[0]||(t[0]=[F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"m18.72 4.22-3.865 3.865V5.398a.75.75 0 1 0-1.5 0v3.754c0 .967.53 1.496 1.497 1.496H18.6a.75.75 0 1 0 0-1.5h-2.687l3.868-3.868a.75.75 0 1 0-1.06-1.06ZM5.28 19.78l3.867-3.866v2.688a.75.75 0 0 0 1.5 0V14.85c0-.967-.527-1.5-1.494-1.5H5.401a.75.75 0 0 0 0 1.5h2.687l-3.869 3.87a.75.75 0 0 0 1.06 1.06Z",fill:"currentColor"},null,-1)]))}const pD={render:gD},mD={xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24"};function vD(n,t){return W(),Q("svg",mD,t[0]||(t[0]=[F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 12C3 7.03111 7.03111 3 12 3C16.9689 3 21 7.03111 21 12C21 16.9689 16.9689 21 12 21C7.03111 21 3 16.9689 3 12ZM12 4.38462C7.79581 4.38462 4.38462 7.79581 4.38462 12C4.38462 16.2042 7.79581 19.6154 12 19.6154C16.2042 19.6154 19.6154 16.2042 19.6154 12C19.6154 7.79581 16.2042 4.38462 12 4.38462Z",fill:"currentColor"},null,-1),F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.9995 7.8457C12.3819 7.8457 12.6919 8.15566 12.6919 8.53801V11.3072H15.4611C15.8434 11.3072 16.1534 11.6172 16.1534 11.9995C16.1534 12.3819 15.8434 12.6919 15.4611 12.6919H12.6919V15.4611C12.6919 15.8434 12.3819 16.1534 11.9995 16.1534C11.6172 16.1534 11.3072 15.8434 11.3072 15.4611V12.6919H8.53801C8.15566 12.6919 7.8457 12.3819 7.8457 11.9995C7.8457 11.6172 8.15566 11.3072 8.53801 11.3072H11.3072V8.53801C11.3072 8.15566 11.6172 7.8457 11.9995 7.8457Z",fill:"currentColor"},null,-1)]))}const yD={render:vD},_D={xmlns:"http://www.w3.org/2000/svg",height:"24",viewBox:"0 0 24 24"};function bD(n,t){return W(),Q("svg",_D,t[0]||(t[0]=[F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M3 12C3 7.03111 7.03111 3 12 3C16.9689 3 21 7.03111 21 12C21 16.9689 16.9689 21 12 21C7.03111 21 3 16.9689 3 12ZM12 4.38462C7.79581 4.38462 4.38462 7.79581 4.38462 12C4.38462 16.2042 7.79581 19.6154 12 19.6154C16.2042 19.6154 19.6154 16.2042 19.6154 12C19.6154 7.79581 16.2042 4.38462 12 4.38462Z",fill:"currentColor"},null,-1),F("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M7.8457 11.9999C7.8457 11.6176 8.15566 11.3076 8.53801 11.3076H15.4611C15.8434 11.3076 16.1534 11.6176 16.1534 11.9999C16.1534 12.3823 15.8434 12.6922 15.4611 12.6922H8.53801C8.15566 12.6922 7.8457 12.3823 7.8457 11.9999Z",fill:"currentColor"},null,-1)]))}const wD={render:bD},Vv=Object.assign({"./svg/icon-add-page.svg":SA,"./svg/icon-align-center.svg":OA,"./svg/icon-align-justify.svg":AA,"./svg/icon-align-left.svg":DA,"./svg/icon-align-right.svg":LA,"./svg/icon-background.svg":zA,"./svg/icon-bold.svg":HA,"./svg/icon-brightness.svg":WA,"./svg/icon-clear.svg":qA,"./svg/icon-copy.svg":KA,"./svg/icon-curved.svg":tk,"./svg/icon-delete.svg":nk,"./svg/icon-duplicate.svg":ok,"./svg/icon-element.svg":ck,"./svg/icon-eyedropper.svg":dk,"./svg/icon-grid.svg":pk,"./svg/icon-group.svg":yk,"./svg/icon-history.svg":wk,"./svg/icon-home.svg":Sk,"./svg/icon-italic.svg":Ok,"./svg/icon-layer-hide.svg":Ak,"./svg/icon-layer-show.svg":Dk,"./svg/icon-layers.svg":Lk,"./svg/icon-linethrough.svg":zk,"./svg/icon-list.svg":Hk,"./svg/icon-listings.svg":Wk,"./svg/icon-lock.svg":qk,"./svg/icon-more.svg":Kk,"./svg/icon-next-page.svg":tj,"./svg/icon-opacity.svg":nj,"./svg/icon-orders.svg":oj,"./svg/icon-paste.svg":cj,"./svg/icon-photo.svg":dj,"./svg/icon-previous-page.svg":pj,"./svg/icon-projects.svg":yj,"./svg/icon-redo.svg":wj,"./svg/icon-resize.svg":Sj,"./svg/icon-rotate.svg":Oj,"./svg/icon-shadow.svg":Aj,"./svg/icon-spacing.svg":Dj,"./svg/icon-stroke.svg":Lj,"./svg/icon-template.svg":zj,"./svg/icon-text-color.svg":Hj,"./svg/icon-text.svg":Wj,"./svg/icon-transparen.svg":qj,"./svg/icon-underline.svg":Kj,"./svg/icon-undo.svg":tD,"./svg/icon-ungroup.svg":nD,"./svg/icon-unlock.svg":oD,"./svg/icon-uppercase.svg":cD,"./svg/icon-view-page.svg":dD,"./svg/icon-zoom-fit.svg":pD,"./svg/icon-zoom-in.svg":yD,"./svg/icon-zoom-out.svg":wD}),xD=()=>{var n;const t={};for(const e in Vv){const i=(n=e.match(/([\w-]*)\.svg$/))==null?void 0:n[1];i&&(t[i]=Vv[e])}return t},CD=xD(),Dg={props:{name:{type:String,required:!0},size:{type:Number,default:24}},setup(n){const t=mt(()=>{const i=CD[n.name];if(i)return i}),e=mt(()=>{const{size:i}=n;return`${i}px`});return{svgComponent:t,getSize:e}}},Xv=()=>{Kf(n=>({"38eaa7c2":n.getSize}))},Hv=Dg.setup;Dg.setup=Hv?(n,t)=>(Xv(),Hv(n,t)):Xv;const Nt=(n,t)=>{const e=n.__vccOpts||n;for(const[i,r]of t)e[i]=r;return e};var SD={class:"base-icon"},TD={class:"base-icon--size base-icon__item"};function PD(n,t,e,i,r,s){return W(),Q("span",SD,[F("span",TD,[(W(),_i(tl(i.svgComponent),{role:"img"}))])])}const Ne=Nt(Dg,[["render",PD],["__scopeId","data-v-9cfca5ae"]]),OD=te({setup(){}});var ED={class:"base-btn__content"};function MD(n,t,e,i,r,s){return W(),Q("button",{type:"button",class:Ye(["base-btn w-32px h-32px py-2 px-3 inline-flex justify-center items-center gap-x-2 text-sm font-medium rounded-lg border border-transparent text-gray-800 focus:outline-none disabled:opacity-50 disabled:pointer-events-none dark:text-white dark:hover:bg-neutral-700 dark:focus:bg-neutral-700 hover:cursor-pointer",{"!bg-slate-200":n.$attrs.active}])},[t[0]||(t[0]=F("span",{class:"base-btn__overlay"},null,-1)),F("span",ED,[Jn(n.$slots,"default",{},void 0,!0)])],2)}const $e=Nt(OD,[["render",MD],["__scopeId","data-v-11cf0740"]]),AD=te({props:{text:{type:String,default:"Tooltip"},location:{type:String,default:"bottom"}},setup(){return{Location}}});var kD={class:"group relative inline-block"};function jD(n,t,e,i,r,s){return W(),Q("div",kD,[Jn(n.$slots,"default"),n.$attrs.hiddenTooltip?Cr("",!0):(W(),Q("div",{key:0,class:Ye(["bg-[#424242] dark:bg-dark-2 absolute z-999 mt-3 whitespace-nowrap rounded-[5px] py-1.5 px-3.5 text-sm text-white opacity-0 group-hover:opacity-100",{"right-full top-1/2 -translate-y-1/2":n.location==="start","left-full top-1/2 -translate-y-1/2":n.location==="end","bottom-full left-1/2 -translate-x-1/2":n.location==="top","top-full left-1/2 -translate-x-1/2":n.location==="bottom"}])},[F("span",{class:Ye(["bg-[#424242] dark:bg-dark-2 absolute h-2 w-2 rotate-45 -z-10",{"right-[-3px] top-1/2 -translate-y-1/2":n.location==="start","left-[-3px] top-1/2 -translate-y-1/2":n.location==="end","bottom-[-3px] left-1/2 -translate-x-1/2":n.location==="top","top-[-3px] left-1/2 -translate-x-1/2":n.location==="bottom"}])},null,2),ky(" "+Kn(n.text),1)],2))])}const We=Nt(AD,[["render",jD]]),DD=te({components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We},setup(){const{init:n,undo:t,redo:e,canUndo:i,canRedo:r,undoStack:s,redoStack:o,actionHistory:l}=jg(),h=()=>{t()},u=()=>{e()};return wi(()=>{n()}),{canUndo:i,canRedo:r,onUndo:h,onRedo:u}}});var ID={class:"history"};function RD(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip");return W(),Q("div",ID,[t[0]||(t[0]=F("div",{class:"h-[100%] w-1px divide-x-1px bg-white opacity-[0.15]"},null,-1)),et(h,{text:"Undo",location:"bottom",class:Ye({"!hover:cursor-not-allowed":!n.canUndo})},{default:Et(function(){return[et(l,{disabled:!n.canUndo,onClick:n.onUndo},{default:Et(function(){return[et(o,{name:"icon-undo",class:"text-white"})]}),_:1},8,["disabled","onClick"])]}),_:1},8,["class"]),et(h,{text:"Redo",location:"bottom",class:Ye({"!hover:cursor-not-allowed":!n.canRedo})},{default:Et(function(){return[et(l,{disabled:!n.canRedo,onClick:n.onRedo},{default:Et(function(){return[et(o,{name:"icon-redo",class:"text-white"})]}),_:1},8,["disabled","onClick"])]}),_:1},8,["class"]),t[1]||(t[1]=F("div",{class:"h-[100%] w-1px divide-x-1px bg-white opacity-[0.15]"},null,-1))])}const LD=Nt(DD,[["render",RD],["__scopeId","data-v-a7c5d0f9"]]),BD=te({components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We,HistoryCanvas:LD}});var FD={class:"w-full h-56px editor__navbar"},zD={class:"w-full h-full flex items-center"},VD={class:"h-full flex flex-1 justify-start items-center"},XD={id:"editor-history",class:"h-full flex flex-1 justify-center items-center"};function HD(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip"),u=gt("HistoryCanvas");return W(),Q("header",FD,[F("div",zD,[F("div",VD,[et(h,{text:"Home",location:"bottom",hiddenTooltip:!0},{default:Et(function(){return[et(l,null,{default:Et(function(){return[et(o,{name:"icon-home",class:"text-white"})]}),_:1})]}),_:1})]),F("div",XD,[et(u)]),t[0]||(t[0]=vl('<div class="h-full flex flex-1 justify-end items-center" data-v-908d253a><button type="button" class="shadow-1 dark:shadow-box-dark !bg-slate-100 dark:bg-gray-2 border-transparent border rounded-md inline-flex items-center justify-center py-3 px-7 mr-24px text-center text-base font-medium text-dark hover:bg-gray-4 dark:hover:bg-dark-3 disabled:bg-gray-3 disabled:border-gray-3 disabled:text-dark-5" data-v-908d253a> Export </button><span class="inline-block size-[38px] bg-gray-100 rounded-full overflow-hidden" data-v-908d253a><svg class="size-full text-gray-300" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-908d253a><rect x="0.62854" y="0.359985" width="15" height="15" rx="7.5" fill="white" data-v-908d253a></rect><path d="M8.12421 7.20374C9.21151 7.20374 10.093 6.32229 10.093 5.23499C10.093 4.14767 9.21151 3.26624 8.12421 3.26624C7.0369 3.26624 6.15546 4.14767 6.15546 5.23499C6.15546 6.32229 7.0369 7.20374 8.12421 7.20374Z" fill="currentColor" data-v-908d253a></path><path d="M11.818 10.5975C10.2992 12.6412 7.42106 13.0631 5.37731 11.5537C5.01171 11.2818 4.69296 10.9631 4.42107 10.5975C4.28982 10.4006 4.27107 10.1475 4.37419 9.94123L4.51482 9.65059C4.84296 8.95684 5.53671 8.51624 6.30546 8.51624H9.95231C10.7023 8.51624 11.3867 8.94749 11.7242 9.62249L11.8742 9.93184C11.968 10.1475 11.9586 10.4006 11.818 10.5975Z" fill="currentColor" data-v-908d253a></path></svg></span></div>',1))])])}const YD=Nt(BD,[["render",HD],["__scopeId","data-v-908d253a"]]),ND=[{id:"photos",name:"Photos",icon:"icon-photo"},{id:"shapes",name:"Shapes",icon:"icon-element"},{id:"text",name:"Text",icon:"icon-text"}],WD={props:{widthMenu:{type:Number,default:78},widthPanel:{type:Number,default:303}},setup(){const n=Gs(),t=mt(()=>n.getIsToggleSidebar),e=mt({get:()=>n.getIsActiveSidebarMobile,set:i=>n.setIsActiveSidebarMobile(i)});return{isToggleSidebar:t,isActiveSidebarMobile:e}}};var UD={class:"base-sidebar-container"},GD={class:"base-sidebar-menu"};function qD(n,t,e,i,r,s){return W(),Q("aside",{class:Ye(["base-sidebar","light","base-sidebar-menu--background",{"base-sidebar--open":i.isToggleSidebar}])},[F("div",UD,[F("nav",GD,[Jn(n.$slots,"menu",{},void 0,!0)]),F("div",{class:Ye(["base-sidebar-panel","light",{"base-sidebar-panel--open":i.isToggleSidebar,"base-sidebar-panel--close":!i.isToggleSidebar}])},[Jn(n.$slots,"panel",{},void 0,!0),i.isToggleSidebar?Jn(n.$slots,"toggle",{key:0},void 0,!0):Cr("",!0)],2)])],2)}const ZD=Nt(WD,[["render",qD],["__scopeId","data-v-51394da5"]]),$D={components:{BaseIcon:Ne},props:{items:{type:Array,default:()=>[]}},setup(){const n=Gs(),t=mt(()=>n.getIsActiveSidebar),e=mt(()=>n.getActiveSidebarItem.selectedCurrent),i=mt(()=>n.getIsToggleSidebar),r=(o,l)=>{const h=n.getActiveSidebarItem.sidebarItemId,u=n.getActiveSidebarItem.sidebarItemTitle,d=n.getActiveSidebarItem.sidebarItemType;n.setIsEffects(!1),n.setIsToggleSidebar(!0),n.setActiveSidebarItem({sidebarItemId:o.toLowerCase(),sidebarItemTitle:o.toLowerCase(),sidebarItemType:o,selectedCurrent:l,previousSidebarItemId:h,previousSidebarItemTitle:u,previousSidebarItemType:d}),setTimeout(()=>{t.value||n.setIsActiveSidebar(!0)},100)},s=mt(()=>{let o=0;return e.value===0?o=0:o=`${e.value}00`,{transform:`translateY(calc(${o}% + 0px))`,opacity:i.value&&!n.getIsEffects?1:0}});return qe(i,o=>{o||(n.setActiveSidebarItem({...n.getActiveSidebarItem,selectedCurrent:-1}),n.setIsActiveSidebar(!1))}),{isToggleSidebar:i,selectedItem:e,styleActive:s,isActiveSidebar:t,onSelectItem:r}}};var KD={class:"sidebar-menu"},JD={class:"sidebar-menu__content sidebar-menu__content--column"},QD={class:"sidebar-menu__wrapper",style:{height:"calc(100% - ".concat(16,"px)")}},tI={role:"tablist","aria-orientation":"vertical",class:"flex flex-col sidebar-menu__tablist",tabindex:"0"},eI=["onClick"],iI={class:"sidebar-menu__label"};function nI(n,t,e,i,r,s){var o=gt("base-icon");return W(),Q("div",KD,[F("div",JD,[F("div",QD,[F("div",tI,[F("div",{style:Ji(i.styleActive),class:Ye(["sidebar-menu__tab-selected",{"sidebar-menu__tab-selected--active":i.isActiveSidebar}])},null,6),(W(!0),Q(Se,null,Jr(e.items,function(l,h){return W(),Q("div",{class:Ye(["sidebar-menu__tab",{"sidebar-menu__tab--active":i.selectedItem===h&&i.isToggleSidebar}]),key:h,onClick:function(u){return i.onSelectItem(l.name,h)}},[et(o,{name:l.icon},null,8,["name"]),F("span",iI,Kn(l.name),1)],10,eI)}),128))])])])])}const rI=Nt($D,[["render",nI],["__scopeId","data-v-ca9dec20"]]),sI={setup(){const n=Gs(),t=mt(()=>n.getIsToggleSidebar),e=mt(()=>n.getIsEffects),i=mt(()=>n.getIsFontFamily?"a Font":n.getActiveSidebarItem.sidebarItemType);return{isToggleSidebar:t,isEffects:e,containerPanel:i,toggleSidebar:()=>{n.setIsToggleSidebar(!t.value)},handleScrollTo:()=>{n.getWrapperEl.scrollTo(20)}}}};var oI={class:"sidebar-panel"},aI={class:"sidebar-panel__main"},lI={class:"sidebar-panel__header"},cI={key:0,class:"sidebar-panel__title text-h5"},hI={class:"sidebar-panel__content"};function uI(n,t,e,i,r,s){return W(),Q("div",oI,[F("div",aI,[F("div",lI,[i.isEffects?(W(),Q("p",cI,"Effects")):Cr("",!0),t[0]||(t[0]=vl('<div class="mb-2 px-2 w-full" data-v-246be2fe><div class="relative" data-v-246be2fe><div class="absolute left-0 inset-y-0 pl-3 flex items-center" data-v-246be2fe><svg class="fill-current h-6 w-6 text-gray-400" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" data-v-246be2fe><path d="M12.9 14.32a8 8 0 1 1 1.41-1.41l5.35 5.33-1.42 1.42-5.33-5.34zM8 14A6 6 0 1 0 8 2a6 6 0 0 0 0 12z" data-v-246be2fe></path></svg></div><input class="w-full border !border-gray pl-12 pr-4 py-5 rounded-2 focus:border-blue-500 focus:shadow-outline outline-none" type="text" placeholder="Search..." data-v-246be2fe></div></div>',1))]),F("div",hI,[Jn(n.$slots,"content",{},void 0,!0)])])])}const dI=Nt(sI,[["render",uI],["__scopeId","data-v-246be2fe"]]);var ph=function(){return ph=Object.assign||function(n){for(var t,e=1,i=arguments.length;e<i;e++){t=arguments[e];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r])}return n},ph.apply(this,arguments)};function Ol(n){return _h()?(j1(n),!0):!1}function Bd(){const n=new Set,t=e=>{n.delete(e)};return{on:e=>{n.add(e);const i=()=>t(e);return Ol(i),{off:i}},off:t,trigger:(...e)=>Promise.all(Array.from(n).map(i=>i(...e)))}}function Le(n){return typeof n=="function"?n():Zr(n)}const Nb=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const fI=n=>n!=null,gI=Object.prototype.toString,pI=n=>gI.call(n)==="[object Object]",An=()=>{};function Wb(n,t){function e(...i){return new Promise((r,s)=>{Promise.resolve(n(()=>t.apply(this,i),{fn:t,thisArg:this,args:i})).then(r).catch(s)})}return e}function mI(n,t={}){let e,i,r=An;const s=o=>{clearTimeout(o),r(),r=An};return o=>{const l=Le(n),h=Le(t.maxWait);return e&&s(e),l<=0||h!==void 0&&h<=0?(i&&(s(i),i=null),Promise.resolve(o())):new Promise((u,d)=>{r=t.rejectOnCancel?d:u,h&&!i&&(i=setTimeout(()=>{e&&s(e),i=null,u(o())},h)),e=setTimeout(()=>{i&&s(i),i=null,u(o())},l)})}}function vI(...n){let t=0,e,i=!0,r=An,s,o,l,h,u;!Te(n[0])&&typeof n[0]=="object"?{delay:o,trailing:l=!0,leading:h=!0,rejectOnCancel:u=!1}=n[0]:[o,l=!0,h=!0,u=!1]=n;const d=()=>{e&&(clearTimeout(e),e=void 0,r(),r=An)};return g=>{const p=Le(o),m=Date.now()-t,y=()=>s=g();return d(),p<=0?(t=Date.now(),y()):(m>p&&(h||!i)?(t=Date.now(),y()):l&&(s=new Promise((_,C)=>{r=u?C:_,e=setTimeout(()=>{t=Date.now(),i=!0,_(y()),d()},Math.max(0,p-m))})),!h&&!e&&(e=setTimeout(()=>i=!0,p)),i=!1,s)}}function Yv(n,t=!1,e="Timeout"){return new Promise((i,r)=>{setTimeout(t?()=>r(e):i,n)})}function yI(n,...t){return t.some(e=>e in n)}function _I(n){return Vo()}function Fd(...n){if(n.length!==1)return QO(...n);const t=n[0];return typeof t=="function"?jo(ZO(()=>({get:t,set:An}))):vt(t)}function Ub(n,t=200,e={}){return Wb(mI(t,e),n)}function bI(n,t=200,e=!1,i=!0,r=!1){return Wb(vI(t,e,i,r),n)}function Gb(n,t=!0,e){_I()?wi(n,e):t?n():wr(n)}function Pf(n,t=!1){function e(g,{flush:p="sync",deep:m=!1,timeout:y,throwOnTimeout:_}={}){let C=null;const b=[new Promise(x=>{C=qe(n,T=>{g(T)!==t&&(C?C():wr(()=>C==null?void 0:C()),x(T))},{flush:p,deep:m,immediate:!0})})];return y!=null&&b.push(Yv(y,_).then(()=>Le(n)).finally(()=>C==null?void 0:C())),Promise.race(b)}function i(g,p){if(!Te(g))return e(T=>T===g,p);const{flush:m="sync",deep:y=!1,timeout:_,throwOnTimeout:C}=p??{};let b=null;const x=[new Promise(T=>{b=qe([n,g],([O,E])=>{t!==(O===E)&&(b?b():wr(()=>b==null?void 0:b()),T(O))},{flush:m,deep:y,immediate:!0})})];return _!=null&&x.push(Yv(_,C).then(()=>Le(n)).finally(()=>(b==null||b(),Le(n)))),Promise.race(x)}function r(g){return e(p=>!!p,g)}function s(g){return i(null,g)}function o(g){return i(void 0,g)}function l(g){return e(Number.isNaN,g)}function h(g,p){return e(m=>{const y=Array.from(m);return y.includes(g)||y.includes(Le(g))},p)}function u(g){return d(1,g)}function d(g=1,p){let m=-1;return e(()=>(m+=1,m>=g),p)}return Array.isArray(Le(n))?{toMatch:e,toContains:h,changed:u,changedTimes:d,get not(){return Pf(n,!t)}}:{toMatch:e,toBe:i,toBeTruthy:r,toBeNull:s,toBeNaN:l,toBeUndefined:o,changed:u,changedTimes:d,get not(){return Pf(n,!t)}}}function wI(n){return Pf(n)}function xI(n,t,e={}){const{immediate:i=!0}=e,r=vt(!1);let s=null;function o(){s&&(clearTimeout(s),s=null)}function l(){r.value=!1,o()}function h(...u){o(),r.value=!0,s=setTimeout(()=>{r.value=!1,s=null,n(...u)},Le(t))}return i&&(r.value=!0,Nb&&h()),Ol(l),{isPending:jo(r),start:h,stop:l}}function On(n){var t;const e=Le(n);return(t=e==null?void 0:e.$el)!=null?t:e}const qs=Nb?window:void 0;function Nv(...n){let t,e,i,r;if(typeof n[0]=="string"||Array.isArray(n[0])?([e,i,r]=n,t=qs):[t,e,i,r]=n,!t)return An;Array.isArray(e)||(e=[e]),Array.isArray(i)||(i=[i]);const s=[],o=()=>{s.forEach(d=>d()),s.length=0},l=(d,g,p,m)=>(d.addEventListener(g,p,m),()=>d.removeEventListener(g,p,m)),h=qe(()=>[On(t),Le(r)],([d,g])=>{if(o(),!d)return;const p=pI(g)?{...g}:g;s.push(...e.flatMap(m=>i.map(y=>l(d,m,y,p))))},{immediate:!0,flush:"post"}),u=()=>{h(),o()};return Ol(u),u}function CI(){const n=vt(!1),t=Vo();return t&&wi(()=>{n.value=!0},t),n}function qb(n){const t=CI();return mt(()=>(t.value,!!n()))}function Gh(n,t,e={}){const{window:i=qs,...r}=e;let s;const o=qb(()=>i&&"ResizeObserver"in i),l=()=>{s&&(s.disconnect(),s=void 0)},h=mt(()=>{const g=Le(n);return Array.isArray(g)?g.map(p=>On(p)):[On(g)]}),u=qe(h,g=>{if(l(),o.value&&i){s=new ResizeObserver(t);for(const p of g)p&&s.observe(p,r)}},{immediate:!0,flush:"post"}),d=()=>{l(),u()};return Ol(d),{isSupported:o,stop:d}}function Of(n,t={width:0,height:0},e={}){const{window:i=qs,box:r="content-box"}=e,s=mt(()=>{var g,p;return(p=(g=On(n))==null?void 0:g.namespaceURI)==null?void 0:p.includes("svg")}),o=vt(t.width),l=vt(t.height),{stop:h}=Gh(n,([g])=>{const p=r==="border-box"?g.borderBoxSize:r==="content-box"?g.contentBoxSize:g.devicePixelContentBoxSize;if(i&&s.value){const m=On(n);if(m){const y=m.getBoundingClientRect();o.value=y.width,l.value=y.height}}else if(p){const m=Array.isArray(p)?p:[p];o.value=m.reduce((y,{inlineSize:_})=>y+_,0),l.value=m.reduce((y,{blockSize:_})=>y+_,0)}else o.value=g.contentRect.width,l.value=g.contentRect.height},e);Gb(()=>{const g=On(n);g&&(o.value="offsetWidth"in g?g.offsetWidth:t.width,l.value="offsetHeight"in g?g.offsetHeight:t.height)});const u=qe(()=>On(n),g=>{o.value=g?t.width:0,l.value=g?t.height:0});function d(){h(),u()}return{width:o,height:l,stop:d}}function SI(n,t,e={}){const{root:i,rootMargin:r="0px",threshold:s=0,window:o=qs,immediate:l=!0}=e,h=qb(()=>o&&"IntersectionObserver"in o),u=mt(()=>{const y=Le(n);return(Array.isArray(y)?y:[y]).map(On).filter(fI)});let d=An;const g=vt(l),p=h.value?qe(()=>[u.value,On(i),g.value],([y,_])=>{if(d(),!g.value||!y.length)return;const C=new IntersectionObserver(t,{root:On(_),rootMargin:r,threshold:s});y.forEach(b=>b&&C.observe(b)),d=()=>{C.disconnect(),d=An}},{immediate:l,flush:"post"}):An,m=()=>{d(),p(),g.value=!1};return Ol(m),{isSupported:h,isActive:g,pause(){d(),g.value=!1},resume(){g.value=!0},stop:m}}function TI(n,t={}){const{window:e=qs,scrollTarget:i,threshold:r=0}=t,s=vt(!1);return SI(n,o=>{let l=s.value,h=0;for(const u of o)u.time>=h&&(h=u.time,l=u.isIntersecting);s.value=l},{root:i,window:e,threshold:r}),s}const da=new Map;function Zb(n){const t=_h();function e(l){var h;const u=da.get(n)||new Set;u.add(l),da.set(n,u);const d=()=>r(l);return(h=t==null?void 0:t.cleanups)==null||h.push(d),d}function i(l){function h(...u){r(h),l(...u)}return e(h)}function r(l){const h=da.get(n);h&&(h.delete(l),h.size||s())}function s(){da.delete(n)}function o(l,h){var u;(u=da.get(n))==null||u.forEach(d=>d(l,h))}return{on:e,once:i,off:r,emit:o,reset:s}}const PI={json:"application/json",text:"text/plain"};function Wv(n){return n&&yI(n,"immediate","refetch","initialData","timeout","beforeFetch","afterFetch","onFetchError","fetch","updateDataOnError")}function zd(n){return typeof Headers<"u"&&n instanceof Headers?Object.fromEntries(n.entries()):n}function $b(n,...t){var e;const i=typeof AbortController=="function";let r={},s={immediate:!0,refetch:!1,timeout:0,updateDataOnError:!1};const o={method:"GET",type:"text",payload:void 0};t.length>0&&(Wv(t[0])?s={...s,...t[0]}:r=t[0]),t.length>1&&Wv(t[1])&&(s={...s,...t[1]});const{fetch:l=(e=qs)==null?void 0:e.fetch,initialData:h,timeout:u}=s,d=Bd(),g=Bd(),p=Bd(),m=vt(!1),y=vt(!1),_=vt(!1),C=vt(null),b=Fa(null),x=Fa(null),T=Fa(h||null),O=mt(()=>i&&y.value);let E,V;const A=()=>{i&&(E==null||E.abort(),E=new AbortController,E.signal.onabort=()=>_.value=!0,r={...r,signal:E.signal})},B=at=>{y.value=at,m.value=!at};u&&(V=xI(A,u,{immediate:!1}));let Y=0;const J=async(at=!1)=>{var pt,ft;A(),B(!0),x.value=null,C.value=null,_.value=!1,Y+=1;const Xt=Y,It={method:o.method,headers:{}};if(o.payload){const Zt=zd(It.headers),ie=Le(o.payload);!o.payloadType&&ie&&Object.getPrototypeOf(ie)===Object.prototype&&!(ie instanceof FormData)&&(o.payloadType="json"),o.payloadType&&(Zt["Content-Type"]=(pt=PI[o.payloadType])!=null?pt:o.payloadType),It.body=o.payloadType==="json"?JSON.stringify(ie):ie}let zt=!1;const qt={url:Le(n),options:{...It,...r},cancel:()=>{zt=!0}};if(s.beforeFetch&&Object.assign(qt,await s.beforeFetch(qt)),zt||!l)return B(!1),Promise.resolve(null);let ue=null;return V&&V.start(),l(qt.url,{...It,...qt.options,headers:{...zd(It.headers),...zd((ft=qt.options)==null?void 0:ft.headers)}}).then(async Zt=>{if(b.value=Zt,C.value=Zt.status,ue=await Zt.clone()[o.type](),!Zt.ok)throw T.value=h||null,new Error(Zt.statusText);return s.afterFetch&&({data:ue}=await s.afterFetch({data:ue,response:Zt})),T.value=ue,d.trigger(Zt),Zt}).catch(async Zt=>{let ie=Zt.message||Zt.name;if(s.onFetchError&&({error:ie,data:ue}=await s.onFetchError({data:ue,error:Zt,response:b.value})),x.value=ie,s.updateDataOnError&&(T.value=ue),g.trigger(Zt),at)throw Zt;return null}).finally(()=>{Xt===Y&&B(!1),V&&V.stop(),p.trigger(null)})},st=Fd(s.refetch);qe([st,Fd(n)],([at])=>at&&J(),{deep:!0});const ct={isFinished:jo(m),isFetching:jo(y),statusCode:C,response:b,error:x,data:T,canAbort:O,aborted:_,abort:A,execute:J,onFetchResponse:d.on,onFetchError:g.on,onFetchFinally:p.on,get:ot("GET"),put:ot("PUT"),post:ot("POST"),delete:ot("DELETE"),patch:ot("PATCH"),head:ot("HEAD"),options:ot("OPTIONS"),json:Tt("json"),text:Tt("text"),blob:Tt("blob"),arrayBuffer:Tt("arrayBuffer"),formData:Tt("formData")};function ot(at){return(pt,ft)=>{if(!y.value)return o.method=at,o.payload=pt,o.payloadType=ft,Te(o.payload)&&qe([st,Fd(o.payload)],([Xt])=>Xt&&J(),{deep:!0}),{...ct,then(Xt,It){return yt().then(Xt,It)}}}}function yt(){return new Promise((at,pt)=>{wI(m).toBe(!0).then(()=>at(ct)).catch(ft=>pt(ft))})}function Tt(at){return()=>{if(!y.value)return o.type=at,{...ct,then(pt,ft){return yt().then(pt,ft)}}}}return s.immediate&&Promise.resolve().then(()=>J()),{...ct,then(at,pt){return yt().then(at,pt)}}}const Uv=1;function OI(n,t={}){const{throttle:e=0,idle:i=200,onStop:r=An,onScroll:s=An,offset:o={left:0,right:0,top:0,bottom:0},eventListenerOptions:l={capture:!1,passive:!0},behavior:h="auto",window:u=qs,onError:d=A=>{console.error(A)}}=t,g=vt(0),p=vt(0),m=mt({get(){return g.value},set(A){_(A,void 0)}}),y=mt({get(){return p.value},set(A){_(void 0,A)}});function _(A,B){var Y,J,st,ct;if(!u)return;const ot=Le(n);if(!ot)return;(st=ot instanceof Document?u.document.body:ot)==null||st.scrollTo({top:(Y=Le(B))!=null?Y:y.value,left:(J=Le(A))!=null?J:m.value,behavior:Le(h)});const yt=((ct=ot==null?void 0:ot.document)==null?void 0:ct.documentElement)||(ot==null?void 0:ot.documentElement)||ot;m!=null&&(g.value=yt.scrollLeft),y!=null&&(p.value=yt.scrollTop)}const C=vt(!1),b=jn({left:!0,right:!1,top:!0,bottom:!1}),x=jn({left:!1,right:!1,top:!1,bottom:!1}),T=A=>{C.value&&(C.value=!1,x.left=!1,x.right=!1,x.top=!1,x.bottom=!1,r(A))},O=Ub(T,e+i),E=A=>{var B;if(!u)return;const Y=((B=A==null?void 0:A.document)==null?void 0:B.documentElement)||(A==null?void 0:A.documentElement)||On(A),{display:J,flexDirection:st}=getComputedStyle(Y),ct=Y.scrollLeft;x.left=ct<g.value,x.right=ct>g.value;const ot=Math.abs(ct)<=(o.left||0),yt=Math.abs(ct)+Y.clientWidth>=Y.scrollWidth-(o.right||0)-Uv;J==="flex"&&st==="row-reverse"?(b.left=yt,b.right=ot):(b.left=ot,b.right=yt),g.value=ct;let Tt=Y.scrollTop;A===u.document&&!Tt&&(Tt=u.document.body.scrollTop),x.top=Tt<p.value,x.bottom=Tt>p.value;const at=Math.abs(Tt)<=(o.top||0),pt=Math.abs(Tt)+Y.clientHeight>=Y.scrollHeight-(o.bottom||0)-Uv;J==="flex"&&st==="column-reverse"?(b.top=pt,b.bottom=at):(b.top=at,b.bottom=pt),p.value=Tt},V=A=>{var B;if(!u)return;const Y=(B=A.target.documentElement)!=null?B:A.target;E(Y),C.value=!0,O(A),s(A)};return Nv(n,"scroll",e?bI(V,e,!0,!1):V,l),Gb(()=>{try{const A=Le(n);if(!A)return;E(A)}catch(A){d(A)}}),Nv(n,"scrollend",T,l),{x:m,y,isScrolling:C,arrivedState:b,directions:x,measure(){const A=Le(n);u&&A&&E(A)}}}function EI(n){return typeof Window<"u"&&n instanceof Window?n.document.documentElement:typeof Document<"u"&&n instanceof Document?n.documentElement:n}function Kb(n,t,e={}){var i;const{direction:r="bottom",interval:s=100,canLoadMore:o=()=>!0}=e,l=jn(OI(n,{...e,offset:{[r]:(i=e.distance)!=null?i:0,...e.offset}})),h=vt(),u=mt(()=>!!h.value),d=mt(()=>EI(Le(n))),g=TI(d);function p(){if(l.measure(),!d.value||!g.value||!o(d.value))return;const{scrollHeight:m,clientHeight:y,scrollWidth:_,clientWidth:C}=d.value,b=r==="bottom"||r==="top"?m<=y:_<=C;(l.arrivedState[r]||b)&&(h.value||(h.value=Promise.all([t(l),new Promise(x=>setTimeout(x,s))]).finally(()=>{h.value=null,wr(()=>p())})))}return qe(()=>[l.arrivedState[r],g.value],p,{immediate:!0}),{isLoading:u,reset(){wr(()=>p())}}}function Jb(n,t){const{containerStyle:e,wrapperProps:i,scrollTo:r,calculateRange:s,currentList:o,containerRef:l}="itemHeight"in t?kI(t,n):AI(t,n);return{list:o,scrollTo:r,containerProps:{ref:l,onScroll:()=>{s()},style:e},wrapperProps:i}}function Qb(n){const t=vt(null),e=Of(t),i=vt([]),r=Fa(n);return{state:vt({start:0,end:10}),source:r,currentList:i,size:e,containerRef:t}}function tw(n,t,e){return i=>{if(typeof e=="number")return Math.ceil(i/e);const{start:r=0}=n.value;let s=0,o=0;for(let l=r;l<t.value.length;l++){const h=e(l);if(s+=h,o=l,s>i)break}return o-r}}function ew(n,t){return e=>{if(typeof t=="number")return Math.floor(e/t)+1;let i=0,r=0;for(let s=0;s<n.value.length;s++){const o=t(s);if(i+=o,i>=e){r=s;break}}return r+1}}function iw(n,t,e,i,{containerRef:r,state:s,currentList:o,source:l}){return()=>{const h=r.value;if(h){const u=e(n==="vertical"?h.scrollTop:h.scrollLeft),d=i(n==="vertical"?h.clientHeight:h.clientWidth),g=u-t,p=u+d+t;s.value={start:g<0?0:g,end:p>l.value.length?l.value.length:p},o.value=l.value.slice(s.value.start,s.value.end).map((m,y)=>({data:m,index:y+s.value.start}))}}}function nw(n,t){return e=>typeof n=="number"?e*n:t.value.slice(0,e).reduce((i,r,s)=>i+n(s),0)}function rw(n,t,e,i){qe([n.width,n.height,t,e],()=>{i()})}function sw(n,t){return mt(()=>typeof n=="number"?t.value.length*n:t.value.reduce((e,i,r)=>e+n(r),0))}const MI={horizontal:"scrollLeft",vertical:"scrollTop"};function ow(n,t,e,i){return r=>{i.value&&(i.value[MI[n]]=e(r),t())}}function AI(n,t){const e=Qb(t),{state:i,source:r,currentList:s,size:o,containerRef:l}=e,h={overflowX:"auto"},{itemWidth:u,overscan:d=5}=n,g=tw(i,r,u),p=ew(r,u),m=iw("horizontal",d,p,g,e),y=nw(u,r),_=mt(()=>y(i.value.start)),C=sw(u,r);rw(o,t,l,m);const b=ow("horizontal",m,y,l),x=mt(()=>({style:{height:"100%",width:`${C.value-_.value}px`,marginLeft:`${_.value}px`,display:"flex"}}));return{scrollTo:b,calculateRange:m,wrapperProps:x,containerStyle:h,currentList:s,containerRef:l}}function kI(n,t){const e=Qb(t),{state:i,source:r,currentList:s,size:o,containerRef:l}=e,h={overflowY:"auto"},{itemHeight:u,overscan:d=5}=n,g=tw(i,r,u),p=ew(r,u),m=iw("vertical",d,p,g,e),y=nw(u,r),_=mt(()=>y(i.value.start)),C=sw(u,r);rw(o,t,l,m);const b=ow("vertical",m,y,l),x=mt(()=>({style:{width:"100%",height:`${C.value-_.value}px`,marginTop:`${_.value}px`}}));return{calculateRange:m,scrollTo:b,containerStyle:h,wrapperProps:x,currentList:s,containerRef:l}}const jI=te({props:{overflowHidden:{type:Boolean,default:!1}}});function DI(n,t,e,i,r,s){return W(),Q("div",{class:Ye(["sidebar-panel__wrapper",{"drag-overflow-hidden":n.overflowHidden}]),style:{overflow:"hidden"}},[Jn(n.$slots,"wrapper")],2)}const aw=Nt(jI,[["render",DI]]),Bn=()=>{const n=Gs(),{canvas:t}=ni(),e=()=>{const o=t.value;return o==null?void 0:o.getActiveObject()},[i,r]=Xb(e());mt(()=>n.getIsEffects);const s=()=>{const o=t.value.getActiveObject();r(o)};return wi(()=>{const o=t.value;o&&(o.on("selection:created",s),o.on("selection:updated",s),o.on("selection:cleared",s))}),ss(()=>{const o=t.value;o&&(o.off("selection:created",s),o.off("selection:updated",s),o.off("selection:cleared",s))}),{activeObject:i}},po=vt(),Yi=()=>{const{canvas:n}=ni(),{activeObject:t}=Bn();return{scaleElementToCanvasSize:(e,i=.5)=>{let r=e.width,s=e.height;const o=n.value.designRect.width,l=n.value.designRect.height,h=Math.min(o,l),u=Math.max(r,s);e.scaleX=h/u*i,e.scaleY=h/u*i,e.setCoords()},elementUpdate:(e,i)=>{t.value&&(t.value.set(e,i),t.value.setCoords(),n.value.requestRenderAll())},copyElement:()=>{const e=n.value,i=[],r=e.getActiveObject();return r&&r.clone(i).then(s=>{po.value=s}),!0},pasteElement:()=>{const e=n.value,i=[];return console.log(po.value,"clipboard.value"),po.value?(po.value.clone(i).then(r=>{e.discardActiveObject(),r.set({left:r.left+20,top:r.top+20,evented:!0}),r.type==="activeSelection"?(r.canvas=e,r.forEachObject(o=>{e.add(o)})):(r.superType==="node"&&(r=r.duplicate()),e.add(r));const s=po.value.set({top:r.top,left:r.left});po.value=s,r.setCoords(),e.setActiveObject(r),e.requestRenderAll()}),!0):!1},deleteElement:()=>{const e=n.value;let i=e.getActiveObject();if(i){if(i.isType("ActiveSelection"))for(let r of i.getObjects())e.remove(r);else e.remove(i);e.discardActiveObject(),e.requestRenderAll()}},lockElement:()=>{const e=t.value;e&&(e.set({lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,hasControls:!1,locked:!0}),e.setCoords(),n.value.renderAll())},unLockElement:()=>{const e=t.value;e&&(e.set({lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,hasControls:!0,locked:!1}),e.setCoords(),n.value.renderAll())},groupElements:()=>{const e=n.value.getActiveObject();if(!e||!e.isType("activeselection"))return;const i=n.value.getActiveObjects();n.value.discardActiveObject();const r=new Di(i,{interactive:!0,subTargetCheck:!0,isActiveGroup:!0,objectCaching:!1});n.value.remove(...i),n.value.add(r),n.value.setActiveObject(r),n.value.renderAll()},unGroupElements:()=>{}}};class lw extends Hb{constructor(t){super(t),this.depth=0}execute(){this.depth=this.canvas._objects.length-1}undo(){super.undo(),this.canvas.discardActiveObject();const t=this.findObjectWithId(this.object.objectId);if(t&&(t.isType("EditorClippingMask")||t.isType("EditorClippingText"))){const{clippingPath:e,originalClipPathObject:i}=t;e.objectId=i.objectId,e.top=i.top,e.left=i.left,e.width=i.width,e.height=i.height,e.scaleX=i.scaleX,e.scaleY=i.scaleY,e.originX=i.originX,e.originY=i.originY,this.canvas.insertAt(this.depth,e,!1),this.canvas.remove(t),this.object=t}else this.canvas.remove(t),this.object=t}redo(){if(super.redo(),this.object&&(this.object.isType("EditorClippingMask")||this.object.isType("EditorClippingText"))){this.canvas.insertAt(this.depth,this.object,!1),this.object.setClipTo(!0);const{clippingPath:t}=this.object,e=this.findObjectWithId(t.objectId);e&&this.canvas.remove(e)}else this.canvas.insertAt(this.depth,this.object,!1)}}const Ig=()=>{const{canvas:n}=ni(),t=Yi(),e=jg(),i=()=>{const s={fontFamily:"EmparioArmani",fontSize:120,lineHeight:.9,scaleX:1,scaleY:1,textAlign:"center",fontStyle:"normal",objectCaching:!1,perPixelTargetFind:!1,strokeNofill:!0,width:700};return new Us("This is a text",s)},r=s=>{const o=new hs("",{width:s.imageWidth||s.orgWidth||s.width,height:s.imageHeight||s.orgHeight||s.height});let l=s.url;return s.src&&(l=s.src),s.thumbnail&&(o._element=s.thumbnail,o.originalImageSize={width:s.thumbnail.width,height:s.thumbnail.height},o.imageViewport={x:0,y:0,width:1,height:1}),o.setSource(l,"imageUrl",function(h){console.log(h,"e")},{width:o.width,height:o.height}),t.scaleElementToCanvasSize(o,.5),o};return{createElement:async s=>{let o=n.value.getArtboard().width,l=n.value.getArtboard().height,h;s.type==="EditorImage"?h=await r(s):s.type==="EditorTextbox"&&(h=i()),h&&(h.top=s.top??l/2-h.getScaledHeight()/2,h.left=s.left??o/2-h.getScaledWidth()/2,h.setCoords(),n.value.add(h),n.value.setActiveObject(h),n.value.requestRenderAll(),e.execute([new lw(h)]))}}},qh=Xy("dragDrop",{state:()=>({dataTransfer:void 0}),getters:{getDataTransfer:n=>n.dataTransfer},actions:{setDataTransfer(n){this.dataTransfer=n},clearDataTransfer(){this.dataTransfer=void 0}}}),Yc=(n,t)=>{let e=!1;for(let i=0,r=t.length-1;i<t.length;r=i,i+=1){const s=t[i].x,o=t[i].y,l=t[r].x,h=t[r].y;o>n.y!=h>n.y&&n.x<(l-s)*(n.y-o)/(h-o)+s&&(e=!e)}return e};function II(n){const t=Zb("CLIPPING_MASK"),{canvas:e}=ni(),i=vt(),r=vt(!1),s=vt(!1),o=vt(0),l=vt(0),h=vt(0),u=vt(0),d=vt(1),g=qh(),p=(E,V,A)=>{var B;const Y=(B=document.querySelector(`img[src="${E}"]`))==null?void 0:B.cloneNode();return Y&&(Y.style.width=`${V}px`,Y.style.height=`${A}px`,Y.classList.add("all-drag-element__img")),Y},m=()=>{const E=document.createElement("div");E.classList.add("all-drag-element"),E.classList.add("beginDrag"),E.setAttribute("draggable","false"),E.style.zIndex="1";const V=document.createElement("div");V.classList.add("all-drag-element__content");const A=document.createElement("div");A.classList.add("all-drag-element__move");const B=((n==null?void 0:n.styleWidth)*1.1-(n==null?void 0:n.styleWidth))/2,Y=((n==null?void 0:n.styleHeight)*1.1-(n==null?void 0:n.styleHeight))/2;A.style.transform=`translate(${o.value-B}px, ${l.value-Y}px) rotate(0deg)`;const J=document.createElement("div");J.classList.add("all-drag-element__scale"),J.style.transform=`scale(${1.1})`,J.style.transformOrigin="left top";const st=p(n==null?void 0:n.thumbUrl,n==null?void 0:n.styleWidth,n==null?void 0:n.styleHeight);return n.thumbnail=st,J.appendChild(st),A.appendChild(J),V.appendChild(A),E.appendChild(V),g.clearDataTransfer(),g.setDataTransfer(n),t.emit(),E},y=E=>{const V=E.querySelector(".all-drag-element__move");V&&(V.style.opacity="0.5",V.style.transform=`translate(${o.value}px, ${l.value}px) rotate(0deg)`)},_=(E,V)=>{const A=V.querySelector(".all-drag-element__scale");if(A){const B=e.value,Y=B.getArtboard(),{tl:J,tr:st,bl:ct,br:ot}=Y.calcOCoords(),yt=[{x:J.x,y:J.y},{x:st.x,y:st.y},{x:ot.x,y:ot.y},{x:ct.x,y:ct.y}],Tt=B.getPointer(E,!0);if(Yc(Tt,yt)){E.target.style.cursor="copy";const at=B.getZoom(),pt=.5;let ft=(n==null?void 0:n.orgWidth)||0,Xt=(n==null?void 0:n.orgHeight)||0;const It=Y.width||0,zt=Y.height||0,qt=Math.min(It,zt),ue=Math.max(ft,Xt),Zt=qt/ue*pt,ie=((n==null?void 0:n.orgWidth)||0)*at/(n==null?void 0:n.styleWidth),me=((n==null?void 0:n.orgHeight)||0)*at/(n==null?void 0:n.styleHeight);d.value=Math.max(ie,me)*Zt}else d.value=1;A.style.transform=`scale(${d.value})`}},C=()=>{const E=document.body.querySelector(".all-drag-element");E&&document.body.removeChild(E)},b=(E,V)=>{o.value=E-h.value,l.value=V-u.value},x=E=>{E.target.style.cursor="";const V=document.body.querySelector(".all-drag-element");if(V){r.value=!0,b(E.pageX,E.pageY),y(V),_(E,V);const A=e.value,B=A.vptCoords;if(!B)return;const{tl:Y,tr:J,bl:st,br:ct}=B,ot=[{x:Y.x,y:Y.y},{x:J.x,y:J.y},{x:ct.x,y:ct.y},{x:st.x,y:st.y}],yt=A.getPointer(E);if(Yc(yt,ot)){s.value=!0;const Tt="dragover",{target:at,targets:pt}=A.findDragTargets(E),ft=A._dragSource,Xt={e:E,target:at,subTargets:pt,dragSource:ft,canDrop:!1,dropTarget:void 0};let It;A.fire(Tt,Xt),A._fireEnterLeaveEvents(at,Xt),at&&(at.canDrop(E)&&(It=at),at.fire(Tt,Xt));for(let zt=0;zt<pt.length;zt++){const qt=pt[zt];qt.canDrop(E)&&(It=qt),qt.fire(Tt,Xt)}A._renderDragEffects(E,ft,It),A._dropTarget=It}else if(s.value){s.value=!1;const Tt={e:E,target:A._draggedoverTarget,subTargets:A.targets,dragSource:A._dragSource};A.fire("dragleave",Tt),A._fireEnterLeaveEvents(void 0,Tt),A._renderDragEffects(E,A._dragSource),A._dropTarget=void 0,A.targets=[],A._hoveredTargets=[]}}else{const A=m();document.body.appendChild(A)}},T=(E,V)=>{const A=E.getViewportPoint(V),B=E.getScenePoint(V);return{viewportPoint:A,scenePoint:B,pointer:A,absolutePointer:B}},O=E=>{r.value=!1,C();const V=e.value,A=V.getArtboard(),{tl:B,tr:Y,bl:J,br:st}=A.calcOCoords(),ct=[{x:B.x,y:B.y},{x:Y.x,y:Y.y},{x:st.x,y:st.y},{x:J.x,y:J.y}],ot=V.getPointer(E,!0);if(Yc(ot,ct)){const{target:yt,targets:Tt}=V.findDragTargets(E),at=V._basicEventHandler("drop:before",{e:E,target:yt,subTargets:Tt,dragSource:V._dragSource,...T(V,E)});at.didDrop=!1,at.dropTarget=void 0,V._basicEventHandler("drop",at),V.fire("drop:after",at)}d.value=1,g.clearDataTransfer()};return{elementRef:i,isDrag:r,mouseDown:E=>{if(!i.value)return;h.value=E.clientX-i.value.getBoundingClientRect().left,u.value=E.clientY-i.value.getBoundingClientRect().top;const V=e.value;V.shiftX=h.value,V.shiftY=u.value,b(E.pageX,E.pageY);const A=Y=>{x(Y)},B=Y=>{O(Y),window.removeEventListener("mousemove",A,!1),window.removeEventListener("mouseup",B,!1)};window.addEventListener("mousemove",A,!1),window.addEventListener("mouseup",B,!1)}}}const RI=te({props:{dataItem:{type:Object,required:!0},width:{type:Number},height:{type:Number},thumbUrl:{type:String},margin:{type:Number,default:12},active:{type:Boolean,default:!1}},emits:["selected-item"],setup(n,{emit:t}){const{elementRef:e,isDrag:i,mouseDown:r}=II(n.dataItem);return{elementRef:e,isDrag:i,onMousedown:s=>{r(s)},onSelectedItem:s=>{t("selected-item",s)}}}});var LI=["srcset","src"];function BI(n,t,e,i,r,s){return W(),Q("div",{class:Ye(["base-item-image",{"base-item-image--selected":n.active}]),style:Ji(" width: ".concat(n.width,"px; margin: 0px ").concat(n.margin,"px; height: ").concat(n.height,"px; "))},[F("div",{ref:"elementRef",class:Ye(["item-image",{"drag-opacity":n.isDrag}]),onDragstart:t[1]||(t[1]=nl(function(){},["prevent"])),onMousedown:t[2]||(t[2]=function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return n.onMousedown&&n.onMousedown.apply(n,o)})},[F("img",{srcset:n.thumbUrl,src:n.thumbUrl,class:"image",draggable:"false",alt:"",crossOrigin:"anonymous",onDblclick:t[0]||(t[0]=nl(function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return n.onSelectedItem&&n.onSelectedItem.apply(n,o)},["stop"]))},null,40,LI),t[3]||(t[3]=F("div",{class:"image-overlay"},null,-1))],34)],6)}const cw=Nt(RI,[["render",BI],["__scopeId","data-v-60db16bf"]]),FI=n=>{let t=null;const e=()=>{var i,r;t={top:((i=n.value)==null?void 0:i.scrollTop)??0,left:((r=n.value)==null?void 0:r.scrollLeft)??0}};ry(async()=>{var i,r;await wr(),t&&((i=n.value)==null||i.scroll(t)),(r=n.value)==null||r.addEventListener("scroll",e)}),sy(()=>{var i;(i=n.value)==null||i.removeEventListener("scroll",e)})},zI=(n,t,e)=>(e*=n.length-1,n=hw(n),t>n+e),VI=(n,t)=>n.map(e=>(e=Object.assign({},e),e.width=Math.max(e.minWidth||0,t/e.height*e.width),e.height=t,e)),hw=n=>n.reduce((t,e)=>t+e.width,0),XI=(n,t,e,i=0)=>!(n===0||t>=e||Math.abs(e-n)>Math.abs(e-t))||t<i||t===0,Gv=(n,t,e)=>(e=e.some(i=>i.footer)||t.some(i=>i.Fb!=null),n=n.length<t.length?t[n.length].Gqa:0,e?n:0),qv=(n,t,e,i=0,r=Number.MAX_VALUE,s=0)=>({height:Math.max(i,Math.min(t,r)),elements:n.map(o=>({child:o,width:Math.max(t/o.height*o.width,e,o.minWidth||0),footer:o.footer})),Gqa:s}),Nc=(n,t,e,i)=>{let r=(n.length-1)*e;if(n.length*i>t-r)return 0;const s=hw(n),o=(t-r)/s;return r=n.filter(l=>l.width*o>=i),r.length===n.length?o*n[0].height:(n=n.length-r.length,Nc(r,t-n*i-n*e,e,i))},uw=()=>{let n=[];return{assetsGridlayout:(t,e)=>{if(!t||e.length===0)return[];const i={b:t.clientWidth-8,c:112,d:void 0,e:void 0,f:8,g:1,h:58,k:!1,l:!1,m:!0,children:e},{b:r,c:s,d:o,e:l,f:h,g:u=1,h:d,k:g,l:p,m}=i;if(r!=null){let y=0,_=[],C=i.Dea||1/0,b=[...n];n=[];let x=i.children.filter(O=>0<O.width&&0<O.height),T=VI(x,s);x=0,0<T.length&&(_=[T[0]],y=Nc(_,r,h,d));for(const O of T.slice(1))if(T=y,y=Nc([..._,O],r,h,d),XI(T,y,s,o)){const E=Gv(n,b,_),V=qv(_,T,d,o,l,E);if(n.push(V),x+=_.length,C<=n.length&&x>=u)break;_=[O],y=Nc(_,r,h,d)}else _.push(O);if(0<_.length&&(C>n.length||u>x)){let O;if(C=zI(_,r,h),g&&C&&0<n.length)return;b=Gv(n,b,_),C=m&&C&&!((O=n[n.length-1])===null||O===void 0)&&O.height?n[n.length-1].height:Math.min(s,y),n.push(qv(_,C,d,o,l,b))}}return n},assetsListLayout:(t,e)=>!t||e.length===0?[]:e}},dw=n=>{const{isBearerTokenRequired:t,query:e,json:i}=n;return r=>Rg(r,[HI(t),YI(e),WI(i)])},Rg=(n,t)=>t.reduce((e,i)=>i(e),n),HI=(n=!1)=>n?t=>(t.cancel(),t):Uo,YI=n=>{const t=Sh(n);return!t||Object.keys(t).length===0?Uo:e=>(e.url+=NI(t),e)},NI=n=>{const t=new URLSearchParams;for(const[i,r]of Object.entries(n)){if(Array.isArray(r)){r.forEach(s=>t.append(i,s.toString()));continue}r&&t.append(i,r.toString())}const e=t.toString();return e.length>0?`?${e}`:""},WI=n=>{const t=Sh(n);return t?e=>(e.options.headers={...e.options.headers,"Content-Type":"application/json"},e.options.body=JSON.stringify(UI(t)),e):Uo},UI=n=>Object.fromEntries(Object.entries(n).filter(([t,e])=>e!==""&&e!==void 0&&e!==null)),fw=n=>{const{responseSchema:t,errorResponseSchema:e}=n;return i=>Rg(i,[GI(t),qI(e)])},GI=n=>n?t=>{if(!t.response.ok)return t;if(!n.safeParse(t.data).success)throw new TypeError("TYPE_ERROR");return t}:Uo,qI=n=>n?t=>{if(t.response.ok)return t;if(!n.safeParse(t.data).success)throw new TypeError("TYPE_ERROR");return t}:Uo,gw=n=>{const{errorResponseSchema:t}=n;return e=>Rg(e,[ZI(),$I(),KI(),JI(t)])},ZI=()=>n=>(n.error,n),$I=()=>n=>(n.error,n),KI=()=>n=>(n.response,n),JI=n=>n?t=>{const e=typeof t.data=="string"?JSON.parse(t.data):t.data;return n.safeParse(e).success,t}:Uo,Uo=n=>n,pw=function(n){const t=n.scrollHeight>n.clientHeight,e=window.getComputedStyle(n).overflowY.indexOf("hidden")!==-1;return t&&!e},QI="https://pixabay.com/api/",t7="45921881-4317fce2111e9cd4e835e278e",e7=()=>({getPixabayImages:n=>{const t=vt(50),e=vt(0),i=vt(1),r=vt(!1),s=vt([]),o=vt(!0),l=vt();let h=[];const u=Sh(n.query);for(const[g,p]of Object.entries(u))g==="per_page"&&(t.value=p),g==="page"&&(e.value=p);const d=async()=>{o.value=!0,l.value=void 0,n.query={key:`${t7}`,...n.query,per_page:`${t.value}`,page:`${e.value}`};const{data:g}=await $b(QI,{beforeFetch:dw(n),afterFetch:fw(n),onFetchError:gw(n)}).get();o.value=!1;try{const p=JSON.parse(g.value),m=p.hits;i.value=Math.ceil(p.totalHits/t.value),h?h=h.concat(m):h=m,s.value=h,r.value=e.value<i.value}catch(p){o.value=!1,l.value=p,s.value=[],r.value=!1}};return qe(e,()=>{e.value>0&&e.value<=i.value?d():e.value=i.value}),{data:s,isFetching:o,error:l,page:e,hasNextPage:r,isScrollable:pw}}}),i7={components:{BasePanel:aw,BaseItem:cw,BaseTooltip:We},setup(n,{expose:t}){const e=Ig(),{getPixabayImages:i}=e7(),{assetsGridlayout:r,assetsListLayout:s}=uw(),o=vt(),l=vt(!1),h=vt(),u=25,d=vt(1),g=vt("people"),p=(Y,J)=>{const st={type:"EditorImage",...J,thumbnail:Y.target,crossOrigin:"anonymous"};e.createElement(st)},{data:m,isFetching:y,error:_,page:C,hasNextPage:b,isScrollable:x}=i({isBearerTokenRequired:!1,query:{q:`${g.value}`,image_type:"photo",per_page:`${u}`,page:`${d.value}`,pretty:!0}}),T=mt(()=>m.value.map(Y=>({id:Y.id,type:"EditorImage",orgWidth:Y.imageWidth,orgHeight:Y.imageHeight,width:Y.imageWidth,height:Y.imageHeight,url:Y.largeImageURL,src:Y.largeImageURL,thumbUrl:Y.previewURL,crossOrigin:"anonymous"}))),O=mt(()=>(h.value=r(o.value,T.value),h.value)),{list:E,containerProps:V,wrapperProps:A,scrollTo:B}=Jb(O,{itemHeight:Y=>{const J=8+20/O.value.length;return O.value[Y].height+J},overscan:10});return console.log(E,"listPhotos"),t({scrollTo:B}),FI(V.ref),wi(()=>{Kb(V.ref,()=>{b.value&&(C.value+=1)},{distance:10,throttle:200}),Gh(V.ref,()=>{h.value=r(o.value,T.value),x(V.ref.value)||(C.value=d.value)})}),{overflowHidden:l,photoEl:o,listPhotos:E,containerProps:V,wrapperProps:A,onAddImage:p,data:m}}};var n7={ref:"photoEl",class:"sidebar-panel__photos"},r7={style:{display:"flex","flex-direction":"column","min-width":"100%","min-height":"100%"}};function s7(n,t,e,i,r,s){var o=gt("BaseItem"),l=gt("BasePanel");return W(),_i(l,{overflowHidden:i.overflowHidden},{wrapper:Et(function(){return[F("div",{class:"sidebar-panel__scroll",ref:i.containerProps.ref,onScroll:t[0]||(t[0]=function(){for(var h,u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];return i.containerProps.onScroll&&(h=i.containerProps).onScroll.apply(h,u)})},[F("div",yl(i.wrapperProps,{class:"sidebar-panel__inner"}),[F("div",n7,[F("div",r7,[(W(!0),Q(Se,null,Jr(i.listPhotos,function(h){var u=h.data,d=h.index;return W(),Q("div",{key:d,style:"margin: ".concat(4,"px 0px;")},[F("div",{class:"flex flex-row",style:Ji("height: ".concat(u.height,"px; margin: 0px ").concat(0,"px;"))},[(W(!0),Q(Se,null,Jr(u.elements,function(g,p){return W(),_i(o,{key:p,"aria-id":g.child.id,"aria-index":p,dataItem:ph(ph({},g.child),{styleWidth:g.width,styleHeight:u.height}),height:u.height,width:g.width,thumbUrl:g.child.thumbUrl,margin:4,onSelectedItem:function(m){return i.onAddImage(m,g.child)}},null,8,["aria-id","aria-index","dataItem","height","width","thumbUrl","onSelectedItem"])}),128))],4)])}),128))])],512)],16)],544)]}),_:1},8,["overflowHidden"])}const o7=Nt(i7,[["render",s7]]),a7="https://www.fotor.com",l7=()=>({getBasicShapes:n=>{const t=`${a7}//api/app/sticker/v2/search`,e=vt(50),i=vt(0),r=vt(1),s=vt(!1),o=vt([]),l=vt(!0),h=vt();let u=[];const d=Sh(n.query);for(const[p,m]of Object.entries(d))p==="pageSize"&&(e.value=m),p==="pageNo"&&(i.value=m);const g=async()=>{l.value=!0,h.value=void 0,n.query={...n.query,pageSize:`${e.value}`,pageNo:`${i.value}`};const{data:p}=await $b(t,{beforeFetch:dw(n),afterFetch:fw(n),onFetchError:gw(n)}).get();l.value=!1;try{const m=JSON.parse(p.value).data;r.value=m.totalPage,u?u=u.concat(m.data):u=m.data,o.value=u,s.value=m.hasNextPage}catch(m){l.value=!1,h.value=m,o.value=[],s.value=!1}};return qe(i,()=>{i.value>0&&i.value<=r.value?g():i.value=r.value}),{data:o,isFetching:l,error:h,page:i,hasNextPage:s,isScrollable:pw}}}),c7=te({components:{BasePanel:aw,BaseItem:cw},setup(){const{getBasicShapes:n}=l7(),{assetsGridlayout:t,assetsListLayout:e}=uw(),i=vt(),r=vt(!1),s=vt(),o=25,l=vt(1),{data:h,isFetching:u,error:d,page:g,hasNextPage:p,isScrollable:m}=n({isBearerTokenRequired:!1,query:{category:"2",pageNo:`${l.value}`,pageSize:`${o}`}}),y=mt(()=>h.value.map(O=>({id:O.id,type:"EditorImage",width:O.width,height:O.height,orgWidth:O.width,orgHeight:O.height,resId:O.resId,url:"https://pub-static.fotor.com"+O.url,src:"https://pub-static.fotor.com"+O.url,thumbUrl:"https://pub-static.fotor.com"+O.thumb,folderId:"",fileName:O.fileName,crossOrigin:"anonymous"}))),_=mt(()=>(s.value=t(i.value,y.value),s.value)),{list:C,containerProps:b,wrapperProps:x,scrollTo:T}=Jb(_,{itemHeight:O=>{const E=8+20/_.value.length;return _.value[O].height+E},overscan:10});return wi(()=>{Kb(b.ref,()=>{p.value&&(g.value+=1)},{distance:10,throttle:200}),Gh(b.ref,()=>{s.value=t(i.value,y.value),m(b.ref.value)||(g.value=l.value)})}),{overflowHidden:r,shapeEl:i,listShapes:C,containerProps:b,wrapperProps:x,data:h}}});var h7={ref:"shapeEl",class:"sidebar-panel__photos"},u7={style:{display:"flex","flex-direction":"column","min-width":"100%","min-height":"100%"}};function d7(n,t,e,i,r,s){var o=gt("BaseItem"),l=gt("BasePanel");return W(),_i(l,{overflowHidden:n.overflowHidden},{wrapper:Et(function(){return[F("div",{class:"sidebar-panel__scroll",ref:n.containerProps.ref,onScroll:t[0]||(t[0]=function(){for(var h,u=[],d=0;d<arguments.length;d++)u[d]=arguments[d];return n.containerProps.onScroll&&(h=n.containerProps).onScroll.apply(h,u)})},[F("div",yl(n.wrapperProps,{class:"sidebar-panel__inner"}),[F("div",h7,[F("div",u7,[(W(!0),Q(Se,null,Jr(n.listShapes,function(h){var u=h.data,d=h.index;return W(),Q("div",{key:d,style:"margin: ".concat(4,"px 0px;")},[F("div",{class:"flex flex-row",style:Ji("height: ".concat(u.height,"px; margin: 0px ").concat(0,"px;"))},[(W(!0),Q(Se,null,Jr(u.elements,function(g,p){return W(),_i(o,{key:p,"aria-id":g.child.id,"aria-index":p,height:u.height,width:g.width,thumbUrl:g.child.thumbUrl,margin:4,onSelectedItem:function(m){return n.onAddImage(m,g.child)}},null,8,["aria-id","aria-index","height","width","thumbUrl","onSelectedItem"])}),128))],4)])}),128))])],512)],16)],544)]}),_:1},8,["overflowHidden"])}const f7=Nt(c7,[["render",d7]]),g7=te({setup(){const n=Ig();return{onAddTextHeadline:()=>{n.createElement({type:"EditorTextbox"})}}}});var p7={class:"w-full px-5"};function m7(n,t,e,i,r,s){return W(),Q("div",p7,[t[2]||(t[2]=F("div",{class:"p-selectbutton p-component w-full",role:"group","aria-labelledby":"basic","data-pc-name":"selectbutton","data-pc-section":"root",pc1930:""},[F("button",{type:"button",class:"p-togglebutton p-component p-togglebutton-checked flex-1","aria-pressed":"true","data-pc-name":"pcbutton","data-pc-extend":"togglebutton","data-pc-section":"root","data-p-checked":"true","data-p-disabled":"false"},[F("span",{class:"p-togglebutton-content","data-pc-section":"content"},[F("span",{class:"p-togglebutton-label","data-pc-section":"label"},Kn("Text Styles"))])]),F("button",{type:"button",class:"p-togglebutton p-component flex-1","aria-pressed":"false","data-pc-name":"pcbutton","data-pc-extend":"togglebutton","data-pc-section":"root","data-p-checked":"false","data-p-disabled":"false"},[F("span",{class:"p-togglebutton-content","data-pc-section":"content"},[F("span",{class:"p-togglebutton-label","data-pc-section":"label"},Kn("My Fonts"))])])],-1)),F("div",null,[F("div",{class:"sidebar-panel__title mt-3",draggable:"true",onClick:t[0]||(t[0]=function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return n.onAddTextHeadline&&n.onAddTextHeadline.apply(n,o)})},t[1]||(t[1]=[F("span",null,Kn("Add Text"),-1)]))]),t[3]||(t[3]=F("div",null,null,-1))])}const v7=Nt(g7,[["render",m7],["__scopeId","data-v-7900da01"]]),y7={setup(){const n=Gs(),t=mt(()=>n.getIsToggleSidebar),e=mt(()=>n.getIsEffects||n.getIsFontFamily);return{drawer:t,isShow:e,toggleSidebar:()=>{n.setIsToggleSidebar(!t.value)}}}};var _7={class:"sizer-wrap"},b7={key:0,width:"24",height:"24",viewBox:"0 0 24 24",focusable:"false",role:"presentation"},w7={key:1,width:"24",height:"24",viewBox:"0 0 24 24",focusable:"false",role:"presentation"};function x7(n,t,e,i,r,s){return W(),Q("div",_7,[t[4]||(t[4]=F("div",{class:"strip"},null,-1)),t[5]||(t[5]=F("div",{class:"sizer"},[F("div",{class:"line"})],-1)),F("button",{class:"btn",onClick:t[0]||(t[0]=function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return i.toggleSidebar&&i.toggleSidebar.apply(i,o)})},[t[3]||(t[3]=F("div",{class:"overlay"},null,-1)),F("span",null,[i.drawer?(W(),Q("svg",b7,t[1]||(t[1]=[F("path",{d:"M13.706 9.698a.988.988 0 0 0 0-1.407 1.01 1.01 0 0 0-1.419 0l-2.965 2.94a1.09 1.09 0 0 0 0 1.548l2.955 2.93a1.01 1.01 0 0 0 1.42 0 .988.988 0 0 0 0-1.407l-2.318-2.297 2.327-2.307z",fill:"currentColor","fill-rule":"evenodd"},null,-1)]))):Cr("",!0),i.drawer?Cr("",!0):(W(),Q("svg",w7,t[2]||(t[2]=[F("path",{d:"M10.294 9.698a.988.988 0 0 1 0-1.407 1.01 1.01 0 0 1 1.419 0l2.965 2.94a1.09 1.09 0 0 1 0 1.548l-2.955 2.93a1.01 1.01 0 0 1-1.42 0 .988.988 0 0 1 0-1.407l2.318-2.297-2.327-2.307z",fill:"currentColor","fill-rule":"evenodd"},null,-1)])))])])])}const C7=Nt(y7,[["render",x7]]),S7={components:{BaseSiderbar:ZD,BaseSidebarMenu:rI,BaseSidebarPanel:dI,Photos:o7,Shapes:f7,Text:v7,Resizer:C7},setup(){const n=Gs(),t=vt(),e=mt(()=>ND),i=mt(()=>n.getIsToggleSidebar?78:72),r=mt(()=>n.getIsToggleSidebar?303:0),s=mt(()=>n.getActiveSidebarItem.sidebarItemType);return wi(()=>{n.setWrapperEl(t)}),{wrapperEl:t,menuItems:e,widthMenu:i,widthPanel:r,containerPanel:s}}};function T7(n,t,e,i,r,s){var o=gt("BaseSidebarMenu"),l=gt("BaseSidebarPanel"),h=gt("Resizer"),u=gt("BaseSiderbar");return W(),_i(u,{widthMenu:i.widthMenu,widthPanel:i.widthPanel},{menu:Et(function(){return[et(o,{items:i.menuItems},null,8,["items"])]}),panel:Et(function(){return[et(l,null,{content:Et(function(){return[(W(),_i(hE,null,[(W(),_i(tl(i.containerPanel),{ref:"wrapperEl"},null,512))],1024))]}),_:1})]}),toggle:Et(function(){return[et(h)]}),_:1},8,["widthMenu","widthPanel"])}const P7=Nt(S7,[["render",T7]]),O7=()=>{const{canvas:n}=ni(),t=jn({layer:[]}),e=h=>{n.value._objects.forEach(d=>{d.layerThumbDirty=!!h.layerThumbDirty});const u=[...n.value._objects];t.layer=u},i=Ub(()=>{e({layerThumbDirty:!0})},200),r=h=>{n.value.setActiveObject(h),n.value.renderAll()},s=(h,u,d,g)=>{var p=h/d,m=u/g;return Math.min(p,m)},o=h=>h.layerThumbDirty,l=h=>{if(h.layerThumb&&!o(h))return h.layerThumb;try{const u=h.getScaledWidth(),d=h.getScaledHeight(),g=s(35,35,u,d),p=h.toDataURL({multiplier:g,quality:.5});return h.layerThumbDirty=!1,h.layerThumb=p,p}catch{return""}};return wi(()=>{e({layerThumbDirty:!0}),nn.addEventListener(en.THUMB_CHANGED,i)}),ss(()=>{nn.removeEventListener(en.THUMB_CHANGED,i)}),{stateLayer:t,imgToDataUrl:l,setSelectLayer:r}},E7=te({components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We},setup(){const{canvas:n}=ni(),{activeObject:t}=Bn(),{stateLayer:e,imgToDataUrl:i,setSelectLayer:r}=O7();return{dataLayers:mt(()=>e.layer.slice().reverse()),hasActive:s=>t.value===s,imgToDataUrl:i,setSelectLayer:r,onUpdateLayer:s=>{s.set("visible",!s.visible),s.setCoords(),n.value.requestRenderAll()},iconLayer:s=>s.visible?"icon-layer-show":"icon-layer-hide"}}});var M7={class:"flex-[2] flex flex-col mt-1px border-t border-surface"},A7={class:"flex-grow-2 h-0 overflow-hidden relative"},k7={class:"p-6px w-full absolute top-0 bottom-0 flex flex-col"},j7={class:"relative h-full"},D7={class:"h-full layer-panel__scroll relative pr-[6px] w-[233px]"},I7={class:"w-full !w-[227px] flex flex-col"},R7=["onClick"],L7={class:"w-[35px] h-[35px] flex flex-col justify-center ml-[6px]"},B7=["src"],F7={class:"w-[145px] pl-[8px] flex flex-col"},z7={class:"flex flex-justify-end h-40px mt-4px px-8px py-4px bg-slate-200 border-t border-slate-200"};function V7(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip");return W(),Q("div",M7,[t[0]||(t[0]=F("div",{class:"h-37px line-height-[37px] text-align-center bg-slate-200"}," Layers ",-1)),t[1]||(t[1]=F("div",{class:"splitter"},null,-1)),F("div",A7,[F("div",k7,[F("div",j7,[F("div",D7,[F("ul",I7,[(W(!0),Q(Se,null,Jr(n.dataLayers,function(u,d){return W(),Q("li",{class:Ye(["inline-flex items-center my-[2px] gap-x-2 text-sm font-medium text-gray-800 -mt-px first:mt-0 dark:text-white hover:cursor-pointer"]),key:d,onClick:function(g){return n.setSelectLayer(u)}},[F("div",{class:Ye(["flex justify-between items-center h-[42px] m-[1px_auto] p-[2px] rounded-[2px]",[{"bg-white":d%2===0},{"bg-slate-50":d%2!==0},{"!bg-slate-200 border border-[#3f9eff]":n.hasActive(u)}]])},[F("div",L7,[F("img",{src:n.imgToDataUrl(u),alt:"",draggable:"false",crossOrigin:"anonymous",class:"object-cover w-[100%] h-[100%] m-[0_auto] border border-[1px_soid_red]"},null,8,B7)]),F("div",F7,[F("span",null,Kn(u.objectId),1),F("span",null,Kn(u.type.substring(6,100)),1)]),F("div",null,[et(h,{text:"Hide",location:"top",hiddenTooltip:!0},{default:Et(function(){return[et(l,{onClick:nl(function(g){return n.onUpdateLayer(u)},["stop"])},{default:Et(function(){return[et(o,{name:n.iconLayer(u),size:18,class:"text-[#999]"},null,8,["name"])]}),_:2},1032,["onClick"])]}),_:2},1024)])],2)],8,R7)}),128))])])])])]),F("div",z7,[et(h,{text:"Duplicate",location:"top"},{default:Et(function(){return[et(l,null,{default:Et(function(){return[et(o,{name:"icon-duplicate"})]}),_:1})]}),_:1}),et(h,{text:"Delete",location:"top"},{default:Et(function(){return[et(l,null,{default:Et(function(){return[et(o,{name:"icon-delete"})]}),_:1})]}),_:1})])])}const X7=Nt(E7,[["render",V7],["__scopeId","data-v-465b6b66"]]),fa=vt(),Zh=()=>{const{canvas:n}=ni(),t=vt(1080),e=vt(1080),i=b=>{const x=t.value,T=e.value,O=b.getBoundingClientRect();n.value.initialize({width:O.width,height:O.height},{width:x,height:T})},r=b=>{Gh(b,x=>{const[T]=x,{width:O,height:E}=T.contentRect,V=o();(!V||O!==V.width||E!==V.height)&&(n.value.updateCanvasSize({width:O,height:E},void 0),nn.dispatchEvent(en.CANVAS_SIZE_CHANGED,n.value))})},s=()=>{var b;let x;const T=n.value,O=document.createElement("img");O.src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB3aWR0aD0iMjFweCIgaGVpZ2h0PSIxMHB4IiB2aWV3Qm94PSIwIDAgMjEgMTAiIHZlcnNpb249IjEuMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayI+CiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUzLjIgKDcyNjQzKSAtIGh0dHBzOi8vc2tldGNoYXBwLmNvbSAtLT4KICAgIDx0aXRsZT5JY29uIC8gY3Vyc29yIC8gU3BpbjwvdGl0bGU+CiAgICA8ZGVzYz5DcmVhdGVkIHdpdGggU2tldGNoLjwvZGVzYz4KICAgIDxnIGlkPSJhcHAtZGVzaWduIiBzdHJva2U9Im5vbmUiIHN0cm9rZS13aWR0aD0iMSIgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj4KICAgICAgICA8ZyBpZD0iSWNvbi0vLWN1cnNvci0vLVNwaW4iIHRyYW5zZm9ybT0idHJhbnNsYXRlKC0yLjAwMDAwMCwgLTYuMDAwMDAwKSIgZmlsbD0iIzFCMUUyNCIgc3Ryb2tlPSIjRkZGRkZGIj4KICAgICAgICAgICAgPHBhdGggZD0iTTE5LjY5Njg2OSwxMC41ODIxMDQ1IEwyMi41LDcuNzk4OTgwOTUgTDIyLjUsMTUuNSBMMTQuNzQwNjc4LDE1LjUgTDE3LjcyODA3OSwxMi41MzYwNTYyIEMxNi4yNzAzOSwxMS42OTE3NzU0IDE0LjQ0MTU2NjksMTEuMjE0Mjg1NyAxMi41LDExLjIxNDI4NTcgQzEwLjU1ODQzMzEsMTEuMjE0Mjg1NyA4LjcyOTYxMDA0LDExLjY5MTc3NTQgNy4yNzE5MjA5NiwxMi41MzYwNTYyIEwxMC4yNTkzMjIsMTUuNSBMMi41LDE1LjUgTDIuNSw3Ljc5ODk4MDk1IEw1LjMwMzEzMDE5LDEwLjU4MjEwMzggQzcuMjc5ODExNDUsOS4yNTA2MTMwMyA5LjgxMzk0ODM1LDguNSAxMi41LDguNSBDMTUuMTg2MDUxNyw4LjUgMTcuNzIwMTg4NSw5LjI1MDYxMzAzIDE5LjY5Njg2OSwxMC41ODIxMDQ1IFoiIGlkPSJGaWxsLTEiPjwvcGF0aD4KICAgICAgICA8L2c+CiAgICA8L2c+Cjwvc3ZnPg==",O.className="cursorImg",(b=T.lowerCanvasEl.parentNode)==null||b.appendChild(O),T.on(ui.MOUSE_OVER,E=>{E&&E.e&&E.e.fabricObjectCorner&&E.e.fabricObjectCorner.key==="mtr"&&(x=E.target)}),T.on(ui.MOUSE_MOVE,E=>{E.e.target===T.upperCanvasEl?(Object.assign(O.style,{opacity:T.upperCanvasEl.style.cursor!=="none"||T.copyStyleApplying?0:1}),E&&E.e&&E.target&&E.target===x&&Object.assign(O.style,{transform:`translate(-10px,-4px) rotate(${E.target.angle}deg)`,left:`${E.e.offsetX}px`,top:`${E.e.offsetY}px`})):O.style.opacity!=="0"&&(O.style.opacity="0")})},o=()=>n.value.canvasSize,l=()=>n.value.canvasSize,h=b=>b?n.value.getdesignRectWithZoom():n.value.getdesignRect(),u=b=>{const x=n.value,T=b.e;T.preventDefault(),T.stopPropagation();const O=T.deltaX;let E=T.deltaY;const V=T.ctrlKey,A=T.metaKey;if(V||A){Math.abs(E)>=30&&(E=E>0?4:-4);let B=x.getZoom();B+=-E/100,B=Math.round(100*B),g(B,b)}else x.moveCanvasByOffset(O,-E)},d=b=>{g(b)},g=(b,x)=>{const T=n.value;if(b!="fit"&&b!=="fitWidth"&&b!="original"){b&&(b=parseInt(b)/100);let O=T.centerPoint;const E=T.getArtboard();if(E.setCoords(),x&&E){const{tl:V,tr:A,bl:B,br:Y}=E.calcOCoords(),J=[{x:V.x,y:V.y},{x:A.x,y:A.y},{x:Y.x,y:Y.y},{x:B.x,y:B.y}];Yc(x.viewportPoint,J)&&(O=x.viewportPoint)}T.zoomToPoint(O,Number(b),!1)}m(),T.requestRenderAll()},p=b=>{const x=n.value,T=new I(b.x,b.y);x.absolutePan(T),x.clipPath&&x.clipPath.needRefresh(),x.requestRenderAll()},m=()=>{nn.dispatchEvent(en.CANVAS_ZOOM,{zoomLevel:n.value.getZoom()})},y=b=>{const x=b.object,T=b.clipCoords;T?_(x)||n.value.updateClipArea(T,x):(C(x),n.value.updateClipArea()),n.value.requestRenderAll()},_=b=>b.group?(b.clone().then(x=>{x.previousImageViewport=Object.assign({},b.previousImageViewport),x.initialImageSize=Object.assign({},b.initialImageSize),x.imageViewport=Object.assign({},b.imageViewport),x.imageScale=b.imageScale,x.imageAngle=b.imageAngle,x.imageCanvasScale=b.imageCanvasScale,x.imageFlipX=b.imageFlipX,x.imageFlipY=b.imageFlipY,x.clippingPath=b.clippingPath,x.lockUniScaling=!0,x.group=b.group,b.group._exitGroup(x),x.generateNewObjectId(),fa.value=x.objectId,x.mappingOriginalObject=b,n.value.add(x),n.value.setActiveObject(x),x._onDoubleClick(),b.visible=!1,b.group.dirty=!0,n.value.requestRenderAll()}),!0):(b.objectId!==fa.value&&(fa.value=void 0),!1),C=b=>{if(b.objectId===fa.value&&b.mappingOriginalObject){const x=b.mappingOriginalObject;return x.visible=!0,x.previousImageViewport=Object.assign({},b.previousImageViewport),x.initialImageSize=Object.assign({},b.initialImageSize),x.imageViewport=Object.assign({},b.imageViewport),x.imageScale=b.imageScale,x.imageAngle=b.imageAngle,x.imageCanvasScale=b.imageCanvasScale,x.imageFlipX=b.imageFlipX,x.imageFlipY=b.imageFlipY,b.clippingPath&&(x.clippingPath=b.clippingPath,x.clipPath.scaleX=b.clippingPath.scaleX,x.clipPath.scaleY=b.clippingPath.scaleY,x.clipPath.angle=b.clippingPath.angle),x.dirty=!0,x.group&&(x.group.dirty=!0,x.group.addDeselectedEvent(x),x.group.interactive=!0,x.group.isActiveGroup=!0),n.value.remove(b),n.value.setActiveObject(x),x.isType("EditorClippingText")&&x._updateImagePosition(),fa.value=void 0,x}return!1};return{initialize:i,initResizeObserver:r,initRotateIcon:s,getCanvasRealSize:l,getViewportSize:h,changeZoom:d,doCanvasPan:p,onMouseWheel:u,_onImageClipToggle:y}},Ve=jn({zoomValue:100,zoomMin:0,zoomMax:0,percentage:"100%"}),H7=()=>{const n=Zh(),{canvas:t}=ni(),e=l=>{n.changeZoom(l)},i=l=>{Ve.zoomValue=l,Ve.percentage=Ve.zoomValue.toFixed(0)+"%",e(l)},r=l=>{const h=Ve.zoomMin,u=Ve.zoomMax,d=t.value.getZoom(),g=$.capValue(h,100*d+l,u);Ve.zoomValue=g,Ve.percentage=Ve.zoomValue.toFixed(0)+"%",e(g)},s=()=>{const l=t.value,h=Ve.zoomMin,u=Ve.zoomMax,d=100*l.minScaleValue,g=100*l.maxScaleValue;h!==d&&(Ve.zoomMin=d),u!==g&&(Ve.zoomMax=g);const p=l.getZoom(),m=$.capValue(Ve.zoomMin,100*p,Ve.zoomMax);Ve.zoomValue=m,Ve.percentage=Ve.zoomValue.toFixed(0)+"%"},o=l=>{const h=l.zoomLevel;l.isInit,l.designSize;const u=Math.round(100*h);Ve.zoomValue=u,Ve.percentage=Ve.zoomValue.toFixed(0)+"%";const d=t.value,{viewportTransform:g=[]}=d,p=Re.clone(g);p[5]=0;const m=Re.clone(g);m[4]=0,d.hRulerCanvas.setViewportTransform(p),d.vRulerCanvas.setViewportTransform(m)};return nn.addEventListener(en.CANVAS_INIT_DONE,s),wi(()=>{nn.addEventListener(en.CANVAS_ZOOM,o)}),{stateZoom:Ve,changeZoomByNum:r,changeZoomByRange:i}};var Y7={components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We},setup:function(){var n=H7(),t=n.stateZoom,e=n.changeZoomByNum,i=n.changeZoomByRange,r=vt(4),s=mt(function(){return t.percentage}),o=mt({get:function(){return t.zoomValue},set:function(p){return i(Number(p))}}),l=mt(function(){return t.zoomMin}),h=mt(function(){return t.zoomMax}),u=function(){e(r.value)},d=function(){e(-r.value)},g=function(){};return{zoomMin:l,zoomMax:h,zoomStep:r,zoomDisplay:s,zoomLevel:o,onZoomIn:u,onZoomOut:d,onFitCanvasToScreen:g}}},N7={id:"zoom-menu",class:"flex h-40px mt-4px p-5px relative bg-slate-200 justify-center items-center"},W7=["min","max","step"],U7=["value"];function G7(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip");return W(),Q("div",N7,[et(h,{text:"Zoom Out",location:"top",class:"w-32px h-32px"},{default:Et(function(){return[et(l,{class:"w-32px h-32px flex justify-center",onClick:i.onZoomOut},{default:Et(function(){return[et(o,{name:"icon-zoom-out"})]}),_:1},8,["onClick"])]}),_:1}),Wf(F("input",{type:"range","onUpdate:modelValue":t[0]||(t[0]=function(u){return i.zoomLevel=u}),min:i.zoomMin,max:i.zoomMax,step:i.zoomStep,id:"zoom-slider",class:"w-full h-4px",value:"500"},null,8,W7),[[Jf,i.zoomLevel]]),et(h,{text:"Zoom In",location:"top",class:"w-32px h-32px"},{default:Et(function(){return[et(l,{class:"w-32px h-32px flex justify-center",onClick:nl(i.onZoomIn,["stop"])},{default:Et(function(){return[et(o,{name:"icon-zoom-in"})]}),_:1},8,["onClick"])]}),_:1}),F("input",{type:"text",value:i.zoomDisplay,id:"zoom-input",class:"text-align-center"},null,8,U7)])}const q7=Nt(Y7,[["render",G7]]),Z7=te({components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We,Layers:X7,ZoomControl:q7}});var $7={class:"flex flex-col w-240px h-full bg-white border-l border-slate-300"},K7={class:"flex-[0_0_auto] flex flex-col"};function J7(n,t,e,i,r,s){var o=gt("ZoomControl"),l=gt("Layers");return W(),Q("div",$7,[F("div",K7,[t[0]||(t[0]=F("div",{class:"w-full h-40px bg-slate-200 border"},[F("div",{class:"p-selectbutton p-component w-full",role:"group","aria-labelledby":"basic","data-pc-name":"selectbutton","data-pc-section":"root",pc1930:""},[F("button",{type:"button",class:"p-togglebutton p-component p-togglebutton-checked flex-1","aria-pressed":"true","data-pc-name":"pcbutton","data-pc-extend":"togglebutton","data-pc-section":"root","data-p-checked":"true","data-p-disabled":"false"},[F("span",{class:"p-togglebutton-content","data-pc-section":"content"},[F("span",{class:"p-togglebutton-label","data-pc-section":"label"},"layers")])]),F("button",{type:"button",class:"p-togglebutton p-component flex-1","aria-pressed":"false","data-pc-name":"pcbutton","data-pc-extend":"togglebutton","data-pc-section":"root","data-p-checked":"false","data-p-disabled":"false"},[F("span",{class:"p-togglebutton-content","data-pc-section":"content"},[F("span",{class:"p-togglebutton-label","data-pc-section":"label"},"Pages")])])])],-1)),t[1]||(t[1]=vl('<div class="splitter" data-v-9d51fc26></div><div id="nav-sub" class="flex" data-v-9d51fc26><div id="zoom-info" class="flex-grow-2 mt-4px" data-v-9d51fc26><div id="zoom-nav" style="width:122px;height:122px;" class="m-[0_auto] border border-black" data-v-9d51fc26><canvas id="zoom-nav-back" width="120" height="120" data-v-9d51fc26></canvas><div id="zoom-nav-marker" style="width:120px;height:120px;left:0px;top:0px;" data-v-9d51fc26></div></div></div><div id="nav-info" class="w-60px ml-6px mr-16px mt-10px" data-v-9d51fc26><div data-v-9d51fc26>X:<span id="nav-cord-x" class="float-right" data-v-9d51fc26></span></div><div data-v-9d51fc26>Y:<span id="nav-cord-y" class="float-right" data-v-9d51fc26></span></div><div class="mt-10px" data-v-9d51fc26> W:<span id="nav-size-w" class="float-right" data-v-9d51fc26>1080</span></div><div data-v-9d51fc26>H:<span id="nav-size-h" class="float-right" data-v-9d51fc26>1080</span></div></div></div>',2)),et(o)]),et(l)])}const Q7=Nt(Z7,[["render",J7],["__scopeId","data-v-9d51fc26"]]);var tR={},eR={class:"flex flex-[1_0] flex-col w-full h-full overflow-hidden"};function iR(n,t){return W(),Q("div",eR,[Jn(n.$slots,"default")])}const nR=Nt(tR,[["render",iR]]),rR=()=>{const n=jg(),t=qh(),{canvas:e}=ni();let i=0,r,s;const o=()=>{const d=t.getDataTransfer;if(d&&!d.type)return;const g=Re.cloneDeep(d);g.crossOrigin="anonymous",g.src=g==null?void 0:g.url,r=new Promise(async p=>{$.enlivenObjects([g]).then(m=>{const y={originalImage:m[0],originalImageObject:g};p(y)})})},l=d=>{const{clippingMaskObject:g,targetImage:p,targetClipPath:m,objectIndex:y}=d;return new Promise(_=>{$.enlivenObjects([g]).then(C=>{const b=C[0],x=e.value;x.insertAt(y,b,!0),x.requestRenderAll(),p&&(p.opacity=.5),_({clippingMask:b,instanceClippingPath:m});const T=document.querySelector(".all-drag-element");T&&T.setAttribute("style","display:none")})})},h=d=>{const{clippingMaskObject:g,originalClipPathObject:p,targetImage:m,targetClipPath:y,objectIndex:_}=d;return new Promise(C=>{Promise.all([r]).then(([{originalImageObject:b}])=>{g.originalImageObject={...b},g.originalClipPathObject={...p},g.src=b.src,g.crossOrigin="anonymous",l({clippingMaskObject:g,targetImage:m,targetClipPath:y,objectIndex:_}).then(C)})})},u=async(d,g)=>{const p=e.value,m=p.getPointer(d.e,!0);let y,_;if(s){const O=await s;y=O==null?void 0:O.clippingMask,_=O==null?void 0:O.instanceClippingPath}const C=["EditorClippingMask","EditorImage","Path","Shape","Textbox","Rect","Circle"],b=p._objects;let x;x=b.filter(O=>O.isType(...C));const T=p._searchPossibleTargets(x,m);if(y&&_){if(T===y)return{isClippingMask:!0,targetClipPath:T};const O=p._objects.indexOf(y);if(O!==-1){_.isPreviewClippingMask=!1,p.insertAt(O,_,!0),p.requestRenderAll(),s=void 0;const E=document.querySelector(".all-drag-element");E&&E.setAttribute("style","display:block")}return{isClippingMask:!0,targetClipPath:T}}else return{isClippingMask:!1,targetClipPath:T}};return{setDataForClippingMask:o,handleDragPreviewClippingMask:async d=>{if(!r||!d)return;const{isClippingMask:g,targetClipPath:p}=await u(d);if(g||!p)return;p.isPreviewClippingMask=!0;const m=Re.cloneDeep(p.toObject()),y=m.angle;m.angle=0;const _={type:"EditorClippingMask",objectId:p.isType("EditorImage")?dl(10):p.objectId,angle:y,left:m.left,top:m.top,width:m.width*m.scaleX,height:m.height*m.scaleY,crossOrigin:"anonymous",isPreviewClippingMask:!0,isCreateFirst:p.isCreateFirst};i=e.value._objects.indexOf(p),s=h({clippingMaskObject:_,originalClipPathObject:m,targetImage:void 0,targetClipPath:p,objectIndex:i})},handleDragCreateClippingMask:d=>{s=void 0,r=void 0;const g=e.value,{target:p}=d;g.setActiveObject(p),p.isCreateFirst?n.execute([new wA(p,p.toDatalessObject())]):(n.execute([new lw(p)]),p.isCreateFirst=!0)}}},sR=()=>{const n=qh(),{canvas:t}=ni();let e=0,i;const r=l=>{const{clippingTextObject:h,targetImage:u,targetClipPath:d,objectIndex:g}=l;return new Promise(p=>{$.enlivenObjects([h]).then(m=>{const y=m[0],_=t.value;_.insertAt(g,y,!0),_.renderAll(),u&&(u.opacity=.5),p({clippingMask:y,instanceClippingPath:d});const C=document.querySelector(".all-drag-element");C&&C.setAttribute("style","display:none")})})},s=l=>{const{clippingTextObject:h,originalImageObject:u,originalClipPathObject:d,targetImage:g,targetClipPath:p,objectIndex:m}=l;return new Promise(y=>{h.originalImageObject={...u},r({clippingTextObject:h,targetImage:g,targetClipPath:p,objectIndex:m}).then(y)})},o=async(l,h)=>{const u=t.value,d=u.getPointer(l.e,!0);let g,p;if(i){const b=await i;g=b==null?void 0:b.clippingMask,p=b==null?void 0:b.instanceClippingPath}const m=["EditorClippingText","Textbox","EditorTextbox"],y=u._objects;let _;h?_=y.filter(b=>b.objectId!==h.objectId&&b.isType(...m)):_=y.filter(b=>b.isType(...m));const C=u._searchPossibleTargets(_,d);if(g&&p){if(C===g)return{isClippingText:!0,targetClipPath:C};const b=u._objects.indexOf(g);if(b!==-1){h&&(h.opacity=1),p.isPreviewClippingMask=!1,u.insertAt(b,p,!0),u.renderAll(),i=void 0;const x=document.querySelector(".all-drag-element");x&&(console.log(x,"elementDrag"),x.setAttribute("style","display:block"))}return{isClippingText:!0,targetClipPath:C}}else return{isClippingText:!1,targetClipPath:C}};return{handleDragPreviewClippingText:async l=>{if(!l.target)return;const{isClippingText:h,targetClipPath:u}=await o(l);if(h||!u)return;const d=n.getDataTransfer;u.isPreviewClippingMask=!0;const g=Re.cloneDeep(d);g.src=g==null?void 0:g.url;const p=Re.cloneDeep(u.toObject()),m=p.angle;p.angle=0;const y={...p,type:"EditorClippingText",objectId:dl(10),angle:m,left:p.left,top:p.top,width:p.width,height:p.height,scaleX:p.scaleX,scaleY:p.scaleY,crossOrigin:"anonymous",isPreviewClippingMask:!0,imageViewport:void 0};e=t.value._objects.indexOf(u),i=s({clippingTextObject:y,originalImageObject:g,originalClipPathObject:p,targetImage:void 0,targetClipPath:u,objectIndex:e})},handleDragCreateClippingText:l=>{i=void 0;const h=t.value,{target:u}=l;h.setActiveObject(u)},handleMovePreviewClippingText:async l=>{const h=l.target;if(h.clippingParent)return;const u=["Path","Textbox","EditorClippingMask","EditorClippingText","ActiveSelection","Group","Rect"];if(!h||h.isType(...u))return;const{isClippingText:d,targetClipPath:g}=await o(l,h);if(d||!g)return;g.isPreviewClippingMask=!0;const p=Re.cloneDeep(h.toObject());let m;g.isType("EditorClippingText")||(m=Re.cloneDeep(g.toObject()));const y={...m,type:"EditorClippingText",objectId:dl(10),isPreviewClippingMask:!0,imageViewport:void 0};e=t.value._objects.indexOf(g),i=s({clippingTextObject:y,originalImageObject:p,originalClipPathObject:m,targetImage:void 0,targetClipPath:g,objectIndex:e})},handleMoveCreateClippingText:l=>{const h=t.value,u=l.target;if(u&&i){const d=h.getPointer(l.e,!0),g=h._objects.filter(m=>m.objectId!==u.objectId&&m.isType("EditorClippingMask")),p=h._searchPossibleTargets(g,d);p&&h.setActiveObject(p),h.remove(u),i=void 0}}}},oR=()=>{const n=qh(),{canvas:t}=ni(),e=Zh(),i=Ig(),{setDataForClippingMask:r,handleDragPreviewClippingMask:s,handleDragCreateClippingMask:o}=rR(),{handleDragPreviewClippingText:l,handleDragCreateClippingText:h}=sR(),u=()=>{t.value.on("mouse:wheel",e.onMouseWheel),t.value.on(ui.MOUSE_OVER,p),t.value.on(ui.MOUSE_OUT,m),t.value.on(ui.FTIMAGE_SHOW_CLIP,e._onImageClipToggle),t.value.on(ui.FTIMAGE_CLOSE_CLIP,e._onImageClipToggle),t.value.on(ui.CANVAS_DROP,y),t.value.on(ui.CANVAS_DRAGOVER,C),t.value.on(ui.OBJECT_MODIFIED,g)},d=()=>{t.value.off()},g=T=>{nn.dispatchEvent(en.THUMB_CHANGED,{layerThumbDirty:!0})},p=T=>{const O=t.value;let E=T.target;const V=n.getDataTransfer;(E&&E===O.getArtboard()||V)&&(E=null),O.setCurrentHoverObject(E)},m=()=>{t.value.setCurrentHoverObject(null)},y=T=>{if(!T.target)return;const{target:O}=T;if(O.isPreviewClippingMask){delete O.isPreviewClippingMask,_(T);return}const E=n.getDataTransfer;if(E){const V=t.value,A=V.getPointer(T.e),B=V.getZoom();let{x:Y,y:J}=A;const st=V.shiftX,ct=V.shiftY;st&&ct&&(Y=A.x-st/B,J=A.y-ct/B);const ot=E;if(!ot)return;const yt={type:"EditorImage",url:ot.url,thumbUrl:ot.thumbUrl,width:ot.orgWidth,height:ot.orgHeight,top:J,left:Y,thumbnail:ot.thumbnail,crossOrigin:"anonymous"};i.createElement(yt)}},_=T=>{o(T),h(T)},C=T=>{x(T)?l(T):(b(T)||l(T),s(T))},b=T=>{const O=t.value,E=O.getPointer(T.e,!0),V=["EditorClippingMask","EditorImage","Path","Shape"],A=O._objects.filter(B=>B.isType(...V));return O._searchPossibleTargets(A,E)},x=T=>{const O=t.value,E=O.getPointer(T.e,!0),V=["EditorClippingText","Textbox"],A=O._objects.filter(B=>B.isType(...V));return O._searchPossibleTargets(A,E)};return{bindFabricEvents:u,unbindFabricEvents:d,setDataForClippingMask:r}},aR=te({setup(){const{canvas:n}=ni(),{initialize:t,initResizeObserver:e,initRotateIcon:i}=Zh(),{bindFabricEvents:r,unbindFabricEvents:s,setDataForClippingMask:o}=oR(),l=Zb("CLIPPING_MASK"),h=vt();return wi(()=>{!h.value||!n.value||(h.value.append(n.value.wrapperEl),t(h.value),e(h),i(),r(),nn.dispatchEvent(en.CANVAS_INIT_DONE,n.value),l.on(o))}),ss(()=>{s(),l.off(o)}),{containerEl:h}}});var lR={ref:"containerEl",class:"editor-canvas"};function cR(n,t,e,i,r,s){return W(),Q("div",lR,null,512)}const hR=Nt(aR,[["render",cR],["__scopeId","data-v-8efae160"]]),mw="PIXELS",uR="INCHES",dR="CENTIMETERS",fR="METERS",gR={[mw]:0,[uR]:3,[dR]:2,[fR]:4},pR=function(n,t){const e=gR[n];return t.toFixed(e)},Zv=function(n,t){const e=pR(n,t);return parseFloat(e)},vr=.5,mR=[.001,.002,.005,.01,.02,.05,.1,.2,.5,1,2,5,10,20,50,100,200,500,1e3,2e3],vR=40,yR=60,_R=200,bR=3,wR=15,xR='"Roboto", sans-serif',CR=12,SR=1,TR=30,PR=0,OR="editorRuler";class ER{constructor(t){At(this,"ruler"),At(this,"labelOffsetX",bR),At(this,"labelOffsetY",wR),At(this,"fontFamily",xR),At(this,"fontSize",CR),At(this,"units",mw),At(this,"pixelsPerUnit",SR),At(this,"thickness"),At(this,"tickDividerLength"),At(this,"tickLargeLength"),At(this,"tickSmallLength"),At(this,"width"),At(this,"height"),At(this,"tickColor"),At(this,"labelColor"),At(this,"pixelZoomRatio"),At(this,"startX"),At(this,"startY"),At(this,"pageWidth"),At(this,"pageHeight"),At(this,"pagePixelsPerInterval"),At(this,"screenPixelsPerInterval"),this.ruler=t}setThickness(t){this.thickness=t,this.tickDividerLength=this.thickness,this.tickLargeLength=Math.floor(this.thickness/3),this.tickSmallLength=Math.floor(this.thickness/5)}setDimensions(t,e){this.width=t,this.height=e}setTheme({tickColor:t,labelColor:e}){this.tickColor=t,this.labelColor=e}chooseIntervalLength(){return mR.find((t,e,i)=>{const r=i[e+1],s=t*this.pixelsPerUnit*this.pixelZoomRatio;return t>=this.pixelZoomRatio&&s>yR||r==null||r*this.pixelsPerUnit*this.pixelZoomRatio>_R})*this.pixelsPerUnit}setPageViewport(t,e){const i=e.br.x-e.tl.x;this.startX=e.tl.x,this.startY=e.tl.y,this.pageWidth=t.width,this.pageHeight=t.height,this.pixelZoomRatio=this.width/i,this.pagePixelsPerInterval=this.chooseIntervalLength(),this.screenPixelsPerInterval=this.pagePixelsPerInterval*this.pixelZoomRatio}draw(t){this.ruler.rulerType==="horizontal"&&(t.save(),t.transform(1,0,0,1,0,this.ruler.topRulerOffset),this._drawHorizontal(t,this.startX,this.pageWidth),t.restore()),this.ruler.rulerType==="vertical"&&(t.save(),t.transform(1,0,0,1,this.thickness,0),t.rotate(90*Math.PI/180),this._drawVertical(t,this.startY,this.pageHeight),t.restore())}drawInside(t){const e=this.ruler.canvas.getZoom(),i=Math.floor(-this.ruler.canvas.vptCoords.tl.x*e)+vr,r=Math.floor(-this.ruler.canvas.vptCoords.tl.y*e)+vr;t.save(),t.transform(1,0,0,1,0,r-this.thickness),this._drawHorizontal(t,this.startX,this.pageWidth),t.restore(),t.save(),t.transform(1,0,0,1,i,0),t.rotate(90*Math.PI/180),this._drawVertical(t,this.startY,this.pageHeight),t.restore()}_drawHorizontal(t,e,i){const{ticks:r,gapSize:s}=this.createTicks();t.fillStyle=this.tickColor,t.strokeStyle=this.tickColor,t.font=`normal normal ${this.fontSize}px ${this.fontFamily}`;for(let o=0;o<=i;o+=this.pagePixelsPerInterval){const l=Math.ceil(this.pixelZoomRatio*(-e+o))+vr;if(t.save(),t.transform(1,0,0,1,l,0),t.beginPath(),o<i)if(i-o>this.pagePixelsPerInterval)for(let g=0;g<r.length;g++)this.drawHorizontalTick(t,g*s,r[g]);else{const g=(i-o)/(this.pagePixelsPerInterval/10);for(let p=0;p<=g;p++)this.drawHorizontalTick(t,p*s,r[p])}else this.drawHorizontalTick(t,0*s,r[0]);t.stroke(),t.restore(),t.fillStyle=this.labelColor;const{labelOffsetX:h,labelOffsetY:u}=this,d=Zv(this.units,o/this.pixelsPerUnit);t.fillText(`${d}`,l+h,u)}}_drawVertical(t,e,i){const{ticks:r,gapSize:s}=this.createTicks();t.fillStyle=this.tickColor,t.strokeStyle=this.tickColor,t.font=`normal normal ${this.fontSize}px ${this.fontFamily}`;for(let o=0;o<=i;o+=this.pagePixelsPerInterval){const l=Math.ceil(this.pixelZoomRatio*(-e+o))+vr;if(t.save(),t.transform(1,0,0,1,l,0),t.beginPath(),o<i)if(i-o>this.pagePixelsPerInterval)for(let m=0;m<r.length;m++)this.drawVerticalTick(t,m*s,r[m]);else{const m=(i-o)/(this.pagePixelsPerInterval/10);for(let y=0;y<=m;y++)this.drawVerticalTick(t,y*s,r[y])}else this.drawVerticalTick(t,0*s,r[0]);t.stroke(),t.restore(),t.fillStyle=this.labelColor;const{labelOffsetX:h,labelOffsetY:u}=this,d=Zv(this.units,o/this.pixelsPerUnit),g=d.toString().length;let p=10;switch(!0){case g===1:p=10;break;case g===2:p=20;break;case g===3:p=25;break;case g===4:p=32;break;default:p=50;break}t.save(),t.scale(-1,-1),t.fillText(`${d}`,-(l+p),-u),t.restore()}}createTicks(){let t,e;this.screenPixelsPerInterval<=vR?(t=this.screenPixelsPerInterval/5,e=4):(t=this.screenPixelsPerInterval/10,e=9);const i=[this.tickDividerLength];for(let r=1;r<=e;r++)Math.ceil(e/2)===r?i.push(this.tickLargeLength):i.push(this.tickSmallLength);return{gapSize:t,ticks:i}}drawHorizontalTick(t,e,i){const r=Math.floor(e);t.moveTo(r,this.thickness-i),t.lineTo(r,this.thickness)}drawVerticalTick(t,e,i){const r=Math.floor(e);t.moveTo(r,i),t.lineTo(r,0)}}class $v{constructor(t){At(this,"type",OR),At(this,"thickness",TR),At(this,"topRulerOffset",PR),At(this,"enabled",!1),At(this,"canvas"),At(this,"scale"),At(this,"rulerColor"),At(this,"cornerSquareColor"),At(this,"pageSize"),At(this,"rulerType"),At(this,"render",({ctx:e}={})=>{const i=this.canvas.contextContainer;!e||e!==i||this.enabled&&this.canvas.vptCoords.tl!==null&&(this.pageSize={width:1080,height:1080},this.drawBackground(i),this.scale.setDimensions(this.canvas.width,this.canvas.height),this.scale.setPageViewport(this.pageSize,this.canvas.vptCoords),this.scale.draw(i))}),this.canvas=t,this.scale=new ER(this),this.scale.setThickness(this.thickness),this.canvas.on("after:render",this.render),this.scale.pixelsPerUnit=300,this.scale.units="INCHES"}dispose(){this.canvas.off("after:render",this.render)}enable(){this.enabled||(this.enabled=!0)}setTheme({rulerColor:t,cornerSquareColor:e,tickColor:i,labelColor:r}){this.rulerColor=t,this.cornerSquareColor=e,this.scale.setTheme({tickColor:i,labelColor:r})}setRulerType(t){this.rulerType=t}disable(){this.enabled&&(this.enabled=!1)}drawBackground(t){const{canvas:{width:e,height:i},topRulerOffset:r,thickness:s}=this,o=s+vr,l=r+s+vr;t.fillStyle=this.rulerColor,t.strokeStyle=this.scale.tickColor,t.fillRect(0,r,e,s),t.fillRect(0,0,s,i),t.beginPath(),t.moveTo(o,l),t.lineTo(e,l),t.moveTo(o,l),t.lineTo(o,i),t.stroke()}drawBackgroundInside(t){}drawCornerSquare(t){t.save(),t.transform(1,0,0,1,0,this.topRulerOffset),t.fillStyle=this.cornerSquareColor,t.fillRect(0,0,this.thickness,this.thickness+vr),t.restore()}drawCornerSquareInside(t){const e=this.canvas.getZoom(),i=Math.floor(-this.canvas.vptCoords.tl.x*e)+vr,r=Math.floor(-this.canvas.vptCoords.tl.y*e)+vr;t.save(),t.transform(1,0,0,1,i-this.thickness,r-this.thickness),t.fillStyle=this.cornerSquareColor,t.fillRect(0,0,this.thickness,this.thickness),t.restore()}setUnits(t,e,i){this.scale.pixelsPerUnit=i(1),this.scale.units=t,this.render()}}const Lg=te({setup(){const{canvas:n}=ni(),t=31;let e,i;const r=vt(),s=vt(),o=mt(()=>`${t}px`),l=mt(()=>({top:"0px",left:"0px"})),h=mt(()=>({top:"0px"})),u=mt(()=>({left:"0px"}));return wi(()=>{if(!n.value)return;const d=n.value,{viewportTransform:g=[]}=d,p=Re.clone(g);p[5]=0;const m=Re.clone(g);m[4]=0,e=new vn(r.value,{width:d.canvasSize.width+12,height:30}),e.setViewportTransform(p),e.ruler=new $v(e),e.ruler.setTheme({rulerColor:"#f4f4f6",tickColor:"rgb(183 188 195)",labelColor:"rgba(17,23,29,.6)",cornerSquareColor:"rgb(183 188 195)"}),e.ruler.setRulerType("horizontal"),e.ruler.enable();const y=e.getContext();e.ruler.render({ctx:y}),d.hRulerCanvas=e,i=new vn(s.value,{width:30,height:d.canvasSize.height+12}),i.setViewportTransform(m),i.ruler=new $v(i),i.ruler.setTheme({rulerColor:"#f4f4f6",tickColor:"rgb(183 188 195)",labelColor:"rgba(17,23,29,.6)",cornerSquareColor:"rgb(183 188 195)"}),i.ruler.setRulerType("vertical"),i.ruler.enable();const _=i.getContext();i.ruler.render({ctx:_}),d.vRulerCanvas=i}),{sizeRuler:o,styleBoxRuler:l,styleHorizontalRuler:h,styleVerticalRuler:u,hRuler:r,vRuler:s}}}),Kv=()=>{Kf(n=>({"4b3fe447":n.sizeRuler}))},Jv=Lg.setup;Lg.setup=Jv?(n,t)=>(Kv(),Jv(n,t)):Kv;var MR={ref:"horizontalRuler",class:"ruler__wrapper ruler__wrapper--horizontal",style:{position:"relative",width:"100%",height:"100%"}},AR={ref:"hRuler"},kR={ref:"verticalRuler",class:"ruler__wrapper ruler__wrapper--vertical",style:{width:"100%",height:"100%"}},jR={ref:"vRuler"};function DR(n,t,e,i,r,s){return W(),Q(Se,null,[F("div",{class:"box",style:Ji(n.styleBoxRuler)},null,4),F("div",{class:"ruler ruler--horizontal",style:Ji(n.styleHorizontalRuler)},[F("div",MR,[F("canvas",AR,null,512)],512)],4),F("div",{class:"ruler ruler--vertical",style:Ji(n.styleVerticalRuler)},[F("div",kR,[F("canvas",jR,null,512)],512)],4)],64)}const IR=Nt(Lg,[["render",DR]]),Ss=jn({isShowX:!1,isShowY:!1,x:0,y:0,width:0,height:0}),RR=()=>{const n=Zh(),{canvas:t}=ni(),e=vt(),i=vt(void 0),r=vt(void 0),s=()=>{o()},o=()=>{const p=n.getCanvasRealSize(),m=p.width,y=p.height,_=n.getViewportSize(!0);let C=_.x,b=_.y,x=_.width,T=_.height;const O=t.value,E=O.scrollPaddingX,V=O.scrollPaddingY,A=-(C-=E)/(x+=2*E),B=-(b-=V)/(T+=2*V),Y=m/x,J=y/T;e.value={x:A,y:B,width:Y,height:J},l()},l=()=>{var p,m;if(!e.value)return;const y=e.value,_=y.x,C=y.y,b=y.width,x=y.height,T=t.value,O=T.checkCanScroll(),E=b<1&&O.canScrollX,V=x<1&&O.canScrollY;E&&(Ss.x=100*(_>0?_:0),Ss.width=100*(b<1?b/1:1)),V&&(Ss.y=100*(C>0?C:0),Ss.height=100*(x<1?x/1:1)),Ss.isShowX=E,Ss.isShowY=V;const{viewportTransform:A=[]}=T,B=Re.clone(A);B[5]=0;const Y=Re.clone(A);Y[4]=0,(p=T.hRulerCanvas)==null||p.setViewportTransform(B),(m=T.vRulerCanvas)==null||m.setViewportTransform(Y)},h=()=>{t.value&&s()},u=(p,m)=>{p.stopPropagation(),p.preventDefault();const y=p.target.getBoundingClientRect(),_=y.x||y.left,C=y.y||y.top,b=p.clientX,x=p.clientY;i.value={x:b-_,y:x-C},r.value=m},d=p=>{if(r.value&&i.value&&e.value){const m=t.value,y=document.querySelector("#editor-wrapper");if(!y)return;const _=n.getViewportSize(!0),C=y.getBoundingClientRect(),b=C.x||C.left,x=C.y||C.top,T=C.width,O=C.height,E=p.clientX,V=p.clientY,A=T-e.value.width*T,B=O-e.value.height*O;let Y=E-b-(i.value.x||0),J=V-x-(i.value.y||0);Y=$.capValue(0,Y,A),J=$.capValue(0,J,B);const st=m.scrollPaddingX,ct=m.scrollPaddingY;let ot=_.x,yt=_.y;r.value==="x"?(e.value.x=Y/T,ot=-(e.value.x*(_.width+2*st)-st)):r.value==="y"&&(e.value.y=J/O,yt=-(e.value.y*(_.height+2*ct)-ct)),l(),n.doCanvasPan({x:-ot,y:-yt})}},g=()=>{r.value&&(r.value=void 0)};return nn.addEventListener(en.MINIMAP_VIEWPORT_CHANGED,()=>{s()}),nn.addEventListener(en.CANVAS_ZOOM,h),wi(()=>{document.body.addEventListener("mousemove",d),document.body.addEventListener("mouseup",g)}),ss(()=>{document.body.removeEventListener("mousemove",d),document.body.removeEventListener("mouseup",g)}),{stateScroll:Ss,_onMouseDown:u}},Bg=te({props:{scrollStyle:{type:Object}},setup(){const{stateScroll:n,_onMouseDown:t}=RR(),e=mt(()=>n.isShowX),i=mt(()=>n.isShowY),r=mt(()=>"#fff"),s=mt(()=>"#fff"),o=mt(()=>"#fff"),l=mt(()=>({left:"".concat(n.x.toFixed(2),"%"),width:"".concat(n.width.toFixed(2),"%")})),h=mt(()=>({top:"".concat(n.y.toFixed(2),"%"),height:"".concat(n.height.toFixed(2),"%")}));return{isShowX:e,isShowY:i,h_scrollbar:l,v_scrollbar:h,h_background:r,v_background:s,b_background:o,onMouseDown:(u,d)=>{t(u,d)}}}}),Qv=()=>{Kf(n=>({e9af6650:n.b_background,"8d5ba5dc":n.h_background,25093844:n.v_background}))},t1=Bg.setup;Bg.setup=t1?(n,t)=>(Qv(),t1(n,t)):Qv;function LR(n,t,e,i,r,s){return W(),Q(Se,null,[F("div",{class:Ye(["canvasSrollbar_h","canvasSrollbar_h--border-top"])},[n.isShowX?(W(),Q("div",{key:0,class:"canvasSrollbar_h_scrollbar",style:Ji(n.h_scrollbar),onMousedown:t[0]||(t[0]=function(o){return n.onMouseDown(o,"x")})},t[2]||(t[2]=[F("div",{class:"canvasSrollbar_h_scrollbar_thumb"},null,-1)]),36)):Cr("",!0)]),F("div",{class:Ye(["canvasSrollbar_v","canvasSrollbar_v--border-left"])},[n.isShowY?(W(),Q("div",{key:0,class:"canvasSrollbar_v_scrollbar",style:Ji(n.v_scrollbar),onMousedown:t[1]||(t[1]=function(o){return n.onMouseDown(o,"y")})},t[3]||(t[3]=[F("div",{class:"canvasSrollbar_v_scrollbar_thumb"},null,-1)]),36)):Cr("",!0)]),t[4]||(t[4]=F("div",{class:"canvasSrollbar_cornerSquare"},null,-1))],64)}const BR=Nt(Bg,[["render",LR],["__scopeId","data-v-8294beed"]]),FR=te({components:{FabricCanvas:hR,RulerCanvas:IR,ScrollCanvas:BR}});function zR(n,t,e,i,r,s){var o=gt("FabricCanvas"),l=gt("RulerCanvas"),h=gt("ScrollCanvas");return W(),Q("div",{id:"editor-wrapper",class:"editor-wrapper",onDragover:t[0]||(t[0]=nl(function(){},["prevent"]))},[et(o),et(l),et(h)],32)}const VR=Nt(FR,[["render",zR],["__scopeId","data-v-58f135da"]]),XR=te({name:"Copy",elementTypes:["All"],index:10,components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We},setup(){const{copyElement:n}=Yi();return{onCopy:()=>{n()}}}});var HR={class:"toolbar-top-control__item"};function YR(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip");return W(),Q("div",HR,[et(h,{text:"Copy",location:"bottom"},{default:Et(function(){return[et(l,{onClick:n.onCopy},{default:Et(function(){return[et(o,{name:"icon-copy"})]}),_:1},8,["onClick"])]}),_:1})])}const NR=Nt(XR,[["render",YR]]),WR=te({name:"Delete",elementTypes:["All"],index:1,components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We},setup(){const{deleteElement:n}=Yi();return{onDelete:()=>{n()}}}});var UR={class:"toolbar-top-control__item"};function GR(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip");return W(),Q("div",UR,[et(h,{text:"Delete"},{default:Et(function(){return[et(l,{onClick:n.onDelete},{default:Et(function(){return[et(o,{name:"icon-delete"})]}),_:1},8,["onClick"])]}),_:1})])}const qR=Nt(WR,[["render",GR]]),ZR=te({name:"Duplicate",elementTypes:["All"],index:30,emits:["element-update"],components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We},setup(){const n=Vo();return{onDuplicate:()=>{n==null||n.emit("element-update")}}}});var $R={class:"toolbar-top-control__item"};function KR(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip");return W(),Q("div",$R,[et(h,{text:"Duplicate"},{default:Et(function(){return[et(l,{onClick:n.onDuplicate},{default:Et(function(){return[et(o,{name:"icon-duplicate"})]}),_:1},8,["onClick"])]}),_:1})])}const JR=Nt(ZR,[["render",KR]]),QR=te({name:"Lock",elementTypes:["All"],index:40,components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We},setup(){const{lockElement:n}=Yi();return{onLock:()=>{n()}}}});var tL={class:"toolbar-top-control__item"};function eL(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip");return W(),Q("div",tL,[et(h,{text:"Lock",location:"bottom"},{default:Et(function(){return[et(l,{onClick:n.onLock},{default:Et(function(){return[et(o,{name:"icon-unlock"})]}),_:1},8,["onClick"])]}),_:1})])}const iL=Nt(QR,[["render",eL]]),nL=te({name:"Paste",elementTypes:["All"],index:20,emits:["element-update"],components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We},setup(){const{pasteElement:n}=Yi();return{onPaste:()=>{n()}}}});var rL={class:"toolbar-top-control__item"};function sL(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip");return W(),Q("div",rL,[et(h,{text:"Paste"},{default:Et(function(){return[et(l,{onClick:n.onPaste},{default:Et(function(){return[et(o,{name:"icon-paste"})]}),_:1},8,["onClick"])]}),_:1})])}const oL=Nt(nL,[["render",sL]]),aL=te({name:"Unlock",elementTypes:["All"],index:40,components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We},setup(){const{unLockElement:n}=Yi();return{onUnlock:()=>{n()}}}});var lL={class:"toolbar-top-control__item"};function cL(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip");return W(),Q("div",lL,[et(h,{text:"Unlock"},{default:Et(function(){return[et(l,{onClick:n.onUnlock},{default:Et(function(){return[et(o,{name:"icon-lock"})]}),_:1},8,["onClick"])]}),_:1})])}const hL=Nt(aL,[["render",cL]]),vw=[],e1=Object.assign({"./Copy.vue":NR,"./Delete.vue":qR,"./Duplicate.vue":JR,"./Lock.vue":iL,"./Paste.vue":oL,"./Unlock.vue":hL});for(const n in e1)vw.push(e1[n]);const uL=te({name:"Bold",elementTypes:["EditorTextbox"],width:32,index:30,components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We},setup(){const{elementUpdate:n}=Yi(),{activeObject:t}=Bn(),e=mt({get:()=>t.value&&t.value.fontWeight||"normal",set:()=>{}});return{fontWeight:e,onUpdateBold:()=>{n("fontWeight",e.value==="bold"?"normal":"bold")}}}});var dL={class:"toolbar-top-control__item"};function fL(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip");return W(),Q("div",dL,[et(h,{text:"Bold"},{default:Et(function(){return[et(l,{active:n.fontWeight==="bold",onClick:n.onUpdateBold},{default:Et(function(){return[et(o,{name:"icon-bold"})]}),_:1},8,["active","onClick"])]}),_:1})])}const gL=Nt(uL,[["render",fL]]),pL=te({setup(){const n=vt(null),t=vt(!1),e=()=>{t.value=!t.value},i=r=>{n.value&&!n.value.contains(r.target)&&(t.value=!1)};return wi(()=>{document.addEventListener("click",i)}),ss(()=>{document.removeEventListener("click",i)}),{showMenu:t,menuButtonRef:n,toggleMenu:e,handleClickOutside:i}}});var mL={class:"absolute w-full max-w-[224px] rounded-lg bg-white shadow lg:static lg:block lg:w-full lg:max-w-full lg:shadow-none dark:bg-dark-2 lg:dark:bg-transparent"},vL={class:"relative",ref:"menuButtonRef"};function yL(n,t,e,i,r,s){return W(),Q("nav",mL,[F("div",vL,[F("div",{onClick:t[0]||(t[0]=function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];return n.toggleMenu&&n.toggleMenu.apply(n,o)})},[Jn(n.$slots,"activator",{props:{active:n.showMenu}})]),F("div",{class:Ye([n.showMenu?"block":"hidden","w-[224px] bg-white absolute p-6 mt-4px shadow rounded border border-slate-100 dark:bg-dark"])},[Jn(n.$slots,"default")],2)],512)])}const yw=Nt(pL,[["render",yL]]),_L=te({name:"CurvedText",elementTypes:["EditorTextbox","EditorClippingText"],width:32,index:400,components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We,BaseMenu:yw},setup(){const{canvas:n}=ni(),{activeObject:t}=Bn();return{curveAmount:vt(0),mergeProps:yl,onUpdateCurved:e=>{const i=n.value;t.value&&(t.value.set("curved",{enabled:!0,type:"arc",degrees:e}),t.value.isType("EditorClippingText")&&(t.value._updateClipSize(!0,!0),t.value._updateImageViewportPositionScale()),i.renderAll())}}}});var bL={class:"toolbar-top-control__item"},wL={class:"flex justify-between mb-6 text-sm font-semibold text-dark dark:text-white"};function xL(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip"),u=gt("base-menu");return W(),Q("div",bL,[et(u,null,{activator:Et(function(d){var g=d.props;return[et(h,{text:"Curved text"},{default:Et(function(){return[et(l,P1(Zf(g)),{default:Et(function(){return[et(o,{name:"icon-curved"})]}),_:2},1040)]}),_:2},1024)]}),default:Et(function(){return[F("div",null,[F("div",wL,[t[2]||(t[2]=F("span",null,"Curved Text",-1)),F("span",null,Kn(n.curveAmount),1)]),F("div",null,[Wf(F("input",{"onUpdate:modelValue":[t[0]||(t[0]=function(d){return n.curveAmount=d}),t[1]||(t[1]=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];return n.onUpdateCurved&&n.onUpdateCurved.apply(n,d)})],type:"range",class:"w-full h-4px",min:"-100",max:"100",step:"1"},null,512),[[Jf,n.curveAmount]])])])]}),_:1})])}const CL=Nt(_L,[["render",xL],["__scopeId","data-v-2e54215f"]]),SL=te({name:"FontAlign",elementTypes:["EditorTextbox"],width:32,index:80,components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We},setup(){const{elementUpdate:n}=Yi(),{activeObject:t}=Bn(),e=mt({get:()=>t.value&&t.value.textAlign||"center",set:()=>{}}),i=mt(()=>`icon-align-${e.value}`),r=()=>e.value==="left"?"center":e.value==="center"?"right":e.value==="right"?"justify":e.value==="justify"?"left":"center";return{iconTextAlign:i,onUpdateTextAlign:()=>{const s=r();n("textAlign",s)}}}});var TL={class:"toolbar-top-control__item"};function PL(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip");return W(),Q("div",TL,[et(h,{text:"Font Align"},{default:Et(function(){return[et(l,{onClick:n.onUpdateTextAlign},{default:Et(function(){return[et(o,{name:n.iconTextAlign},null,8,["name"])]}),_:1},8,["onClick"])]}),_:1})])}const OL=Nt(SL,[["render",PL]]),EL=te({name:"Group",elementTypes:["ActiveSelection"],width:32,components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We},setup(){const{groupElements:n}=Yi();return{onGroup:()=>{n()}}}});var ML={class:"toolbar-top-control__item"};function AL(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip");return W(),Q("div",ML,[et(h,{text:"Group"},{default:Et(function(){return[et(l,{onClick:n.onGroup},{default:Et(function(){return[et(o,{name:"icon-group"})]}),_:1},8,["onClick"])]}),_:1})])}const kL=Nt(EL,[["render",AL]]),jL=te({name:"Italic",elementTypes:["EditorTextbox"],width:32,index:40,components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We},setup(){const{elementUpdate:n}=Yi(),{activeObject:t}=Bn(),e=mt({get:()=>t.value&&t.value.fontStyle||"normal",set:()=>{}});return{fontStyle:e,onUpdateItalic:()=>{n("fontStyle",e.value==="italic"?"normal":"italic")}}}});var DL={class:"toolbar-top-control__item"};function IL(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip");return W(),Q("div",DL,[et(h,{text:"Italic"},{default:Et(function(){return[et(l,{active:n.fontStyle==="italic",onClick:n.onUpdateItalic},{default:Et(function(){return[et(o,{name:"icon-italic"})]}),_:1},8,["active","onClick"])]}),_:1})])}const RL=Nt(jL,[["render",IL]]),LL=te({name:"Linethrough",elementTypes:["EditorTextbox"],width:32,index:60,components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We},setup(){const{elementUpdate:n}=Yi(),{activeObject:t}=Bn(),e=mt({get:()=>t.value?t.value.linethrough:!1,set:()=>{}});return{linethrough:e,onUpdateLinethrough:()=>{n("linethrough",!e.value)}}}});var BL={class:"toolbar-top-control__item"};function FL(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip");return W(),Q("div",BL,[et(h,{text:"Linethrough"},{default:Et(function(){return[et(l,{active:n.linethrough,onClick:n.onUpdateLinethrough},{default:Et(function(){return[et(o,{name:"icon-linethrough"})]}),_:1},8,["active","onClick"])]}),_:1})])}const zL=Nt(LL,[["render",FL]]),VL=te({name:"Opacity",elementTypes:["EditorTextbox"],width:32,index:500,components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We,BaseMenu:yw},setup(){const{elementUpdate:n}=Yi(),{activeObject:t}=Bn();return{opacity:mt({get:()=>(t.value?t.value.opacity:1)*100,set:()=>{}}),mergeProps:yl,onUpdateOpacity:e=>{n("opacity",e/100)}}}});var XL={class:"toolbar-top-control__item"},HL={class:"flex justify-between mb-6 text-sm font-semibold text-dark dark:text-white"};function YL(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip"),u=gt("base-menu");return W(),Q("div",XL,[et(u,null,{activator:Et(function(d){var g=d.props;return[et(h,{text:"Transparency"},{default:Et(function(){return[et(l,P1(Zf(g)),{default:Et(function(){return[et(o,{name:"icon-opacity"})]}),_:2},1040)]}),_:2},1024)]}),default:Et(function(){return[F("div",null,[F("div",HL,[t[2]||(t[2]=F("span",null,"Transparency",-1)),F("span",null,Kn(n.opacity.toFixed(0)),1)]),F("div",null,[Wf(F("input",{"onUpdate:modelValue":[t[0]||(t[0]=function(d){return n.opacity=d}),t[1]||(t[1]=function(){for(var d=[],g=0;g<arguments.length;g++)d[g]=arguments[g];return n.onUpdateOpacity&&n.onUpdateOpacity.apply(n,d)})],type:"range",class:"w-full h-4px",min:"0",max:"100",step:"1"},null,512),[[Jf,n.opacity]])])])]}),_:1})])}const NL=Nt(VL,[["render",YL],["__scopeId","data-v-e776c73d"]]),WL=te({name:"Underline",elementTypes:["EditorTextbox"],width:32,index:50,components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We},setup(){const{elementUpdate:n}=Yi(),{activeObject:t}=Bn(),e=mt({get:()=>t.value?t.value.underline:!1,set:()=>{}});return{underline:e,onUpdateUnderline:()=>{n("underline",!e.value)}}}});var UL={class:"toolbar-top-control__item"};function GL(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip");return W(),Q("div",UL,[et(h,{text:"Underline"},{default:Et(function(){return[et(l,{active:n.underline,onClick:n.onUpdateUnderline},{default:Et(function(){return[et(o,{name:"icon-underline"})]}),_:1},8,["active","onClick"])]}),_:1})])}const qL=Nt(WL,[["render",GL]]),ZL=te({name:"Uppercase",elementTypes:["EditorTextbox"],width:32,index:70,components:{BaseIcon:Ne,BaseButton:$e,BaseTooltip:We},setup(){const{elementUpdate:n}=Yi(),{activeObject:t}=Bn(),e=mt({get:()=>t.value&&t.value.isUpperCase||!1,set:()=>{}});return{isUpperCase:e,onUpdateUppercase:()=>{n("isUpperCase",!e.value)}}}});var $L={class:"toolbar-top-control__item"};function KL(n,t,e,i,r,s){var o=gt("base-icon"),l=gt("BaseButton"),h=gt("BaseTooltip");return W(),Q("div",$L,[et(h,{text:"Uppercase"},{default:Et(function(){return[et(l,{active:n.isUpperCase,onClick:n.onUpdateUppercase},{default:Et(function(){return[et(o,{name:"icon-uppercase"})]}),_:1},8,["active","onClick"])]}),_:1})])}const JL=Nt(ZL,[["render",KL]]),_w=[],i1=Object.assign({"./Bold.vue":gL,"./CurvedText.vue":CL,"./FontAlign.vue":OL,"./Group.vue":kL,"./Italic.vue":RL,"./Linethrough.vue":zL,"./Opacity.vue":NL,"./Underline.vue":qL,"./Uppercase.vue":JL});for(const n in i1)_w.push(i1[n]);const QL=te({setup(){const n=Vo(),{activeObject:t}=Bn(),e=vt(),i=vt(),r=vt(),s=Of(e),o=Of(r),l=vt([]),h=mt(()=>t.value?t.value.locked:!1),u=mt(()=>l.value),d=mt(()=>{const p=t.value;if(!p)return[];const m=[];l.value=[];const y=Object.keys((n==null?void 0:n.appContext.components)??{}),_=_w.sort((b,x)=>(b.index??0)<(x.index??0)?-1:1);let C=0;return _.forEach(b=>{y.includes(b.name)||n==null||n.appContext.app.component(b.name,b),p.isType(...b.elementTypes)&&(s.width.value-(C+8)-(o.width.value+8)>80?(C+=b.width+8,m.push(b)):l.value.push(b))}),m}),g=mt(()=>{const p=Object.keys((n==null?void 0:n.appContext.components)??{});if(!t.value)return[];const m=[];return vw.sort((y,_)=>(y.index??0)<(_.index??0)?-1:1).forEach(y=>{p.includes(y.name)||n==null||n.appContext.app.component(y.name,y),y.elementTypes.includes("All")&&m.push(y)}),m});return qe(t,()=>{l.value=[]}),{toolbarEl:e,toolbarLeftEl:i,toolbarRightEl:r,isLocked:h,propsComponent:d,defaultComponent:g,moreItems:u}}});var t8={class:"w-full h-40px z-10"},e8={ref:"toolbarEl",class:"editor-toolbar-top py-8px pl-3"},i8={class:"editor-toolbar-top__wrapper"},n8={ref:"toolbarLeftEl",class:"editor-toolbar-top__left"},r8={ref:"toolbarRightEl",class:"editor-toolbar-top__right"};function s8(n,t,e,i,r,s){return W(),Q("div",t8,[F("div",e8,[F("div",i8,[F("div",n8,[(W(!0),Q(Se,null,Jr(n.propsComponent,function(o){return W(),Q(Se,{key:o},[n.isLocked?Cr("",!0):(W(),_i(tl(o.name),{key:0,id:"".concat(o.name)},null,8,["id"]))],64)}),128))],512),F("div",r8,[(W(!0),Q(Se,null,Jr(n.defaultComponent,function(o){return W(),Q(Se,{key:o},[o.name!=="Unlock"&&!n.isLocked||o.name==="Unlock"&&n.isLocked?(W(),_i(tl(o.name),{key:0})):Cr("",!0)],64)}),128))],512)])],512)])}const o8=Nt(QL,[["render",s8],["__scopeId","data-v-81171385"]]),a8=te({components:{EditorTopbar:YD,EditorSidebarLeft:P7,EditorSidebarRight:Q7,EditorWorkspace:nR,Workspace:VR,EditorToolbarTop:o8},setup(){Gs().setActiveSidebarItem({sidebarItemId:"photos",sidebarItemTitle:"Photos",sidebarItemType:"Photos",previousSidebarItemId:"",previousSidebarItemTitle:"",previousSidebarItemType:"",selectedCurrent:0})}});var l8={class:"nava-editor"},c8={class:"nava-editor__layout"},h8={class:"nava-editor__container"};function u8(n,t,e,i,r,s){var o=gt("EditorTopbar"),l=gt("EditorSidebarLeft"),h=gt("EditorToolbarTop"),u=gt("Workspace"),d=gt("EditorWorkspace"),g=gt("EditorSidebarRight");return W(),Q("div",l8,[F("div",c8,[et(o),F("section",h8,[et(l),et(d,null,{default:Et(function(){return[et(h),et(u)]}),_:1}),et(g)])])])}const d8=Nt(a8,[["render",u8],["__scopeId","data-v-ad615118"]]),f8={install:function(n,t){bA(),n.use(VM),n.component("Editor",d8)}};/*!
  * vue-router v4.4.5
  * (c) 2024 Eduardo San Martin Morote
  * @license MIT
  */const bo=typeof document<"u";function bw(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function g8(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&bw(n.default)}const fe=Object.assign;function Vd(n,t){const e={};for(const i in t){const r=t[i];e[i]=Ln(r)?r.map(n):n(r)}return e}const qa=()=>{},Ln=Array.isArray,ww=/#/g,p8=/&/g,m8=/\//g,v8=/=/g,y8=/\?/g,xw=/\+/g,_8=/%5B/g,b8=/%5D/g,Cw=/%5E/g,w8=/%60/g,Sw=/%7B/g,x8=/%7C/g,Tw=/%7D/g,C8=/%20/g;function Fg(n){return encodeURI(""+n).replace(x8,"|").replace(_8,"[").replace(b8,"]")}function S8(n){return Fg(n).replace(Sw,"{").replace(Tw,"}").replace(Cw,"^")}function Ef(n){return Fg(n).replace(xw,"%2B").replace(C8,"+").replace(ww,"%23").replace(p8,"%26").replace(w8,"`").replace(Sw,"{").replace(Tw,"}").replace(Cw,"^")}function T8(n){return Ef(n).replace(v8,"%3D")}function P8(n){return Fg(n).replace(ww,"%23").replace(y8,"%3F")}function O8(n){return n==null?"":P8(n).replace(m8,"%2F")}function fl(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const E8=/\/$/,M8=n=>n.replace(E8,"");function Xd(n,t,e="/"){let i,r={},s="",o="";const l=t.indexOf("#");let h=t.indexOf("?");return l<h&&l>=0&&(h=-1),h>-1&&(i=t.slice(0,h),s=t.slice(h+1,l>-1?l:t.length),r=n(s)),l>-1&&(i=i||t.slice(0,l),o=t.slice(l,t.length)),i=D8(i??t,e),{fullPath:i+(s&&"?")+s+o,path:i,query:r,hash:fl(o)}}function A8(n,t){const e=t.query?n(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function n1(n,t){return!t||!n.toLowerCase().startsWith(t.toLowerCase())?n:n.slice(t.length)||"/"}function k8(n,t,e){const i=t.matched.length-1,r=e.matched.length-1;return i>-1&&i===r&&Fo(t.matched[i],e.matched[r])&&Pw(t.params,e.params)&&n(t.query)===n(e.query)&&t.hash===e.hash}function Fo(n,t){return(n.aliasOf||n)===(t.aliasOf||t)}function Pw(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const e in n)if(!j8(n[e],t[e]))return!1;return!0}function j8(n,t){return Ln(n)?r1(n,t):Ln(t)?r1(t,n):n===t}function r1(n,t){return Ln(t)?n.length===t.length&&n.every((e,i)=>e===t[i]):n.length===1&&n[0]===t}function D8(n,t){if(n.startsWith("/"))return n;if(!n)return t;const e=t.split("/"),i=n.split("/"),r=i[i.length-1];(r===".."||r===".")&&i.push("");let s=e.length-1,o,l;for(o=0;o<i.length;o++)if(l=i[o],l!==".")if(l==="..")s>1&&s--;else break;return e.slice(0,s).join("/")+"/"+i.slice(o).join("/")}const Vr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var gl;(function(n){n.pop="pop",n.push="push"})(gl||(gl={}));var Za;(function(n){n.back="back",n.forward="forward",n.unknown=""})(Za||(Za={}));function I8(n){if(!n)if(bo){const t=document.querySelector("base");n=t&&t.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),M8(n)}const R8=/^[^#]+#/;function L8(n,t){return n.replace(R8,"#")+t}function B8(n,t){const e=document.documentElement.getBoundingClientRect(),i=n.getBoundingClientRect();return{behavior:t.behavior,left:i.left-e.left-(t.left||0),top:i.top-e.top-(t.top||0)}}const $h=()=>({left:window.scrollX,top:window.scrollY});function F8(n){let t;if("el"in n){const e=n.el,i=typeof e=="string"&&e.startsWith("#"),r=typeof e=="string"?i?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!r)return;t=B8(r,n)}else t=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function s1(n,t){return(history.state?history.state.position-t:-1)+n}const Mf=new Map;function z8(n,t){Mf.set(n,t)}function V8(n){const t=Mf.get(n);return Mf.delete(n),t}let X8=()=>location.protocol+"//"+location.host;function Ow(n,t){const{pathname:e,search:i,hash:r}=t,s=n.indexOf("#");if(s>-1){let l=r.includes(n.slice(s))?n.slice(s).length:1,h=r.slice(l);return h[0]!=="/"&&(h="/"+h),n1(h,"")}return n1(e,n)+i+r}function H8(n,t,e,i){let r=[],s=[],o=null;const l=({state:p})=>{const m=Ow(n,location),y=e.value,_=t.value;let C=0;if(p){if(e.value=m,t.value=p,o&&o===y){o=null;return}C=_?p.position-_.position:0}else i(m);r.forEach(b=>{b(e.value,y,{delta:C,type:gl.pop,direction:C?C>0?Za.forward:Za.back:Za.unknown})})};function h(){o=e.value}function u(p){r.push(p);const m=()=>{const y=r.indexOf(p);y>-1&&r.splice(y,1)};return s.push(m),m}function d(){const{history:p}=window;p.state&&p.replaceState(fe({},p.state,{scroll:$h()}),"")}function g(){for(const p of s)p();s=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:h,listen:u,destroy:g}}function o1(n,t,e,i=!1,r=!1){return{back:n,current:t,forward:e,replaced:i,position:window.history.length,scroll:r?$h():null}}function Y8(n){const{history:t,location:e}=window,i={value:Ow(n,e)},r={value:t.state};r.value||s(i.value,{back:null,current:i.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function s(h,u,d){const g=n.indexOf("#"),p=g>-1?(e.host&&document.querySelector("base")?n:n.slice(g))+h:X8()+n+h;try{t[d?"replaceState":"pushState"](u,"",p),r.value=u}catch(m){console.error(m),e[d?"replace":"assign"](p)}}function o(h,u){const d=fe({},t.state,o1(r.value.back,h,r.value.forward,!0),u,{position:r.value.position});s(h,d,!0),i.value=h}function l(h,u){const d=fe({},r.value,t.state,{forward:h,scroll:$h()});s(d.current,d,!0);const g=fe({},o1(i.value,h,null),{position:d.position+1},u);s(h,g,!1),i.value=h}return{location:i,state:r,push:l,replace:o}}function N8(n){n=I8(n);const t=Y8(n),e=H8(n,t.state,t.location,t.replace);function i(s,o=!0){o||e.pauseListeners(),history.go(s)}const r=fe({location:"",base:n,go:i,createHref:L8.bind(null,n)},t,e);return Object.defineProperty(r,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(r,"state",{enumerable:!0,get:()=>t.state.value}),r}function W8(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),N8(n)}function U8(n){return typeof n=="string"||n&&typeof n=="object"}function Ew(n){return typeof n=="string"||typeof n=="symbol"}const Mw=Symbol("");var a1;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(a1||(a1={}));function zo(n,t){return fe(new Error,{type:n,[Mw]:!0},t)}function gr(n,t){return n instanceof Error&&Mw in n&&(t==null||!!(n.type&t))}const l1="[^/]+?",G8={sensitive:!1,strict:!1,start:!0,end:!0},q8=/[.+*?^${}()[\]/\\]/g;function Z8(n,t){const e=fe({},G8,t),i=[];let r=e.start?"^":"";const s=[];for(const u of n){const d=u.length?[]:[90];e.strict&&!u.length&&(r+="/");for(let g=0;g<u.length;g++){const p=u[g];let m=40+(e.sensitive?.25:0);if(p.type===0)g||(r+="/"),r+=p.value.replace(q8,"\\$&"),m+=40;else if(p.type===1){const{value:y,repeatable:_,optional:C,regexp:b}=p;s.push({name:y,repeatable:_,optional:C});const x=b||l1;if(x!==l1){m+=10;try{new RegExp(`(${x})`)}catch(O){throw new Error(`Invalid custom RegExp for param "${y}" (${x}): `+O.message)}}let T=_?`((?:${x})(?:/(?:${x}))*)`:`(${x})`;g||(T=C&&u.length<2?`(?:/${T})`:"/"+T),C&&(T+="?"),r+=T,m+=20,C&&(m+=-8),_&&(m+=-20),x===".*"&&(m+=-50)}d.push(m)}i.push(d)}if(e.strict&&e.end){const u=i.length-1;i[u][i[u].length-1]+=.7000000000000001}e.strict||(r+="/?"),e.end?r+="$":e.strict&&(r+="(?:/|$)");const o=new RegExp(r,e.sensitive?"":"i");function l(u){const d=u.match(o),g={};if(!d)return null;for(let p=1;p<d.length;p++){const m=d[p]||"",y=s[p-1];g[y.name]=m&&y.repeatable?m.split("/"):m}return g}function h(u){let d="",g=!1;for(const p of n){(!g||!d.endsWith("/"))&&(d+="/"),g=!1;for(const m of p)if(m.type===0)d+=m.value;else if(m.type===1){const{value:y,repeatable:_,optional:C}=m,b=y in u?u[y]:"";if(Ln(b)&&!_)throw new Error(`Provided param "${y}" is an array but it is not repeatable (* or + modifiers)`);const x=Ln(b)?b.join("/"):b;if(!x)if(C)p.length<2&&(d.endsWith("/")?d=d.slice(0,-1):g=!0);else throw new Error(`Missing required param "${y}"`);d+=x}}return d||"/"}return{re:o,score:i,keys:s,parse:l,stringify:h}}function $8(n,t){let e=0;for(;e<n.length&&e<t.length;){const i=t[e]-n[e];if(i)return i;e++}return n.length<t.length?n.length===1&&n[0]===80?-1:1:n.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Aw(n,t){let e=0;const i=n.score,r=t.score;for(;e<i.length&&e<r.length;){const s=$8(i[e],r[e]);if(s)return s;e++}if(Math.abs(r.length-i.length)===1){if(c1(i))return 1;if(c1(r))return-1}return r.length-i.length}function c1(n){const t=n[n.length-1];return n.length>0&&t[t.length-1]<0}const K8={type:0,value:""},J8=/[a-zA-Z0-9_]/;function Q8(n){if(!n)return[[]];if(n==="/")return[[K8]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function t(m){throw new Error(`ERR (${e})/"${u}": ${m}`)}let e=0,i=e;const r=[];let s;function o(){s&&r.push(s),s=[]}let l=0,h,u="",d="";function g(){u&&(e===0?s.push({type:0,value:u}):e===1||e===2||e===3?(s.length>1&&(h==="*"||h==="+")&&t(`A repeatable param (${u}) must be alone in its segment. eg: '/:ids+.`),s.push({type:1,value:u,regexp:d,repeatable:h==="*"||h==="+",optional:h==="*"||h==="?"})):t("Invalid state to consume buffer"),u="")}function p(){u+=h}for(;l<n.length;){if(h=n[l++],h==="\\"&&e!==2){i=e,e=4;continue}switch(e){case 0:h==="/"?(u&&g(),o()):h===":"?(g(),e=1):p();break;case 4:p(),e=i;break;case 1:h==="("?e=2:J8.test(h)?p():(g(),e=0,h!=="*"&&h!=="?"&&h!=="+"&&l--);break;case 2:h===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+h:e=3:d+=h;break;case 3:g(),e=0,h!=="*"&&h!=="?"&&h!=="+"&&l--,d="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${u}"`),g(),o(),r}function tB(n,t,e){const i=Z8(Q8(n.path),e),r=fe(i,{record:n,parent:t,children:[],alias:[]});return t&&!r.record.aliasOf==!t.record.aliasOf&&t.children.push(r),r}function eB(n,t){const e=[],i=new Map;t=f1({strict:!1,end:!0,sensitive:!1},t);function r(g){return i.get(g)}function s(g,p,m){const y=!m,_=u1(g);_.aliasOf=m&&m.record;const C=f1(t,g),b=[_];if("alias"in g){const O=typeof g.alias=="string"?[g.alias]:g.alias;for(const E of O)b.push(u1(fe({},_,{components:m?m.record.components:_.components,path:E,aliasOf:m?m.record:_})))}let x,T;for(const O of b){const{path:E}=O;if(p&&E[0]!=="/"){const V=p.record.path,A=V[V.length-1]==="/"?"":"/";O.path=p.record.path+(E&&A+E)}if(x=tB(O,p,C),m?m.alias.push(x):(T=T||x,T!==x&&T.alias.push(x),y&&g.name&&!d1(x)&&o(g.name)),kw(x)&&h(x),_.children){const V=_.children;for(let A=0;A<V.length;A++)s(V[A],x,m&&m.children[A])}m=m||x}return T?()=>{o(T)}:qa}function o(g){if(Ew(g)){const p=i.get(g);p&&(i.delete(g),e.splice(e.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=e.indexOf(g);p>-1&&(e.splice(p,1),g.record.name&&i.delete(g.record.name),g.children.forEach(o),g.alias.forEach(o))}}function l(){return e}function h(g){const p=rB(g,e);e.splice(p,0,g),g.record.name&&!d1(g)&&i.set(g.record.name,g)}function u(g,p){let m,y={},_,C;if("name"in g&&g.name){if(m=i.get(g.name),!m)throw zo(1,{location:g});C=m.record.name,y=fe(h1(p.params,m.keys.filter(T=>!T.optional).concat(m.parent?m.parent.keys.filter(T=>T.optional):[]).map(T=>T.name)),g.params&&h1(g.params,m.keys.map(T=>T.name))),_=m.stringify(y)}else if(g.path!=null)_=g.path,m=e.find(T=>T.re.test(_)),m&&(y=m.parse(_),C=m.record.name);else{if(m=p.name?i.get(p.name):e.find(T=>T.re.test(p.path)),!m)throw zo(1,{location:g,currentLocation:p});C=m.record.name,y=fe({},p.params,g.params),_=m.stringify(y)}const b=[];let x=m;for(;x;)b.unshift(x.record),x=x.parent;return{name:C,path:_,params:y,matched:b,meta:nB(b)}}n.forEach(g=>s(g));function d(){e.length=0,i.clear()}return{addRoute:s,resolve:u,removeRoute:o,clearRoutes:d,getRoutes:l,getRecordMatcher:r}}function h1(n,t){const e={};for(const i of t)i in n&&(e[i]=n[i]);return e}function u1(n){const t={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:iB(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function iB(n){const t={},e=n.props||!1;if("component"in n)t.default=e;else for(const i in n.components)t[i]=typeof e=="object"?e[i]:e;return t}function d1(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function nB(n){return n.reduce((t,e)=>fe(t,e.meta),{})}function f1(n,t){const e={};for(const i in n)e[i]=i in t?t[i]:n[i];return e}function rB(n,t){let e=0,i=t.length;for(;e!==i;){const s=e+i>>1;Aw(n,t[s])<0?i=s:e=s+1}const r=sB(n);return r&&(i=t.lastIndexOf(r,i-1)),i}function sB(n){let t=n;for(;t=t.parent;)if(kw(t)&&Aw(n,t)===0)return t}function kw({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function oB(n){const t={};if(n===""||n==="?")return t;const i=(n[0]==="?"?n.slice(1):n).split("&");for(let r=0;r<i.length;++r){const s=i[r].replace(xw," "),o=s.indexOf("="),l=fl(o<0?s:s.slice(0,o)),h=o<0?null:fl(s.slice(o+1));if(l in t){let u=t[l];Ln(u)||(u=t[l]=[u]),u.push(h)}else t[l]=h}return t}function g1(n){let t="";for(let e in n){const i=n[e];if(e=T8(e),i==null){i!==void 0&&(t+=(t.length?"&":"")+e);continue}(Ln(i)?i.map(s=>s&&Ef(s)):[i&&Ef(i)]).forEach(s=>{s!==void 0&&(t+=(t.length?"&":"")+e,s!=null&&(t+="="+s))})}return t}function aB(n){const t={};for(const e in n){const i=n[e];i!==void 0&&(t[e]=Ln(i)?i.map(r=>r==null?null:""+r):i==null?i:""+i)}return t}const lB=Symbol(""),p1=Symbol(""),zg=Symbol(""),jw=Symbol(""),Af=Symbol("");function ga(){let n=[];function t(i){return n.push(i),()=>{const r=n.indexOf(i);r>-1&&n.splice(r,1)}}function e(){n=[]}return{add:t,list:()=>n.slice(),reset:e}}function Nr(n,t,e,i,r,s=o=>o()){const o=i&&(i.enterCallbacks[r]=i.enterCallbacks[r]||[]);return()=>new Promise((l,h)=>{const u=p=>{p===!1?h(zo(4,{from:e,to:t})):p instanceof Error?h(p):U8(p)?h(zo(2,{from:t,to:p})):(o&&i.enterCallbacks[r]===o&&typeof p=="function"&&o.push(p),l())},d=s(()=>n.call(i&&i.instances[r],t,e,u));let g=Promise.resolve(d);n.length<3&&(g=g.then(u)),g.catch(p=>h(p))})}function Hd(n,t,e,i,r=s=>s()){const s=[];for(const o of n)for(const l in o.components){let h=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(bw(h)){const d=(h.__vccOpts||h)[t];d&&s.push(Nr(d,e,i,o,l,r))}else{let u=h();s.push(()=>u.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const g=g8(d)?d.default:d;o.mods[l]=d,o.components[l]=g;const m=(g.__vccOpts||g)[t];return m&&Nr(m,e,i,o,l,r)()}))}}return s}function m1(n){const t=Qn(zg),e=Qn(jw),i=mt(()=>{const h=Zr(n.to);return t.resolve(h)}),r=mt(()=>{const{matched:h}=i.value,{length:u}=h,d=h[u-1],g=e.matched;if(!d||!g.length)return-1;const p=g.findIndex(Fo.bind(null,d));if(p>-1)return p;const m=v1(h[u-2]);return u>1&&v1(d)===m&&g[g.length-1].path!==m?g.findIndex(Fo.bind(null,h[u-2])):p}),s=mt(()=>r.value>-1&&dB(e.params,i.value.params)),o=mt(()=>r.value>-1&&r.value===e.matched.length-1&&Pw(e.params,i.value.params));function l(h={}){return uB(h)?t[Zr(n.replace)?"replace":"push"](Zr(n.to)).catch(qa):Promise.resolve()}return{route:i,href:mt(()=>i.value.href),isActive:s,isExactActive:o,navigate:l}}const cB=te({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"}},useLink:m1,setup(n,{slots:t}){const e=jn(m1(n)),{options:i}=Qn(zg),r=mt(()=>({[y1(n.activeClass,i.linkActiveClass,"router-link-active")]:e.isActive,[y1(n.exactActiveClass,i.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const s=t.default&&t.default(e);return n.custom?s:Iy("a",{"aria-current":e.isExactActive?n.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:r.value},s)}}}),hB=cB;function uB(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const t=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return n.preventDefault&&n.preventDefault(),!0}}function dB(n,t){for(const e in t){const i=t[e],r=n[e];if(typeof i=="string"){if(i!==r)return!1}else if(!Ln(r)||r.length!==i.length||i.some((s,o)=>s!==r[o]))return!1}return!0}function v1(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const y1=(n,t,e)=>n??t??e,fB=te({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:t,slots:e}){const i=Qn(Af),r=mt(()=>n.route||i.value),s=Qn(p1,0),o=mt(()=>{let u=Zr(s);const{matched:d}=r.value;let g;for(;(g=d[u])&&!g.components;)u++;return u}),l=mt(()=>r.value.matched[o.value]);Ic(p1,mt(()=>o.value+1)),Ic(lB,l),Ic(Af,r);const h=vt();return qe(()=>[h.value,l.value,n.name],([u,d,g],[p,m,y])=>{d&&(d.instances[g]=u,m&&m!==d&&u&&u===p&&(d.leaveGuards.size||(d.leaveGuards=m.leaveGuards),d.updateGuards.size||(d.updateGuards=m.updateGuards))),u&&d&&(!m||!Fo(d,m)||!p)&&(d.enterCallbacks[g]||[]).forEach(_=>_(u))},{flush:"post"}),()=>{const u=r.value,d=n.name,g=l.value,p=g&&g.components[d];if(!p)return _1(e.default,{Component:p,route:u});const m=g.props[d],y=m?m===!0?u.params:typeof m=="function"?m(u):m:null,C=Iy(p,fe({},y,t,{onVnodeUnmounted:b=>{b.component.isUnmounted&&(g.instances[d]=null)},ref:h}));return _1(e.default,{Component:C,route:u})||C}}});function _1(n,t){if(!n)return null;const e=n(t);return e.length===1?e[0]:e}const gB=fB;function pB(n){const t=eB(n.routes,n),e=n.parseQuery||oB,i=n.stringifyQuery||g1,r=n.history,s=ga(),o=ga(),l=ga(),h=Fa(Vr);let u=Vr;bo&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Vd.bind(null,q=>""+q),g=Vd.bind(null,O8),p=Vd.bind(null,fl);function m(q,_t){let ut,Ct;return Ew(q)?(ut=t.getRecordMatcher(q),Ct=_t):Ct=q,t.addRoute(Ct,ut)}function y(q){const _t=t.getRecordMatcher(q);_t&&t.removeRoute(_t)}function _(){return t.getRoutes().map(q=>q.record)}function C(q){return!!t.getRecordMatcher(q)}function b(q,_t){if(_t=fe({},_t||h.value),typeof q=="string"){const j=Xd(e,q,_t.path),H=t.resolve({path:j.path},_t),it=r.createHref(j.fullPath);return fe(j,H,{params:p(H.params),hash:fl(j.hash),redirectedFrom:void 0,href:it})}let ut;if(q.path!=null)ut=fe({},q,{path:Xd(e,q.path,_t.path).path});else{const j=fe({},q.params);for(const H in j)j[H]==null&&delete j[H];ut=fe({},q,{params:g(j)}),_t.params=g(_t.params)}const Ct=t.resolve(ut,_t),ee=q.hash||"";Ct.params=d(p(Ct.params));const ge=A8(i,fe({},q,{hash:S8(ee),path:Ct.path})),M=r.createHref(ge);return fe({fullPath:ge,hash:ee,query:i===g1?aB(q.query):q.query||{}},Ct,{redirectedFrom:void 0,href:M})}function x(q){return typeof q=="string"?Xd(e,q,h.value.path):fe({},q)}function T(q,_t){if(u!==q)return zo(8,{from:_t,to:q})}function O(q){return A(q)}function E(q){return O(fe(x(q),{replace:!0}))}function V(q){const _t=q.matched[q.matched.length-1];if(_t&&_t.redirect){const{redirect:ut}=_t;let Ct=typeof ut=="function"?ut(q):ut;return typeof Ct=="string"&&(Ct=Ct.includes("?")||Ct.includes("#")?Ct=x(Ct):{path:Ct},Ct.params={}),fe({query:q.query,hash:q.hash,params:Ct.path!=null?{}:q.params},Ct)}}function A(q,_t){const ut=u=b(q),Ct=h.value,ee=q.state,ge=q.force,M=q.replace===!0,j=V(ut);if(j)return A(fe(x(j),{state:typeof j=="object"?fe({},ee,j.state):ee,force:ge,replace:M}),_t||ut);const H=ut;H.redirectedFrom=_t;let it;return!ge&&k8(i,Ct,ut)&&(it=zo(16,{to:H,from:Ct}),zt(Ct,Ct,!0,!1)),(it?Promise.resolve(it):J(H,Ct)).catch(U=>gr(U)?gr(U,2)?U:It(U):ft(U,H,Ct)).then(U=>{if(U){if(gr(U,2))return A(fe({replace:M},x(U.to),{state:typeof U.to=="object"?fe({},ee,U.to.state):ee,force:ge}),_t||H)}else U=ct(H,Ct,!0,M,ee);return st(H,Ct,U),U})}function B(q,_t){const ut=T(q,_t);return ut?Promise.reject(ut):Promise.resolve()}function Y(q){const _t=Zt.values().next().value;return _t&&typeof _t.runWithContext=="function"?_t.runWithContext(q):q()}function J(q,_t){let ut;const[Ct,ee,ge]=mB(q,_t);ut=Hd(Ct.reverse(),"beforeRouteLeave",q,_t);for(const j of Ct)j.leaveGuards.forEach(H=>{ut.push(Nr(H,q,_t))});const M=B.bind(null,q,_t);return ut.push(M),me(ut).then(()=>{ut=[];for(const j of s.list())ut.push(Nr(j,q,_t));return ut.push(M),me(ut)}).then(()=>{ut=Hd(ee,"beforeRouteUpdate",q,_t);for(const j of ee)j.updateGuards.forEach(H=>{ut.push(Nr(H,q,_t))});return ut.push(M),me(ut)}).then(()=>{ut=[];for(const j of ge)if(j.beforeEnter)if(Ln(j.beforeEnter))for(const H of j.beforeEnter)ut.push(Nr(H,q,_t));else ut.push(Nr(j.beforeEnter,q,_t));return ut.push(M),me(ut)}).then(()=>(q.matched.forEach(j=>j.enterCallbacks={}),ut=Hd(ge,"beforeRouteEnter",q,_t,Y),ut.push(M),me(ut))).then(()=>{ut=[];for(const j of o.list())ut.push(Nr(j,q,_t));return ut.push(M),me(ut)}).catch(j=>gr(j,8)?j:Promise.reject(j))}function st(q,_t,ut){l.list().forEach(Ct=>Y(()=>Ct(q,_t,ut)))}function ct(q,_t,ut,Ct,ee){const ge=T(q,_t);if(ge)return ge;const M=_t===Vr,j=bo?history.state:{};ut&&(Ct||M?r.replace(q.fullPath,fe({scroll:M&&j&&j.scroll},ee)):r.push(q.fullPath,ee)),h.value=q,zt(q,_t,ut,M),It()}let ot;function yt(){ot||(ot=r.listen((q,_t,ut)=>{if(!ie.listening)return;const Ct=b(q),ee=V(Ct);if(ee){A(fe(ee,{replace:!0}),Ct).catch(qa);return}u=Ct;const ge=h.value;bo&&z8(s1(ge.fullPath,ut.delta),$h()),J(Ct,ge).catch(M=>gr(M,12)?M:gr(M,2)?(A(M.to,Ct).then(j=>{gr(j,20)&&!ut.delta&&ut.type===gl.pop&&r.go(-1,!1)}).catch(qa),Promise.reject()):(ut.delta&&r.go(-ut.delta,!1),ft(M,Ct,ge))).then(M=>{M=M||ct(Ct,ge,!1),M&&(ut.delta&&!gr(M,8)?r.go(-ut.delta,!1):ut.type===gl.pop&&gr(M,20)&&r.go(-1,!1)),st(Ct,ge,M)}).catch(qa)}))}let Tt=ga(),at=ga(),pt;function ft(q,_t,ut){It(q);const Ct=at.list();return Ct.length?Ct.forEach(ee=>ee(q,_t,ut)):console.error(q),Promise.reject(q)}function Xt(){return pt&&h.value!==Vr?Promise.resolve():new Promise((q,_t)=>{Tt.add([q,_t])})}function It(q){return pt||(pt=!q,yt(),Tt.list().forEach(([_t,ut])=>q?ut(q):_t()),Tt.reset()),q}function zt(q,_t,ut,Ct){const{scrollBehavior:ee}=n;if(!bo||!ee)return Promise.resolve();const ge=!ut&&V8(s1(q.fullPath,0))||(Ct||!ut)&&history.state&&history.state.scroll||null;return wr().then(()=>ee(q,_t,ge)).then(M=>M&&F8(M)).catch(M=>ft(M,q,_t))}const qt=q=>r.go(q);let ue;const Zt=new Set,ie={currentRoute:h,listening:!0,addRoute:m,removeRoute:y,clearRoutes:t.clearRoutes,hasRoute:C,getRoutes:_,resolve:b,options:n,push:O,replace:E,go:qt,back:()=>qt(-1),forward:()=>qt(1),beforeEach:s.add,beforeResolve:o.add,afterEach:l.add,onError:at.add,isReady:Xt,install(q){const _t=this;q.component("RouterLink",hB),q.component("RouterView",gB),q.config.globalProperties.$router=_t,Object.defineProperty(q.config.globalProperties,"$route",{enumerable:!0,get:()=>Zr(h)}),bo&&!ue&&h.value===Vr&&(ue=!0,O(r.location).catch(ee=>{}));const ut={};for(const ee in Vr)Object.defineProperty(ut,ee,{get:()=>h.value[ee],enumerable:!0});q.provide(zg,_t),q.provide(jw,G1(ut)),q.provide(Af,h);const Ct=q.unmount;Zt.add(q),q.unmount=function(){Zt.delete(q),Zt.size<1&&(u=Vr,ot&&ot(),ot=null,h.value=Vr,ue=!1,pt=!1),Ct()}}};function me(q){return q.reduce((_t,ut)=>_t.then(()=>Y(ut)),Promise.resolve())}return ie}function mB(n,t){const e=[],i=[],r=[],s=Math.max(t.matched.length,n.matched.length);for(let o=0;o<s;o++){const l=t.matched[o];l&&(n.matched.find(u=>Fo(u,l))?i.push(l):e.push(l));const h=n.matched[o];h&&(t.matched.find(u=>Fo(u,h))||r.push(h))}return[e,i,r]}const vB=te({setup(){console.log("build v1.0.9")}}),Dw=(n,t)=>{const e=n.__vccOpts||n;for(const[i,r]of t)e[i]=r;return e};function yB(n,t,e,i,r,s){const o=gt("Editor");return W(),_i(o)}const _B=Dw(vB,[["render",yB]]),bB=[{path:"/",name:"app",component:_B}],wB=pB({history:W8("/vue-fabric-design-editor/"),routes:bB}),xB={};function CB(n,t){const e=gt("router-view");return W(),_i(e)}const SB=Dw(xB,[["render",CB]]),Vg=EM(SB);Vg.use(f8,{name:"Editor"});Vg.use(wB);Vg.mount("#app");
